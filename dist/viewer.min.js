/*!
 * The MIT License (MIT)
 * 
 * Copyright (c) 2013-2020 Chananya Freiman
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy of
 * this software and associated documentation files (the "Software"), to deal in
 * the Software without restriction, including without limitation the rights to
 * use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of
 * the Software, and to permit persons to whom the Software is furnished to do so,
 * subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS
 * FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR
 * COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER
 * IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN
 * CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * 
 */
var ModelViewer=function(e){var t={};function n(a){if(t[a])return t[a].exports;var r=t[a]={i:a,l:!1,exports:{}};return e[a].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(a,r,function(t){return e[t]}.bind(null,r));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=172)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(32);class r extends a.default{constructor(e){super(),this.id=e}}t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(29),r=new Uint8Array(8);class i{constructor(e,t,n){if(this.index=0,ArrayBuffer.isView(e)&&(t=e.byteOffset,n=e.byteLength,e=e.buffer),!(e instanceof ArrayBuffer))throw new TypeError(`BinaryStream: expected ArrayBuffer or TypedArray, got ${e}`);t=t||0,n=n||e.byteLength,this.buffer=e,this.uint8array=new Uint8Array(e,t,n),this.byteLength=n}substream(e){return new i(this.buffer,this.index,e)}remaining(){return this.byteLength-this.index}skip(e){this.index+=e}seek(e){this.index=e}tell(){return this.index}peek(e,t=!1){let n=this.uint8array,a=this.index,r="";for(let i=0;i<e;i++){let e=n[a+i];(t||e>0)&&(r+=String.fromCharCode(e))}return r}read(e,t=!1){e=e||this.remaining();let n=this.peek(e,t);return this.index+=e,n}peekUntilNull(){let e=this.uint8array,t=this.index,n="",a=e[t],r=0;for(;0!==a;)n+=String.fromCharCode(a),r+=1,a=e[t+r];return n}readUntilNull(){let e=this.peekUntilNull();return this.index+=e.length+1,e}peekCharArray(e){let t=this.uint8array,n=this.index,a=[];for(let r=0;r<e;r++)a[r]=String.fromCharCode(t[n+r]);return a}readCharArray(e){let t=this.peekCharArray(e);return this.index+=e,t}readInt8(){let e=this.index,t=this.uint8array,n=a.uint8ToInt8(t[e]);return this.index+=1,n}readInt16(){let e=this.index,t=this.uint8array,n=a.uint8ToInt16(t[e],t[e+1]);return this.index+=2,n}readInt32(){let e=this.index,t=this.uint8array,n=a.uint8ToInt32(t[e],t[e+1],t[e+2],t[e+3]);return this.index+=4,n}readUint8(){let e=this.uint8array[this.index];return this.index+=1,e}readUint16(){let e=this.index,t=this.uint8array,n=a.uint8ToUint16(t[e],t[e+1]);return this.index+=2,n}readUint32(){let e=this.index,t=this.uint8array,n=a.uint8ToUint32(t[e],t[e+1],t[e+2],t[e+3]);return this.index+=4,n}readFloat32(){let e=this.index,t=this.uint8array,n=a.uint8ToFloat32(t[e],t[e+1],t[e+2],t[e+3]);return this.index+=4,n}readFloat64(){let e=this.index,t=this.uint8array,n=a.uint8ToFloat64(t[e],t[e+1],t[e+2],t[e+3],t[e+4],t[e+5],t[e+6],t[e+7]);return this.index+=8,n}readInt8Array(e){ArrayBuffer.isView(e)||(e=new Int8Array(e));let t=this.index,n=this.uint8array;for(let r=0,i=e.length;r<i;r++)e[r]=a.uint8ToInt8(n[t+r]);return this.index+=e.byteLength,e}readInt16Array(e){ArrayBuffer.isView(e)||(e=new Int16Array(e));let t=this.index,n=this.uint8array;for(let r=0,i=e.length;r<i;r++){let i=t+2*r;e[r]=a.uint8ToInt16(n[i],n[i+1])}return this.index+=e.byteLength,e}readInt32Array(e){ArrayBuffer.isView(e)||(e=new Int32Array(e));let t=this.index,n=this.uint8array;for(let r=0,i=e.length;r<i;r++){let i=t+4*r;e[r]=a.uint8ToInt32(n[i],n[i+1],n[i+2],n[i+3])}return this.index+=e.byteLength,e}readUint8Array(e){ArrayBuffer.isView(e)||(e=new Uint8Array(e));let t=this.index,n=this.uint8array;for(let a=0,r=e.length;a<r;a++)e[a]=n[t+a];return this.index+=e.byteLength,e}readUint16Array(e){ArrayBuffer.isView(e)||(e=new Uint16Array(e));let t=this.index,n=this.uint8array;for(let r=0,i=e.length;r<i;r++){let i=t+2*r;e[r]=a.uint8ToUint16(n[i],n[i+1])}return this.index+=e.byteLength,e}readUint32Array(e){ArrayBuffer.isView(e)||(e=new Uint32Array(e));let t=this.index,n=this.uint8array;for(let r=0,i=e.length;r<i;r++){let i=t+4*r;e[r]=a.uint8ToUint32(n[i],n[i+1],n[i+2],n[i+3])}return this.index+=e.byteLength,e}readFloat32Array(e){ArrayBuffer.isView(e)||(e=new Float32Array(e));let t=this.index,n=this.uint8array;for(let r=0,i=e.length;r<i;r++){let i=t+4*r;e[r]=a.uint8ToFloat32(n[i],n[i+1],n[i+2],n[i+3])}return this.index+=e.byteLength,e}readFloat64Array(e){ArrayBuffer.isView(e)||(e=new Float64Array(e));let t=this.index,n=this.uint8array;for(let r=0,i=e.length;r<i;r++){let i=t+8*r;e[r]=a.uint8ToFloat64(n[i],n[i+1],n[i+2],n[i+3],n[i+4],n[i+5],n[i+6],n[i+7])}return this.index+=e.byteLength,e}readTypedArray(e){let t=new Uint8Array(e.buffer),n=this.index,a=this.uint8array;for(let e=0,r=t.length;e<r;e++)t[e]=a[n+e];return this.index+=t.length,e}write(e){let t=this.index,n=this.uint8array,a=e.length;for(let r=0;r<a;r++)n[t+r]=e.charCodeAt(r);this.index+=a}writeInt8(e){this.uint8array[this.index]=a.int8ToUint8(e),this.index+=1}writeInt16(e){let t=this.index,n=this.uint8array;a.int16ToUint8(r,e),n[t]=r[0],n[t+1]=r[1],this.index+=2}writeInt32(e){let t=this.index,n=this.uint8array;a.int32ToUint8(r,e),n[t]=r[0],n[t+1]=r[1],n[t+2]=r[2],n[t+3]=r[3],this.index+=4}writeUint8(e){this.uint8array[this.index]=e,this.index+=1}writeUint16(e){let t=this.index,n=this.uint8array;a.uint16ToUint8(r,e),n[t]=r[0],n[t+1]=r[1],this.index+=2}writeUint32(e){let t=this.index,n=this.uint8array;a.uint32ToUint8(r,e),n[t]=r[0],n[t+1]=r[1],n[t+2]=r[2],n[t+3]=r[3],this.index+=4}writeFloat32(e){let t=this.index,n=this.uint8array;a.float32ToUint8(r,e),n[t]=r[0],n[t+1]=r[1],n[t+2]=r[2],n[t+3]=r[3],this.index+=4}writeFloat64(e){let t=this.index,n=this.uint8array;a.float64ToUint8(r,e),n[t]=r[0],n[t+1]=r[1],n[t+2]=r[2],n[t+3]=r[3],n[t+4]=r[4],n[t+5]=r[5],n[t+6]=r[6],n[t+7]=r[7],this.index+=8}writeInt8Array(e){let t=this.index,n=this.uint8array;for(let r=0,i=e.length;r<i;r++)n[t+r]=a.int8ToUint8(e[r]);this.index+=e.byteLength}writeInt16Array(e){let t=this.index,n=this.uint8array;for(let i=0,l=e.length;i<l;i++){let l=t+2*i;a.int16ToUint8(r,e[i]),n[l]=r[0],n[l+1]=r[1]}this.index+=e.byteLength}writeInt32Array(e){let t=this.index,n=this.uint8array;for(let i=0,l=e.length;i<l;i++){let l=t+4*i;a.int32ToUint8(r,e[i]),n[l]=r[0],n[l+1]=r[1],n[l+2]=r[2],n[l+3]=r[3]}this.index+=e.byteLength}writeUint8Array(e){let t=this.index,n=this.uint8array;for(let a=0,r=e.length;a<r;a++)n[t+a]=e[a];this.index+=e.byteLength}writeUint16Array(e){let t=this.index,n=this.uint8array;for(let i=0,l=e.length;i<l;i++){let l=t+2*i;a.uint16ToUint8(r,e[i]),n[l]=r[0],n[l+1]=r[1]}this.index+=e.byteLength}writeUint32Array(e){let t=this.index,n=this.uint8array;for(let i=0,l=e.length;i<l;i++){let l=t+4*i;a.uint32ToUint8(r,e[i]),n[l]=r[0],n[l+1]=r[1],n[l+2]=r[2],n[l+3]=r[3]}this.index+=e.byteLength}writeFloat32Array(e){let t=this.index,n=this.uint8array;for(let i=0,l=e.length;i<l;i++){let l=t+4*i;a.float32ToUint8(r,e[i]),n[l]=r[0],n[l+1]=r[1],n[l+2]=r[2],n[l+3]=r[3]}this.index+=e.byteLength}writeFloat64Array(e){let t=this.index,n=this.uint8array;for(let i=0,l=e.length;i<l;i++){let l=t+8*i;a.float64ToUint8(r,e[i]),n[l]=r[0],n[l+1]=r[1],n[l+2]=r[2],n[l+3]=r[3],n[l+4]=r[4],n[l+5]=r[5],n[l+6]=r[6],n[l+7]=r[7]}this.index+=e.byteLength}writeTypedArray(e){let t=new Uint8Array(e.buffer),n=this.index,a=this.uint8array;for(let e=0,r=t.length;e<r;e++)a[n+e]=t[e]}}t.default=i},function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"EPSILON",(function(){return f})),n.d(a,"ARRAY_TYPE",(function(){return _})),n.d(a,"RANDOM",(function(){return m})),n.d(a,"setMatrixArrayType",(function(){return p})),n.d(a,"toRadian",(function(){return b})),n.d(a,"equals",(function(){return w}));var r={};n.r(r),n.d(r,"create",(function(){return v})),n.d(r,"clone",(function(){return A})),n.d(r,"copy",(function(){return L})),n.d(r,"identity",(function(){return y})),n.d(r,"fromValues",(function(){return S})),n.d(r,"set",(function(){return T})),n.d(r,"transpose",(function(){return E})),n.d(r,"invert",(function(){return x})),n.d(r,"adjoint",(function(){return k})),n.d(r,"determinant",(function(){return M})),n.d(r,"multiply",(function(){return I})),n.d(r,"rotate",(function(){return U})),n.d(r,"scale",(function(){return P})),n.d(r,"fromRotation",(function(){return R})),n.d(r,"fromScaling",(function(){return O})),n.d(r,"str",(function(){return C})),n.d(r,"frob",(function(){return B})),n.d(r,"LDU",(function(){return F})),n.d(r,"add",(function(){return D})),n.d(r,"subtract",(function(){return G})),n.d(r,"exactEquals",(function(){return N})),n.d(r,"equals",(function(){return V})),n.d(r,"multiplyScalar",(function(){return j})),n.d(r,"multiplyScalarAndAdd",(function(){return H})),n.d(r,"mul",(function(){return K})),n.d(r,"sub",(function(){return z}));var i={};n.r(i),n.d(i,"create",(function(){return X})),n.d(i,"clone",(function(){return q})),n.d(i,"copy",(function(){return Y})),n.d(i,"identity",(function(){return $})),n.d(i,"fromValues",(function(){return W})),n.d(i,"set",(function(){return Z})),n.d(i,"invert",(function(){return J})),n.d(i,"determinant",(function(){return Q})),n.d(i,"multiply",(function(){return ee})),n.d(i,"rotate",(function(){return te})),n.d(i,"scale",(function(){return ne})),n.d(i,"translate",(function(){return ae})),n.d(i,"fromRotation",(function(){return re})),n.d(i,"fromScaling",(function(){return ie})),n.d(i,"fromTranslation",(function(){return le})),n.d(i,"str",(function(){return se})),n.d(i,"frob",(function(){return oe})),n.d(i,"add",(function(){return ue})),n.d(i,"subtract",(function(){return ce})),n.d(i,"multiplyScalar",(function(){return de})),n.d(i,"multiplyScalarAndAdd",(function(){return he})),n.d(i,"exactEquals",(function(){return fe})),n.d(i,"equals",(function(){return _e})),n.d(i,"mul",(function(){return me})),n.d(i,"sub",(function(){return pe}));var l={};n.r(l),n.d(l,"create",(function(){return ge})),n.d(l,"fromMat4",(function(){return be})),n.d(l,"clone",(function(){return we})),n.d(l,"copy",(function(){return ve})),n.d(l,"fromValues",(function(){return Ae})),n.d(l,"set",(function(){return Le})),n.d(l,"identity",(function(){return ye})),n.d(l,"transpose",(function(){return Se})),n.d(l,"invert",(function(){return Te})),n.d(l,"adjoint",(function(){return Ee})),n.d(l,"determinant",(function(){return xe})),n.d(l,"multiply",(function(){return ke})),n.d(l,"translate",(function(){return Me})),n.d(l,"rotate",(function(){return Ie})),n.d(l,"scale",(function(){return Ue})),n.d(l,"fromTranslation",(function(){return Pe})),n.d(l,"fromRotation",(function(){return Re})),n.d(l,"fromScaling",(function(){return Oe})),n.d(l,"fromMat2d",(function(){return Ce})),n.d(l,"fromQuat",(function(){return Be})),n.d(l,"normalFromMat4",(function(){return Fe})),n.d(l,"projection",(function(){return De})),n.d(l,"str",(function(){return Ge})),n.d(l,"frob",(function(){return Ne})),n.d(l,"add",(function(){return Ve})),n.d(l,"subtract",(function(){return je})),n.d(l,"multiplyScalar",(function(){return He})),n.d(l,"multiplyScalarAndAdd",(function(){return Ke})),n.d(l,"exactEquals",(function(){return ze})),n.d(l,"equals",(function(){return Xe})),n.d(l,"mul",(function(){return qe})),n.d(l,"sub",(function(){return Ye}));var s={};n.r(s),n.d(s,"create",(function(){return $e})),n.d(s,"clone",(function(){return We})),n.d(s,"copy",(function(){return Ze})),n.d(s,"fromValues",(function(){return Je})),n.d(s,"set",(function(){return Qe})),n.d(s,"identity",(function(){return et})),n.d(s,"transpose",(function(){return tt})),n.d(s,"invert",(function(){return nt})),n.d(s,"adjoint",(function(){return at})),n.d(s,"determinant",(function(){return rt})),n.d(s,"multiply",(function(){return it})),n.d(s,"translate",(function(){return lt})),n.d(s,"scale",(function(){return st})),n.d(s,"rotate",(function(){return ot})),n.d(s,"rotateX",(function(){return ut})),n.d(s,"rotateY",(function(){return ct})),n.d(s,"rotateZ",(function(){return dt})),n.d(s,"fromTranslation",(function(){return ht})),n.d(s,"fromScaling",(function(){return ft})),n.d(s,"fromRotation",(function(){return _t})),n.d(s,"fromXRotation",(function(){return mt})),n.d(s,"fromYRotation",(function(){return pt})),n.d(s,"fromZRotation",(function(){return gt})),n.d(s,"fromRotationTranslation",(function(){return bt})),n.d(s,"fromQuat2",(function(){return wt})),n.d(s,"getTranslation",(function(){return vt})),n.d(s,"getScaling",(function(){return At})),n.d(s,"getRotation",(function(){return Lt})),n.d(s,"fromRotationTranslationScale",(function(){return yt})),n.d(s,"fromRotationTranslationScaleOrigin",(function(){return St})),n.d(s,"fromQuat",(function(){return Tt})),n.d(s,"frustum",(function(){return Et})),n.d(s,"perspective",(function(){return xt})),n.d(s,"perspectiveFromFieldOfView",(function(){return kt})),n.d(s,"ortho",(function(){return Mt})),n.d(s,"lookAt",(function(){return It})),n.d(s,"targetTo",(function(){return Ut})),n.d(s,"str",(function(){return Pt})),n.d(s,"frob",(function(){return Rt})),n.d(s,"add",(function(){return Ot})),n.d(s,"subtract",(function(){return Ct})),n.d(s,"multiplyScalar",(function(){return Bt})),n.d(s,"multiplyScalarAndAdd",(function(){return Ft})),n.d(s,"exactEquals",(function(){return Dt})),n.d(s,"equals",(function(){return Gt})),n.d(s,"mul",(function(){return Nt})),n.d(s,"sub",(function(){return Vt}));var o={};n.r(o),n.d(o,"create",(function(){return jt})),n.d(o,"clone",(function(){return Ht})),n.d(o,"length",(function(){return Kt})),n.d(o,"fromValues",(function(){return zt})),n.d(o,"copy",(function(){return Xt})),n.d(o,"set",(function(){return qt})),n.d(o,"add",(function(){return Yt})),n.d(o,"subtract",(function(){return $t})),n.d(o,"multiply",(function(){return Wt})),n.d(o,"divide",(function(){return Zt})),n.d(o,"ceil",(function(){return Jt})),n.d(o,"floor",(function(){return Qt})),n.d(o,"min",(function(){return en})),n.d(o,"max",(function(){return tn})),n.d(o,"round",(function(){return nn})),n.d(o,"scale",(function(){return an})),n.d(o,"scaleAndAdd",(function(){return rn})),n.d(o,"distance",(function(){return ln})),n.d(o,"squaredDistance",(function(){return sn})),n.d(o,"squaredLength",(function(){return on})),n.d(o,"negate",(function(){return un})),n.d(o,"inverse",(function(){return cn})),n.d(o,"normalize",(function(){return dn})),n.d(o,"dot",(function(){return hn})),n.d(o,"cross",(function(){return fn})),n.d(o,"lerp",(function(){return _n})),n.d(o,"hermite",(function(){return mn})),n.d(o,"bezier",(function(){return pn})),n.d(o,"random",(function(){return gn})),n.d(o,"transformMat4",(function(){return bn})),n.d(o,"transformMat3",(function(){return wn})),n.d(o,"transformQuat",(function(){return vn})),n.d(o,"rotateX",(function(){return An})),n.d(o,"rotateY",(function(){return Ln})),n.d(o,"rotateZ",(function(){return yn})),n.d(o,"angle",(function(){return Sn})),n.d(o,"zero",(function(){return Tn})),n.d(o,"str",(function(){return En})),n.d(o,"exactEquals",(function(){return xn})),n.d(o,"equals",(function(){return kn})),n.d(o,"sub",(function(){return In})),n.d(o,"mul",(function(){return Un})),n.d(o,"div",(function(){return Pn})),n.d(o,"dist",(function(){return Rn})),n.d(o,"sqrDist",(function(){return On})),n.d(o,"len",(function(){return Cn})),n.d(o,"sqrLen",(function(){return Bn})),n.d(o,"forEach",(function(){return Fn}));var u={};n.r(u),n.d(u,"create",(function(){return Dn})),n.d(u,"clone",(function(){return Gn})),n.d(u,"fromValues",(function(){return Nn})),n.d(u,"copy",(function(){return Vn})),n.d(u,"set",(function(){return jn})),n.d(u,"add",(function(){return Hn})),n.d(u,"subtract",(function(){return Kn})),n.d(u,"multiply",(function(){return zn})),n.d(u,"divide",(function(){return Xn})),n.d(u,"ceil",(function(){return qn})),n.d(u,"floor",(function(){return Yn})),n.d(u,"min",(function(){return $n})),n.d(u,"max",(function(){return Wn})),n.d(u,"round",(function(){return Zn})),n.d(u,"scale",(function(){return Jn})),n.d(u,"scaleAndAdd",(function(){return Qn})),n.d(u,"distance",(function(){return ea})),n.d(u,"squaredDistance",(function(){return ta})),n.d(u,"length",(function(){return na})),n.d(u,"squaredLength",(function(){return aa})),n.d(u,"negate",(function(){return ra})),n.d(u,"inverse",(function(){return ia})),n.d(u,"normalize",(function(){return la})),n.d(u,"dot",(function(){return sa})),n.d(u,"cross",(function(){return oa})),n.d(u,"lerp",(function(){return ua})),n.d(u,"random",(function(){return ca})),n.d(u,"transformMat4",(function(){return da})),n.d(u,"transformQuat",(function(){return ha})),n.d(u,"zero",(function(){return fa})),n.d(u,"str",(function(){return _a})),n.d(u,"exactEquals",(function(){return ma})),n.d(u,"equals",(function(){return pa})),n.d(u,"sub",(function(){return ga})),n.d(u,"mul",(function(){return ba})),n.d(u,"div",(function(){return wa})),n.d(u,"dist",(function(){return va})),n.d(u,"sqrDist",(function(){return Aa})),n.d(u,"len",(function(){return La})),n.d(u,"sqrLen",(function(){return ya})),n.d(u,"forEach",(function(){return Sa}));var c={};n.r(c),n.d(c,"create",(function(){return Ta})),n.d(c,"identity",(function(){return Ea})),n.d(c,"setAxisAngle",(function(){return xa})),n.d(c,"getAxisAngle",(function(){return ka})),n.d(c,"getAngle",(function(){return Ma})),n.d(c,"multiply",(function(){return Ia})),n.d(c,"rotateX",(function(){return Ua})),n.d(c,"rotateY",(function(){return Pa})),n.d(c,"rotateZ",(function(){return Ra})),n.d(c,"calculateW",(function(){return Oa})),n.d(c,"exp",(function(){return Ca})),n.d(c,"ln",(function(){return Ba})),n.d(c,"pow",(function(){return Fa})),n.d(c,"slerp",(function(){return Da})),n.d(c,"random",(function(){return Ga})),n.d(c,"invert",(function(){return Na})),n.d(c,"conjugate",(function(){return Va})),n.d(c,"fromMat3",(function(){return ja})),n.d(c,"fromEuler",(function(){return Ha})),n.d(c,"str",(function(){return Ka})),n.d(c,"clone",(function(){return Za})),n.d(c,"fromValues",(function(){return Ja})),n.d(c,"copy",(function(){return Qa})),n.d(c,"set",(function(){return er})),n.d(c,"add",(function(){return tr})),n.d(c,"mul",(function(){return nr})),n.d(c,"scale",(function(){return ar})),n.d(c,"dot",(function(){return rr})),n.d(c,"lerp",(function(){return ir})),n.d(c,"length",(function(){return lr})),n.d(c,"len",(function(){return sr})),n.d(c,"squaredLength",(function(){return or})),n.d(c,"sqrLen",(function(){return ur})),n.d(c,"normalize",(function(){return cr})),n.d(c,"exactEquals",(function(){return dr})),n.d(c,"equals",(function(){return hr})),n.d(c,"rotationTo",(function(){return fr})),n.d(c,"sqlerp",(function(){return _r})),n.d(c,"setAxes",(function(){return mr}));var d={};n.r(d),n.d(d,"create",(function(){return pr})),n.d(d,"clone",(function(){return gr})),n.d(d,"fromValues",(function(){return br})),n.d(d,"fromRotationTranslationValues",(function(){return wr})),n.d(d,"fromRotationTranslation",(function(){return vr})),n.d(d,"fromTranslation",(function(){return Ar})),n.d(d,"fromRotation",(function(){return Lr})),n.d(d,"fromMat4",(function(){return yr})),n.d(d,"copy",(function(){return Sr})),n.d(d,"identity",(function(){return Tr})),n.d(d,"set",(function(){return Er})),n.d(d,"getReal",(function(){return xr})),n.d(d,"getDual",(function(){return kr})),n.d(d,"setReal",(function(){return Mr})),n.d(d,"setDual",(function(){return Ir})),n.d(d,"getTranslation",(function(){return Ur})),n.d(d,"translate",(function(){return Pr})),n.d(d,"rotateX",(function(){return Rr})),n.d(d,"rotateY",(function(){return Or})),n.d(d,"rotateZ",(function(){return Cr})),n.d(d,"rotateByQuatAppend",(function(){return Br})),n.d(d,"rotateByQuatPrepend",(function(){return Fr})),n.d(d,"rotateAroundAxis",(function(){return Dr})),n.d(d,"add",(function(){return Gr})),n.d(d,"multiply",(function(){return Nr})),n.d(d,"mul",(function(){return Vr})),n.d(d,"scale",(function(){return jr})),n.d(d,"dot",(function(){return Hr})),n.d(d,"lerp",(function(){return Kr})),n.d(d,"invert",(function(){return zr})),n.d(d,"conjugate",(function(){return Xr})),n.d(d,"length",(function(){return qr})),n.d(d,"len",(function(){return Yr})),n.d(d,"squaredLength",(function(){return $r})),n.d(d,"sqrLen",(function(){return Wr})),n.d(d,"normalize",(function(){return Zr})),n.d(d,"str",(function(){return Jr})),n.d(d,"exactEquals",(function(){return Qr})),n.d(d,"equals",(function(){return ei}));var h={};n.r(h),n.d(h,"create",(function(){return ti})),n.d(h,"clone",(function(){return ni})),n.d(h,"fromValues",(function(){return ai})),n.d(h,"copy",(function(){return ri})),n.d(h,"set",(function(){return ii})),n.d(h,"add",(function(){return li})),n.d(h,"subtract",(function(){return si})),n.d(h,"multiply",(function(){return oi})),n.d(h,"divide",(function(){return ui})),n.d(h,"ceil",(function(){return ci})),n.d(h,"floor",(function(){return di})),n.d(h,"min",(function(){return hi})),n.d(h,"max",(function(){return fi})),n.d(h,"round",(function(){return _i})),n.d(h,"scale",(function(){return mi})),n.d(h,"scaleAndAdd",(function(){return pi})),n.d(h,"distance",(function(){return gi})),n.d(h,"squaredDistance",(function(){return bi})),n.d(h,"length",(function(){return wi})),n.d(h,"squaredLength",(function(){return vi})),n.d(h,"negate",(function(){return Ai})),n.d(h,"inverse",(function(){return Li})),n.d(h,"normalize",(function(){return yi})),n.d(h,"dot",(function(){return Si})),n.d(h,"cross",(function(){return Ti})),n.d(h,"lerp",(function(){return Ei})),n.d(h,"random",(function(){return xi})),n.d(h,"transformMat2",(function(){return ki})),n.d(h,"transformMat2d",(function(){return Mi})),n.d(h,"transformMat3",(function(){return Ii})),n.d(h,"transformMat4",(function(){return Ui})),n.d(h,"rotate",(function(){return Pi})),n.d(h,"angle",(function(){return Ri})),n.d(h,"zero",(function(){return Oi})),n.d(h,"str",(function(){return Ci})),n.d(h,"exactEquals",(function(){return Bi})),n.d(h,"equals",(function(){return Fi})),n.d(h,"len",(function(){return Di})),n.d(h,"sub",(function(){return Gi})),n.d(h,"mul",(function(){return Ni})),n.d(h,"div",(function(){return Vi})),n.d(h,"dist",(function(){return ji})),n.d(h,"sqrDist",(function(){return Hi})),n.d(h,"sqrLen",(function(){return Ki})),n.d(h,"forEach",(function(){return zi}));var f=1e-6,_="undefined"!=typeof Float32Array?Float32Array:Array,m=Math.random;function p(e){_=e}var g=Math.PI/180;function b(e){return e*g}function w(e,t){return Math.abs(e-t)<=f*Math.max(1,Math.abs(e),Math.abs(t))}function v(){var e=new _(4);return _!=Float32Array&&(e[1]=0,e[2]=0),e[0]=1,e[3]=1,e}function A(e){var t=new _(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function L(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function y(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e}function S(e,t,n,a){var r=new _(4);return r[0]=e,r[1]=t,r[2]=n,r[3]=a,r}function T(e,t,n,a,r){return e[0]=t,e[1]=n,e[2]=a,e[3]=r,e}function E(e,t){if(e===t){var n=t[1];e[1]=t[2],e[2]=n}else e[0]=t[0],e[1]=t[2],e[2]=t[1],e[3]=t[3];return e}function x(e,t){var n=t[0],a=t[1],r=t[2],i=t[3],l=n*i-r*a;return l?(l=1/l,e[0]=i*l,e[1]=-a*l,e[2]=-r*l,e[3]=n*l,e):null}function k(e,t){var n=t[0];return e[0]=t[3],e[1]=-t[1],e[2]=-t[2],e[3]=n,e}function M(e){return e[0]*e[3]-e[2]*e[1]}function I(e,t,n){var a=t[0],r=t[1],i=t[2],l=t[3],s=n[0],o=n[1],u=n[2],c=n[3];return e[0]=a*s+i*o,e[1]=r*s+l*o,e[2]=a*u+i*c,e[3]=r*u+l*c,e}function U(e,t,n){var a=t[0],r=t[1],i=t[2],l=t[3],s=Math.sin(n),o=Math.cos(n);return e[0]=a*o+i*s,e[1]=r*o+l*s,e[2]=a*-s+i*o,e[3]=r*-s+l*o,e}function P(e,t,n){var a=t[0],r=t[1],i=t[2],l=t[3],s=n[0],o=n[1];return e[0]=a*s,e[1]=r*s,e[2]=i*o,e[3]=l*o,e}function R(e,t){var n=Math.sin(t),a=Math.cos(t);return e[0]=a,e[1]=n,e[2]=-n,e[3]=a,e}function O(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=t[1],e}function C(e){return"mat2("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"}function B(e){return Math.hypot(e[0],e[1],e[2],e[3])}function F(e,t,n,a){return e[2]=a[2]/a[0],n[0]=a[0],n[1]=a[1],n[3]=a[3]-e[2]*n[1],[e,t,n]}function D(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e}function G(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e}function N(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]}function V(e,t){var n=e[0],a=e[1],r=e[2],i=e[3],l=t[0],s=t[1],o=t[2],u=t[3];return Math.abs(n-l)<=f*Math.max(1,Math.abs(n),Math.abs(l))&&Math.abs(a-s)<=f*Math.max(1,Math.abs(a),Math.abs(s))&&Math.abs(r-o)<=f*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(i-u)<=f*Math.max(1,Math.abs(i),Math.abs(u))}function j(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e}function H(e,t,n,a){return e[0]=t[0]+n[0]*a,e[1]=t[1]+n[1]*a,e[2]=t[2]+n[2]*a,e[3]=t[3]+n[3]*a,e}Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)});var K=I,z=G;function X(){var e=new _(6);return _!=Float32Array&&(e[1]=0,e[2]=0,e[4]=0,e[5]=0),e[0]=1,e[3]=1,e}function q(e){var t=new _(6);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function Y(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function $(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e}function W(e,t,n,a,r,i){var l=new _(6);return l[0]=e,l[1]=t,l[2]=n,l[3]=a,l[4]=r,l[5]=i,l}function Z(e,t,n,a,r,i,l){return e[0]=t,e[1]=n,e[2]=a,e[3]=r,e[4]=i,e[5]=l,e}function J(e,t){var n=t[0],a=t[1],r=t[2],i=t[3],l=t[4],s=t[5],o=n*i-a*r;return o?(o=1/o,e[0]=i*o,e[1]=-a*o,e[2]=-r*o,e[3]=n*o,e[4]=(r*s-i*l)*o,e[5]=(a*l-n*s)*o,e):null}function Q(e){return e[0]*e[3]-e[1]*e[2]}function ee(e,t,n){var a=t[0],r=t[1],i=t[2],l=t[3],s=t[4],o=t[5],u=n[0],c=n[1],d=n[2],h=n[3],f=n[4],_=n[5];return e[0]=a*u+i*c,e[1]=r*u+l*c,e[2]=a*d+i*h,e[3]=r*d+l*h,e[4]=a*f+i*_+s,e[5]=r*f+l*_+o,e}function te(e,t,n){var a=t[0],r=t[1],i=t[2],l=t[3],s=t[4],o=t[5],u=Math.sin(n),c=Math.cos(n);return e[0]=a*c+i*u,e[1]=r*c+l*u,e[2]=a*-u+i*c,e[3]=r*-u+l*c,e[4]=s,e[5]=o,e}function ne(e,t,n){var a=t[0],r=t[1],i=t[2],l=t[3],s=t[4],o=t[5],u=n[0],c=n[1];return e[0]=a*u,e[1]=r*u,e[2]=i*c,e[3]=l*c,e[4]=s,e[5]=o,e}function ae(e,t,n){var a=t[0],r=t[1],i=t[2],l=t[3],s=t[4],o=t[5],u=n[0],c=n[1];return e[0]=a,e[1]=r,e[2]=i,e[3]=l,e[4]=a*u+i*c+s,e[5]=r*u+l*c+o,e}function re(e,t){var n=Math.sin(t),a=Math.cos(t);return e[0]=a,e[1]=n,e[2]=-n,e[3]=a,e[4]=0,e[5]=0,e}function ie(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=t[1],e[4]=0,e[5]=0,e}function le(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=t[0],e[5]=t[1],e}function se(e){return"mat2d("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+")"}function oe(e){return Math.hypot(e[0],e[1],e[2],e[3],e[4],e[5],1)}function ue(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e}function ce(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e[4]=t[4]-n[4],e[5]=t[5]-n[5],e}function de(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e}function he(e,t,n,a){return e[0]=t[0]+n[0]*a,e[1]=t[1]+n[1]*a,e[2]=t[2]+n[2]*a,e[3]=t[3]+n[3]*a,e[4]=t[4]+n[4]*a,e[5]=t[5]+n[5]*a,e}function fe(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]}function _e(e,t){var n=e[0],a=e[1],r=e[2],i=e[3],l=e[4],s=e[5],o=t[0],u=t[1],c=t[2],d=t[3],h=t[4],_=t[5];return Math.abs(n-o)<=f*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(a-u)<=f*Math.max(1,Math.abs(a),Math.abs(u))&&Math.abs(r-c)<=f*Math.max(1,Math.abs(r),Math.abs(c))&&Math.abs(i-d)<=f*Math.max(1,Math.abs(i),Math.abs(d))&&Math.abs(l-h)<=f*Math.max(1,Math.abs(l),Math.abs(h))&&Math.abs(s-_)<=f*Math.max(1,Math.abs(s),Math.abs(_))}var me=ee,pe=ce;function ge(){var e=new _(9);return _!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e}function be(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e}function we(e){var t=new _(9);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function ve(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function Ae(e,t,n,a,r,i,l,s,o){var u=new _(9);return u[0]=e,u[1]=t,u[2]=n,u[3]=a,u[4]=r,u[5]=i,u[6]=l,u[7]=s,u[8]=o,u}function Le(e,t,n,a,r,i,l,s,o,u){return e[0]=t,e[1]=n,e[2]=a,e[3]=r,e[4]=i,e[5]=l,e[6]=s,e[7]=o,e[8]=u,e}function ye(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function Se(e,t){if(e===t){var n=t[1],a=t[2],r=t[5];e[1]=t[3],e[2]=t[6],e[3]=n,e[5]=t[7],e[6]=a,e[7]=r}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e}function Te(e,t){var n=t[0],a=t[1],r=t[2],i=t[3],l=t[4],s=t[5],o=t[6],u=t[7],c=t[8],d=c*l-s*u,h=-c*i+s*o,f=u*i-l*o,_=n*d+a*h+r*f;return _?(_=1/_,e[0]=d*_,e[1]=(-c*a+r*u)*_,e[2]=(s*a-r*l)*_,e[3]=h*_,e[4]=(c*n-r*o)*_,e[5]=(-s*n+r*i)*_,e[6]=f*_,e[7]=(-u*n+a*o)*_,e[8]=(l*n-a*i)*_,e):null}function Ee(e,t){var n=t[0],a=t[1],r=t[2],i=t[3],l=t[4],s=t[5],o=t[6],u=t[7],c=t[8];return e[0]=l*c-s*u,e[1]=r*u-a*c,e[2]=a*s-r*l,e[3]=s*o-i*c,e[4]=n*c-r*o,e[5]=r*i-n*s,e[6]=i*u-l*o,e[7]=a*o-n*u,e[8]=n*l-a*i,e}function xe(e){var t=e[0],n=e[1],a=e[2],r=e[3],i=e[4],l=e[5],s=e[6],o=e[7],u=e[8];return t*(u*i-l*o)+n*(-u*r+l*s)+a*(o*r-i*s)}function ke(e,t,n){var a=t[0],r=t[1],i=t[2],l=t[3],s=t[4],o=t[5],u=t[6],c=t[7],d=t[8],h=n[0],f=n[1],_=n[2],m=n[3],p=n[4],g=n[5],b=n[6],w=n[7],v=n[8];return e[0]=h*a+f*l+_*u,e[1]=h*r+f*s+_*c,e[2]=h*i+f*o+_*d,e[3]=m*a+p*l+g*u,e[4]=m*r+p*s+g*c,e[5]=m*i+p*o+g*d,e[6]=b*a+w*l+v*u,e[7]=b*r+w*s+v*c,e[8]=b*i+w*o+v*d,e}function Me(e,t,n){var a=t[0],r=t[1],i=t[2],l=t[3],s=t[4],o=t[5],u=t[6],c=t[7],d=t[8],h=n[0],f=n[1];return e[0]=a,e[1]=r,e[2]=i,e[3]=l,e[4]=s,e[5]=o,e[6]=h*a+f*l+u,e[7]=h*r+f*s+c,e[8]=h*i+f*o+d,e}function Ie(e,t,n){var a=t[0],r=t[1],i=t[2],l=t[3],s=t[4],o=t[5],u=t[6],c=t[7],d=t[8],h=Math.sin(n),f=Math.cos(n);return e[0]=f*a+h*l,e[1]=f*r+h*s,e[2]=f*i+h*o,e[3]=f*l-h*a,e[4]=f*s-h*r,e[5]=f*o-h*i,e[6]=u,e[7]=c,e[8]=d,e}function Ue(e,t,n){var a=n[0],r=n[1];return e[0]=a*t[0],e[1]=a*t[1],e[2]=a*t[2],e[3]=r*t[3],e[4]=r*t[4],e[5]=r*t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function Pe(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=t[0],e[7]=t[1],e[8]=1,e}function Re(e,t){var n=Math.sin(t),a=Math.cos(t);return e[0]=a,e[1]=n,e[2]=0,e[3]=-n,e[4]=a,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function Oe(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=t[1],e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function Ce(e,t){return e[0]=t[0],e[1]=t[1],e[2]=0,e[3]=t[2],e[4]=t[3],e[5]=0,e[6]=t[4],e[7]=t[5],e[8]=1,e}function Be(e,t){var n=t[0],a=t[1],r=t[2],i=t[3],l=n+n,s=a+a,o=r+r,u=n*l,c=a*l,d=a*s,h=r*l,f=r*s,_=r*o,m=i*l,p=i*s,g=i*o;return e[0]=1-d-_,e[3]=c-g,e[6]=h+p,e[1]=c+g,e[4]=1-u-_,e[7]=f-m,e[2]=h-p,e[5]=f+m,e[8]=1-u-d,e}function Fe(e,t){var n=t[0],a=t[1],r=t[2],i=t[3],l=t[4],s=t[5],o=t[6],u=t[7],c=t[8],d=t[9],h=t[10],f=t[11],_=t[12],m=t[13],p=t[14],g=t[15],b=n*s-a*l,w=n*o-r*l,v=n*u-i*l,A=a*o-r*s,L=a*u-i*s,y=r*u-i*o,S=c*m-d*_,T=c*p-h*_,E=c*g-f*_,x=d*p-h*m,k=d*g-f*m,M=h*g-f*p,I=b*M-w*k+v*x+A*E-L*T+y*S;return I?(I=1/I,e[0]=(s*M-o*k+u*x)*I,e[1]=(o*E-l*M-u*T)*I,e[2]=(l*k-s*E+u*S)*I,e[3]=(r*k-a*M-i*x)*I,e[4]=(n*M-r*E+i*T)*I,e[5]=(a*E-n*k-i*S)*I,e[6]=(m*y-p*L+g*A)*I,e[7]=(p*v-_*y-g*w)*I,e[8]=(_*L-m*v+g*b)*I,e):null}function De(e,t,n){return e[0]=2/t,e[1]=0,e[2]=0,e[3]=0,e[4]=-2/n,e[5]=0,e[6]=-1,e[7]=1,e[8]=1,e}function Ge(e){return"mat3("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+")"}function Ne(e){return Math.hypot(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8])}function Ve(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e[6]=t[6]+n[6],e[7]=t[7]+n[7],e[8]=t[8]+n[8],e}function je(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e[4]=t[4]-n[4],e[5]=t[5]-n[5],e[6]=t[6]-n[6],e[7]=t[7]-n[7],e[8]=t[8]-n[8],e}function He(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e[8]=t[8]*n,e}function Ke(e,t,n,a){return e[0]=t[0]+n[0]*a,e[1]=t[1]+n[1]*a,e[2]=t[2]+n[2]*a,e[3]=t[3]+n[3]*a,e[4]=t[4]+n[4]*a,e[5]=t[5]+n[5]*a,e[6]=t[6]+n[6]*a,e[7]=t[7]+n[7]*a,e[8]=t[8]+n[8]*a,e}function ze(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]}function Xe(e,t){var n=e[0],a=e[1],r=e[2],i=e[3],l=e[4],s=e[5],o=e[6],u=e[7],c=e[8],d=t[0],h=t[1],_=t[2],m=t[3],p=t[4],g=t[5],b=t[6],w=t[7],v=t[8];return Math.abs(n-d)<=f*Math.max(1,Math.abs(n),Math.abs(d))&&Math.abs(a-h)<=f*Math.max(1,Math.abs(a),Math.abs(h))&&Math.abs(r-_)<=f*Math.max(1,Math.abs(r),Math.abs(_))&&Math.abs(i-m)<=f*Math.max(1,Math.abs(i),Math.abs(m))&&Math.abs(l-p)<=f*Math.max(1,Math.abs(l),Math.abs(p))&&Math.abs(s-g)<=f*Math.max(1,Math.abs(s),Math.abs(g))&&Math.abs(o-b)<=f*Math.max(1,Math.abs(o),Math.abs(b))&&Math.abs(u-w)<=f*Math.max(1,Math.abs(u),Math.abs(w))&&Math.abs(c-v)<=f*Math.max(1,Math.abs(c),Math.abs(v))}var qe=ke,Ye=je;function $e(){var e=new _(16);return _!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}function We(e){var t=new _(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function Ze(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function Je(e,t,n,a,r,i,l,s,o,u,c,d,h,f,m,p){var g=new _(16);return g[0]=e,g[1]=t,g[2]=n,g[3]=a,g[4]=r,g[5]=i,g[6]=l,g[7]=s,g[8]=o,g[9]=u,g[10]=c,g[11]=d,g[12]=h,g[13]=f,g[14]=m,g[15]=p,g}function Qe(e,t,n,a,r,i,l,s,o,u,c,d,h,f,_,m,p){return e[0]=t,e[1]=n,e[2]=a,e[3]=r,e[4]=i,e[5]=l,e[6]=s,e[7]=o,e[8]=u,e[9]=c,e[10]=d,e[11]=h,e[12]=f,e[13]=_,e[14]=m,e[15]=p,e}function et(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function tt(e,t){if(e===t){var n=t[1],a=t[2],r=t[3],i=t[6],l=t[7],s=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=n,e[6]=t[9],e[7]=t[13],e[8]=a,e[9]=i,e[11]=t[14],e[12]=r,e[13]=l,e[14]=s}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}function nt(e,t){var n=t[0],a=t[1],r=t[2],i=t[3],l=t[4],s=t[5],o=t[6],u=t[7],c=t[8],d=t[9],h=t[10],f=t[11],_=t[12],m=t[13],p=t[14],g=t[15],b=n*s-a*l,w=n*o-r*l,v=n*u-i*l,A=a*o-r*s,L=a*u-i*s,y=r*u-i*o,S=c*m-d*_,T=c*p-h*_,E=c*g-f*_,x=d*p-h*m,k=d*g-f*m,M=h*g-f*p,I=b*M-w*k+v*x+A*E-L*T+y*S;return I?(I=1/I,e[0]=(s*M-o*k+u*x)*I,e[1]=(r*k-a*M-i*x)*I,e[2]=(m*y-p*L+g*A)*I,e[3]=(h*L-d*y-f*A)*I,e[4]=(o*E-l*M-u*T)*I,e[5]=(n*M-r*E+i*T)*I,e[6]=(p*v-_*y-g*w)*I,e[7]=(c*y-h*v+f*w)*I,e[8]=(l*k-s*E+u*S)*I,e[9]=(a*E-n*k-i*S)*I,e[10]=(_*L-m*v+g*b)*I,e[11]=(d*v-c*L-f*b)*I,e[12]=(s*T-l*x-o*S)*I,e[13]=(n*x-a*T+r*S)*I,e[14]=(m*w-_*A-p*b)*I,e[15]=(c*A-d*w+h*b)*I,e):null}function at(e,t){var n=t[0],a=t[1],r=t[2],i=t[3],l=t[4],s=t[5],o=t[6],u=t[7],c=t[8],d=t[9],h=t[10],f=t[11],_=t[12],m=t[13],p=t[14],g=t[15];return e[0]=s*(h*g-f*p)-d*(o*g-u*p)+m*(o*f-u*h),e[1]=-(a*(h*g-f*p)-d*(r*g-i*p)+m*(r*f-i*h)),e[2]=a*(o*g-u*p)-s*(r*g-i*p)+m*(r*u-i*o),e[3]=-(a*(o*f-u*h)-s*(r*f-i*h)+d*(r*u-i*o)),e[4]=-(l*(h*g-f*p)-c*(o*g-u*p)+_*(o*f-u*h)),e[5]=n*(h*g-f*p)-c*(r*g-i*p)+_*(r*f-i*h),e[6]=-(n*(o*g-u*p)-l*(r*g-i*p)+_*(r*u-i*o)),e[7]=n*(o*f-u*h)-l*(r*f-i*h)+c*(r*u-i*o),e[8]=l*(d*g-f*m)-c*(s*g-u*m)+_*(s*f-u*d),e[9]=-(n*(d*g-f*m)-c*(a*g-i*m)+_*(a*f-i*d)),e[10]=n*(s*g-u*m)-l*(a*g-i*m)+_*(a*u-i*s),e[11]=-(n*(s*f-u*d)-l*(a*f-i*d)+c*(a*u-i*s)),e[12]=-(l*(d*p-h*m)-c*(s*p-o*m)+_*(s*h-o*d)),e[13]=n*(d*p-h*m)-c*(a*p-r*m)+_*(a*h-r*d),e[14]=-(n*(s*p-o*m)-l*(a*p-r*m)+_*(a*o-r*s)),e[15]=n*(s*h-o*d)-l*(a*h-r*d)+c*(a*o-r*s),e}function rt(e){var t=e[0],n=e[1],a=e[2],r=e[3],i=e[4],l=e[5],s=e[6],o=e[7],u=e[8],c=e[9],d=e[10],h=e[11],f=e[12],_=e[13],m=e[14],p=e[15];return(t*l-n*i)*(d*p-h*m)-(t*s-a*i)*(c*p-h*_)+(t*o-r*i)*(c*m-d*_)+(n*s-a*l)*(u*p-h*f)-(n*o-r*l)*(u*m-d*f)+(a*o-r*s)*(u*_-c*f)}function it(e,t,n){var a=t[0],r=t[1],i=t[2],l=t[3],s=t[4],o=t[5],u=t[6],c=t[7],d=t[8],h=t[9],f=t[10],_=t[11],m=t[12],p=t[13],g=t[14],b=t[15],w=n[0],v=n[1],A=n[2],L=n[3];return e[0]=w*a+v*s+A*d+L*m,e[1]=w*r+v*o+A*h+L*p,e[2]=w*i+v*u+A*f+L*g,e[3]=w*l+v*c+A*_+L*b,w=n[4],v=n[5],A=n[6],L=n[7],e[4]=w*a+v*s+A*d+L*m,e[5]=w*r+v*o+A*h+L*p,e[6]=w*i+v*u+A*f+L*g,e[7]=w*l+v*c+A*_+L*b,w=n[8],v=n[9],A=n[10],L=n[11],e[8]=w*a+v*s+A*d+L*m,e[9]=w*r+v*o+A*h+L*p,e[10]=w*i+v*u+A*f+L*g,e[11]=w*l+v*c+A*_+L*b,w=n[12],v=n[13],A=n[14],L=n[15],e[12]=w*a+v*s+A*d+L*m,e[13]=w*r+v*o+A*h+L*p,e[14]=w*i+v*u+A*f+L*g,e[15]=w*l+v*c+A*_+L*b,e}function lt(e,t,n){var a,r,i,l,s,o,u,c,d,h,f,_,m=n[0],p=n[1],g=n[2];return t===e?(e[12]=t[0]*m+t[4]*p+t[8]*g+t[12],e[13]=t[1]*m+t[5]*p+t[9]*g+t[13],e[14]=t[2]*m+t[6]*p+t[10]*g+t[14],e[15]=t[3]*m+t[7]*p+t[11]*g+t[15]):(a=t[0],r=t[1],i=t[2],l=t[3],s=t[4],o=t[5],u=t[6],c=t[7],d=t[8],h=t[9],f=t[10],_=t[11],e[0]=a,e[1]=r,e[2]=i,e[3]=l,e[4]=s,e[5]=o,e[6]=u,e[7]=c,e[8]=d,e[9]=h,e[10]=f,e[11]=_,e[12]=a*m+s*p+d*g+t[12],e[13]=r*m+o*p+h*g+t[13],e[14]=i*m+u*p+f*g+t[14],e[15]=l*m+c*p+_*g+t[15]),e}function st(e,t,n){var a=n[0],r=n[1],i=n[2];return e[0]=t[0]*a,e[1]=t[1]*a,e[2]=t[2]*a,e[3]=t[3]*a,e[4]=t[4]*r,e[5]=t[5]*r,e[6]=t[6]*r,e[7]=t[7]*r,e[8]=t[8]*i,e[9]=t[9]*i,e[10]=t[10]*i,e[11]=t[11]*i,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function ot(e,t,n,a){var r,i,l,s,o,u,c,d,h,_,m,p,g,b,w,v,A,L,y,S,T,E,x,k,M=a[0],I=a[1],U=a[2],P=Math.hypot(M,I,U);return P<f?null:(M*=P=1/P,I*=P,U*=P,r=Math.sin(n),l=1-(i=Math.cos(n)),s=t[0],o=t[1],u=t[2],c=t[3],d=t[4],h=t[5],_=t[6],m=t[7],p=t[8],g=t[9],b=t[10],w=t[11],v=M*M*l+i,A=I*M*l+U*r,L=U*M*l-I*r,y=M*I*l-U*r,S=I*I*l+i,T=U*I*l+M*r,E=M*U*l+I*r,x=I*U*l-M*r,k=U*U*l+i,e[0]=s*v+d*A+p*L,e[1]=o*v+h*A+g*L,e[2]=u*v+_*A+b*L,e[3]=c*v+m*A+w*L,e[4]=s*y+d*S+p*T,e[5]=o*y+h*S+g*T,e[6]=u*y+_*S+b*T,e[7]=c*y+m*S+w*T,e[8]=s*E+d*x+p*k,e[9]=o*E+h*x+g*k,e[10]=u*E+_*x+b*k,e[11]=c*E+m*x+w*k,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)}function ut(e,t,n){var a=Math.sin(n),r=Math.cos(n),i=t[4],l=t[5],s=t[6],o=t[7],u=t[8],c=t[9],d=t[10],h=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=i*r+u*a,e[5]=l*r+c*a,e[6]=s*r+d*a,e[7]=o*r+h*a,e[8]=u*r-i*a,e[9]=c*r-l*a,e[10]=d*r-s*a,e[11]=h*r-o*a,e}function ct(e,t,n){var a=Math.sin(n),r=Math.cos(n),i=t[0],l=t[1],s=t[2],o=t[3],u=t[8],c=t[9],d=t[10],h=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=i*r-u*a,e[1]=l*r-c*a,e[2]=s*r-d*a,e[3]=o*r-h*a,e[8]=i*a+u*r,e[9]=l*a+c*r,e[10]=s*a+d*r,e[11]=o*a+h*r,e}function dt(e,t,n){var a=Math.sin(n),r=Math.cos(n),i=t[0],l=t[1],s=t[2],o=t[3],u=t[4],c=t[5],d=t[6],h=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=i*r+u*a,e[1]=l*r+c*a,e[2]=s*r+d*a,e[3]=o*r+h*a,e[4]=u*r-i*a,e[5]=c*r-l*a,e[6]=d*r-s*a,e[7]=h*r-o*a,e}function ht(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}function ft(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function _t(e,t,n){var a,r,i,l=n[0],s=n[1],o=n[2],u=Math.hypot(l,s,o);return u<f?null:(l*=u=1/u,s*=u,o*=u,a=Math.sin(t),i=1-(r=Math.cos(t)),e[0]=l*l*i+r,e[1]=s*l*i+o*a,e[2]=o*l*i-s*a,e[3]=0,e[4]=l*s*i-o*a,e[5]=s*s*i+r,e[6]=o*s*i+l*a,e[7]=0,e[8]=l*o*i+s*a,e[9]=s*o*i-l*a,e[10]=o*o*i+r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)}function mt(e,t){var n=Math.sin(t),a=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=a,e[6]=n,e[7]=0,e[8]=0,e[9]=-n,e[10]=a,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function pt(e,t){var n=Math.sin(t),a=Math.cos(t);return e[0]=a,e[1]=0,e[2]=-n,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=n,e[9]=0,e[10]=a,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function gt(e,t){var n=Math.sin(t),a=Math.cos(t);return e[0]=a,e[1]=n,e[2]=0,e[3]=0,e[4]=-n,e[5]=a,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function bt(e,t,n){var a=t[0],r=t[1],i=t[2],l=t[3],s=a+a,o=r+r,u=i+i,c=a*s,d=a*o,h=a*u,f=r*o,_=r*u,m=i*u,p=l*s,g=l*o,b=l*u;return e[0]=1-(f+m),e[1]=d+b,e[2]=h-g,e[3]=0,e[4]=d-b,e[5]=1-(c+m),e[6]=_+p,e[7]=0,e[8]=h+g,e[9]=_-p,e[10]=1-(c+f),e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e}function wt(e,t){var n=new _(3),a=-t[0],r=-t[1],i=-t[2],l=t[3],s=t[4],o=t[5],u=t[6],c=t[7],d=a*a+r*r+i*i+l*l;return d>0?(n[0]=2*(s*l+c*a+o*i-u*r)/d,n[1]=2*(o*l+c*r+u*a-s*i)/d,n[2]=2*(u*l+c*i+s*r-o*a)/d):(n[0]=2*(s*l+c*a+o*i-u*r),n[1]=2*(o*l+c*r+u*a-s*i),n[2]=2*(u*l+c*i+s*r-o*a)),bt(e,t,n),e}function vt(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e}function At(e,t){var n=t[0],a=t[1],r=t[2],i=t[4],l=t[5],s=t[6],o=t[8],u=t[9],c=t[10];return e[0]=Math.hypot(n,a,r),e[1]=Math.hypot(i,l,s),e[2]=Math.hypot(o,u,c),e}function Lt(e,t){var n=new _(3);At(n,t);var a=1/n[0],r=1/n[1],i=1/n[2],l=t[0]*a,s=t[1]*r,o=t[2]*i,u=t[4]*a,c=t[5]*r,d=t[6]*i,h=t[8]*a,f=t[9]*r,m=t[10]*i,p=l+c+m,g=0;return p>0?(g=2*Math.sqrt(p+1),e[3]=.25*g,e[0]=(d-f)/g,e[1]=(h-o)/g,e[2]=(s-u)/g):l>c&&l>m?(g=2*Math.sqrt(1+l-c-m),e[3]=(d-f)/g,e[0]=.25*g,e[1]=(s+u)/g,e[2]=(h+o)/g):c>m?(g=2*Math.sqrt(1+c-l-m),e[3]=(h-o)/g,e[0]=(s+u)/g,e[1]=.25*g,e[2]=(d+f)/g):(g=2*Math.sqrt(1+m-l-c),e[3]=(s-u)/g,e[0]=(h+o)/g,e[1]=(d+f)/g,e[2]=.25*g),e}function yt(e,t,n,a){var r=t[0],i=t[1],l=t[2],s=t[3],o=r+r,u=i+i,c=l+l,d=r*o,h=r*u,f=r*c,_=i*u,m=i*c,p=l*c,g=s*o,b=s*u,w=s*c,v=a[0],A=a[1],L=a[2];return e[0]=(1-(_+p))*v,e[1]=(h+w)*v,e[2]=(f-b)*v,e[3]=0,e[4]=(h-w)*A,e[5]=(1-(d+p))*A,e[6]=(m+g)*A,e[7]=0,e[8]=(f+b)*L,e[9]=(m-g)*L,e[10]=(1-(d+_))*L,e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e}function St(e,t,n,a,r){var i=t[0],l=t[1],s=t[2],o=t[3],u=i+i,c=l+l,d=s+s,h=i*u,f=i*c,_=i*d,m=l*c,p=l*d,g=s*d,b=o*u,w=o*c,v=o*d,A=a[0],L=a[1],y=a[2],S=r[0],T=r[1],E=r[2],x=(1-(m+g))*A,k=(f+v)*A,M=(_-w)*A,I=(f-v)*L,U=(1-(h+g))*L,P=(p+b)*L,R=(_+w)*y,O=(p-b)*y,C=(1-(h+m))*y;return e[0]=x,e[1]=k,e[2]=M,e[3]=0,e[4]=I,e[5]=U,e[6]=P,e[7]=0,e[8]=R,e[9]=O,e[10]=C,e[11]=0,e[12]=n[0]+S-(x*S+I*T+R*E),e[13]=n[1]+T-(k*S+U*T+O*E),e[14]=n[2]+E-(M*S+P*T+C*E),e[15]=1,e}function Tt(e,t){var n=t[0],a=t[1],r=t[2],i=t[3],l=n+n,s=a+a,o=r+r,u=n*l,c=a*l,d=a*s,h=r*l,f=r*s,_=r*o,m=i*l,p=i*s,g=i*o;return e[0]=1-d-_,e[1]=c+g,e[2]=h-p,e[3]=0,e[4]=c-g,e[5]=1-u-_,e[6]=f+m,e[7]=0,e[8]=h+p,e[9]=f-m,e[10]=1-u-d,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Et(e,t,n,a,r,i,l){var s=1/(n-t),o=1/(r-a),u=1/(i-l);return e[0]=2*i*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*i*o,e[6]=0,e[7]=0,e[8]=(n+t)*s,e[9]=(r+a)*o,e[10]=(l+i)*u,e[11]=-1,e[12]=0,e[13]=0,e[14]=l*i*2*u,e[15]=0,e}function xt(e,t,n,a,r){var i,l=1/Math.tan(t/2);return e[0]=l/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=r&&r!==1/0?(i=1/(a-r),e[10]=(r+a)*i,e[14]=2*r*a*i):(e[10]=-1,e[14]=-2*a),e}function kt(e,t,n,a){var r=Math.tan(t.upDegrees*Math.PI/180),i=Math.tan(t.downDegrees*Math.PI/180),l=Math.tan(t.leftDegrees*Math.PI/180),s=Math.tan(t.rightDegrees*Math.PI/180),o=2/(l+s),u=2/(r+i);return e[0]=o,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=u,e[6]=0,e[7]=0,e[8]=-(l-s)*o*.5,e[9]=(r-i)*u*.5,e[10]=a/(n-a),e[11]=-1,e[12]=0,e[13]=0,e[14]=a*n/(n-a),e[15]=0,e}function Mt(e,t,n,a,r,i,l){var s=1/(t-n),o=1/(a-r),u=1/(i-l);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*o,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*u,e[11]=0,e[12]=(t+n)*s,e[13]=(r+a)*o,e[14]=(l+i)*u,e[15]=1,e}function It(e,t,n,a){var r,i,l,s,o,u,c,d,h,_,m=t[0],p=t[1],g=t[2],b=a[0],w=a[1],v=a[2],A=n[0],L=n[1],y=n[2];return Math.abs(m-A)<f&&Math.abs(p-L)<f&&Math.abs(g-y)<f?et(e):(c=m-A,d=p-L,h=g-y,r=w*(h*=_=1/Math.hypot(c,d,h))-v*(d*=_),i=v*(c*=_)-b*h,l=b*d-w*c,(_=Math.hypot(r,i,l))?(r*=_=1/_,i*=_,l*=_):(r=0,i=0,l=0),s=d*l-h*i,o=h*r-c*l,u=c*i-d*r,(_=Math.hypot(s,o,u))?(s*=_=1/_,o*=_,u*=_):(s=0,o=0,u=0),e[0]=r,e[1]=s,e[2]=c,e[3]=0,e[4]=i,e[5]=o,e[6]=d,e[7]=0,e[8]=l,e[9]=u,e[10]=h,e[11]=0,e[12]=-(r*m+i*p+l*g),e[13]=-(s*m+o*p+u*g),e[14]=-(c*m+d*p+h*g),e[15]=1,e)}function Ut(e,t,n,a){var r=t[0],i=t[1],l=t[2],s=a[0],o=a[1],u=a[2],c=r-n[0],d=i-n[1],h=l-n[2],f=c*c+d*d+h*h;f>0&&(c*=f=1/Math.sqrt(f),d*=f,h*=f);var _=o*h-u*d,m=u*c-s*h,p=s*d-o*c;return(f=_*_+m*m+p*p)>0&&(_*=f=1/Math.sqrt(f),m*=f,p*=f),e[0]=_,e[1]=m,e[2]=p,e[3]=0,e[4]=d*p-h*m,e[5]=h*_-c*p,e[6]=c*m-d*_,e[7]=0,e[8]=c,e[9]=d,e[10]=h,e[11]=0,e[12]=r,e[13]=i,e[14]=l,e[15]=1,e}function Pt(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"}function Rt(e){return Math.hypot(e[0],e[1],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15])}function Ot(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e[6]=t[6]+n[6],e[7]=t[7]+n[7],e[8]=t[8]+n[8],e[9]=t[9]+n[9],e[10]=t[10]+n[10],e[11]=t[11]+n[11],e[12]=t[12]+n[12],e[13]=t[13]+n[13],e[14]=t[14]+n[14],e[15]=t[15]+n[15],e}function Ct(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e[4]=t[4]-n[4],e[5]=t[5]-n[5],e[6]=t[6]-n[6],e[7]=t[7]-n[7],e[8]=t[8]-n[8],e[9]=t[9]-n[9],e[10]=t[10]-n[10],e[11]=t[11]-n[11],e[12]=t[12]-n[12],e[13]=t[13]-n[13],e[14]=t[14]-n[14],e[15]=t[15]-n[15],e}function Bt(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e[8]=t[8]*n,e[9]=t[9]*n,e[10]=t[10]*n,e[11]=t[11]*n,e[12]=t[12]*n,e[13]=t[13]*n,e[14]=t[14]*n,e[15]=t[15]*n,e}function Ft(e,t,n,a){return e[0]=t[0]+n[0]*a,e[1]=t[1]+n[1]*a,e[2]=t[2]+n[2]*a,e[3]=t[3]+n[3]*a,e[4]=t[4]+n[4]*a,e[5]=t[5]+n[5]*a,e[6]=t[6]+n[6]*a,e[7]=t[7]+n[7]*a,e[8]=t[8]+n[8]*a,e[9]=t[9]+n[9]*a,e[10]=t[10]+n[10]*a,e[11]=t[11]+n[11]*a,e[12]=t[12]+n[12]*a,e[13]=t[13]+n[13]*a,e[14]=t[14]+n[14]*a,e[15]=t[15]+n[15]*a,e}function Dt(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]}function Gt(e,t){var n=e[0],a=e[1],r=e[2],i=e[3],l=e[4],s=e[5],o=e[6],u=e[7],c=e[8],d=e[9],h=e[10],_=e[11],m=e[12],p=e[13],g=e[14],b=e[15],w=t[0],v=t[1],A=t[2],L=t[3],y=t[4],S=t[5],T=t[6],E=t[7],x=t[8],k=t[9],M=t[10],I=t[11],U=t[12],P=t[13],R=t[14],O=t[15];return Math.abs(n-w)<=f*Math.max(1,Math.abs(n),Math.abs(w))&&Math.abs(a-v)<=f*Math.max(1,Math.abs(a),Math.abs(v))&&Math.abs(r-A)<=f*Math.max(1,Math.abs(r),Math.abs(A))&&Math.abs(i-L)<=f*Math.max(1,Math.abs(i),Math.abs(L))&&Math.abs(l-y)<=f*Math.max(1,Math.abs(l),Math.abs(y))&&Math.abs(s-S)<=f*Math.max(1,Math.abs(s),Math.abs(S))&&Math.abs(o-T)<=f*Math.max(1,Math.abs(o),Math.abs(T))&&Math.abs(u-E)<=f*Math.max(1,Math.abs(u),Math.abs(E))&&Math.abs(c-x)<=f*Math.max(1,Math.abs(c),Math.abs(x))&&Math.abs(d-k)<=f*Math.max(1,Math.abs(d),Math.abs(k))&&Math.abs(h-M)<=f*Math.max(1,Math.abs(h),Math.abs(M))&&Math.abs(_-I)<=f*Math.max(1,Math.abs(_),Math.abs(I))&&Math.abs(m-U)<=f*Math.max(1,Math.abs(m),Math.abs(U))&&Math.abs(p-P)<=f*Math.max(1,Math.abs(p),Math.abs(P))&&Math.abs(g-R)<=f*Math.max(1,Math.abs(g),Math.abs(R))&&Math.abs(b-O)<=f*Math.max(1,Math.abs(b),Math.abs(O))}var Nt=it,Vt=Ct;function jt(){var e=new _(3);return _!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function Ht(e){var t=new _(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function Kt(e){var t=e[0],n=e[1],a=e[2];return Math.hypot(t,n,a)}function zt(e,t,n){var a=new _(3);return a[0]=e,a[1]=t,a[2]=n,a}function Xt(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function qt(e,t,n,a){return e[0]=t,e[1]=n,e[2]=a,e}function Yt(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e}function $t(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e}function Wt(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e}function Zt(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e}function Jt(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e}function Qt(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e}function en(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e[2]=Math.min(t[2],n[2]),e}function tn(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e[2]=Math.max(t[2],n[2]),e}function nn(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e}function an(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e}function rn(e,t,n,a){return e[0]=t[0]+n[0]*a,e[1]=t[1]+n[1]*a,e[2]=t[2]+n[2]*a,e}function ln(e,t){var n=t[0]-e[0],a=t[1]-e[1],r=t[2]-e[2];return Math.hypot(n,a,r)}function sn(e,t){var n=t[0]-e[0],a=t[1]-e[1],r=t[2]-e[2];return n*n+a*a+r*r}function on(e){var t=e[0],n=e[1],a=e[2];return t*t+n*n+a*a}function un(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}function cn(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e}function dn(e,t){var n=t[0],a=t[1],r=t[2],i=n*n+a*a+r*r;return i>0&&(i=1/Math.sqrt(i)),e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e}function hn(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function fn(e,t,n){var a=t[0],r=t[1],i=t[2],l=n[0],s=n[1],o=n[2];return e[0]=r*o-i*s,e[1]=i*l-a*o,e[2]=a*s-r*l,e}function _n(e,t,n,a){var r=t[0],i=t[1],l=t[2];return e[0]=r+a*(n[0]-r),e[1]=i+a*(n[1]-i),e[2]=l+a*(n[2]-l),e}function mn(e,t,n,a,r,i){var l=i*i,s=l*(2*i-3)+1,o=l*(i-2)+i,u=l*(i-1),c=l*(3-2*i);return e[0]=t[0]*s+n[0]*o+a[0]*u+r[0]*c,e[1]=t[1]*s+n[1]*o+a[1]*u+r[1]*c,e[2]=t[2]*s+n[2]*o+a[2]*u+r[2]*c,e}function pn(e,t,n,a,r,i){var l=1-i,s=l*l,o=i*i,u=s*l,c=3*i*s,d=3*o*l,h=o*i;return e[0]=t[0]*u+n[0]*c+a[0]*d+r[0]*h,e[1]=t[1]*u+n[1]*c+a[1]*d+r[1]*h,e[2]=t[2]*u+n[2]*c+a[2]*d+r[2]*h,e}function gn(e,t){t=t||1;var n=2*m()*Math.PI,a=2*m()-1,r=Math.sqrt(1-a*a)*t;return e[0]=Math.cos(n)*r,e[1]=Math.sin(n)*r,e[2]=a*t,e}function bn(e,t,n){var a=t[0],r=t[1],i=t[2],l=n[3]*a+n[7]*r+n[11]*i+n[15];return l=l||1,e[0]=(n[0]*a+n[4]*r+n[8]*i+n[12])/l,e[1]=(n[1]*a+n[5]*r+n[9]*i+n[13])/l,e[2]=(n[2]*a+n[6]*r+n[10]*i+n[14])/l,e}function wn(e,t,n){var a=t[0],r=t[1],i=t[2];return e[0]=a*n[0]+r*n[3]+i*n[6],e[1]=a*n[1]+r*n[4]+i*n[7],e[2]=a*n[2]+r*n[5]+i*n[8],e}function vn(e,t,n){var a=n[0],r=n[1],i=n[2],l=n[3],s=t[0],o=t[1],u=t[2],c=r*u-i*o,d=i*s-a*u,h=a*o-r*s,f=r*h-i*d,_=i*c-a*h,m=a*d-r*c,p=2*l;return c*=p,d*=p,h*=p,f*=2,_*=2,m*=2,e[0]=s+c+f,e[1]=o+d+_,e[2]=u+h+m,e}function An(e,t,n,a){var r=[],i=[];return r[0]=t[0]-n[0],r[1]=t[1]-n[1],r[2]=t[2]-n[2],i[0]=r[0],i[1]=r[1]*Math.cos(a)-r[2]*Math.sin(a),i[2]=r[1]*Math.sin(a)+r[2]*Math.cos(a),e[0]=i[0]+n[0],e[1]=i[1]+n[1],e[2]=i[2]+n[2],e}function Ln(e,t,n,a){var r=[],i=[];return r[0]=t[0]-n[0],r[1]=t[1]-n[1],r[2]=t[2]-n[2],i[0]=r[2]*Math.sin(a)+r[0]*Math.cos(a),i[1]=r[1],i[2]=r[2]*Math.cos(a)-r[0]*Math.sin(a),e[0]=i[0]+n[0],e[1]=i[1]+n[1],e[2]=i[2]+n[2],e}function yn(e,t,n,a){var r=[],i=[];return r[0]=t[0]-n[0],r[1]=t[1]-n[1],r[2]=t[2]-n[2],i[0]=r[0]*Math.cos(a)-r[1]*Math.sin(a),i[1]=r[0]*Math.sin(a)+r[1]*Math.cos(a),i[2]=r[2],e[0]=i[0]+n[0],e[1]=i[1]+n[1],e[2]=i[2]+n[2],e}function Sn(e,t){var n=zt(e[0],e[1],e[2]),a=zt(t[0],t[1],t[2]);dn(n,n),dn(a,a);var r=hn(n,a);return r>1?0:r<-1?Math.PI:Math.acos(r)}function Tn(e){return e[0]=0,e[1]=0,e[2]=0,e}function En(e){return"vec3("+e[0]+", "+e[1]+", "+e[2]+")"}function xn(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]}function kn(e,t){var n=e[0],a=e[1],r=e[2],i=t[0],l=t[1],s=t[2];return Math.abs(n-i)<=f*Math.max(1,Math.abs(n),Math.abs(i))&&Math.abs(a-l)<=f*Math.max(1,Math.abs(a),Math.abs(l))&&Math.abs(r-s)<=f*Math.max(1,Math.abs(r),Math.abs(s))}var Mn,In=$t,Un=Wt,Pn=Zt,Rn=ln,On=sn,Cn=Kt,Bn=on,Fn=(Mn=jt(),function(e,t,n,a,r,i){var l,s;for(t||(t=3),n||(n=0),s=a?Math.min(a*t+n,e.length):e.length,l=n;l<s;l+=t)Mn[0]=e[l],Mn[1]=e[l+1],Mn[2]=e[l+2],r(Mn,Mn,i),e[l]=Mn[0],e[l+1]=Mn[1],e[l+2]=Mn[2];return e});function Dn(){var e=new _(4);return _!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0),e}function Gn(e){var t=new _(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function Nn(e,t,n,a){var r=new _(4);return r[0]=e,r[1]=t,r[2]=n,r[3]=a,r}function Vn(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function jn(e,t,n,a,r){return e[0]=t,e[1]=n,e[2]=a,e[3]=r,e}function Hn(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e}function Kn(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e}function zn(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e[3]=t[3]*n[3],e}function Xn(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e[3]=t[3]/n[3],e}function qn(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e[3]=Math.ceil(t[3]),e}function Yn(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e[3]=Math.floor(t[3]),e}function $n(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e[2]=Math.min(t[2],n[2]),e[3]=Math.min(t[3],n[3]),e}function Wn(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e[2]=Math.max(t[2],n[2]),e[3]=Math.max(t[3],n[3]),e}function Zn(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e[3]=Math.round(t[3]),e}function Jn(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e}function Qn(e,t,n,a){return e[0]=t[0]+n[0]*a,e[1]=t[1]+n[1]*a,e[2]=t[2]+n[2]*a,e[3]=t[3]+n[3]*a,e}function ea(e,t){var n=t[0]-e[0],a=t[1]-e[1],r=t[2]-e[2],i=t[3]-e[3];return Math.hypot(n,a,r,i)}function ta(e,t){var n=t[0]-e[0],a=t[1]-e[1],r=t[2]-e[2],i=t[3]-e[3];return n*n+a*a+r*r+i*i}function na(e){var t=e[0],n=e[1],a=e[2],r=e[3];return Math.hypot(t,n,a,r)}function aa(e){var t=e[0],n=e[1],a=e[2],r=e[3];return t*t+n*n+a*a+r*r}function ra(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e}function ia(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e[3]=1/t[3],e}function la(e,t){var n=t[0],a=t[1],r=t[2],i=t[3],l=n*n+a*a+r*r+i*i;return l>0&&(l=1/Math.sqrt(l)),e[0]=n*l,e[1]=a*l,e[2]=r*l,e[3]=i*l,e}function sa(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}function oa(e,t,n,a){var r=n[0]*a[1]-n[1]*a[0],i=n[0]*a[2]-n[2]*a[0],l=n[0]*a[3]-n[3]*a[0],s=n[1]*a[2]-n[2]*a[1],o=n[1]*a[3]-n[3]*a[1],u=n[2]*a[3]-n[3]*a[2],c=t[0],d=t[1],h=t[2],f=t[3];return e[0]=d*u-h*o+f*s,e[1]=-c*u+h*l-f*i,e[2]=c*o-d*l+f*r,e[3]=-c*s+d*i-h*r,e}function ua(e,t,n,a){var r=t[0],i=t[1],l=t[2],s=t[3];return e[0]=r+a*(n[0]-r),e[1]=i+a*(n[1]-i),e[2]=l+a*(n[2]-l),e[3]=s+a*(n[3]-s),e}function ca(e,t){var n,a,r,i,l,s;t=t||1;do{l=(n=2*m()-1)*n+(a=2*m()-1)*a}while(l>=1);do{s=(r=2*m()-1)*r+(i=2*m()-1)*i}while(s>=1);var o=Math.sqrt((1-l)/s);return e[0]=t*n,e[1]=t*a,e[2]=t*r*o,e[3]=t*i*o,e}function da(e,t,n){var a=t[0],r=t[1],i=t[2],l=t[3];return e[0]=n[0]*a+n[4]*r+n[8]*i+n[12]*l,e[1]=n[1]*a+n[5]*r+n[9]*i+n[13]*l,e[2]=n[2]*a+n[6]*r+n[10]*i+n[14]*l,e[3]=n[3]*a+n[7]*r+n[11]*i+n[15]*l,e}function ha(e,t,n){var a=t[0],r=t[1],i=t[2],l=n[0],s=n[1],o=n[2],u=n[3],c=u*a+s*i-o*r,d=u*r+o*a-l*i,h=u*i+l*r-s*a,f=-l*a-s*r-o*i;return e[0]=c*u+f*-l+d*-o-h*-s,e[1]=d*u+f*-s+h*-l-c*-o,e[2]=h*u+f*-o+c*-s-d*-l,e[3]=t[3],e}function fa(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e}function _a(e){return"vec4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"}function ma(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]}function pa(e,t){var n=e[0],a=e[1],r=e[2],i=e[3],l=t[0],s=t[1],o=t[2],u=t[3];return Math.abs(n-l)<=f*Math.max(1,Math.abs(n),Math.abs(l))&&Math.abs(a-s)<=f*Math.max(1,Math.abs(a),Math.abs(s))&&Math.abs(r-o)<=f*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(i-u)<=f*Math.max(1,Math.abs(i),Math.abs(u))}var ga=Kn,ba=zn,wa=Xn,va=ea,Aa=ta,La=na,ya=aa,Sa=function(){var e=Dn();return function(t,n,a,r,i,l){var s,o;for(n||(n=4),a||(a=0),o=r?Math.min(r*n+a,t.length):t.length,s=a;s<o;s+=n)e[0]=t[s],e[1]=t[s+1],e[2]=t[s+2],e[3]=t[s+3],i(e,e,l),t[s]=e[0],t[s+1]=e[1],t[s+2]=e[2],t[s+3]=e[3];return t}}();function Ta(){var e=new _(4);return _!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e[3]=1,e}function Ea(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e}function xa(e,t,n){n*=.5;var a=Math.sin(n);return e[0]=a*t[0],e[1]=a*t[1],e[2]=a*t[2],e[3]=Math.cos(n),e}function ka(e,t){var n=2*Math.acos(t[3]),a=Math.sin(n/2);return a>f?(e[0]=t[0]/a,e[1]=t[1]/a,e[2]=t[2]/a):(e[0]=1,e[1]=0,e[2]=0),n}function Ma(e,t){var n=rr(e,t);return Math.acos(2*n*n-1)}function Ia(e,t,n){var a=t[0],r=t[1],i=t[2],l=t[3],s=n[0],o=n[1],u=n[2],c=n[3];return e[0]=a*c+l*s+r*u-i*o,e[1]=r*c+l*o+i*s-a*u,e[2]=i*c+l*u+a*o-r*s,e[3]=l*c-a*s-r*o-i*u,e}function Ua(e,t,n){n*=.5;var a=t[0],r=t[1],i=t[2],l=t[3],s=Math.sin(n),o=Math.cos(n);return e[0]=a*o+l*s,e[1]=r*o+i*s,e[2]=i*o-r*s,e[3]=l*o-a*s,e}function Pa(e,t,n){n*=.5;var a=t[0],r=t[1],i=t[2],l=t[3],s=Math.sin(n),o=Math.cos(n);return e[0]=a*o-i*s,e[1]=r*o+l*s,e[2]=i*o+a*s,e[3]=l*o-r*s,e}function Ra(e,t,n){n*=.5;var a=t[0],r=t[1],i=t[2],l=t[3],s=Math.sin(n),o=Math.cos(n);return e[0]=a*o+r*s,e[1]=r*o-a*s,e[2]=i*o+l*s,e[3]=l*o-i*s,e}function Oa(e,t){var n=t[0],a=t[1],r=t[2];return e[0]=n,e[1]=a,e[2]=r,e[3]=Math.sqrt(Math.abs(1-n*n-a*a-r*r)),e}function Ca(e,t){var n=t[0],a=t[1],r=t[2],i=t[3],l=Math.sqrt(n*n+a*a+r*r),s=Math.exp(i),o=l>0?s*Math.sin(l)/l:0;return e[0]=n*o,e[1]=a*o,e[2]=r*o,e[3]=s*Math.cos(l),e}function Ba(e,t){var n=t[0],a=t[1],r=t[2],i=t[3],l=Math.sqrt(n*n+a*a+r*r),s=l>0?Math.atan2(l,i)/l:0;return e[0]=n*s,e[1]=a*s,e[2]=r*s,e[3]=.5*Math.log(n*n+a*a+r*r+i*i),e}function Fa(e,t,n){return Ba(e,t),ar(e,e,n),Ca(e,e),e}function Da(e,t,n,a){var r,i,l,s,o,u=t[0],c=t[1],d=t[2],h=t[3],_=n[0],m=n[1],p=n[2],g=n[3];return(i=u*_+c*m+d*p+h*g)<0&&(i=-i,_=-_,m=-m,p=-p,g=-g),1-i>f?(r=Math.acos(i),l=Math.sin(r),s=Math.sin((1-a)*r)/l,o=Math.sin(a*r)/l):(s=1-a,o=a),e[0]=s*u+o*_,e[1]=s*c+o*m,e[2]=s*d+o*p,e[3]=s*h+o*g,e}function Ga(e){var t=m(),n=m(),a=m(),r=Math.sqrt(1-t),i=Math.sqrt(t);return e[0]=r*Math.sin(2*Math.PI*n),e[1]=r*Math.cos(2*Math.PI*n),e[2]=i*Math.sin(2*Math.PI*a),e[3]=i*Math.cos(2*Math.PI*a),e}function Na(e,t){var n=t[0],a=t[1],r=t[2],i=t[3],l=n*n+a*a+r*r+i*i,s=l?1/l:0;return e[0]=-n*s,e[1]=-a*s,e[2]=-r*s,e[3]=i*s,e}function Va(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e}function ja(e,t){var n,a=t[0]+t[4]+t[8];if(a>0)n=Math.sqrt(a+1),e[3]=.5*n,n=.5/n,e[0]=(t[5]-t[7])*n,e[1]=(t[6]-t[2])*n,e[2]=(t[1]-t[3])*n;else{var r=0;t[4]>t[0]&&(r=1),t[8]>t[3*r+r]&&(r=2);var i=(r+1)%3,l=(r+2)%3;n=Math.sqrt(t[3*r+r]-t[3*i+i]-t[3*l+l]+1),e[r]=.5*n,n=.5/n,e[3]=(t[3*i+l]-t[3*l+i])*n,e[i]=(t[3*i+r]+t[3*r+i])*n,e[l]=(t[3*l+r]+t[3*r+l])*n}return e}function Ha(e,t,n,a){var r=.5*Math.PI/180;t*=r,n*=r,a*=r;var i=Math.sin(t),l=Math.cos(t),s=Math.sin(n),o=Math.cos(n),u=Math.sin(a),c=Math.cos(a);return e[0]=i*o*c-l*s*u,e[1]=l*s*c+i*o*u,e[2]=l*o*u-i*s*c,e[3]=l*o*c+i*s*u,e}function Ka(e){return"quat("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"}var za,Xa,qa,Ya,$a,Wa,Za=Gn,Ja=Nn,Qa=Vn,er=jn,tr=Hn,nr=Ia,ar=Jn,rr=sa,ir=ua,lr=na,sr=lr,or=aa,ur=or,cr=la,dr=ma,hr=pa,fr=(za=jt(),Xa=zt(1,0,0),qa=zt(0,1,0),function(e,t,n){var a=hn(t,n);return a<-.999999?(fn(za,Xa,t),Cn(za)<1e-6&&fn(za,qa,t),dn(za,za),xa(e,za,Math.PI),e):a>.999999?(e[0]=0,e[1]=0,e[2]=0,e[3]=1,e):(fn(za,t,n),e[0]=za[0],e[1]=za[1],e[2]=za[2],e[3]=1+a,cr(e,e))}),_r=(Ya=Ta(),$a=Ta(),function(e,t,n,a,r,i){return Da(Ya,t,r,i),Da($a,n,a,i),Da(e,Ya,$a,2*i*(1-i)),e}),mr=(Wa=ge(),function(e,t,n,a){return Wa[0]=n[0],Wa[3]=n[1],Wa[6]=n[2],Wa[1]=a[0],Wa[4]=a[1],Wa[7]=a[2],Wa[2]=-t[0],Wa[5]=-t[1],Wa[8]=-t[2],cr(e,ja(e,Wa))});function pr(){var e=new _(8);return _!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[4]=0,e[5]=0,e[6]=0,e[7]=0),e[3]=1,e}function gr(e){var t=new _(8);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t}function br(e,t,n,a,r,i,l,s){var o=new _(8);return o[0]=e,o[1]=t,o[2]=n,o[3]=a,o[4]=r,o[5]=i,o[6]=l,o[7]=s,o}function wr(e,t,n,a,r,i,l){var s=new _(8);s[0]=e,s[1]=t,s[2]=n,s[3]=a;var o=.5*r,u=.5*i,c=.5*l;return s[4]=o*a+u*n-c*t,s[5]=u*a+c*e-o*n,s[6]=c*a+o*t-u*e,s[7]=-o*e-u*t-c*n,s}function vr(e,t,n){var a=.5*n[0],r=.5*n[1],i=.5*n[2],l=t[0],s=t[1],o=t[2],u=t[3];return e[0]=l,e[1]=s,e[2]=o,e[3]=u,e[4]=a*u+r*o-i*s,e[5]=r*u+i*l-a*o,e[6]=i*u+a*s-r*l,e[7]=-a*l-r*s-i*o,e}function Ar(e,t){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e[4]=.5*t[0],e[5]=.5*t[1],e[6]=.5*t[2],e[7]=0,e}function Lr(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=0,e[5]=0,e[6]=0,e[7]=0,e}function yr(e,t){var n=Ta();Lt(n,t);var a=new _(3);return vt(a,t),vr(e,n,a),e}function Sr(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e}function Tr(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e[6]=0,e[7]=0,e}function Er(e,t,n,a,r,i,l,s,o){return e[0]=t,e[1]=n,e[2]=a,e[3]=r,e[4]=i,e[5]=l,e[6]=s,e[7]=o,e}var xr=Qa;function kr(e,t){return e[0]=t[4],e[1]=t[5],e[2]=t[6],e[3]=t[7],e}var Mr=Qa;function Ir(e,t){return e[4]=t[0],e[5]=t[1],e[6]=t[2],e[7]=t[3],e}function Ur(e,t){var n=t[4],a=t[5],r=t[6],i=t[7],l=-t[0],s=-t[1],o=-t[2],u=t[3];return e[0]=2*(n*u+i*l+a*o-r*s),e[1]=2*(a*u+i*s+r*l-n*o),e[2]=2*(r*u+i*o+n*s-a*l),e}function Pr(e,t,n){var a=t[0],r=t[1],i=t[2],l=t[3],s=.5*n[0],o=.5*n[1],u=.5*n[2],c=t[4],d=t[5],h=t[6],f=t[7];return e[0]=a,e[1]=r,e[2]=i,e[3]=l,e[4]=l*s+r*u-i*o+c,e[5]=l*o+i*s-a*u+d,e[6]=l*u+a*o-r*s+h,e[7]=-a*s-r*o-i*u+f,e}function Rr(e,t,n){var a=-t[0],r=-t[1],i=-t[2],l=t[3],s=t[4],o=t[5],u=t[6],c=t[7],d=s*l+c*a+o*i-u*r,h=o*l+c*r+u*a-s*i,f=u*l+c*i+s*r-o*a,_=c*l-s*a-o*r-u*i;return Ua(e,t,n),a=e[0],r=e[1],i=e[2],l=e[3],e[4]=d*l+_*a+h*i-f*r,e[5]=h*l+_*r+f*a-d*i,e[6]=f*l+_*i+d*r-h*a,e[7]=_*l-d*a-h*r-f*i,e}function Or(e,t,n){var a=-t[0],r=-t[1],i=-t[2],l=t[3],s=t[4],o=t[5],u=t[6],c=t[7],d=s*l+c*a+o*i-u*r,h=o*l+c*r+u*a-s*i,f=u*l+c*i+s*r-o*a,_=c*l-s*a-o*r-u*i;return Pa(e,t,n),a=e[0],r=e[1],i=e[2],l=e[3],e[4]=d*l+_*a+h*i-f*r,e[5]=h*l+_*r+f*a-d*i,e[6]=f*l+_*i+d*r-h*a,e[7]=_*l-d*a-h*r-f*i,e}function Cr(e,t,n){var a=-t[0],r=-t[1],i=-t[2],l=t[3],s=t[4],o=t[5],u=t[6],c=t[7],d=s*l+c*a+o*i-u*r,h=o*l+c*r+u*a-s*i,f=u*l+c*i+s*r-o*a,_=c*l-s*a-o*r-u*i;return Ra(e,t,n),a=e[0],r=e[1],i=e[2],l=e[3],e[4]=d*l+_*a+h*i-f*r,e[5]=h*l+_*r+f*a-d*i,e[6]=f*l+_*i+d*r-h*a,e[7]=_*l-d*a-h*r-f*i,e}function Br(e,t,n){var a=n[0],r=n[1],i=n[2],l=n[3],s=t[0],o=t[1],u=t[2],c=t[3];return e[0]=s*l+c*a+o*i-u*r,e[1]=o*l+c*r+u*a-s*i,e[2]=u*l+c*i+s*r-o*a,e[3]=c*l-s*a-o*r-u*i,s=t[4],o=t[5],u=t[6],c=t[7],e[4]=s*l+c*a+o*i-u*r,e[5]=o*l+c*r+u*a-s*i,e[6]=u*l+c*i+s*r-o*a,e[7]=c*l-s*a-o*r-u*i,e}function Fr(e,t,n){var a=t[0],r=t[1],i=t[2],l=t[3],s=n[0],o=n[1],u=n[2],c=n[3];return e[0]=a*c+l*s+r*u-i*o,e[1]=r*c+l*o+i*s-a*u,e[2]=i*c+l*u+a*o-r*s,e[3]=l*c-a*s-r*o-i*u,s=n[4],o=n[5],u=n[6],c=n[7],e[4]=a*c+l*s+r*u-i*o,e[5]=r*c+l*o+i*s-a*u,e[6]=i*c+l*u+a*o-r*s,e[7]=l*c-a*s-r*o-i*u,e}function Dr(e,t,n,a){if(Math.abs(a)<f)return Sr(e,t);var r=Math.hypot(n[0],n[1],n[2]);a*=.5;var i=Math.sin(a),l=i*n[0]/r,s=i*n[1]/r,o=i*n[2]/r,u=Math.cos(a),c=t[0],d=t[1],h=t[2],_=t[3];e[0]=c*u+_*l+d*o-h*s,e[1]=d*u+_*s+h*l-c*o,e[2]=h*u+_*o+c*s-d*l,e[3]=_*u-c*l-d*s-h*o;var m=t[4],p=t[5],g=t[6],b=t[7];return e[4]=m*u+b*l+p*o-g*s,e[5]=p*u+b*s+g*l-m*o,e[6]=g*u+b*o+m*s-p*l,e[7]=b*u-m*l-p*s-g*o,e}function Gr(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e[6]=t[6]+n[6],e[7]=t[7]+n[7],e}function Nr(e,t,n){var a=t[0],r=t[1],i=t[2],l=t[3],s=n[4],o=n[5],u=n[6],c=n[7],d=t[4],h=t[5],f=t[6],_=t[7],m=n[0],p=n[1],g=n[2],b=n[3];return e[0]=a*b+l*m+r*g-i*p,e[1]=r*b+l*p+i*m-a*g,e[2]=i*b+l*g+a*p-r*m,e[3]=l*b-a*m-r*p-i*g,e[4]=a*c+l*s+r*u-i*o+d*b+_*m+h*g-f*p,e[5]=r*c+l*o+i*s-a*u+h*b+_*p+f*m-d*g,e[6]=i*c+l*u+a*o-r*s+f*b+_*g+d*p-h*m,e[7]=l*c-a*s-r*o-i*u+_*b-d*m-h*p-f*g,e}var Vr=Nr;function jr(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e}var Hr=rr;function Kr(e,t,n,a){var r=1-a;return Hr(t,n)<0&&(a=-a),e[0]=t[0]*r+n[0]*a,e[1]=t[1]*r+n[1]*a,e[2]=t[2]*r+n[2]*a,e[3]=t[3]*r+n[3]*a,e[4]=t[4]*r+n[4]*a,e[5]=t[5]*r+n[5]*a,e[6]=t[6]*r+n[6]*a,e[7]=t[7]*r+n[7]*a,e}function zr(e,t){var n=$r(t);return e[0]=-t[0]/n,e[1]=-t[1]/n,e[2]=-t[2]/n,e[3]=t[3]/n,e[4]=-t[4]/n,e[5]=-t[5]/n,e[6]=-t[6]/n,e[7]=t[7]/n,e}function Xr(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e[4]=-t[4],e[5]=-t[5],e[6]=-t[6],e[7]=t[7],e}var qr=lr,Yr=qr,$r=or,Wr=$r;function Zr(e,t){var n=$r(t);if(n>0){n=Math.sqrt(n);var a=t[0]/n,r=t[1]/n,i=t[2]/n,l=t[3]/n,s=t[4],o=t[5],u=t[6],c=t[7],d=a*s+r*o+i*u+l*c;e[0]=a,e[1]=r,e[2]=i,e[3]=l,e[4]=(s-a*d)/n,e[5]=(o-r*d)/n,e[6]=(u-i*d)/n,e[7]=(c-l*d)/n}return e}function Jr(e){return"quat2("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+")"}function Qr(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]}function ei(e,t){var n=e[0],a=e[1],r=e[2],i=e[3],l=e[4],s=e[5],o=e[6],u=e[7],c=t[0],d=t[1],h=t[2],_=t[3],m=t[4],p=t[5],g=t[6],b=t[7];return Math.abs(n-c)<=f*Math.max(1,Math.abs(n),Math.abs(c))&&Math.abs(a-d)<=f*Math.max(1,Math.abs(a),Math.abs(d))&&Math.abs(r-h)<=f*Math.max(1,Math.abs(r),Math.abs(h))&&Math.abs(i-_)<=f*Math.max(1,Math.abs(i),Math.abs(_))&&Math.abs(l-m)<=f*Math.max(1,Math.abs(l),Math.abs(m))&&Math.abs(s-p)<=f*Math.max(1,Math.abs(s),Math.abs(p))&&Math.abs(o-g)<=f*Math.max(1,Math.abs(o),Math.abs(g))&&Math.abs(u-b)<=f*Math.max(1,Math.abs(u),Math.abs(b))}function ti(){var e=new _(2);return _!=Float32Array&&(e[0]=0,e[1]=0),e}function ni(e){var t=new _(2);return t[0]=e[0],t[1]=e[1],t}function ai(e,t){var n=new _(2);return n[0]=e,n[1]=t,n}function ri(e,t){return e[0]=t[0],e[1]=t[1],e}function ii(e,t,n){return e[0]=t,e[1]=n,e}function li(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e}function si(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e}function oi(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e}function ui(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e}function ci(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e}function di(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e}function hi(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e}function fi(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e}function _i(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e}function mi(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e}function pi(e,t,n,a){return e[0]=t[0]+n[0]*a,e[1]=t[1]+n[1]*a,e}function gi(e,t){var n=t[0]-e[0],a=t[1]-e[1];return Math.hypot(n,a)}function bi(e,t){var n=t[0]-e[0],a=t[1]-e[1];return n*n+a*a}function wi(e){var t=e[0],n=e[1];return Math.hypot(t,n)}function vi(e){var t=e[0],n=e[1];return t*t+n*n}function Ai(e,t){return e[0]=-t[0],e[1]=-t[1],e}function Li(e,t){return e[0]=1/t[0],e[1]=1/t[1],e}function yi(e,t){var n=t[0],a=t[1],r=n*n+a*a;return r>0&&(r=1/Math.sqrt(r)),e[0]=t[0]*r,e[1]=t[1]*r,e}function Si(e,t){return e[0]*t[0]+e[1]*t[1]}function Ti(e,t,n){var a=t[0]*n[1]-t[1]*n[0];return e[0]=e[1]=0,e[2]=a,e}function Ei(e,t,n,a){var r=t[0],i=t[1];return e[0]=r+a*(n[0]-r),e[1]=i+a*(n[1]-i),e}function xi(e,t){t=t||1;var n=2*m()*Math.PI;return e[0]=Math.cos(n)*t,e[1]=Math.sin(n)*t,e}function ki(e,t,n){var a=t[0],r=t[1];return e[0]=n[0]*a+n[2]*r,e[1]=n[1]*a+n[3]*r,e}function Mi(e,t,n){var a=t[0],r=t[1];return e[0]=n[0]*a+n[2]*r+n[4],e[1]=n[1]*a+n[3]*r+n[5],e}function Ii(e,t,n){var a=t[0],r=t[1];return e[0]=n[0]*a+n[3]*r+n[6],e[1]=n[1]*a+n[4]*r+n[7],e}function Ui(e,t,n){var a=t[0],r=t[1];return e[0]=n[0]*a+n[4]*r+n[12],e[1]=n[1]*a+n[5]*r+n[13],e}function Pi(e,t,n,a){var r=t[0]-n[0],i=t[1]-n[1],l=Math.sin(a),s=Math.cos(a);return e[0]=r*s-i*l+n[0],e[1]=r*l+i*s+n[1],e}function Ri(e,t){var n=e[0],a=e[1],r=t[0],i=t[1],l=n*n+a*a;l>0&&(l=1/Math.sqrt(l));var s=r*r+i*i;s>0&&(s=1/Math.sqrt(s));var o=(n*r+a*i)*l*s;return o>1?0:o<-1?Math.PI:Math.acos(o)}function Oi(e){return e[0]=0,e[1]=0,e}function Ci(e){return"vec2("+e[0]+", "+e[1]+")"}function Bi(e,t){return e[0]===t[0]&&e[1]===t[1]}function Fi(e,t){var n=e[0],a=e[1],r=t[0],i=t[1];return Math.abs(n-r)<=f*Math.max(1,Math.abs(n),Math.abs(r))&&Math.abs(a-i)<=f*Math.max(1,Math.abs(a),Math.abs(i))}var Di=wi,Gi=si,Ni=oi,Vi=ui,ji=gi,Hi=bi,Ki=vi,zi=function(){var e=ti();return function(t,n,a,r,i,l){var s,o;for(n||(n=2),a||(a=0),o=r?Math.min(r*n+a,t.length):t.length,s=a;s<o;s+=n)e[0]=t[s],e[1]=t[s+1],i(e,e,l),t[s]=e[0],t[s+1]=e[1];return t}}();n.d(t,"glMatrix",(function(){return a})),n.d(t,"mat2",(function(){return r})),n.d(t,"mat2d",(function(){return i})),n.d(t,"mat3",(function(){return l})),n.d(t,"mat4",(function(){return s})),n.d(t,"quat",(function(){return c})),n.d(t,"quat2",(function(){return d})),n.d(t,"vec2",(function(){return h})),n.d(t,"vec3",(function(){return o})),n.d(t,"vec4",(function(){return u}))},function(e,t,n){"use strict";let a,r,i;if(a="function"==typeof Uint8Array.from?Uint8Array.from.bind(Uint8Array):function(e){let t=0,n=e.length,a=new Uint8Array(n);for(;n>t;)a[t]=e[t++];return a},"function"==typeof(new Uint8Array).indexOf)r=function(e,t,n){return e.indexOf(t,n)};else{let e=[].indexOf;if(0!==e.call(new Uint8Array(1),0))throw Error("missing .indexOf");r=function(t,n,a){return e.call(t,n,a)}}i="function"==typeof Uint8Array.of?Uint8Array.of.bind(Uint8Array):function(){return a(arguments)};const l=function(e){return e instanceof Uint8Array},s="cannot convert invalid utf8 to javascript string",o=";,/?:@&=+$abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789,-_.!~*'()#".split("").reduce((function(e,t){return e[t.charCodeAt(0)]=!0,e}),{}),u={},c=function(e,t){if("string"!=typeof e)throw new TypeError("to_luastring expects a javascript string");if(t){let t=u[e];if(l(t))return t}let n=e.length,r=Array(n),i=0;for(let t=0;t<n;++t){let a=e.charCodeAt(t);if(a<=127)r[i++]=a;else if(a<=2047)r[i++]=192|a>>6,r[i++]=128|63&a;else{if(a>=55296&&a<=56319&&t+1<n){let n=e.charCodeAt(t+1);n>=56320&&n<=57343&&(t++,a=1024*(a-55296)+n+9216)}a<=65535?(r[i++]=224|a>>12,r[i++]=128|a>>6&63,r[i++]=128|63&a):(r[i++]=240|a>>18,r[i++]=128|a>>12&63,r[i++]=128|a>>6&63,r[i++]=128|63&a)}}return r=a(r),t&&(u[e]=r),r};e.exports.luastring_from=a,e.exports.luastring_indexOf=r,e.exports.luastring_of=i,e.exports.is_luastring=l,e.exports.luastring_eq=function(e,t){if(e!==t){let n=e.length;if(n!==t.length)return!1;for(let a=0;a<n;a++)if(e[a]!==t[a])return!1}return!0},e.exports.to_jsstring=function(e,t,n,a){if(!l(e))throw new TypeError("to_jsstring expects a Uint8Array");n=void 0===n?e.length:Math.min(e.length,n);let r="";for(let i=void 0!==t?t:0;i<n;){let t=e[i++];if(t<128)r+=String.fromCharCode(t);else if(t<194||t>244){if(!a)throw RangeError(s);r+=""}else if(t<=223){if(i>=n){if(!a)throw RangeError(s);r+="";continue}let l=e[i++];if(128!=(192&l)){if(!a)throw RangeError(s);r+="";continue}r+=String.fromCharCode(((31&t)<<6)+(63&l))}else if(t<=239){if(i+1>=n){if(!a)throw RangeError(s);r+="";continue}let l=e[i++];if(128!=(192&l)){if(!a)throw RangeError(s);r+="";continue}let o=e[i++];if(128!=(192&o)){if(!a)throw RangeError(s);r+="";continue}let u=((15&t)<<12)+((63&l)<<6)+(63&o);if(u<=65535)r+=String.fromCharCode(u);else{u-=65536;let e=55296+(u>>10),t=u%1024+56320;r+=String.fromCharCode(e,t)}}else{if(i+2>=n){if(!a)throw RangeError(s);r+="";continue}let l=e[i++];if(128!=(192&l)){if(!a)throw RangeError(s);r+="";continue}let o=e[i++];if(128!=(192&o)){if(!a)throw RangeError(s);r+="";continue}let u=e[i++];if(128!=(192&u)){if(!a)throw RangeError(s);r+="";continue}let c=((7&t)<<18)+((63&l)<<12)+((63&o)<<6)+(63&u);c-=65536;let d=55296+(c>>10),h=c%1024+56320;r+=String.fromCharCode(d,h)}}return r},e.exports.to_uristring=function(e){if(!l(e))throw new TypeError("to_uristring expects a Uint8Array");let t="";for(let n=0;n<e.length;n++){let a=e[n];o[a]?t+=String.fromCharCode(a):t+="%"+(a<16?"0":"")+a.toString(16)}return t},e.exports.to_luastring=c,e.exports.from_userstring=function(e){if(!l(e)){if("string"!=typeof e)throw new TypeError("expects an array of bytes or javascript string");e=c(e)}return e};const d=c("Lua");e.exports.LUA_SIGNATURE=d,e.exports.LUA_VERSION_MAJOR="5",e.exports.LUA_VERSION_MINOR="3",e.exports.LUA_VERSION_NUM=503,e.exports.LUA_VERSION_RELEASE="4",e.exports.LUA_VERSION="Lua 5.3",e.exports.LUA_RELEASE="Lua 5.3.4",e.exports.LUA_COPYRIGHT="Lua 5.3.4  Copyright (C) 1994-2017 Lua.org, PUC-Rio",e.exports.LUA_AUTHORS="R. Ierusalimschy, L. H. de Figueiredo, W. Celes";const h={LUA_TNONE:-1,LUA_TNIL:0,LUA_TBOOLEAN:1,LUA_TLIGHTUSERDATA:2,LUA_TNUMBER:3,LUA_TSTRING:4,LUA_TTABLE:5,LUA_TFUNCTION:6,LUA_TUSERDATA:7,LUA_TTHREAD:8,LUA_NUMTAGS:9};h.LUA_TSHRSTR=0|h.LUA_TSTRING,h.LUA_TLNGSTR=16|h.LUA_TSTRING,h.LUA_TNUMFLT=0|h.LUA_TNUMBER,h.LUA_TNUMINT=16|h.LUA_TNUMBER,h.LUA_TLCL=0|h.LUA_TFUNCTION,h.LUA_TLCF=16|h.LUA_TFUNCTION,h.LUA_TCCL=32|h.LUA_TFUNCTION;const{LUAI_MAXSTACK:f}=n(17),_=-f-1e3;e.exports.LUA_HOOKCALL=0,e.exports.LUA_HOOKCOUNT=3,e.exports.LUA_HOOKLINE=2,e.exports.LUA_HOOKRET=1,e.exports.LUA_HOOKTAILCALL=4,e.exports.LUA_MASKCALL=1,e.exports.LUA_MASKCOUNT=8,e.exports.LUA_MASKLINE=4,e.exports.LUA_MASKRET=2,e.exports.LUA_MINSTACK=20,e.exports.LUA_MULTRET=-1,e.exports.LUA_OPADD=0,e.exports.LUA_OPBAND=7,e.exports.LUA_OPBNOT=13,e.exports.LUA_OPBOR=8,e.exports.LUA_OPBXOR=9,e.exports.LUA_OPDIV=5,e.exports.LUA_OPEQ=0,e.exports.LUA_OPIDIV=6,e.exports.LUA_OPLE=2,e.exports.LUA_OPLT=1,e.exports.LUA_OPMOD=3,e.exports.LUA_OPMUL=2,e.exports.LUA_OPPOW=4,e.exports.LUA_OPSHL=10,e.exports.LUA_OPSHR=11,e.exports.LUA_OPSUB=1,e.exports.LUA_OPUNM=12,e.exports.LUA_REGISTRYINDEX=_,e.exports.LUA_RIDX_GLOBALS=2,e.exports.LUA_RIDX_LAST=2,e.exports.LUA_RIDX_MAINTHREAD=1,e.exports.constant_types=h,e.exports.lua_Debug=class{constructor(){this.event=NaN,this.name=null,this.namewhat=null,this.what=null,this.source=null,this.currentline=NaN,this.linedefined=NaN,this.lastlinedefined=NaN,this.nups=NaN,this.nparams=NaN,this.isvararg=NaN,this.istailcall=NaN,this.short_src=null,this.i_ci=null}},e.exports.lua_upvalueindex=function(e){return _-e},e.exports.thread_status={LUA_OK:0,LUA_YIELD:1,LUA_ERRRUN:2,LUA_ERRSYNTAX:3,LUA_ERRMEM:4,LUA_ERRGCMM:5,LUA_ERRERR:6}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(e,t){this.index=t,this.entries=e.readUint32(),this.id=e.readUint32(),this.flags=e.readUint32()}getAll(){let e=this.id;return 0===e||0===this.entries?[]:this.index[e].entries}get(){let e=this.id;if(0!==e&&0!==this.entries){let t=this.index[e].entries;if(t)return t[0]}}}},function(e,t,n){"use strict";const{luai_apicheck:a}=n(17),r=function(e){if(!e)throw Error("assertion failed")};e.exports.lua_assert=r,e.exports.luai_apicheck=a||function(e,t){return r(t)};e.exports.api_check=function(e,t,n){return a(e,t&&n)};e.exports.LUAI_MAXCCALLS=200;e.exports.LUA_MINBUFFER=32;e.exports.luai_nummod=function(e,t,n){let a=t%n;return a*n<0&&(a+=n),a};e.exports.MAX_INT=2147483647;e.exports.MIN_INT=-2147483648},function(e,t,n){"use strict";const{LUA_OPADD:a,LUA_OPBAND:r,LUA_OPBNOT:i,LUA_OPBOR:l,LUA_OPBXOR:s,LUA_OPDIV:o,LUA_OPIDIV:u,LUA_OPMOD:c,LUA_OPMUL:d,LUA_OPPOW:h,LUA_OPSHL:f,LUA_OPSHR:_,LUA_OPSUB:m,LUA_OPUNM:p,constant_types:{LUA_NUMTAGS:g,LUA_TBOOLEAN:b,LUA_TCCL:w,LUA_TFUNCTION:v,LUA_TLCF:A,LUA_TLCL:L,LUA_TLIGHTUSERDATA:y,LUA_TLNGSTR:S,LUA_TNIL:T,LUA_TNUMBER:E,LUA_TNUMFLT:x,LUA_TNUMINT:k,LUA_TSHRSTR:M,LUA_TSTRING:I,LUA_TTABLE:U,LUA_TTHREAD:P,LUA_TUSERDATA:R},from_userstring:O,luastring_indexOf:C,luastring_of:B,to_jsstring:F,to_luastring:D}=n(3),{lisdigit:G,lisprint:N,lisspace:V,lisxdigit:j}=n(122),H=n(18),K=n(10),z=n(19),{luaS_bless:X,luaS_new:q}=n(15),Y=n(14),{LUA_COMPAT_FLOATSTRING:$,ldexp:W,lua_integer2str:Z,lua_number2str:J}=n(17),Q=n(27),{MAX_INT:ee,luai_nummod:te,lua_assert:ne}=n(5),ae=n(26),re=g,ie=g+1;class le{constructor(e,t){this.type=e,this.value=t}ttype(){return 63&this.type}ttnov(){return 15&this.type}checktag(e){return this.type===e}checktype(e){return this.ttnov()===e}ttisnumber(){return this.checktype(E)}ttisfloat(){return this.checktag(x)}ttisinteger(){return this.checktag(k)}ttisnil(){return this.checktag(T)}ttisboolean(){return this.checktag(b)}ttislightuserdata(){return this.checktag(y)}ttisstring(){return this.checktype(I)}ttisshrstring(){return this.checktag(M)}ttislngstring(){return this.checktag(S)}ttistable(){return this.checktag(U)}ttisfunction(){return this.checktype(v)}ttisclosure(){return(31&this.type)===v}ttisCclosure(){return this.checktag(w)}ttisLclosure(){return this.checktag(L)}ttislcf(){return this.checktag(A)}ttisfulluserdata(){return this.checktag(R)}ttisthread(){return this.checktag(P)}ttisdeadkey(){return this.checktag(ie)}l_isfalse(){return this.ttisnil()||this.ttisboolean()&&!1===this.value}setfltvalue(e){this.type=x,this.value=e}chgfltvalue(e){ne(this.type==x),this.value=e}setivalue(e){this.type=k,this.value=e}chgivalue(e){ne(this.type==k),this.value=e}setnilvalue(){this.type=T,this.value=null}setfvalue(e){this.type=A,this.value=e}setpvalue(e){this.type=y,this.value=e}setbvalue(e){this.type=b,this.value=e}setsvalue(e){this.type=S,this.value=e}setuvalue(e){this.type=R,this.value=e}setthvalue(e){this.type=P,this.value=e}setclLvalue(e){this.type=L,this.value=e}setclCvalue(e){this.type=w,this.value=e}sethvalue(e){this.type=U,this.value=e}setdeadvalue(){this.type=ie,this.value=null}setfrom(e){this.type=e.type,this.value=e.value}tsvalue(){return ne(this.ttisstring()),this.value}svalue(){return this.tsvalue().getstr()}vslen(){return this.tsvalue().tsslen()}jsstring(e,t){return F(this.svalue(),e,t,!0)}}const se=function(e,t,n){e.stack[t].setsvalue(n)},oe=new le(T,null);Object.freeze(oe),e.exports.luaO_nilobject=oe;class ue{constructor(e,t){this.id=e.l_G.id_counter++,this.p=null,this.nupvalues=t,this.upvals=new Array(t)}}class ce{constructor(e,t,n){for(this.id=e.l_G.id_counter++,this.f=t,this.nupvalues=n,this.upvalue=new Array(n);n--;)this.upvalue[n]=new le(T,null)}}class de{constructor(e,t){this.id=e.l_G.id_counter++,this.metatable=null,this.uservalue=new le(T,null),this.len=t,this.data=Object.create(null)}}const he=D("..."),fe=D('[string "'),_e=D('"]'),me=function(e){return G(e)?e-48:(223&e)-55},pe=function(e,t){let n=1;if(ne(t<=1114111),t<128)e[7]=t;else{let a=63;do{e[8-n++]=128|63&t,t>>=6,a>>=1}while(t>a);e[8-n]=~a<<1|t}return n},ge=function(e,t){let n="x"===t?function(e){let t,n=0,a=0,r=0,i=0,l=0,s=!1;for(;V(e[n]);)n++;if((t=45===e[n])?n++:43===e[n]&&n++,48!==e[n]||120!==e[n+1]&&88!==e[n+1])return null;for(n+=2;;n++)if(46===e[n]){if(s)break;s=!0}else{if(!j(e[n]))break;0===r&&48===e[n]?i++:++r<=30?a=16*a+me(e[n]):l++,s&&l--}if(i+r===0)return null;if(l*=4,112===e[n]||80===e[n]){let t,a=0;if(n++,(t=45===e[n])?n++:43===e[n]&&n++,!G(e[n]))return null;for(;G(e[n]);)a=10*a+e[n++]-48;t&&(a=-a),l+=a}return t&&(a=-a),{n:W(a,l),i:n}}(e):function(e){try{e=F(e)}catch(e){return null}let t=/^[\t\v\f \n\r]*[+-]?(?:[0-9]+\.?[0-9]*|\.[0-9]*)(?:[eE][+-]?[0-9]+)?/.exec(e);if(!t)return null;let n=parseFloat(t[0]);return isNaN(n)?null:{n:n,i:t[0].length}}(e);if(null===n)return null;for(;V(e[n.i]);)n.i++;return n.i===e.length||0===e[n.i]?n:null},be=[46,120,88,110,78],we={46:".",120:"x",88:"x",110:"n",78:"n"},ve=Math.floor(ee/10),Ae=ee%10,Le=function(e,t){let n;if(t.ttisinteger())n=D(Z(t.value));else{let e=J(t.value);!$&&/^[-0123456789]+$/.test(e)&&(e+=".0"),n=D(e)}t.setsvalue(X(e,n))},ye=function(e,t){K.luaD_inctop(e),se(e,e.top-1,q(e,t))},Se=function(e,t,n){let a,r=0,i=0,l=0;for(;a=C(t,37,i),-1!=a;){switch(ye(e,t.subarray(i,a)),t[a+1]){case 115:{let t=n[l++];if(null===t)t=D("(null)",!0);else{t=O(t);let e=C(t,0);-1!==e&&(t=t.subarray(0,e))}ye(e,t);break}case 99:{let t=n[l++];N(t)?ye(e,B(t)):Te(e,D("<\\%d>",!0),t);break}case 100:case 73:K.luaD_inctop(e),e.stack[e.top-1].setivalue(n[l++]),Le(e,e.stack[e.top-1]);break;case 102:K.luaD_inctop(e),e.stack[e.top-1].setfltvalue(n[l++]),Le(e,e.stack[e.top-1]);break;case 112:{let t=n[l++];if(t instanceof z.lua_State||t instanceof Y.Table||t instanceof de||t instanceof ue||t instanceof ce)ye(e,D("0x"+t.id.toString(16)));else switch(typeof t){case"undefined":ye(e,D("undefined"));break;case"number":ye(e,D("Number("+t+")"));break;case"string":ye(e,D("String("+JSON.stringify(t)+")"));break;case"boolean":ye(e,D(t?"Boolean(true)":"Boolean(false)"));break;case"object":if(null===t){ye(e,D("null"));break}case"function":{let n=e.l_G.ids.get(t);n||(n=e.l_G.id_counter++,e.l_G.ids.set(t,n)),ye(e,D("0x"+n.toString(16)));break}default:ye(e,D("<id NYI>"))}break}case 85:{let t=new Uint8Array(8),a=pe(t,n[l++]);ye(e,t.subarray(8-a));break}case 37:ye(e,D("%",!0));break;default:H.luaG_runerror(e,D("invalid option '%%%c' to 'lua_pushfstring'"),t[a+1])}r+=2,i=a+2}return K.luaD_checkstack(e,1),ye(e,t.subarray(i)),r>0&&Q.luaV_concat(e,r+1),e.stack[e.top-1].svalue()},Te=function(e,t,...n){return Se(e,t,n)},Ee=function(e,t,n,o){switch(t){case a:return n+o|0;case m:return n-o|0;case d:return Q.luaV_imul(n,o);case c:return Q.luaV_mod(e,n,o);case u:return Q.luaV_div(e,n,o);case r:return n&o;case l:return n|o;case s:return n^o;case f:return Q.luaV_shiftl(n,o);case _:return Q.luaV_shiftl(n,-o);case p:return 0-n|0;case i:return-1^n;default:ne(0)}},xe=function(e,t,n,r){switch(t){case a:return n+r;case m:return n-r;case d:return n*r;case o:return n/r;case h:return Math.pow(n,r);case u:return Math.floor(n/r);case p:return-n;case c:return te(e,n,r);default:ne(0)}};e.exports.CClosure=ce,e.exports.LClosure=ue,e.exports.LUA_TDEADKEY=ie,e.exports.LUA_TPROTO=re,e.exports.LocVar=class{constructor(){this.varname=null,this.startpc=NaN,this.endpc=NaN}},e.exports.TValue=le,e.exports.Udata=de,e.exports.UTF8BUFFSZ=8,e.exports.luaO_arith=function(e,t,n,u,c){let d="number"==typeof c?e.stack[c]:c;switch(t){case r:case l:case s:case f:case _:case i:{let a,r;if(!1!==(a=Q.tointeger(n))&&!1!==(r=Q.tointeger(u)))return void d.setivalue(Ee(e,t,a,r));break}case o:case h:{let a,r;if(!1!==(a=Q.tonumber(n))&&!1!==(r=Q.tonumber(u)))return void d.setfltvalue(xe(e,t,a,r));break}default:{let a,r;if(n.ttisinteger()&&u.ttisinteger())return void d.setivalue(Ee(e,t,n.value,u.value));if(!1!==(a=Q.tonumber(n))&&!1!==(r=Q.tonumber(u)))return void d.setfltvalue(xe(e,t,a,r));break}}ne(null!==e),ae.luaT_trybinTM(e,n,u,c,t-a+ae.TMS.TM_ADD)},e.exports.luaO_chunkid=function(e,t){let n,a=e.length;if(61===e[0])a<t?(n=new Uint8Array(a-1),n.set(e.subarray(1))):(n=new Uint8Array(t),n.set(e.subarray(1,t+1)));else if(64===e[0])a<=t?(n=new Uint8Array(a-1),n.set(e.subarray(1))):(n=new Uint8Array(t),n.set(he),t-=he.length,n.set(e.subarray(a-t),he.length));else{n=new Uint8Array(t);let r=C(e,10);n.set(fe);let i=fe.length;a<(t-=fe.length+he.length+_e.length)&&-1===r?(n.set(e,i),i+=e.length):(-1!==r&&(a=r),a>t&&(a=t),n.set(e.subarray(0,a),i),i+=a,n.set(he,i),i+=he.length),n.set(_e,i),i+=_e.length,n=n.subarray(0,i)}return n},e.exports.luaO_hexavalue=me,e.exports.luaO_int2fb=function(e){let t=0;if(e<8)return e;for(;e>=128;)e=e+15>>4,t+=4;for(;e>=16;)e=e+1>>1,t++;return t+1<<3|e-8},e.exports.luaO_pushfstring=Te,e.exports.luaO_pushvfstring=Se,e.exports.luaO_str2num=function(e,t){let n=function(e){let t,n=0,a=0,r=!0;for(;V(e[n]);)n++;if((t=45===e[n])?n++:43===e[n]&&n++,48!==e[n]||120!==e[n+1]&&88!==e[n+1])for(;n<e.length&&G(e[n]);n++){let i=e[n]-48;if(a>=ve&&(a>ve||i>Ae+t))return null;a=10*a+i|0,r=!1}else for(n+=2;n<e.length&&j(e[n]);n++)a=16*a+me(e[n])|0,r=!1;for(;n<e.length&&V(e[n]);)n++;return r||n!==e.length&&0!==e[n]?null:{n:0|(t?-a:a),i:n}}(e);return null!==n?(t.setivalue(n.n),n.i+1):(n=function(e){let t=e.length,n=0;for(let a=0;a<t;a++){let t=e[a];if(-1!==be.indexOf(t)){n=t;break}}let a=we[n];return"n"===a?null:ge(e,a)}(e),null!==n?(t.setfltvalue(n.n),n.i+1):0)},e.exports.luaO_tostring=Le,e.exports.luaO_utf8esc=pe,e.exports.numarith=xe,e.exports.pushobj2s=function(e,t){e.stack[e.top++]=new le(t.type,t.value)},e.exports.pushsvalue2s=function(e,t){e.stack[e.top++]=new le(S,t)},e.exports.setobjs2s=function(e,t,n){e.stack[t].setfrom(e.stack[n])},e.exports.setobj2s=function(e,t,n){e.stack[t].setfrom(n)},e.exports.setsvalue2s=se},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(2);t.VEC3_UNIT_X=a.vec3.fromValues(1,0,0),t.VEC3_UNIT_Y=a.vec3.fromValues(0,1,0),t.VEC3_UNIT_Z=a.vec3.fromValues(0,0,1),t.VEC3_ZERO=a.vec3.create(),t.VEC3_ONE=a.vec3.fromValues(1,1,1),t.QUAT_ZERO=a.quat.fromValues(0,0,0,0),t.QUAT_DEFAULT=a.quat.create();const r=a.vec4.create();function i(e,t,n){return e[0]*t+e[1]*n+e[3]}function l(e,t,n,a){return e[0]*t+e[1]*n+e[2]*a+e[3]}function s(e){return Math.hypot(e[0],e[1],e[2])}function o(e,t){let n=s(t);e[0]=t[0]/n,e[1]=t[1]/n,e[2]=t[2]/n,e[3]=t[3]/n}t.unproject=function(e,t,n,i){let l=2*(t[0]-i[0])/i[2]-1,s=1-2*(t[1]-i[1])/i[3],o=2*t[2]-1;return a.vec4.set(r,l,s,o,1),a.vec4.transformMat4(r,r,n),a.vec3.set(e,r[0]/r[3],r[1]/r[3],r[2]/r[3]),e},t.distanceToPlane=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]},t.distanceToPlane2=i,t.distanceToPlane3=l,t.testSphere=function(e,t,n,a,r,i){-1===i&&(i=0);for(let s=0;s<6;s++){let o=(i+s)%6;if(l(e[o],t,n,a)<=-r)return o}return-1},t.testCell=function(e,t,n,a,r,l){-1===l&&(l=0);for(let s=0;s<6;s++){let o=(l+s)%6,u=e[o];if(i(u,t,a)<0&&i(u,t,r)<0&&i(u,n,r)<0&&i(u,n,a)<0)return o}return-1},t.planeLength=s,t.normalizePlane=o,t.unpackPlanes=function(e,t){let n,a=t[0],r=t[4],i=t[8],l=t[12],s=t[1],u=t[5],c=t[9],d=t[13],h=t[2],f=t[6],_=t[10],m=t[14],p=t[3],g=t[7],b=t[11],w=t[15];n=e[0],n[0]=p+a,n[1]=g+r,n[2]=b+i,n[3]=w+l,n=e[1],n[0]=p-a,n[1]=g-r,n[2]=b-i,n[3]=w-l,n=e[2],n[0]=p-s,n[1]=g-u,n[2]=b-c,n[3]=w-d,n=e[3],n[0]=p+s,n[1]=g+u,n[2]=b+c,n[3]=w+d,n=e[4],n[0]=p+h,n[1]=g+f,n[2]=b+_,n[3]=w+m,n=e[5],n[0]=p-h,n[1]=g-f,n[2]=b-_,n[3]=w-m,o(e[0],e[0]),o(e[1],e[1]),o(e[2],e[2]),o(e[3],e[3]),o(e[4],e[4]),o(e[5],e[5])};const u=a.vec3.create(),c=a.vec3.create(),d=a.vec3.create();t.quatLookAt=function(e,t,n,r){a.vec3.normalize(u,a.vec3.sub(u,n,t)),a.vec3.normalize(c,a.vec3.cross(c,r,u)),a.vec3.cross(d,c,u);let i=c[0]+d[2]+u[1];if(i>0){let t=.5/Math.sqrt(i+1);e[3]=.25/t,e[0]=(d[1]-u[2])*t,e[2]=(u[0]-c[1])*t,e[1]=(c[2]-d[0])*t}else if(c[0]>d[2]&&c[0]>u[1]){let t=2*Math.sqrt(1+c[0]-d[2]-u[1]);e[3]=(d[1]-u[2])/t,e[0]=.25*t,e[2]=(d[0]+c[2])/t,e[1]=(u[0]+c[1])/t}else if(d[2]>u[1]){let t=2*Math.sqrt(1+d[2]-c[0]-u[1]);e[3]=(u[0]-c[1])/t,e[0]=(d[0]+c[2])/t,e[2]=.25*t,e[1]=(u[2]+d[1])/t}else{let t=2*Math.sqrt(1+u[1]-c[0]-d[2]);e[3]=(c[2]-d[0])/t,e[0]=(u[0]+c[1])/t,e[2]=(u[2]+d[1])/t,e[1]=.25*t}return e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(30);class r extends a.default{constructor(e=0){super(),this.name="",this.objectId=-1,this.parentId=-1,this.flags=e}readMdx(e){let t=e.readUint32();this.name=e.read(80),this.objectId=e.readInt32(),this.parentId=e.readInt32(),this.flags=e.readUint32(),this.readAnimations(e,t-96)}writeMdx(e){e.writeUint32(this.getGenericByteLength()),e.write(this.name),e.skip(80-this.name.length),e.writeInt32(this.objectId),e.writeInt32(this.parentId),e.writeUint32(this.flags);for(let t of this.eachAnimation(!0))t.writeMdx(e)}writeNonGenericAnimationChunks(e){for(let t of this.eachAnimation(!1))t.writeMdx(e)}*readGenericBlock(e){this.name=e.readSafe();for(let t of this.readAnimatedBlock(e))if("ObjectId"===t)this.objectId=e.readInt();else if("Parent"===t)this.parentId=e.readInt();else if("BillboardedLockZ"===t)this.flags|=64;else if("BillboardedLockY"===t)this.flags|=32;else if("BillboardedLockX"===t)this.flags|=16;else if("Billboarded"===t)this.flags|=8;else if("CameraAnchored"===t)this.flags|=128;else if("DontInherit"===t)for(t of e.readBlockSafe())"Rotation"===t?this.flags|=2:"Translation"===t?this.flags|=1:"Scaling"===t&&(this.flags|=4);else"Translation"===t?this.readAnimation(e,"KGTR"):"Rotation"===t?this.readAnimation(e,"KGRT"):"Scaling"===t?this.readAnimation(e,"KGSC"):yield t}writeGenericHeader(e){e.writeAttrib("ObjectId",this.objectId),-1!==this.parentId&&e.writeAttrib("Parent",this.parentId),64&this.flags&&e.writeFlag("BillboardedLockZ"),32&this.flags&&e.writeFlag("BillboardedLockY"),16&this.flags&&e.writeFlag("BillboardedLockX"),8&this.flags&&e.writeFlag("Billboarded"),128&this.flags&&e.writeFlag("CameraAnchored"),2&this.flags&&e.writeFlag("DontInherit { Rotation }"),1&this.flags&&e.writeFlag("DontInherit { Translation }"),4&this.flags&&e.writeFlag("DontInherit { Scaling }")}writeGenericAnimations(e){this.writeAnimation(e,"KGTR"),this.writeAnimation(e,"KGRT"),this.writeAnimation(e,"KGSC")}*eachAnimation(e){for(let t of this.animations){let n=t.name,a="KGTR"===n||"KGRT"===n||"KGSC"===n;(e&&a||!e&&!a)&&(yield t)}}getGenericByteLength(){let e=96;for(let t of this.eachAnimation(!0))e+=t.getByteLength();return e}getByteLength(){return 96+super.getByteLength()}}t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(2),r=n(7),i=n(31);class l extends i.default{constructor(e,t,n){super(e,t),this.index=n,this.name=t.name,this.objectId=t.objectId,this.parentId=t.parentId,this.pivot=e.pivotPoints[t.objectId]||a.vec3.create();let r=t.flags;this.dontInheritTranslation=1&r,this.dontInheritRotation=2&r,this.dontInheritScaling=4&r,this.billboarded=8&r,this.billboardedX=16&r,this.billboardedY=32&r,this.billboardedZ=64&r,this.cameraAnchored=128&r,this.emitterUsesMdlOrUnshaded=32768&r,this.emitterUsesTgaOrSortPrimitivesFarZ=65536&r,this.lineEmitter=131072&r,this.unfogged=262144&r,this.modelSpace=524288&r,this.xYQuad=1048576&r,this.anyBillboarding=0!==(this.billboarded||this.billboardedX||this.billboardedY||this.billboardedZ),t.objectId===t.parentId&&(this.parentId=-1),this.addVariants("KGTR","translation"),this.addVariants("KGRT","rotation"),this.addVariants("KGSC","scale"),this.addVariantIntersection(["translation","rotation","scale"],"generic")}getVisibility(e,t){return e[0]=1,-1}getTranslation(e,t){return this.getVectorValue(e,"KGTR",t,r.VEC3_ZERO)}getRotation(e,t){return this.getQuatValue(e,"KGRT",t,r.QUAT_DEFAULT)}getScale(e,t){return this.getVectorValue(e,"KGSC",t,r.VEC3_ONE)}}t.default=l},function(e,t,n){"use strict";const{LUA_HOOKCALL:a,LUA_HOOKRET:r,LUA_HOOKTAILCALL:i,LUA_MASKCALL:l,LUA_MASKLINE:s,LUA_MASKRET:o,LUA_MINSTACK:u,LUA_MULTRET:c,LUA_SIGNATURE:d,constant_types:{LUA_TCCL:h,LUA_TLCF:f,LUA_TLCL:_,LUA_TNIL:m},thread_status:{LUA_ERRMEM:p,LUA_ERRERR:g,LUA_ERRRUN:b,LUA_ERRSYNTAX:w,LUA_OK:v,LUA_YIELD:A},lua_Debug:L,luastring_indexOf:y,to_luastring:S}=n(3),T=n(44),E=n(18),x=n(25),{api_check:k,lua_assert:M,LUAI_MAXCCALLS:I}=n(5),U=n(6),P=n(28),R=n(123),O=n(19),{luaS_newliteral:C}=n(15),B=n(26),{LUAI_MAXSTACK:F}=n(17),D=n(428),G=n(27),{MBuffer:N}=n(45),V=function(e,t){if(e.top<t)for(;e.top<t;)e.stack[e.top++]=new U.TValue(m,null);else for(;e.top>t;)delete e.stack[--e.top]},j=function(e,t,n){let a=e.top;for(;e.top<n+1;)e.stack[e.top++]=new U.TValue(m,null);switch(t){case p:U.setsvalue2s(e,n,C(e,"not enough memory"));break;case g:U.setsvalue2s(e,n,C(e,"error in error handling"));break;default:U.setobjs2s(e,n,a-1)}for(;e.top>n+1;)delete e.stack[--e.top]},H=F+200,K=function(e,t){M(t<=F||t==H),M(e.stack_last==e.stack.length-O.EXTRA_STACK),e.stack.length=t,e.stack_last=t-O.EXTRA_STACK},z=function(e,t){let n=e.stack.length;if(n>F)ne(e,g);else{let a=e.top+t+O.EXTRA_STACK,r=2*n;r>F&&(r=F),r<a&&(r=a),r>F?(K(e,H),E.luaG_runerror(e,S("stack overflow",!0))):K(e,r)}},X=function(e,t){e.stack_last-e.top<=t&&z(e,t)},q=function(e){let t=function(e){let t=e.top;for(let n=e.ci;null!==n;n=n.previous)t<n.top&&(t=n.top);return M(t<=e.stack_last),t+1}(e),n=t+Math.floor(t/8)+2*O.EXTRA_STACK;n>F&&(n=F),e.stack.length>F&&O.luaE_freeCI(e),t<=F-O.EXTRA_STACK&&n<e.stack.length&&K(e,n)},Y=function(e,t,n){let r=e.stack[t];switch(r.type){case h:case f:{let i=r.type===h?r.value.f:r.value;X(e,u);let s=O.luaE_extendCI(e);s.funcOff=t,s.nresults=n,s.func=r,s.top=e.top+u,M(s.top<=e.stack_last),s.callstatus=0,e.hookmask&l&&Z(e,a,-1);let o=i(e);if("number"!=typeof o||o<0||(0|o)!==o)throw Error("invalid return value from JS function (expected integer)");return T.api_checknelems(e,o),$(e,s,e.top-o,o),!0}case _:{let a,i=r.value.p,s=e.top-t-1,o=i.maxstacksize;if(X(e,o),i.is_vararg)a=Q(e,i,s);else{for(;s<i.numparams;s++)e.stack[e.top++]=new U.TValue(m,null);a=t+1}let u=O.luaE_extendCI(e);return u.funcOff=t,u.nresults=n,u.func=r,u.l_base=a,u.top=a+o,V(e,u.top),u.l_code=i.code,u.l_savedpc=0,u.callstatus=O.CIST_LUA,e.hookmask&l&&J(e,u),!1}default:return X(e,1),ee(e,t,r),Y(e,t,n)}},$=function(e,t,n,a){let i=t.nresults;e.hookmask&(o|s)&&(e.hookmask&o&&Z(e,r,-1),e.oldpc=t.previous.l_savedpc);let l=t.funcOff;return e.ci=t.previous,e.ci.next=null,W(e,n,l,a,i)},W=function(e,t,n,a,r){switch(r){case 0:break;case 1:0===a?e.stack[n].setnilvalue():U.setobjs2s(e,n,t);break;case c:for(let r=0;r<a;r++)U.setobjs2s(e,n+r,t+r);for(let t=e.top;t>=n+a;t--)delete e.stack[t];return e.top=n+a,!1;default:{let i;if(r<=a)for(i=0;i<r;i++)U.setobjs2s(e,n+i,t+i);else{for(i=0;i<a;i++)U.setobjs2s(e,n+i,t+i);for(;i<r;i++)n+i>=e.top?e.stack[n+i]=new U.TValue(m,null):e.stack[n+i].setnilvalue()}break}}let i=n+r;for(let t=e.top;t>=i;t--)delete e.stack[t];return e.top=i,!0},Z=function(e,t,n){let a=e.hook;if(a&&e.allowhook){let r=e.ci,i=e.top,l=r.top,s=new L;s.event=t,s.currentline=n,s.i_ci=r,X(e,u),r.top=e.top+u,M(r.top<=e.stack_last),e.allowhook=0,r.callstatus|=O.CIST_HOOKED,a(e,s),M(!e.allowhook),e.allowhook=1,r.top=l,V(e,i),r.callstatus&=~O.CIST_HOOKED}},J=function(e,t){let n=a;t.l_savedpc++,t.previous.callstatus&O.CIST_LUA&&t.previous.l_code[t.previous.l_savedpc-1].opcode==P.OpCodesI.OP_TAILCALL&&(t.callstatus|=O.CIST_TAIL,n=i),Z(e,n,-1),t.l_savedpc--},Q=function(e,t,n){let a,r=t.numparams,i=e.top-n,l=e.top;for(a=0;a<r&&a<n;a++)U.pushobj2s(e,e.stack[i+a]),e.stack[i+a].setnilvalue();for(;a<r;a++)e.stack[e.top++]=new U.TValue(m,null);return l},ee=function(e,t,n){let a=B.luaT_gettmbyobj(e,n,B.TMS.TM_CALL);a.ttisfunction(a)||E.luaG_typeerror(e,n,S("call",!0)),U.pushobj2s(e,e.stack[e.top-1]);for(let n=e.top-2;n>t;n--)U.setobjs2s(e,n,n-1);U.setobj2s(e,t,a)},te=function(e,t,n){++e.nCcalls>=I&&function(e){e.nCcalls===I?E.luaG_runerror(e,S("JS stack overflow",!0)):e.nCcalls>=I+(I>>3)&&ne(e,g)}(e),Y(e,t,n)||G.luaV_execute(e),e.nCcalls--},ne=function(e,t){if(e.errorJmp)throw e.errorJmp.status=t,e.errorJmp;{let n=e.l_G;if(e.status=t,!n.mainthread.errorJmp){let a=n.panic;throw a&&(j(e,t,e.top),e.ci.top<e.top&&(e.ci.top=e.top),a(e)),new Error(`Aborted ${t}`)}n.mainthread.stack[n.mainthread.top++]=e.stack[e.top-1],ne(n.mainthread,t)}},ae=function(e,t,n){let a=e.nCcalls,r={status:v,previous:e.errorJmp};e.errorJmp=r;try{t(e,n)}catch(t){if(r.status===v){let n=e.l_G.atnativeerror;if(n)try{if(r.status=v,T.lua_pushcfunction(e,n),T.lua_pushlightuserdata(e,t),de(e,e.top-2,1),0!==e.errfunc){let t=e.errfunc;U.pushobj2s(e,e.stack[e.top-1]),U.setobjs2s(e,e.top-2,t),de(e,e.top-2,1)}r.status=b}catch(e){r.status===v&&(r.status=-1)}else r.status=-1}}return e.errorJmp=r.previous,e.nCcalls=a,r.status},re=function(e,t){let n=e.ci;M(null!==n.c_k&&0===e.nny),M(n.callstatus&O.CIST_YPCALL||t===A),n.callstatus&O.CIST_YPCALL&&(n.callstatus&=~O.CIST_YPCALL,e.errfunc=n.c_old_errfunc),n.nresults===c&&e.ci.top<e.top&&(e.ci.top=e.top);let a=(0,n.c_k)(e,t,n.c_ctx);T.api_checknelems(e,a),$(e,n,e.top-a,a)},ie=function(e,t){for(null!==t&&re(e,t);e.ci!==e.base_ci;)e.ci.callstatus&O.CIST_LUA?(G.luaV_finishOp(e),G.luaV_execute(e)):re(e,A)},le=function(e,t){let n=function(e){for(let t=e.ci;null!==t;t=t.previous)if(t.callstatus&O.CIST_YPCALL)return t;return null}(e);if(null===n)return 0;let a=n.extra;return x.luaF_close(e,a),j(e,t,a),e.ci=n,e.allowhook=n.callstatus&O.CIST_OAH,e.nny=0,q(e),e.errfunc=n.c_old_errfunc,1},se=function(e,t,n){let a=C(e,t);if(0===n)U.pushsvalue2s(e,a),k(e,e.top<=e.ci.top,"stack overflow");else{for(let t=1;t<n;t++)delete e.stack[--e.top];U.setsvalue2s(e,e.top-1,a)}return b},oe=function(e,t){let n=e.top-t,a=e.ci;e.status===v?Y(e,n-1,c)||G.luaV_execute(e):(M(e.status===A),e.status=v,a.funcOff=a.extra,a.func=e.stack[a.funcOff],a.callstatus&O.CIST_LUA?G.luaV_execute(e):(null!==a.c_k&&(t=a.c_k(e,A,a.c_ctx),T.api_checknelems(e,t),n=e.top-t),$(e,a,n,t)),ie(e,null))},ue=function(e,t,n,a){let r=e.ci;return T.api_checknelems(e,t),e.nny>0&&(e!==e.l_G.mainthread?E.luaG_runerror(e,S("attempt to yield across a JS-call boundary",!0)):E.luaG_runerror(e,S("attempt to yield from outside a coroutine",!0))),e.status=A,r.extra=r.funcOff,r.callstatus&O.CIST_LUA?k(e,null===a,"hooks cannot continue after yielding"):(r.c_k=a,null!==a&&(r.c_ctx=n),r.funcOff=e.top-t-1,r.func=e.stack[r.funcOff],ne(e,A)),M(r.callstatus&O.CIST_HOOKED),0},ce=function(e,t,n,a,r){let i=e.ci,l=e.allowhook,s=e.nny,o=e.errfunc;e.errfunc=r;let u=ae(e,t,n);return u!==v&&(x.luaF_close(e,a),j(e,u,a),e.ci=i,e.allowhook=l,e.nny=s,q(e)),e.errfunc=o,u},de=function(e,t,n){e.nny++,te(e,t,n),e.nny--};class he{constructor(e,t,n){this.z=e,this.buff=new N,this.dyd=new R.Dyndata,this.mode=n,this.name=t}}const fe=function(e,t,n){t&&-1===y(t,n[0])&&(U.luaO_pushfstring(e,S("attempt to load a %s chunk (mode is '%s')"),n,t),ne(e,w))},_e=function(e,t){let n,a=t.z.zgetc();a===d[0]?(fe(e,t.mode,S("binary",!0)),n=D.luaU_undump(e,t.z,t.name)):(fe(e,t.mode,S("text",!0)),n=R.luaY_parser(e,t.z,t.buff,t.dyd,t.name,a)),M(n.nupvalues===n.p.upvalues.length),x.luaF_initupvals(e,n)};e.exports.adjust_top=V,e.exports.luaD_call=te,e.exports.luaD_callnoyield=de,e.exports.luaD_checkstack=X,e.exports.luaD_growstack=z,e.exports.luaD_hook=Z,e.exports.luaD_inctop=function(e){X(e,1),e.stack[e.top++]=new U.TValue(m,null)},e.exports.luaD_pcall=ce,e.exports.luaD_poscall=$,e.exports.luaD_precall=Y,e.exports.luaD_protectedparser=function(e,t,n,a){let r=new he(t,n,a);e.nny++;let i=ce(e,_e,r,e.top,e.errfunc);return e.nny--,i},e.exports.luaD_rawrunprotected=ae,e.exports.luaD_reallocstack=K,e.exports.luaD_throw=ne,e.exports.lua_isyieldable=function(e){return 0===e.nny},e.exports.lua_resume=function(e,t,n){let a=e.nny;if(e.status===v){if(e.ci!==e.base_ci)return se(e,"cannot resume non-suspended coroutine",n)}else if(e.status!==A)return se(e,"cannot resume dead coroutine",n);if(e.nCcalls=t?t.nCcalls+1:1,e.nCcalls>=I)return se(e,"JS stack overflow",n);e.nny=0,T.api_checknelems(e,e.status===v?n+1:n);let r=ae(e,oe,n);if(-1===r)r=b;else{for(;r>A&&le(e,r);)r=ae(e,ie,r);r>A?(e.status=r,j(e,r,e.top),e.ci.top=e.top):M(r===e.status)}return e.nny=a,e.nCcalls--,M(e.nCcalls===(t?t.nCcalls:0)),r},e.exports.lua_yield=function(e,t){ue(e,t,0,null)},e.exports.lua_yieldk=ue},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(32);class r extends a.default{}t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.degToRad=function(e){return e*(Math.PI/180)},t.radToDeg=function(e){return e*(180/Math.PI)},t.randomInRange=function(e,t){return e+Math.random()*(t-e)},t.clamp=function(e,t,n){return Math.min(Math.max(e,t),n)},t.lerp=function(e,t,n){return e+n*(t-e)},t.hermite=function(e,t,n,a,r){let i=r*r;return e*(i*(2*r-3)+1)+t*(i*(r-2)+r)+n*(i*(r-1))+a*(i*(3-2*r))},t.bezier=function(e,t,n,a,r){let i=1-r,l=r*r,s=i*i;return e*(s*i)+t*(3*r*s)+n*(3*l*i)+a*(l*r)},t.copysign=function(e,t){let n=Math.sign(t);return 0===n?0:Math.sign(e)!==n?-e:e},t.powerOfTwo=function(e){return e--,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,++e},t.isPowerOfTwo=function(e){return 0!==e&&0==(e&e-1)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(105),r=n(61),i=n(64),l=n(337),s=n(376),o=n(377),u=n(379),c=n(380),d=n(381),h=n(382),f=n(383),_=n(384);let m={complex:null,extended:null,simple:null,particles:null,hd:null};t.default={extensions:[[".mdx","arrayBuffer"],[".mdl","text"]],load(e){let t=e.webgl;return t.ensureExtension("OES_texture_float")?t.ensureExtension("ANGLE_instanced_arrays")?(e.addHandler(a.default),e.addHandler(r.default),e.addHandler(i.default),m.complex=t.createShaderProgram(s.default,o.default),m.extended=t.createShaderProgram("#define EXTENDED_BONES\n"+s.default,o.default),m.particles=t.createShaderProgram(u.default,c.default),m.simple=t.createShaderProgram(d.default,h.default),m.hd=t.createShaderProgram(f.default,_.default),null!==m.complex&&null!==m.extended&&null!==m.particles&&null!==m.simple&&null!==m.hd):(console.error("MDX: No instanced rendering support!"),!1):(console.error("MDX: No float texture support!"),!1)},resource:l.default,shaders:m,teamColors:[],teamGlows:[],reforgedTeamColors:[],reforgedTeamGlows:[]}},function(e,t,n){"use strict";const{constant_types:{LUA_TBOOLEAN:a,LUA_TCCL:r,LUA_TLCF:i,LUA_TLCL:l,LUA_TLIGHTUSERDATA:s,LUA_TLNGSTR:o,LUA_TNIL:u,LUA_TNUMFLT:c,LUA_TNUMINT:d,LUA_TSHRSTR:h,LUA_TTABLE:f,LUA_TTHREAD:_,LUA_TUSERDATA:m},to_luastring:p}=n(3),{lua_assert:g}=n(5),b=n(18),w=n(6),{luaS_hashlongstr:v,TString:A}=n(15),L=n(19);let y=new WeakMap;const S=function(e){let t=y.get(e);return t||(t={},y.set(e,t)),t},T=function(e,t){switch(t.type){case u:return b.luaG_runerror(e,p("table index is nil",!0));case c:if(isNaN(t.value))return b.luaG_runerror(e,p("table index is NaN",!0));case d:case a:case f:case l:case i:case r:case m:case _:return t.value;case h:case o:return v(t.tsvalue());case s:{let n=t.value;switch(typeof n){case"string":return"*"+n;case"number":return"#"+n;case"boolean":return n?"?true":"?false";case"function":return S(n);case"object":if(n instanceof L.lua_State&&n.l_G===e.l_G||n instanceof E||n instanceof w.Udata||n instanceof w.LClosure||n instanceof w.CClosure)return S(n);default:return n}}default:throw new Error("unknown key type: "+t.type)}};class E{constructor(e){this.id=e.l_G.id_counter++,this.strong=new Map,this.dead_strong=new Map,this.dead_weak=void 0,this.f=void 0,this.l=void 0,this.metatable=null,this.flags=-1}}const x=function(e,t,n,a){e.dead_strong.clear(),e.dead_weak=void 0;let r=null,i={key:n,value:a,p:r=e.l,n:void 0};e.f||(e.f=i),r&&(r.n=i),e.strong.set(t,i),e.l=i},k=function(e,t){let n=e.strong.get(t);if(n){n.key.setdeadvalue(),n.value=void 0;let r=n.n,i=n.p;n.p=void 0,i&&(i.n=r),r&&(r.p=i),e.f===n&&(e.f=r),e.l===n&&(e.l=i),e.strong.delete(t),("object"==typeof(a=t)?null!==a:"function"==typeof a)?(e.dead_weak||(e.dead_weak=new WeakMap),e.dead_weak.set(t,n)):e.dead_strong.set(t,n)}var a},M=function(e,t){let n=e.strong.get(t);return n?n.value:w.luaO_nilobject},I=function(e,t){return g("number"==typeof t&&(0|t)===t),M(e,t)};e.exports.invalidateTMcache=function(e){e.flags=0},e.exports.luaH_get=function(e,t,n){return g(n instanceof w.TValue),n.ttisnil()||n.ttisfloat()&&isNaN(n.value)?w.luaO_nilobject:M(t,T(e,n))},e.exports.luaH_getint=I,e.exports.luaH_getn=function(e){let t=0,n=e.strong.size+1;for(;n-t>1;){let a=Math.floor((t+n)/2);I(e,a).ttisnil()?n=a:t=a}return t},e.exports.luaH_getstr=function(e,t){return g(t instanceof A),M(e,v(t))},e.exports.luaH_setfrom=function(e,t,n,a){g(n instanceof w.TValue);let r=T(e,n);if(a.ttisnil())return void k(t,r);let i=t.strong.get(r);if(i)i.value.setfrom(a);else{let e,i=n.value;e=n.ttisfloat()&&(0|i)===i?new w.TValue(d,i):new w.TValue(n.type,i);let l=new w.TValue(a.type,a.value);x(t,r,e,l)}},e.exports.luaH_setint=function(e,t,n){g("number"==typeof t&&(0|t)===t&&n instanceof w.TValue);let a=t;if(n.ttisnil())return void k(e,a);let r=e.strong.get(a);if(r){r.value.setfrom(n)}else{let r=new w.TValue(d,t),i=new w.TValue(n.type,n.value);x(e,a,r,i)}},e.exports.luaH_new=function(e){return new E(e)},e.exports.luaH_next=function(e,t,n){let a,r=e.stack[n];if(r.type===u){if(a=t.f,!a)return!1}else{let n=T(e,r);if(a=t.strong.get(n),a){if(a=a.n,!a)return!1}else{if(a=t.dead_weak&&t.dead_weak.get(n)||t.dead_strong.get(n),!a)return b.luaG_runerror(e,p("invalid key to 'next'"));do{if(a=a.n,!a)return!1}while(a.key.ttisdeadkey())}}return w.setobj2s(e,n,a.key),w.setobj2s(e,n+1,a.value),!0},e.exports.Table=E},function(e,t,n){"use strict";const{is_luastring:a,luastring_eq:r,luastring_from:i,to_luastring:l}=n(3),{lua_assert:s}=n(5);class o{constructor(e,t){this.hash=null,this.realstring=t}getstr(){return this.realstring}tsslen(){return this.realstring.length}}const u=function(e){s(a(e));let t=e.length,n="|";for(let a=0;a<t;a++)n+=e[a].toString(16);return n},c=function(e,t){return s(t instanceof Uint8Array),new o(e,t)};e.exports.luaS_eqlngstr=function(e,t){return s(e instanceof o),s(t instanceof o),e==t||r(e.realstring,t.realstring)},e.exports.luaS_hash=u,e.exports.luaS_hashlongstr=function(e){return s(e instanceof o),null===e.hash&&(e.hash=u(e.getstr())),e.hash},e.exports.luaS_bless=c,e.exports.luaS_new=function(e,t){return c(e,i(t))},e.exports.luaS_newliteral=function(e,t){return c(e,l(t))},e.exports.TString=o},function(e,t,n){"use strict";var a="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;function r(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var n=t.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(var a in n)r(n,a)&&(e[a]=n[a])}}return e},t.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var i={arraySet:function(e,t,n,a,r){if(t.subarray&&e.subarray)e.set(t.subarray(n,n+a),r);else for(var i=0;i<a;i++)e[r+i]=t[n+i]},flattenChunks:function(e){var t,n,a,r,i,l;for(a=0,t=0,n=e.length;t<n;t++)a+=e[t].length;for(l=new Uint8Array(a),r=0,t=0,n=e.length;t<n;t++)i=e[t],l.set(i,r),r+=i.length;return l}},l={arraySet:function(e,t,n,a,r){for(var i=0;i<a;i++)e[r+i]=t[n+i]},flattenChunks:function(e){return[].concat.apply([],e)}};t.setTyped=function(e){e?(t.Buf8=Uint8Array,t.Buf16=Uint16Array,t.Buf32=Int32Array,t.assign(t,i)):(t.Buf8=Array,t.Buf16=Array,t.Buf32=Array,t.assign(t,l))},t.setTyped(a)},function(e,t,n){"use strict";const a={},{LUA_VERSION_MAJOR:r,LUA_VERSION_MINOR:i,to_luastring:l}=n(3);e.exports.LUA_PATH_SEP=";";e.exports.LUA_PATH_MARK="?";e.exports.LUA_EXEC_DIR="!";const s=r+"."+i;e.exports.LUA_VDIR=s;{const t="/";e.exports.LUA_DIRSEP=t;const n="./lua/"+s+"/";e.exports.LUA_LDIR=n;const a=n;e.exports.LUA_JSDIR=a;const r=l(n+"?.lua;"+n+"?/init.lua;./?.lua;./?/init.lua");e.exports.LUA_PATH_DEFAULT=r;const i=l(a+"?.js;"+a+"loadall.js;./?.js");e.exports.LUA_JSPATH_DEFAULT=i}const o=a.LUA_COMPAT_FLOATSTRING||!1,u=a.LUAI_MAXSTACK||1e6,c=a.LUA_IDSIZE||59,d=a.LUAL_BUFFERSIZE||8192,h=function(e,t){for(var n=Math.min(3,Math.ceil(Math.abs(t)/1023)),a=e,r=0;r<n;r++)a*=Math.pow(2,Math.floor((t+r)/n));return a};e.exports.LUAI_MAXSTACK=u,e.exports.LUA_COMPAT_FLOATSTRING=o,e.exports.LUA_IDSIZE=c,e.exports.LUA_INTEGER_FMT="%d",e.exports.LUA_INTEGER_FRMLEN="",e.exports.LUA_MAXINTEGER=2147483647,e.exports.LUA_MININTEGER=-2147483648,e.exports.LUA_NUMBER_FMT="%.14g",e.exports.LUA_NUMBER_FRMLEN="",e.exports.LUAL_BUFFERSIZE=d,e.exports.frexp=function(e){if(0===e)return[e,0];var t=new DataView(new ArrayBuffer(8));t.setFloat64(0,e);var n=t.getUint32(0)>>>20&2047;0===n&&(t.setFloat64(0,e*Math.pow(2,64)),n=(t.getUint32(0)>>>20&2047)-64);var a=n-1022;return[h(e,-a),a]},e.exports.ldexp=h,e.exports.lua_getlocaledecpoint=function(){return 46},e.exports.lua_integer2str=function(e){return String(e)},e.exports.lua_number2str=function(e){return String(Number(e.toPrecision(14)))},e.exports.lua_numbertointeger=function(e){return e>=-2147483648&&e<2147483648&&e},e.exports.luai_apicheck=function(e,t){if(!t)throw Error(t)}},function(e,t,n){"use strict";const{LUA_HOOKCOUNT:a,LUA_HOOKLINE:r,LUA_MASKCOUNT:i,LUA_MASKLINE:l,constant_types:{LUA_TBOOLEAN:s,LUA_TNIL:o,LUA_TTABLE:u},thread_status:{LUA_ERRRUN:c,LUA_YIELD:d},from_userstring:h,luastring_eq:f,luastring_indexOf:_,to_luastring:m}=n(3),{api_check:p,lua_assert:g}=n(5),{LUA_IDSIZE:b}=n(17),w=n(44),v=n(10),A=n(25),L=n(69),y=n(6),S=n(28),T=n(19),E=n(14),x=n(26),k=n(27),M=function(e){return g(e.callstatus&T.CIST_LUA),e.l_savedpc-1},I=function(e){return 0!==e.func.value.p.lineinfo.length?e.func.value.p.lineinfo[M(e)]:-1},U=function(e){if(e.status===d){let t=e.ci,n=t.funcOff;t.func=e.stack[t.extra],t.funcOff=t.extra,t.extra=n}},P=function(e,t){g(t<e.upvalues.length);let n=e.upvalues[t].name;return null===n?m("?",!0):n.getstr()},R=function(e,t,n){let a,r=null;if(t.callstatus&T.CIST_LUA){if(n<0)return function(e,t){let n=e.func.value.p.numparams;return t>=e.l_base-e.funcOff-n?null:{pos:e.funcOff+n+t,name:m("(*vararg)",!0)}}(t,-n);a=t.l_base,r=A.luaF_getlocalname(t.func.value.p,n,M(t))}else a=t.funcOff+1;if(null===r){if(!((t===e.ci?e.top:t.next.funcOff)-a>=n&&n>0))return null;r=m("(*temporary)",!0)}return{pos:a+(n-1),name:r}},O=function(e,t){if(null===t||t instanceof y.CClosure)e.source=m("=[JS]",!0),e.linedefined=-1,e.lastlinedefined=-1,e.what=m("J",!0);else{let n=t.p;e.source=n.source?n.source.getstr():m("=?",!0),e.linedefined=n.linedefined,e.lastlinedefined=n.lastlinedefined,e.what=0===e.linedefined?m("main",!0):m("Lua",!0)}e.short_src=y.luaO_chunkid(e.source,b)},C=function(e,t){let n={name:null,funcname:null};return null===t?null:t.callstatus&T.CIST_FIN?(n.name=m("__gc",!0),n.funcname=m("metamethod",!0),n):!(t.callstatus&T.CIST_TAIL)&&t.previous.callstatus&T.CIST_LUA?G(e,t.previous):null},B=function(e,t,n){let a={name:null,funcname:null};if(S.ISK(n)){let t=e.k[S.INDEXK(n)];if(t.ttisstring())return a.name=t.svalue(),a}else{let a=D(e,t,n);if(a&&99===a.funcname[0])return a}return a.name=m("?",!0),a},F=function(e,t){return e<t?-1:e},D=function(e,t,n){let a={name:A.luaF_getlocalname(e,n+1,t),funcname:null};if(a.name)return a.funcname=m("local",!0),a;let r=function(e,t,n){let a=-1,r=0,i=S.OpCodesI;for(let l=0;l<t;l++){let s=e.code[l],o=s.A;switch(s.opcode){case i.OP_LOADNIL:{let e=s.B;o<=n&&n<=o+e&&(a=F(l,r));break}case i.OP_TFORCALL:n>=o+2&&(a=F(l,r));break;case i.OP_CALL:case i.OP_TAILCALL:n>=o&&(a=F(l,r));break;case i.OP_JMP:{let e=l+1+s.sBx;l<e&&e<=t&&e>r&&(r=e);break}default:S.testAMode(s.opcode)&&n===o&&(a=F(l,r))}}return a}(e,t,n),i=S.OpCodesI;if(-1!==r){let t=e.code[r];switch(t.opcode){case i.OP_MOVE:{let n=t.B;if(n<t.A)return D(e,r,n);break}case i.OP_GETTABUP:case i.OP_GETTABLE:{let n=t.C,l=t.B,s=t.opcode===i.OP_GETTABLE?A.luaF_getlocalname(e,l+1,r):P(e,l);return a.name=B(e,r,n).name,a.funcname=s&&f(s,L.LUA_ENV)?m("global",!0):m("field",!0),a}case i.OP_GETUPVAL:return a.name=P(e,t.B),a.funcname=m("upvalue",!0),a;case i.OP_LOADK:case i.OP_LOADKX:{let n=t.opcode===i.OP_LOADK?t.Bx:e.code[r+1].Ax;if(e.k[n].ttisstring())return a.name=e.k[n].svalue(),a.funcname=m("constant",!0),a;break}case i.OP_SELF:{let n=t.C;return a.name=B(e,r,n).name,a.funcname=m("method",!0),a}}}return null},G=function(e,t){let n={name:null,funcname:null},a=0,r=t.func.value.p,i=M(t),l=r.code[i],s=S.OpCodesI;if(t.callstatus&T.CIST_HOOKED)return n.name=m("?",!0),n.funcname=m("hook",!0),n;switch(l.opcode){case s.OP_CALL:case s.OP_TAILCALL:return D(r,i,l.A);case s.OP_TFORCALL:return n.name=m("for iterator",!0),n.funcname=m("for iterator",!0),n;case s.OP_SELF:case s.OP_GETTABUP:case s.OP_GETTABLE:a=x.TMS.TM_INDEX;break;case s.OP_SETTABUP:case s.OP_SETTABLE:a=x.TMS.TM_NEWINDEX;break;case s.OP_ADD:a=x.TMS.TM_ADD;break;case s.OP_SUB:a=x.TMS.TM_SUB;break;case s.OP_MUL:a=x.TMS.TM_MUL;break;case s.OP_MOD:a=x.TMS.TM_MOD;break;case s.OP_POW:a=x.TMS.TM_POW;break;case s.OP_DIV:a=x.TMS.TM_DIV;break;case s.OP_IDIV:a=x.TMS.TM_IDIV;break;case s.OP_BAND:a=x.TMS.TM_BAND;break;case s.OP_BOR:a=x.TMS.TM_BOR;break;case s.OP_BXOR:a=x.TMS.TM_BXOR;break;case s.OP_SHL:a=x.TMS.TM_SHL;break;case s.OP_SHR:a=x.TMS.TM_SHR;break;case s.OP_UNM:a=x.TMS.TM_UNM;break;case s.OP_BNOT:a=x.TMS.TM_BNOT;break;case s.OP_LEN:a=x.TMS.TM_LEN;break;case s.OP_CONCAT:a=x.TMS.TM_CONCAT;break;case s.OP_EQ:a=x.TMS.TM_EQ;break;case s.OP_LT:a=x.TMS.TM_LT;break;case s.OP_LE:a=x.TMS.TM_LE;break;default:return null}return n.name=e.l_G.tmname[a].getstr(),n.funcname=m("metamethod",!0),n},N=function(e,t){let n=e.ci,a=null;if(n.callstatus&T.CIST_LUA){a=function(e,t,n){let a=t.func.value;for(let e=0;e<a.nupvalues;e++)if(a.upvals[e]===n)return{name:P(a.p,e),funcname:m("upvalue",!0)};return null}(0,n,t);let r=function(e,t,n){for(let a=t.l_base;a<t.top;a++)if(e.stack[a]===n)return a;return!1}(e,n,t);!a&&r&&(a=D(n.func.value.p,M(n),r-n.l_base))}return a?y.luaO_pushfstring(e,m(" (%s '%s')",!0),a.funcname,a.name):m("",!0)},V=function(e,t,n){let a=x.luaT_objtypename(e,t);H(e,m("attempt to %s a %s value%s",!0),n,a,N(e,t))},j=function(e,t,n,a){let r;return r=n?y.luaO_chunkid(n.getstr(),b):m("?",!0),y.luaO_pushfstring(e,m("%s:%d: %s",!0),r,a,t)},H=function(e,t,...n){let a=e.ci,r=y.luaO_pushvfstring(e,t,n);a.callstatus&T.CIST_LUA&&j(e,r,a.func.value.p.source,I(a)),K(e)},K=function(e){if(0!==e.errfunc){let t=e.errfunc;y.pushobj2s(e,e.stack[e.top-1]),y.setobjs2s(e,e.top-2,t),v.luaD_callnoyield(e,e.top-2,1)}v.luaD_throw(e,c)};e.exports.luaG_addinfo=j,e.exports.luaG_concaterror=function(e,t,n){(t.ttisstring()||k.cvt2str(t))&&(t=n),V(e,t,m("concatenate",!0))},e.exports.luaG_errormsg=K,e.exports.luaG_opinterror=function(e,t,n,a){!1===k.tonumber(t)&&(n=t),V(e,n,a)},e.exports.luaG_ordererror=function(e,t,n){let a=x.luaT_objtypename(e,t),r=x.luaT_objtypename(e,n);f(a,r)?H(e,m("attempt to compare two %s values",!0),a):H(e,m("attempt to compare %s with %s",!0),a,r)},e.exports.luaG_runerror=H,e.exports.luaG_tointerror=function(e,t,n){!1===k.tointeger(t)&&(n=t),H(e,m("number%s has no integer representation",!0),N(e,n))},e.exports.luaG_traceexec=function(e){let t=e.ci,n=e.hookmask,s=0==--e.hookcount&&n&i;if(s)e.hookcount=e.basehookcount;else if(!(n&l))return;if(t.callstatus&T.CIST_HOOKYIELD)t.callstatus&=~T.CIST_HOOKYIELD;else{if(s&&v.luaD_hook(e,a,-1),n&l){let n=t.func.value.p,a=t.l_savedpc-1,i=0!==n.lineinfo.length?n.lineinfo[a]:-1;(0===a||t.l_savedpc<=e.oldpc||i!==(0!==n.lineinfo.length?n.lineinfo[e.oldpc-1]:-1))&&v.luaD_hook(e,r,i)}e.oldpc=t.l_savedpc,e.status===d&&(s&&(e.hookcount=1),t.l_savedpc--,t.callstatus|=T.CIST_HOOKYIELD,t.funcOff=e.top-1,t.func=e.stack[t.funcOff],v.luaD_throw(e,d))}},e.exports.luaG_typeerror=V,e.exports.lua_gethook=function(e){return e.hook},e.exports.lua_gethookcount=function(e){return e.basehookcount},e.exports.lua_gethookmask=function(e){return e.hookmask},e.exports.lua_getinfo=function(e,t,n){let a,r,i,l;return t=h(t),U(e),62===t[0]?(i=null,l=e.stack[e.top-1],p(e,l.ttisfunction(),"function expected"),t=t.subarray(1),e.top--):(i=n.i_ci,l=i.func,g(i.func.ttisfunction())),r=l.ttisclosure()?l.value:null,a=function(e,t,n,a,r){let i=1;for(;t.length>0;t=t.subarray(1))switch(t[0]){case 83:O(n,a);break;case 108:n.currentline=r&&r.callstatus&T.CIST_LUA?I(r):-1;break;case 117:n.nups=null===a?0:a.nupvalues,null===a||a instanceof y.CClosure?(n.isvararg=!0,n.nparams=0):(n.isvararg=a.p.is_vararg,n.nparams=a.p.numparams);break;case 116:n.istailcall=r?r.callstatus&T.CIST_TAIL:0;break;case 110:{let t=C(e,r);null===t?(n.namewhat=m("",!0),n.name=null):(n.namewhat=t.funcname,n.name=t.name);break}case 76:case 102:break;default:i=0}return i}(e,t,n,r,i),_(t,102)>=0&&(y.pushobj2s(e,l),p(e,e.top<=e.ci.top,"stack overflow")),U(e),_(t,76)>=0&&function(e,t){if(null===t||t instanceof y.CClosure)e.stack[e.top]=new y.TValue(o,null),w.api_incr_top(e);else{let n=t.p.lineinfo,a=E.luaH_new(e);e.stack[e.top]=new y.TValue(u,a),w.api_incr_top(e);let r=new y.TValue(s,!0);for(let e=0;e<n.length;e++)E.luaH_setint(a,n[e],r)}}(e,r),a},e.exports.lua_getlocal=function(e,t,n){let a;if(U(e),null===t)a=e.stack[e.top-1].ttisLclosure()?A.luaF_getlocalname(e.stack[e.top-1].value.p,n,0):null;else{let r=R(e,t.i_ci,n);r?(a=r.name,y.pushobj2s(e,e.stack[r.pos]),p(e,e.top<=e.ci.top,"stack overflow")):a=null}return U(e),a},e.exports.lua_getstack=function(e,t,n){let a,r;if(t<0)return 0;for(a=e.ci;t>0&&a!==e.base_ci;a=a.previous)t--;return 0===t&&a!==e.base_ci?(r=1,n.i_ci=a):r=0,r},e.exports.lua_sethook=function(e,t,n,a){null!==t&&0!==n||(n=0,t=null),e.ci.callstatus&T.CIST_LUA&&(e.oldpc=e.ci.l_savedpc),e.hook=t,e.basehookcount=a,e.hookcount=e.basehookcount,e.hookmask=n},e.exports.lua_setlocal=function(e,t,n){let a;U(e);let r=R(e,t.i_ci,n);return r?(a=r.name,y.setobjs2s(e,r.pos,e.top-1),delete e.stack[--e.top]):a=null,U(e),a}},function(e,t,n){"use strict";const{LUA_MINSTACK:a,LUA_RIDX_GLOBALS:r,LUA_RIDX_MAINTHREAD:i,constant_types:{LUA_NUMTAGS:l,LUA_TNIL:s,LUA_TTABLE:o,LUA_TTHREAD:u},thread_status:{LUA_OK:c}}=n(3),d=n(6),h=n(10),f=n(44),_=n(14),m=n(26),p=2*a;class g{constructor(){this.func=null,this.funcOff=NaN,this.top=NaN,this.previous=null,this.next=null,this.l_base=NaN,this.l_code=null,this.l_savedpc=NaN,this.c_k=null,this.c_old_errfunc=null,this.c_ctx=null,this.nresults=NaN,this.callstatus=NaN}}class b{constructor(e){this.id=e.id_counter++,this.base_ci=new g,this.top=NaN,this.stack_last=NaN,this.oldpc=NaN,this.l_G=e,this.stack=null,this.ci=null,this.errorJmp=null,this.nCcalls=0,this.hook=null,this.hookmask=0,this.basehookcount=0,this.allowhook=1,this.hookcount=this.basehookcount,this.nny=1,this.status=c,this.errfunc=0}}class w{constructor(){this.id_counter=1,this.ids=new WeakMap,this.mainthread=null,this.l_registry=new d.TValue(s,null),this.panic=null,this.atnativeerror=null,this.version=null,this.tmname=new Array(m.TMS.TM_N),this.mt=new Array(l)}}const v=function(e){e.ci.next=null},A=function(e,t){e.stack=new Array(p),e.top=0,e.stack_last=p-5;let n=e.base_ci;n.next=n.previous=null,n.callstatus=0,n.funcOff=e.top,n.func=e.stack[e.top],e.stack[e.top++]=new d.TValue(s,null),n.top=e.top+a,e.ci=n},L=function(e){e.ci=e.base_ci,v(e),e.stack=null},y=function(e){let t=e.l_G;A(e),function(e,t){let n=_.luaH_new(e);t.l_registry.sethvalue(n),_.luaH_setint(n,i,new d.TValue(u,e)),_.luaH_setint(n,r,new d.TValue(o,_.luaH_new(e)))}(e,t),m.luaT_init(e),t.version=f.lua_version(null)};e.exports.lua_State=b,e.exports.CallInfo=g,e.exports.CIST_OAH=1,e.exports.CIST_LUA=2,e.exports.CIST_HOOKED=4,e.exports.CIST_FRESH=8,e.exports.CIST_YPCALL=16,e.exports.CIST_TAIL=32,e.exports.CIST_HOOKYIELD=64,e.exports.CIST_LEQ=128,e.exports.CIST_FIN=256,e.exports.EXTRA_STACK=5,e.exports.lua_close=function(e){!function(e){L(e)}(e=e.l_G.mainthread)},e.exports.lua_newstate=function(){let e=new w,t=new b(e);return e.mainthread=t,h.luaD_rawrunprotected(t,y,null)!==c&&(t=null),t},e.exports.lua_newthread=function(e){let t=e.l_G,n=new b(t);return e.stack[e.top]=new d.TValue(u,n),f.api_incr_top(e),n.hookmask=e.hookmask,n.basehookcount=e.basehookcount,n.hook=e.hook,n.hookcount=n.basehookcount,A(n),n},e.exports.luaE_extendCI=function(e){let t=new g;return e.ci.next=t,t.previous=e.ci,t.next=null,e.ci=t,t},e.exports.luaE_freeCI=v,e.exports.luaE_freethread=function(e,t){L(t)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(0);class r extends a.default{}t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MAGIC=441536589,t.HASH_TABLE_KEY=3283040112,t.HASH_TABLE_INDEX=0,t.HASH_NAME_A=1,t.HASH_NAME_B=2,t.HASH_FILE_KEY=3,t.HASH_ENTRY_DELETED=4294967294,t.HASH_ENTRY_EMPTY=4294967295,t.BLOCK_TABLE_KEY=3968054179,t.FILE_IMPLODE=256,t.FILE_COMPRESSED=512,t.FILE_ENCRYPTED=65536,t.FILE_OFFSET_ADJUSTED_KEY=131072,t.FILE_PATCH_FILE=1048576,t.FILE_SINGLE_UNIT=16777216,t.FILE_DELETE_MARKER=33554432,t.FILE_SECTOR_CRC=67108864,t.FILE_EXISTS=2147483648,t.COMPRESSION_HUFFMAN=1,t.COMPRESSION_DEFLATE=2,t.COMPRESSION_IMPLODE=8,t.COMPRESSION_BZIP2=16,t.COMPRESSION_ADPCM_MONO=64,t.COMPRESSION_ADPCM_STEREO=128},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(12),r=n(103);class i extends r.HandlerResource{constructor(){super(...arguments),this.webglResource=null,this.width=0,this.height=0,this.wrapS=33071,this.wrapT=33071,this.magFilter=9729,this.minFilter=9729}lateLoad(){this.viewer.webgl.setTextureMode(this.wrapS,this.wrapT,this.magFilter,this.minFilter)}bind(e){this.viewer.webgl.bindTexture(this,e)}update(e){let t=this.viewer.gl,n=e.width,r=e.height;t.bindTexture(t.TEXTURE_2D,this.webglResource),n===this.width&&r===this.height?t.texSubImage2D(t.TEXTURE_2D,0,0,0,t.RGBA,t.UNSIGNED_BYTE,e):(t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e),this.width=n,this.height=r),a.isPowerOfTwo(n)&&a.isPowerOfTwo(r)&&t.generateMipmap(t.TEXTURE_2D)}}t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(2),r=n(7),i=a.vec3.create(),l=a.quat.create(),s=a.vec3.create();a.mat4.create();t.Node=class{constructor(){this.pivot=a.vec3.create(),this.localLocation=a.vec3.create(),this.localRotation=a.quat.create(),this.localScale=a.vec3.fromValues(1,1,1),this.worldLocation=a.vec3.create(),this.worldRotation=a.quat.create(),this.worldScale=a.vec3.create(),this.inverseWorldLocation=a.vec3.create(),this.inverseWorldRotation=a.quat.create(),this.inverseWorldScale=a.vec3.create(),this.localMatrix=a.mat4.create(),this.worldMatrix=a.mat4.create(),this.parent=null,this.children=[],this.dontInheritTranslation=!1,this.dontInheritRotation=!1,this.dontInheritScaling=!0,this.visible=!0,this.wasDirty=!1,this.dirty=!0}setPivot(e){return a.vec3.copy(this.pivot,e),this.dirty=!0,this}setLocation(e){return a.vec3.copy(this.localLocation,e),this.dirty=!0,this}setRotation(e){return a.quat.copy(this.localRotation,e),this.dirty=!0,this}setScale(e){return a.vec3.copy(this.localScale,e),this.dirty=!0,this}setUniformScale(e){return a.vec3.set(this.localScale,e,e,e),this.dirty=!0,this}setTransformation(e,t,n){let a=this.localLocation,r=this.localRotation,i=this.localScale;return a[0]=e[0],a[1]=e[1],a[2]=e[2],r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],i[0]=n[0],i[1]=n[1],i[2]=n[2],this.dirty=!0,this}resetTransformation(){return a.vec3.copy(this.pivot,r.VEC3_ZERO),a.vec3.copy(this.localLocation,r.VEC3_ZERO),a.quat.copy(this.localRotation,r.QUAT_DEFAULT),a.vec3.copy(this.localScale,r.VEC3_ONE),this.dirty=!0,this}movePivot(e){return a.vec3.add(this.pivot,this.pivot,e),this.dirty=!0,this}move(e){return a.vec3.add(this.localLocation,this.localLocation,e),this.dirty=!0,this}rotate(e){return a.quat.mul(this.localRotation,this.localRotation,e),this.dirty=!0,this}rotateLocal(e){return a.quat.mul(this.localRotation,e,this.localRotation),this.dirty=!0,this}scale(e){return a.vec3.mul(this.localScale,this.localScale,e),this.dirty=!0,this}uniformScale(e){return a.vec3.scale(this.localScale,this.localScale,e),this.dirty=!0,this}face(e,t){a.quat.conjugate(this.localRotation,r.quatLookAt(this.localRotation,this.localLocation,e,t)),this.dirty=!0}setParent(e){if(this.parent){let e=this.parent.children,t=e.indexOf(this);-1!==t&&e.splice(t,1)}return this.parent=e||null,e&&e.children.push(this),this.dirty=!0,this}recalculateTransformation(){let e=this.dirty,t=this.parent;if(this.wasDirty=this.dirty,t&&(e=e||t.wasDirty),this.wasDirty=e,e){this.dirty=!1;let e=this.localMatrix,n=this.localLocation,r=this.localRotation,o=this.localScale,u=this.worldMatrix,c=this.worldLocation,d=this.worldRotation,h=this.worldScale,f=this.inverseWorldLocation,_=this.inverseWorldRotation,m=this.inverseWorldScale;if(t){let c,f,_,m=t.pivot;if(c=i,c[0]=n[0]+m[0],c[1]=n[1]+m[1],c[2]=n[2]+m[2],this.dontInheritRotation?(f=l,a.quat.mul(f,r,t.inverseWorldRotation)):f=r,this.dontInheritScaling){_=s;let e=t.inverseWorldScale;_[0]=e[0]*o[0],_[1]=e[1]*o[1],_[2]=e[2]*o[2],h[0]=o[0],h[1]=o[1],h[2]=o[2]}else{_=o;let e=t.worldScale;h[0]=e[0]*o[0],h[1]=e[1]*o[1],h[2]=e[2]*o[2]}a.mat4.fromRotationTranslationScale(e,f,c,_),a.mat4.mul(u,t.worldMatrix,e),a.quat.mul(d,t.worldRotation,f)}else a.mat4.fromRotationTranslationScale(e,r,n,o),u[0]=e[0],u[1]=e[1],u[2]=e[2],u[3]=e[3],u[4]=e[4],u[5]=e[5],u[6]=e[6],u[7]=e[7],u[8]=e[8],u[9]=e[9],u[10]=e[10],u[11]=e[11],u[12]=e[12],u[13]=e[13],u[14]=e[14],u[15]=e[15],d[0]=r[0],d[1]=r[1],d[2]=r[2],d[3]=r[3],h[0]=o[0],h[1]=o[1],h[2]=o[2];_[0]=-d[0],_[1]=-d[1],_[2]=-d[2],_[3]=d[3],m[0]=1/h[0],m[1]=1/h[1],m[2]=1/h[2],c[0]=u[12],c[1]=u[13],c[2]=u[14],f[0]=-c[0],f[1]=-c[1],f[2]=-c[2]}}update(e,t){this.dirty||this.parent&&this.parent.wasDirty?(this.dirty=!0,this.wasDirty=!0,this.recalculateTransformation()):this.wasDirty=!1,this.updateObject(e,t),this.updateChildren(e,t)}updateObject(e,t){}updateChildren(e,t){let n=this.children;for(let a=0,r=n.length;a<r;a++)n[a].update(e,t)}};class o{constructor(e){this.pivot=e[0],this.localLocation=e[1],this.localRotation=e[2],this.localScale=e[3],this.worldLocation=e[4],this.worldRotation=e[5],this.worldScale=e[6],this.inverseWorldLocation=e[7],this.inverseWorldRotation=e[8],this.inverseWorldScale=e[9],this.localMatrix=e[10],this.worldMatrix=e[11],this.dontInheritTranslation=!1,this.dontInheritRotation=!1,this.dontInheritScaling=!1,this.parent=null,this.children=[],this.visible=!0,this.wasDirty=!1,this.object=null,this.localRotation[3]=1,this.localScale.fill(1),this.localMatrix[0]=1,this.localMatrix[5]=1,this.localMatrix[10]=1,this.localMatrix[15]=1,this.dirty=!0,this.billboarded=!1,this.billboardedX=!1,this.billboardedY=!1,this.billboardedZ=!1}recalculateTransformation(e){let t,n,r=this.localMatrix,i=this.localRotation,o=this.localScale,u=this.worldMatrix,c=this.worldLocation,d=this.worldRotation,h=this.worldScale,f=this.pivot,_=this.inverseWorldLocation,m=this.inverseWorldRotation,p=this.inverseWorldScale,g=this.parent;if(this.dontInheritScaling){n=s;let e=g.inverseWorldScale;n[0]=e[0]*o[0],n[1]=e[1]*o[1],n[2]=e[2]*o[2],h[0]=o[0],h[1]=o[1],h[2]=o[2]}else{n=o;let e=g.worldScale;h[0]=e[0]*o[0],h[1]=e[1]*o[1],h[2]=e[2]*o[2]}this.billboarded?(t=l,a.quat.copy(t,g.inverseWorldRotation),a.quat.mul(t,t,e.camera.inverseRotation),this.convertBasis(t)):t=i,a.mat4.fromRotationTranslationScaleOrigin(r,t,this.localLocation,n,f),a.mat4.mul(u,g.worldMatrix,r),a.quat.mul(d,g.worldRotation,t),m[0]=-d[0],m[1]=-d[1],m[2]=-d[2],m[3]=d[3],p[0]=1/h[0],p[1]=1/h[1],p[2]=1/h[2];let b=f[0],w=f[1],v=f[2];c[0]=u[0]*b+u[4]*w+u[8]*v+u[12],c[1]=u[1]*b+u[5]*w+u[9]*v+u[13],c[2]=u[2]*b+u[6]*w+u[10]*v+u[14],_[0]=-c[0],_[1]=-c[1],_[2]=-c[2]}updateChildren(e,t){let n=this.children;for(let a=0,r=n.length;a<r;a++)n[a].update(e,t)}convertBasis(e){}}t.SkeletalNode=o;const u=65;t.createSkeletalNodes=function(e,t=o){let n=new Float32Array(e*u),a=[],r=0,i=3*e,l=4*e,s=16*e;t=t||o;let c=n.subarray(r,r+i);r+=i;let d=n.subarray(r,r+i);r+=i;let h=n.subarray(r,r+l);r+=l;let f=n.subarray(r,r+i);r+=i;let _=n.subarray(r,r+i);r+=i;let m=n.subarray(r,r+l);r+=l;let p=n.subarray(r,r+i);r+=i;let g=n.subarray(r,r+i);r+=i;let b=n.subarray(r,r+l);r+=l;let w=n.subarray(r,r+i);r+=i;let v=n.subarray(r,r+s);r+=s;let A=n.subarray(r,r+s);for(let n=0;n<e;n++){let e=3*n,r=e+3,i=4*n,l=i+4,s=16*n,o=s+16;a[n]=new t([c.subarray(e,r),d.subarray(e,r),h.subarray(i,l),f.subarray(e,r),_.subarray(e,r),m.subarray(i,l),p.subarray(e,r),g.subarray(e,r),b.subarray(i,l),w.subarray(e,r),v.subarray(s,o),A.subarray(s,o)])}return{data:n,nodes:a,pivots:c,localLocations:d,localRotations:h,localScales:f,worldLocations:_,worldRotations:m,worldScales:p,inverseWorldLocations:g,invereseWorldRotations:b,inverseWorldScales:w,localMatrices:v,worldMatrices:A}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(e){this.index=-1,this.health=0,this.emitter=e}}},function(e,t,n){"use strict";const{constant_types:{LUA_TNIL:a}}=n(3),r=n(6);e.exports.MAXUPVAL=255,e.exports.Proto=class{constructor(e){this.id=e.l_G.id_counter++,this.k=[],this.p=[],this.code=[],this.cache=null,this.lineinfo=[],this.upvalues=[],this.numparams=0,this.is_vararg=!1,this.maxstacksize=0,this.locvars=[],this.linedefined=0,this.lastlinedefined=0,this.source=null}},e.exports.luaF_findupval=function(e,t){return e.stack[t]},e.exports.luaF_close=function(e,t){for(let n=t;n<e.top;n++){let t=e.stack[n];e.stack[n]=new r.TValue(t.type,t.value)}},e.exports.luaF_getlocalname=function(e,t,n){for(let a=0;a<e.locvars.length&&e.locvars[a].startpc<=n;a++)if(n<e.locvars[a].endpc&&0===--t)return e.locvars[a].varname.getstr();return null},e.exports.luaF_initupvals=function(e,t){for(let e=0;e<t.nupvalues;e++)t.upvals[e]=new r.TValue(a,null)},e.exports.luaF_newLclosure=function(e,t){return new r.LClosure(e,t)}},function(e,t,n){"use strict";const{constant_types:{LUA_TTABLE:a,LUA_TUSERDATA:r},to_luastring:i}=n(3),{lua_assert:l}=n(5),s=n(6),o=n(10),u=n(19),{luaS_bless:c,luaS_new:d}=n(15),h=n(14),f=n(18),_=n(27),m=["no value","nil","boolean","userdata","number","string","table","function","userdata","thread","proto"].map(e=>i(e)),p=function(e){return m[e+1]},g={TM_INDEX:0,TM_NEWINDEX:1,TM_GC:2,TM_MODE:3,TM_LEN:4,TM_EQ:5,TM_ADD:6,TM_SUB:7,TM_MUL:8,TM_MOD:9,TM_POW:10,TM_DIV:11,TM_IDIV:12,TM_BAND:13,TM_BOR:14,TM_BXOR:15,TM_SHL:16,TM_SHR:17,TM_UNM:18,TM_BNOT:19,TM_LT:20,TM_LE:21,TM_CONCAT:22,TM_CALL:23,TM_N:24},b=i("__name",!0),w=function(e,t,n,a,r,i){let l=e.top;if(s.pushobj2s(e,t),s.pushobj2s(e,n),s.pushobj2s(e,a),i||s.pushobj2s(e,r),e.ci.callstatus&u.CIST_LUA?o.luaD_call(e,l,i):o.luaD_callnoyield(e,l,i),i){let t=e.stack[e.top-1];delete e.stack[--e.top],r.setfrom(t)}},v=function(e,t,n,a,r){let i=L(e,t,r);return i.ttisnil()&&(i=L(e,n,r)),!i.ttisnil()&&(w(e,i,t,n,a,1),!0)},A=function(e,t,n){const a=h.luaH_getstr(e,n);return l(t<=g.TM_EQ),a.ttisnil()?(e.flags|=1<<t,null):a},L=function(e,t,n){let i;switch(t.ttnov()){case a:case r:i=t.value.metatable;break;default:i=e.l_G.mt[t.ttnov()]}return i?h.luaH_getstr(i,e.l_G.tmname[n]):s.luaO_nilobject};e.exports.fasttm=function(e,t,n){return null===t?null:t.flags&1<<n?null:A(t,n,e.l_G.tmname[n])},e.exports.TMS=g,e.exports.luaT_callTM=w,e.exports.luaT_callbinTM=v,e.exports.luaT_trybinTM=function(e,t,n,a,r){if(!v(e,t,n,a,r))switch(r){case g.TM_CONCAT:return f.luaG_concaterror(e,t,n);case g.TM_BAND:case g.TM_BOR:case g.TM_BXOR:case g.TM_SHL:case g.TM_SHR:case g.TM_BNOT:{let a=_.tonumber(t),r=_.tonumber(n);return!1!==a&&!1!==r?f.luaG_tointerror(e,t,n):f.luaG_opinterror(e,t,n,i("perform bitwise operation on",!0))}default:return f.luaG_opinterror(e,t,n,i("perform arithmetic on",!0))}},e.exports.luaT_callorderTM=function(e,t,n,a){let r=new s.TValue;return v(e,t,n,r,a)?!r.l_isfalse():null},e.exports.luaT_gettm=A,e.exports.luaT_gettmbyobj=L,e.exports.luaT_init=function(e){e.l_G.tmname[g.TM_INDEX]=new d(e,i("__index",!0)),e.l_G.tmname[g.TM_NEWINDEX]=new d(e,i("__newindex",!0)),e.l_G.tmname[g.TM_GC]=new d(e,i("__gc",!0)),e.l_G.tmname[g.TM_MODE]=new d(e,i("__mode",!0)),e.l_G.tmname[g.TM_LEN]=new d(e,i("__len",!0)),e.l_G.tmname[g.TM_EQ]=new d(e,i("__eq",!0)),e.l_G.tmname[g.TM_ADD]=new d(e,i("__add",!0)),e.l_G.tmname[g.TM_SUB]=new d(e,i("__sub",!0)),e.l_G.tmname[g.TM_MUL]=new d(e,i("__mul",!0)),e.l_G.tmname[g.TM_MOD]=new d(e,i("__mod",!0)),e.l_G.tmname[g.TM_POW]=new d(e,i("__pow",!0)),e.l_G.tmname[g.TM_DIV]=new d(e,i("__div",!0)),e.l_G.tmname[g.TM_IDIV]=new d(e,i("__idiv",!0)),e.l_G.tmname[g.TM_BAND]=new d(e,i("__band",!0)),e.l_G.tmname[g.TM_BOR]=new d(e,i("__bor",!0)),e.l_G.tmname[g.TM_BXOR]=new d(e,i("__bxor",!0)),e.l_G.tmname[g.TM_SHL]=new d(e,i("__shl",!0)),e.l_G.tmname[g.TM_SHR]=new d(e,i("__shr",!0)),e.l_G.tmname[g.TM_UNM]=new d(e,i("__unm",!0)),e.l_G.tmname[g.TM_BNOT]=new d(e,i("__bnot",!0)),e.l_G.tmname[g.TM_LT]=new d(e,i("__lt",!0)),e.l_G.tmname[g.TM_LE]=new d(e,i("__le",!0)),e.l_G.tmname[g.TM_CONCAT]=new d(e,i("__concat",!0)),e.l_G.tmname[g.TM_CALL]=new d(e,i("__call",!0))},e.exports.luaT_objtypename=function(e,t){let n;if(t.ttistable()&&null!==(n=t.value.metatable)||t.ttisfulluserdata()&&null!==(n=t.value.metatable)){let t=h.luaH_getstr(n,c(e,b));if(t.ttisstring())return t.svalue()}return p(t.ttnov())},e.exports.ttypename=p},function(e,t,n){"use strict";const{LUA_MASKLINE:a,LUA_MASKCOUNT:r,LUA_MULTRET:i,constant_types:{LUA_TBOOLEAN:l,LUA_TLCF:s,LUA_TLIGHTUSERDATA:o,LUA_TLNGSTR:u,LUA_TNIL:c,LUA_TNUMBER:d,LUA_TNUMFLT:h,LUA_TNUMINT:f,LUA_TSHRSTR:_,LUA_TTABLE:m,LUA_TUSERDATA:p},to_luastring:g}=n(3),{INDEXK:b,ISK:w,LFIELDS_PER_FLUSH:v,OpCodesI:{OP_ADD:A,OP_BAND:L,OP_BNOT:y,OP_BOR:S,OP_BXOR:T,OP_CALL:E,OP_CLOSURE:x,OP_CONCAT:k,OP_DIV:M,OP_EQ:I,OP_EXTRAARG:U,OP_FORLOOP:P,OP_FORPREP:R,OP_GETTABLE:O,OP_GETTABUP:C,OP_GETUPVAL:B,OP_IDIV:F,OP_JMP:D,OP_LE:G,OP_LEN:N,OP_LOADBOOL:V,OP_LOADK:j,OP_LOADKX:H,OP_LOADNIL:K,OP_LT:z,OP_MOD:X,OP_MOVE:q,OP_MUL:Y,OP_NEWTABLE:$,OP_NOT:W,OP_POW:Z,OP_RETURN:J,OP_SELF:Q,OP_SETLIST:ee,OP_SETTABLE:te,OP_SETTABUP:ne,OP_SETUPVAL:ae,OP_SHL:re,OP_SHR:ie,OP_SUB:le,OP_TAILCALL:se,OP_TEST:oe,OP_TESTSET:ue,OP_TFORCALL:ce,OP_TFORLOOP:de,OP_UNM:he,OP_VARARG:fe}}=n(28),{LUA_MAXINTEGER:_e,LUA_MININTEGER:me,lua_numbertointeger:pe}=n(17),{lua_assert:ge,luai_nummod:be}=n(5),we=n(6),ve=n(25),Ae=n(19),{luaS_bless:Le,luaS_eqlngstr:ye,luaS_hashlongstr:Se}=n(15),Te=n(10),Ee=n(26),xe=n(14),ke=n(18),Me=function(e,t,n){return t+n.A},Ie=function(e,t,n){return t+n.B},Ue=function(e,t,n,a){return w(a.B)?n[b(a.B)]:e.stack[t+a.B]},Pe=function(e,t,n,a){return w(a.C)?n[b(a.C)]:e.stack[t+a.C]},Re=function(e,t,n,a){let r=n.A;0!==r&&ve.luaF_close(e,t.l_base+r-1),t.l_savedpc+=n.sBx+a},Oe=function(e,t){Re(e,t,t.l_code[t.l_savedpc],1)},Ce=function(e,t,n){if(t.ttisnumber()&&n.ttisnumber())return je(t,n)?1:0;if(t.ttisstring()&&n.ttisstring())return Ke(t.tsvalue(),n.tsvalue())<0?1:0;{let a=Ee.luaT_callorderTM(e,t,n,Ee.TMS.TM_LT);return null===a&&ke.luaG_ordererror(e,t,n),a?1:0}},Be=function(e,t,n){let a;return t.ttisnumber()&&n.ttisnumber()?He(t,n)?1:0:t.ttisstring()&&n.ttisstring()?Ke(t.tsvalue(),n.tsvalue())<=0?1:0:(a=Ee.luaT_callorderTM(e,t,n,Ee.TMS.TM_LE),null!==a?a?1:0:(e.ci.callstatus|=Ae.CIST_LEQ,a=Ee.luaT_callorderTM(e,n,t,Ee.TMS.TM_LT),e.ci.callstatus^=Ae.CIST_LEQ,null===a&&ke.luaG_ordererror(e,t,n),a?0:1))},Fe=function(e,t,n){if(t.ttype()!==n.ttype())return t.ttnov()!==n.ttnov()||t.ttnov()!==d?0:t.value===n.value?1:0;let a;switch(t.ttype()){case c:return 1;case l:return t.value==n.value?1:0;case o:case f:case h:case s:return t.value===n.value?1:0;case _:case u:return ye(t.tsvalue(),n.tsvalue())?1:0;case p:case m:if(t.value===n.value)return 1;if(null===e)return 0;a=Ee.fasttm(e,t.value.metatable,Ee.TMS.TM_EQ),null===a&&(a=Ee.fasttm(e,n.value.metatable,Ee.TMS.TM_EQ));break;default:return t.value===n.value?1:0}if(null===a)return 0;let r=new we.TValue;return Ee.luaT_callTM(e,a,t,n,r,1),r.l_isfalse()?0:1},De=function(e,t){let n=!1,a=Ge(e,t<0?2:1);if(!1===a){let r=Ve(e);if(!1===r)return!1;0<r?(a=_e,t<0&&(n=!0)):(a=me,t>=0&&(n=!0))}return{stopnow:n,ilimit:a}},Ge=function(e,t){if(e.ttisfloat()){let n=e.value,a=Math.floor(n);if(n!==a){if(0===t)return!1;t>1&&(a+=1)}return pe(a)}if(e.ttisinteger())return e.value;if(Qe(e)){let n=new we.TValue;if(we.luaO_str2num(e.svalue(),n)===e.vslen()+1)return Ge(n,t)}return!1},Ne=function(e){return e.ttisinteger()?e.value:Ge(e,0)},Ve=function(e){if(e.ttnov()===d)return e.value;if(Qe(e)){let t=new we.TValue;if(we.luaO_str2num(e.svalue(),t)===e.vslen()+1)return t.value}return!1},je=function(e,t){return e.value<t.value},He=function(e,t){return e.value<=t.value},Ke=function(e,t){let n=Se(e),a=Se(t);return n===a?0:n<a?-1:1},ze=function(e,t,n){let a;switch(n.ttype()){case m:{let r=n.value;if(a=Ee.fasttm(e,r.metatable,Ee.TMS.TM_LEN),null!==a)break;return void t.setivalue(xe.luaH_getn(r))}case _:case u:return void t.setivalue(n.vslen());default:a=Ee.luaT_gettmbyobj(e,n,Ee.TMS.TM_LEN),a.ttisnil()&&ke.luaG_typeerror(e,n,g("get length of",!0))}Ee.luaT_callTM(e,a,n,n,t,1)},Xe=Math.imul||function(e,t){let n=65535&e,a=65535&t;return n*a+((e>>>16&65535)*a+n*(t>>>16&65535)<<16>>>0)|0},qe=function(e,t,n){return 0===n&&ke.luaG_runerror(e,g("attempt to divide by zero")),0|Math.floor(t/n)},Ye=function(e,t,n){return 0===n&&ke.luaG_runerror(e,g("attempt to perform 'n%%0'")),t-Math.floor(t/n)*n|0},$e=function(e,t){return t<0?t<=-32?0:e>>>-t:t>=32?0:e<<t},We=function(e,t,n,a){let r=e.cache;if(null!==r){let i=e.upvalues,l=i.length;for(let e=0;e<l;e++){let l=i[e].instack?n[a+i[e].idx]:t[i[e].idx];if(r.upvals[e]!==l)return null}}return r},Ze=function(e,t,n,a,r){let i=t.upvalues.length,l=t.upvalues,s=new we.LClosure(e,i);s.p=t,e.stack[r].setclLvalue(s);for(let t=0;t<i;t++)l[t].instack?s.upvals[t]=ve.luaF_findupval(e,a+l[t].idx):s.upvals[t]=n[l[t].idx];t.cache=s},Je=function(e){return e.ttisnumber()},Qe=function(e){return e.ttisstring()},et=function(e,t){let n=e.stack[t];return!!n.ttisstring()||!!Je(n)&&(we.luaO_tostring(e,n),!0)},tt=function(e){return e.ttisstring()&&0===e.vslen()},nt=function(e,t,n,a){let r=0;do{let i=e.stack[t-n],l=i.vslen(),s=i.svalue();a.set(s,r),r+=l}while(--n>0)},at=function(e,t){ge(t>=2);do{let n=e.top,a=2;if((e.stack[n-2].ttisstring()||Je(e.stack[n-2]))&&et(e,n-1))if(tt(e.stack[n-1]))et(e,n-2);else if(tt(e.stack[n-2]))we.setobjs2s(e,n-2,n-1);else{let r=e.stack[n-1].vslen();for(a=1;a<t&&et(e,n-a-1);a++){r+=e.stack[n-a-1].vslen()}let i=new Uint8Array(r);nt(e,n,a,i);let l=Le(e,i);we.setsvalue2s(e,n-a,l)}else Ee.luaT_trybinTM(e,e.stack[n-2],e.stack[n-1],e.stack[n-2],Ee.TMS.TM_CONCAT);for(t-=a-1;e.top>n-(a-1);)delete e.stack[--e.top]}while(t>1)},rt=function(e,t,n,a){for(let r=0;r<2e3;r++){let r;if(t.ttistable()){let i=xe.luaH_get(e,t.value,n);if(!i.ttisnil())return void we.setobj2s(e,a,i);if(r=Ee.fasttm(e,t.value.metatable,Ee.TMS.TM_INDEX),null===r)return void e.stack[a].setnilvalue()}else r=Ee.luaT_gettmbyobj(e,t,Ee.TMS.TM_INDEX),r.ttisnil()&&ke.luaG_typeerror(e,t,g("index",!0));if(r.ttisfunction())return void Ee.luaT_callTM(e,r,t,n,e.stack[a],1);t=r}ke.luaG_runerror(e,g("'__index' chain too long; possible loop",!0))},it=function(e,t,n,a){for(let r=0;r<2e3;r++){let r;if(t.ttistable()){let i=t.value;if(!xe.luaH_get(e,i,n).ttisnil()||null===(r=Ee.fasttm(e,i.metatable,Ee.TMS.TM_NEWINDEX)))return xe.luaH_setfrom(e,i,n,a),void xe.invalidateTMcache(i)}else(r=Ee.luaT_gettmbyobj(e,t,Ee.TMS.TM_NEWINDEX)).ttisnil()&&ke.luaG_typeerror(e,t,g("index",!0));if(r.ttisfunction())return void Ee.luaT_callTM(e,r,t,n,a,0);t=r}ke.luaG_runerror(e,g("'__newindex' chain too long; possible loop",!0))};e.exports.cvt2str=Je,e.exports.cvt2num=Qe,e.exports.luaV_gettable=rt,e.exports.luaV_concat=at,e.exports.luaV_div=qe,e.exports.luaV_equalobj=Fe,e.exports.luaV_execute=function(e){let t=e.ci;t.callstatus|=Ae.CIST_FRESH;e:for(;;){ge(t===e.ci);let n=t.func.value,l=n.p.k,s=t.l_base,o=t.l_code[t.l_savedpc++];e.hookmask&(a|r)&&ke.luaG_traceexec(e);let u=Me(0,s,o);switch(o.opcode){case q:we.setobjs2s(e,u,Ie(0,s,o));break;case j:{let t=l[o.Bx];we.setobj2s(e,u,t);break}case H:{ge(t.l_code[t.l_savedpc].opcode===U);let n=l[t.l_code[t.l_savedpc++].Ax];we.setobj2s(e,u,n);break}case V:e.stack[u].setbvalue(0!==o.B),0!==o.C&&t.l_savedpc++;break;case K:for(let t=0;t<=o.B;t++)e.stack[u+t].setnilvalue();break;case B:{let t=o.B;we.setobj2s(e,u,n.upvals[t]);break}case C:{let t=n.upvals[o.B],a=Pe(e,s,l,o);rt(e,t,a,u);break}case O:{let t=e.stack[Ie(0,s,o)],n=Pe(e,s,l,o);rt(e,t,n,u);break}case ne:{let t=n.upvals[o.A],a=Ue(e,s,l,o),r=Pe(e,s,l,o);it(e,t,a,r);break}case ae:n.upvals[o.B].setfrom(e.stack[u]);break;case te:{let t=e.stack[u],n=Ue(e,s,l,o),a=Pe(e,s,l,o);it(e,t,n,a);break}case $:e.stack[u].sethvalue(xe.luaH_new(e));break;case Q:{let t=Ie(0,s,o),n=Pe(e,s,l,o);we.setobjs2s(e,u+1,t),rt(e,e.stack[t],n,u);break}case A:{let t,n,a=Ue(e,s,l,o),r=Pe(e,s,l,o);a.ttisinteger()&&r.ttisinteger()?e.stack[u].setivalue(a.value+r.value|0):!1!==(t=Ve(a))&&!1!==(n=Ve(r))?e.stack[u].setfltvalue(t+n):Ee.luaT_trybinTM(e,a,r,e.stack[u],Ee.TMS.TM_ADD);break}case le:{let t,n,a=Ue(e,s,l,o),r=Pe(e,s,l,o);a.ttisinteger()&&r.ttisinteger()?e.stack[u].setivalue(a.value-r.value|0):!1!==(t=Ve(a))&&!1!==(n=Ve(r))?e.stack[u].setfltvalue(t-n):Ee.luaT_trybinTM(e,a,r,e.stack[u],Ee.TMS.TM_SUB);break}case Y:{let t,n,a=Ue(e,s,l,o),r=Pe(e,s,l,o);a.ttisinteger()&&r.ttisinteger()?e.stack[u].setivalue(Xe(a.value,r.value)):!1!==(t=Ve(a))&&!1!==(n=Ve(r))?e.stack[u].setfltvalue(t*n):Ee.luaT_trybinTM(e,a,r,e.stack[u],Ee.TMS.TM_MUL);break}case X:{let t,n,a=Ue(e,s,l,o),r=Pe(e,s,l,o);a.ttisinteger()&&r.ttisinteger()?e.stack[u].setivalue(Ye(e,a.value,r.value)):!1!==(t=Ve(a))&&!1!==(n=Ve(r))?e.stack[u].setfltvalue(be(e,t,n)):Ee.luaT_trybinTM(e,a,r,e.stack[u],Ee.TMS.TM_MOD);break}case Z:{let t,n,a=Ue(e,s,l,o),r=Pe(e,s,l,o);!1!==(t=Ve(a))&&!1!==(n=Ve(r))?e.stack[u].setfltvalue(Math.pow(t,n)):Ee.luaT_trybinTM(e,a,r,e.stack[u],Ee.TMS.TM_POW);break}case M:{let t,n,a=Ue(e,s,l,o),r=Pe(e,s,l,o);!1!==(t=Ve(a))&&!1!==(n=Ve(r))?e.stack[u].setfltvalue(t/n):Ee.luaT_trybinTM(e,a,r,e.stack[u],Ee.TMS.TM_DIV);break}case F:{let t,n,a=Ue(e,s,l,o),r=Pe(e,s,l,o);a.ttisinteger()&&r.ttisinteger()?e.stack[u].setivalue(qe(e,a.value,r.value)):!1!==(t=Ve(a))&&!1!==(n=Ve(r))?e.stack[u].setfltvalue(Math.floor(t/n)):Ee.luaT_trybinTM(e,a,r,e.stack[u],Ee.TMS.TM_IDIV);break}case L:{let t,n,a=Ue(e,s,l,o),r=Pe(e,s,l,o);!1!==(t=Ne(a))&&!1!==(n=Ne(r))?e.stack[u].setivalue(t&n):Ee.luaT_trybinTM(e,a,r,e.stack[u],Ee.TMS.TM_BAND);break}case S:{let t,n,a=Ue(e,s,l,o),r=Pe(e,s,l,o);!1!==(t=Ne(a))&&!1!==(n=Ne(r))?e.stack[u].setivalue(t|n):Ee.luaT_trybinTM(e,a,r,e.stack[u],Ee.TMS.TM_BOR);break}case T:{let t,n,a=Ue(e,s,l,o),r=Pe(e,s,l,o);!1!==(t=Ne(a))&&!1!==(n=Ne(r))?e.stack[u].setivalue(t^n):Ee.luaT_trybinTM(e,a,r,e.stack[u],Ee.TMS.TM_BXOR);break}case re:{let t,n,a=Ue(e,s,l,o),r=Pe(e,s,l,o);!1!==(t=Ne(a))&&!1!==(n=Ne(r))?e.stack[u].setivalue($e(t,n)):Ee.luaT_trybinTM(e,a,r,e.stack[u],Ee.TMS.TM_SHL);break}case ie:{let t,n,a=Ue(e,s,l,o),r=Pe(e,s,l,o);!1!==(t=Ne(a))&&!1!==(n=Ne(r))?e.stack[u].setivalue($e(t,-n)):Ee.luaT_trybinTM(e,a,r,e.stack[u],Ee.TMS.TM_SHR);break}case he:{let t,n=e.stack[Ie(0,s,o)];n.ttisinteger()?e.stack[u].setivalue(0|-n.value):!1!==(t=Ve(n))?e.stack[u].setfltvalue(-t):Ee.luaT_trybinTM(e,n,n,e.stack[u],Ee.TMS.TM_UNM);break}case y:{let t=e.stack[Ie(0,s,o)];t.ttisinteger()?e.stack[u].setivalue(~t.value):Ee.luaT_trybinTM(e,t,t,e.stack[u],Ee.TMS.TM_BNOT);break}case W:{let t=e.stack[Ie(0,s,o)];e.stack[u].setbvalue(t.l_isfalse());break}case N:ze(e,e.stack[u],e.stack[Ie(0,s,o)]);break;case k:{let n=o.B,a=o.C;e.top=s+a+1,at(e,a-n+1);let r=s+n;we.setobjs2s(e,u,r),Te.adjust_top(e,t.top);break}case D:Re(e,t,o,0);break;case I:Fe(e,Ue(e,s,l,o),Pe(e,s,l,o))!==o.A?t.l_savedpc++:Oe(e,t);break;case z:Ce(e,Ue(e,s,l,o),Pe(e,s,l,o))!==o.A?t.l_savedpc++:Oe(e,t);break;case G:Be(e,Ue(e,s,l,o),Pe(e,s,l,o))!==o.A?t.l_savedpc++:Oe(e,t);break;case oe:(o.C?e.stack[u].l_isfalse():!e.stack[u].l_isfalse())?t.l_savedpc++:Oe(e,t);break;case ue:{let n=Ie(0,s,o),a=e.stack[n];(o.C?a.l_isfalse():!a.l_isfalse())?t.l_savedpc++:(we.setobjs2s(e,u,n),Oe(e,t));break}case E:{let n=o.B,a=o.C-1;if(0!==n&&Te.adjust_top(e,u+n),!Te.luaD_precall(e,u,a)){t=e.ci;continue e}a>=0&&Te.adjust_top(e,t.top);break}case se:{let a=o.B;if(0!==a&&Te.adjust_top(e,u+a),!Te.luaD_precall(e,u,i)){let a=e.ci,r=a.previous,i=a.func,l=a.funcOff,s=r.funcOff,o=a.l_base+i.value.p.numparams;n.p.p.length>0&&ve.luaF_close(e,r.l_base);for(let t=0;l+t<o;t++)we.setobjs2s(e,s+t,l+t);r.l_base=s+(a.l_base-l),r.top=s+(e.top-l),Te.adjust_top(e,r.top),r.l_code=a.l_code,r.l_savedpc=a.l_savedpc,r.callstatus|=Ae.CIST_TAIL,r.next=null,t=e.ci=r,ge(e.top===r.l_base+e.stack[s].value.p.maxstacksize);continue e}break}case J:{n.p.p.length>0&&ve.luaF_close(e,s);let a=Te.luaD_poscall(e,t,u,0!==o.B?o.B-1:e.top-u);if(t.callstatus&Ae.CIST_FRESH)return;t=e.ci,a&&Te.adjust_top(e,t.top),ge(t.callstatus&Ae.CIST_LUA),ge(t.l_code[t.l_savedpc-1].opcode===E);continue e}case P:if(e.stack[u].ttisinteger()){let n=e.stack[u+2].value,a=e.stack[u].value+n|0,r=e.stack[u+1].value;(0<n?a<=r:r<=a)&&(t.l_savedpc+=o.sBx,e.stack[u].chgivalue(a),e.stack[u+3].setivalue(a))}else{let n=e.stack[u+2].value,a=e.stack[u].value+n,r=e.stack[u+1].value;(0<n?a<=r:r<=a)&&(t.l_savedpc+=o.sBx,e.stack[u].chgfltvalue(a),e.stack[u+3].setfltvalue(a))}break;case R:{let n,a=e.stack[u],r=e.stack[u+1],i=e.stack[u+2];if(a.ttisinteger()&&i.ttisinteger()&&(n=De(r,i.value))){let e=n.stopnow?0:a.value;r.value=n.ilimit,a.value=e-i.value|0}else{let t,n,l;!1===(t=Ve(r))&&ke.luaG_runerror(e,g("'for' limit must be a number",!0)),e.stack[u+1].setfltvalue(t),!1===(n=Ve(i))&&ke.luaG_runerror(e,g("'for' step must be a number",!0)),e.stack[u+2].setfltvalue(n),!1===(l=Ve(a))&&ke.luaG_runerror(e,g("'for' initial value must be a number",!0)),e.stack[u].setfltvalue(l-n)}t.l_savedpc+=o.sBx;break}case ce:{let n=u+3;we.setobjs2s(e,n+2,u+2),we.setobjs2s(e,n+1,u+1),we.setobjs2s(e,n,u),Te.adjust_top(e,n+3),Te.luaD_call(e,n,o.C),Te.adjust_top(e,t.top),o=t.l_code[t.l_savedpc++],u=Me(0,s,o),ge(o.opcode===de)}case de:e.stack[u+1].ttisnil()||(we.setobjs2s(e,u,u+1),t.l_savedpc+=o.sBx);break;case ee:{let n=o.B,a=o.C;0===n&&(n=e.top-u-1),0===a&&(ge(t.l_code[t.l_savedpc].opcode===U),a=t.l_code[t.l_savedpc++].Ax);let r=e.stack[u].value,i=(a-1)*v+n;for(;n>0;n--)xe.luaH_setint(r,i--,e.stack[u+n]);Te.adjust_top(e,t.top);break}case x:{let t=n.p.p[o.Bx],a=We(t,n.upvals,e.stack,s);null===a?Ze(e,t,n.upvals,s,u):e.stack[u].setclLvalue(a);break}case fe:{let a,r=o.B-1,i=s-t.funcOff-n.p.numparams-1;for(i<0&&(i=0),r<0&&(r=i,Te.luaD_checkstack(e,i),Te.adjust_top(e,u+i)),a=0;a<r&&a<i;a++)we.setobjs2s(e,u+a,s-i+a);for(;a<r;a++)e.stack[u+a].setnilvalue();break}case U:throw Error("invalid opcode")}}},e.exports.luaV_finishOp=function(e){let t=e.ci,n=t.l_base,a=t.l_code[t.l_savedpc-1],r=a.opcode;switch(r){case A:case le:case Y:case M:case F:case L:case S:case T:case re:case ie:case X:case Z:case he:case y:case N:case C:case O:case Q:we.setobjs2s(e,n+a.A,e.top-1),delete e.stack[--e.top];break;case G:case z:case I:{let n=!e.stack[e.top-1].l_isfalse();delete e.stack[--e.top],t.callstatus&Ae.CIST_LEQ&&(ge(r===G),t.callstatus^=Ae.CIST_LEQ,n=!n),ge(t.l_code[t.l_savedpc].opcode===D),n!==!!a.A&&t.l_savedpc++;break}case k:{let r=e.top-1,i=r-1-(n+a.B);we.setobjs2s(e,r-2,r),i>1&&(e.top=r-1,at(e,i)),we.setobjs2s(e,t.l_base+a.A,e.top-1),Te.adjust_top(e,t.top);break}case ce:ge(t.l_code[t.l_savedpc].opcode===de),Te.adjust_top(e,t.top);break;case E:a.C-1>=0&&Te.adjust_top(e,t.top)}},e.exports.luaV_imul=Xe,e.exports.luaV_lessequal=Be,e.exports.luaV_lessthan=Ce,e.exports.luaV_mod=Ye,e.exports.luaV_objlen=ze,e.exports.luaV_rawequalobj=function(e,t){return Fe(null,e,t)},e.exports.luaV_shiftl=$e,e.exports.luaV_tointeger=Ge,e.exports.settable=it,e.exports.tointeger=Ne,e.exports.tonumber=Ve},function(e,t,n){"use strict";const a=[96,113,65,84,80,80,92,108,60,16,60,84,108,124,124,124,124,124,124,124,124,124,124,124,124,96,96,96,96,104,34,188,188,188,132,228,84,84,16,98,98,4,98,20,81,80,23],r=function(e,t){return~(-1<<e)<<t},i=function(e,t){return~r(e,t)},l=function(e,t,n,a){return e.code=e.code&i(a,n)|t<<n&r(a,n),o(e)},s=function(e,t){return l(e,t,14,18)},o=function(e){if("number"==typeof e)return{code:e,opcode:e>>0&r(6,0),A:e>>6&r(8,0),B:e>>23&r(9,0),C:e>>14&r(9,0),Bx:e>>14&r(18,0),Ax:e>>6&r(26,0),sBx:(e>>14&r(18,0))-131071};{let t=e.code;return e.opcode=t>>0&r(6,0),e.A=t>>6&r(8,0),e.B=t>>23&r(9,0),e.C=t>>14&r(9,0),e.Bx=t>>14&r(18,0),e.Ax=t>>6&r(26,0),e.sBx=(t>>14&r(18,0))-131071,e}};e.exports.BITRK=256,e.exports.CREATE_ABC=function(e,t,n,a){return o(e<<0|t<<6|n<<23|a<<14)},e.exports.CREATE_ABx=function(e,t,n){return o(e<<0|t<<6|n<<14)},e.exports.CREATE_Ax=function(e,t){return o(e<<0|t<<6)},e.exports.GET_OPCODE=function(e){return e.opcode},e.exports.GETARG_A=function(e){return e.A},e.exports.GETARG_B=function(e){return e.B},e.exports.GETARG_C=function(e){return e.C},e.exports.GETARG_Bx=function(e){return e.Bx},e.exports.GETARG_Ax=function(e){return e.Ax},e.exports.GETARG_sBx=function(e){return e.sBx},e.exports.INDEXK=function(e){return-257&e},e.exports.ISK=function(e){return 256&e},e.exports.LFIELDS_PER_FLUSH=50,e.exports.MAXARG_A=255,e.exports.MAXARG_Ax=67108863,e.exports.MAXARG_B=511,e.exports.MAXARG_Bx=262143,e.exports.MAXARG_C=511,e.exports.MAXARG_sBx=131071,e.exports.MAXINDEXRK=255,e.exports.NO_REG=255,e.exports.OpArgK=3,e.exports.OpArgN=0,e.exports.OpArgR=2,e.exports.OpArgU=1,e.exports.OpCodes=["MOVE","LOADK","LOADKX","LOADBOOL","LOADNIL","GETUPVAL","GETTABUP","GETTABLE","SETTABUP","SETUPVAL","SETTABLE","NEWTABLE","SELF","ADD","SUB","MUL","MOD","POW","DIV","IDIV","BAND","BOR","BXOR","SHL","SHR","UNM","BNOT","NOT","LEN","CONCAT","JMP","EQ","LT","LE","TEST","TESTSET","CALL","TAILCALL","RETURN","FORLOOP","FORPREP","TFORCALL","TFORLOOP","SETLIST","CLOSURE","VARARG","EXTRAARG"],e.exports.OpCodesI={OP_MOVE:0,OP_LOADK:1,OP_LOADKX:2,OP_LOADBOOL:3,OP_LOADNIL:4,OP_GETUPVAL:5,OP_GETTABUP:6,OP_GETTABLE:7,OP_SETTABUP:8,OP_SETUPVAL:9,OP_SETTABLE:10,OP_NEWTABLE:11,OP_SELF:12,OP_ADD:13,OP_SUB:14,OP_MUL:15,OP_MOD:16,OP_POW:17,OP_DIV:18,OP_IDIV:19,OP_BAND:20,OP_BOR:21,OP_BXOR:22,OP_SHL:23,OP_SHR:24,OP_UNM:25,OP_BNOT:26,OP_NOT:27,OP_LEN:28,OP_CONCAT:29,OP_JMP:30,OP_EQ:31,OP_LT:32,OP_LE:33,OP_TEST:34,OP_TESTSET:35,OP_CALL:36,OP_TAILCALL:37,OP_RETURN:38,OP_FORLOOP:39,OP_FORPREP:40,OP_TFORCALL:41,OP_TFORLOOP:42,OP_SETLIST:43,OP_CLOSURE:44,OP_VARARG:45,OP_EXTRAARG:46},e.exports.POS_A=6,e.exports.POS_Ax=6,e.exports.POS_B=23,e.exports.POS_Bx=14,e.exports.POS_C=14,e.exports.POS_OP=0,e.exports.RKASK=function(e){return 256|e},e.exports.SETARG_A=function(e,t){return l(e,t,6,8)},e.exports.SETARG_Ax=function(e,t){return l(e,t,6,26)},e.exports.SETARG_B=function(e,t){return l(e,t,23,9)},e.exports.SETARG_Bx=s,e.exports.SETARG_C=function(e,t){return l(e,t,14,9)},e.exports.SETARG_sBx=function(e,t){return s(e,t+131071)},e.exports.SET_OPCODE=function(e,t){return e.code=e.code&i(6,0)|t<<0&r(6,0),o(e)},e.exports.SIZE_A=8,e.exports.SIZE_Ax=26,e.exports.SIZE_B=9,e.exports.SIZE_Bx=18,e.exports.SIZE_C=9,e.exports.SIZE_OP=6,e.exports.fullins=o,e.exports.getBMode=function(e){return a[e]>>4&3},e.exports.getCMode=function(e){return a[e]>>2&3},e.exports.getOpMode=function(e){return 3&a[e]},e.exports.iABC=0,e.exports.iABx=1,e.exports.iAsBx=2,e.exports.iAx=3,e.exports.testAMode=function(e){return 64&a[e]},e.exports.testTMode=function(e){return 128&a[e]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=new ArrayBuffer(8),r=new Int8Array(a),i=new Int16Array(a),l=new Int32Array(a),s=new Uint8Array(a),o=new Uint16Array(a),u=new Uint32Array(a),c=new Float32Array(a),d=new Float64Array(a);t.uint8ToInt8=function(e){return s[0]=e,r[0]},t.uint8ToInt16=function(e,t){return s[0]=e,s[1]=t,i[0]},t.uint8ToInt24=function(e,t,n){return s[0]=e,s[1]=t,s[2]=n,s[3]=0,l[0]},t.uint8ToInt32=function(e,t,n,a){return s[0]=e,s[1]=t,s[2]=n,s[3]=a,l[0]},t.uint8ToUint16=function(e,t){return s[0]=e,s[1]=t,o[0]},t.uint8ToUint24=function(e,t,n){return s[0]=e,s[1]=t,s[2]=n,s[3]=0,u[0]},t.uint8ToUint32=function(e,t,n,a){return s[0]=e,s[1]=t,s[2]=n,s[3]=a,u[0]},t.uint8ToFloat32=function(e,t,n,a){return s[0]=e,s[1]=t,s[2]=n,s[3]=a,c[0]},t.uint8ToFloat64=function(e,t,n,a,r,i,l,o){return s[0]=e,s[1]=t,s[2]=n,s[3]=a,s[4]=r,s[5]=i,s[6]=l,s[7]=o,d[0]},t.int8ToUint8=function(e){return s[0]=e,r[0]},t.int16ToUint8=function(e,t){return i[0]=t,e[0]=s[0],e[1]=s[1],e},t.int24ToUint8=function(e,t){return l[0]=t,e[0]=s[0],e[1]=s[1],e[2]=s[2],e},t.int32ToUint8=function(e,t){return l[0]=t,e[0]=s[0],e[1]=s[1],e[2]=s[2],e[3]=s[3],e},t.uint16ToUint8=function(e,t){return o[0]=t,e[0]=s[0],e[1]=s[1],e},t.uint24ToUint8=function(e,t){return u[0]=t,e[0]=s[0],e[1]=s[1],e[2]=s[2],e},t.uint32ToUint8=function(e,t){return u[0]=t,e[0]=s[0],e[1]=s[1],e[2]=s[2],e[3]=s[3],e},t.float32ToUint8=function(e,t){return c[0]=t,e[0]=s[0],e[1]=s[1],e[2]=s[2],e[3]=s[3],e},t.float64ToUint8=function(e,t){return d[0]=t,e[0]=s[0],e[1]=s[1],e[2]=s[2],e[3]=s[3],e[4]=s[4],e[5]=s[5],e[6]=s[6],e[7]=s[7],e},t.numberToUint32=function(e){return u[0]=e,u[0]},t.stringToBase256=function(e){let t=0;for(let n of e)t=256*t+n.charCodeAt(0);return t},t.base256ToString=function(e){let t=[];for(;e>0;)t.push(String.fromCharCode(e%256)),e=Math.floor(e/256);return t.reverse().join("")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(203);t.default=class{constructor(){this.animations=[]}readAnimations(e,t){let n=e.index+t;for(;e.index<n;){let t=e.read(4),n=new a.default[t][1];n.readMdx(e,t),this.animations.push(n)}}writeAnimations(e){for(let t of this.animations)t.writeMdx(e)}*readAnimatedBlock(e){for(let t of e.readBlockSafe())"static"===t?yield`static ${e.read()}`:yield t}readAnimation(e,t){let n=new a.default[t][1];n.readMdl(e,t),this.animations.push(n)}writeAnimation(e,t){for(let n of this.animations)if(n.name===t)return n.writeMdl(e,a.default[t][0]),!0;return!1}getByteLength(e){let t=0;for(let e of this.animations)t+=e.getByteLength();return t}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(339);t.default=class{constructor(e,t){this.animations=new Map,this.variants={},this.model=e;for(let n of t.animations)this.animations.set(n.name,a.createTypedSd(e,n))}getScalarValue(e,t,n,a){let r=this.animations.get(t);return r?r.getValue(e,n):(e[0]=a,-1)}getVectorValue(e,t,n,a){let r=this.animations.get(t);return r?r.getValue(e,n):(e[0]=a[0],e[1]=a[1],e[2]=a[2],-1)}getQuatValue(e,t,n,a){let r=this.animations.get(t);return r?r.getValue(e,n):(e[0]=a[0],e[1]=a[1],e[2]=a[2],e[3]=a[3],-1)}addVariants(e,t){let n=this.animations.get(e),a=this.model.sequences.length,r=new Uint8Array(a);if(n)for(let e=0;e<a;e++)n.isVariant(e)&&(r[e]=1);this.variants[t]=r}addVariantIntersection(e,t){let n=this.model.sequences.length,a=new Uint8Array(n);for(let t=0;t<n;t++)for(let n of e)this.variants[n][t]&&(a[t]=1);this.variants[t]=a}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(){this.handleId=-1}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(12),r=document.createElement("canvas"),i=r.getContext("2d"),l=document.createElement("canvas"),s=l.getContext("2d");function o(e){return r.width=e.width,r.height=e.height,i.putImageData(e,0,0),r.toDataURL()}function u(e,t,n){let a=e.width,o=e.height;return e instanceof ImageData?(r.width=a,r.height=o,i.putImageData(e,0,0),l.width=t,l.height=n,s.drawImage(r,0,0,t,n),s.getImageData(0,0,t,n)):(r.width=t,r.height=n,i.drawImage(e,0,0,t,n),i.getImageData(0,0,t,n))}t.blobToImage=function(e){return new Promise(t=>{let n=URL.createObjectURL(e),a=new Image;a.onload=()=>{r.width=a.width,r.height=a.height,i.drawImage(a,0,0),t(a)},a.onerror=e=>{t(a)},a.src=n})},t.blobToImageData=function(e){return new Promise((t,n)=>{let a=URL.createObjectURL(e),l=new Image;l.onload=()=>{URL.revokeObjectURL(a),r.width=l.width,r.height=l.height,i.drawImage(l,0,0),t(i.getImageData(0,0,l.width,l.height))},l.onerror=e=>{n(e)},l.src=a})},t.imageDataToBlob=function(e){return new Promise(t=>{r.width=e.width,r.height=e.height,i.putImageData(e,0,0),r.toBlob(e=>{t(e)})})},t.imageDataToDataUrl=o,t.imageDataToImage=function(e){let t=new Image;return t.src=o(e),t},t.imageToImageData=function(e){let t=e.width,n=e.height;return r.width=t,r.height=n,i.drawImage(e,0,0),i.getImageData(0,0,t,n)},t.scaleNPOT=function(e){let t=e.width,n=e.height,r=a.powerOfTwo(t),i=a.powerOfTwo(n);return t!==r||n!==i?u(e,r,i):e},t.resizeImageData=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class a{constructor(e){this.interpolationType=e.readUint16(),this.animFlags=e.readUint16(),this.animId=e.readUint32(),this.readInitNullValues(e),e.skip(4)}}t.M3ParserAnimationReference=a;t.M3ParserPixelAnimationReference=class extends a{readInitNullValues(e){this.initValue=e.readUint8Array(4),this.nullValue=e.readUint8Array(4)}};t.M3ParserUint16AnimationReference=class extends a{readInitNullValues(e){this.initValue=e.readUint16(),this.nullValue=e.readUint16()}};t.M3ParserUint32AnimationReference=class extends a{readInitNullValues(e){this.initValue=e.readUint32(),this.nullValue=e.readUint32()}};t.M3ParserFloat32AnimationReference=class extends a{readInitNullValues(e){this.initValue=e.readFloat32(),this.nullValue=e.readFloat32()}};t.M3ParserVector2AnimationReference=class extends a{readInitNullValues(e){this.initValue=e.readFloat32Array(2),this.nullValue=e.readFloat32Array(2)}};t.M3ParserVector3AnimationReference=class extends a{readInitNullValues(e){this.initValue=e.readFloat32Array(3),this.nullValue=e.readFloat32Array(3)}};t.M3ParserVector4AnimationReference=class extends a{readInitNullValues(e){this.initValue=e.readFloat32Array(4),this.nullValue=e.readFloat32Array(4)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(1),r=n(96);t.default=class{constructor(e){this.version=8,this.unknown=11,this.units=[],e&&this.load(e)}load(e){let t=new a.default(e);if("W3do"!==t.read(4))return!1;this.version=t.readInt32(),this.unknown=t.readUint32();for(let e=0,n=t.readInt32();e<n;e++){let n=new r.default;n.load(t,this.version),this.units[e]=n}return!0}save(){let e=new ArrayBuffer(this.getByteLength()),t=new a.default(e);t.write("W3do"),t.writeInt32(this.version),t.writeUint32(this.unknown),t.writeInt32(this.units.length);for(let e of this.units)e.save(t,this.version);return e}getByteLength(){let e=16;for(let t of this.units)e+=t.getByteLength(this.version);return e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(59);class r extends a.EventEmitter{constructor(e){super(),this.ok=!1,this.loaded=!1,this.viewer=e.viewer,this.extension=e.extension||"",this.fetchUrl=e.fetchUrl||"",this.setMaxListeners(0)}async loadData(e){try{await this.load(e),this.loaded=!0,this.ok=!0,this.lateLoad(),this.emit("load",this),this.emit("loadend",this)}catch(e){this.error("An exception was thrown while loading",e)}}detach(){return this.viewer.unload(this)}lateLoad(){}error(e,t){this.loaded=!0,this.ok=!1,this.emit("error",this,e,t),this.emit("loadend",this)}whenLoaded(e){let t=new Promise(e=>{this.loaded?e(this):this.once("loadend",()=>e(this))});if(!e)return t;t.then(()=>e(this))}}t.Resource=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(103),r=n(312);class i extends a.HandlerResource{constructor(){super(...arguments),this.preloadedInstances=[],this.bounds=new r.default}addInstance(e=0){let t=this.createInstance(e);return this.ok?t.load():this.preloadedInstances.push(t),t}lateLoad(){for(let e of this.preloadedInstances){e.load();let t=e.scene;t&&(e.scene=null,t.addInstance(e))}this.preloadedInstances.length=0}}t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(7),r=n(23);class i extends r.Node{constructor(e){super(),this.scene=null,this.left=-1,this.right=-1,this.bottom=-1,this.top=-1,this.plane=-1,this.depth=0,this.updateFrame=0,this.cullFrame=0,this.paused=!1,this.rendered=!0,this.model=e,this.textureMapper=e.viewer.baseTextureMapper(e)}setTexture(e,t){this.textureMapper=this.model.viewer.changeTextureMapper(this,e,t)}show(){this.rendered=!0}hide(){this.rendered=!1}shown(){return this.rendered}hidden(){return!this.rendered}detach(){return!!this.scene&&this.scene.removeInstance(this)}load(){}updateAnimations(e){}clearEmittedObjects(){}updateObject(e,t){this.updateFrame<this.model.viewer.frame&&(this.rendered&&!this.paused&&this.updateAnimations(e),this.updateFrame=this.model.viewer.frame)}setScene(e){return e.addInstance(this)}recalculateTransformation(){super.recalculateTransformation(),this.scene&&this.scene.grid.moved(this)}renderOpaque(){}renderTranslucent(){}isVisible(e){let[t,n,r]=this.worldLocation,i=this.model.bounds,l=e.planes;return this.plane=a.testSphere(l,t+i.x,n+i.y,r,i.r,this.plane),-1===this.plane&&(this.depth=a.distanceToPlane3(l[4],t,n,r),!0)}isBatched(){return!1}}t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(2),r=n(13),i=a.vec3.create(),l=a.vec3.create(),s=a.vec3.create();function o(e,n){let a=e.objects,r=n.floatView,i=0;for(let e of a){let n=i*t.FLOATS_PER_OBJECT,a=n+t.FLOAT_OFFSET_P0,l=e.vertices;r[a+0]=l[0],r[a+1]=l[1],r[a+2]=l[2],r[a+3]=l[3],r[a+4]=l[4],r[a+5]=l[5],r[a+6]=l[6],r[a+7]=l[7],r[a+8]=l[8],r[a+9]=l[9],r[a+10]=l[10],r[a+11]=l[11],r[n+t.FLOAT_OFFSET_HEALTH]=e.health,i+=1}}t.BYTES_PER_OBJECT=60,t.FLOATS_PER_OBJECT=t.BYTES_PER_OBJECT>>2,t.BYTE_OFFSET_P0=0,t.BYTE_OFFSET_P1=12,t.BYTE_OFFSET_P2=24,t.BYTE_OFFSET_P3=36,t.BYTE_OFFSET_HEALTH=48,t.BYTE_OFFSET_COLOR=52,t.BYTE_OFFSET_TAIL=56,t.BYTE_OFFSET_LEFT_RIGHT_TOP=57,t.FLOAT_OFFSET_P0=t.BYTE_OFFSET_P0>>2,t.FLOAT_OFFSET_P1=t.BYTE_OFFSET_P1>>2,t.FLOAT_OFFSET_P2=t.BYTE_OFFSET_P2>>2,t.FLOAT_OFFSET_P3=t.BYTE_OFFSET_P3>>2,t.FLOAT_OFFSET_HEALTH=t.BYTE_OFFSET_HEALTH>>2,t.BYTE_OFFSET_TEAM_COLOR=t.BYTE_OFFSET_LEFT_RIGHT_TOP,t.HEAD=0,t.TAIL=1,t.EMITTER_PARTICLE2=0,t.EMITTER_RIBBON=1,t.EMITTER_SPLAT=2,t.EMITTER_UBERSPLAT=3,t.renderEmitter=function(e,n){let u=e.alive,c=e.emitterObject.geometryEmitterType;if(c===t.EMITTER_RIBBON&&(u-=1),u>0){let d=e.instance.model.viewer,h=d.buffer,f=d.gl,_=d.webgl.extensions.ANGLE_instanced_arrays,m=u*t.BYTES_PER_OBJECT,p=n.attribs;h.reserve(m),c===t.EMITTER_PARTICLE2?(function(e,n){let r=e.instance,o=e.objects,u=n.byteView,c=n.floatView,d=e.emitterObject,h=d.modelSpace,f=d.tailLength,_=r.teamColor,m=0;for(let n of o){let r=m*t.BYTES_PER_OBJECT,o=m*t.FLOATS_PER_OBJECT,d=o+t.FLOAT_OFFSET_P0,p=n.location,g=n.scale,b=n.tail;if(b===t.HEAD)h&&(p=a.vec3.transformMat4(i,p,e.node.worldMatrix)),c[d+0]=p[0],c[d+1]=p[1],c[d+2]=p[2];else{let t=n.velocity,r=l,i=p;r[0]=i[0]-f*t[0],r[1]=i[1]-f*t[1],r[2]=i[2]-f*t[2],h&&(r=a.vec3.transformMat4(r,r,e.node.worldMatrix),i=a.vec3.transformMat4(s,i,e.node.worldMatrix)),c[d+0]=r[0],c[d+1]=r[1],c[d+2]=r[2],c[d+3]=i[0],c[d+4]=i[1],c[d+5]=i[2]}c[d+6]=g[0],c[d+7]=g[0],c[d+8]=g[0],c[o+t.FLOAT_OFFSET_HEALTH]=n.health,u[r+t.BYTE_OFFSET_TAIL]=b,u[r+t.BYTE_OFFSET_TEAM_COLOR]=_,m+=1}}(e,h),function(e,t){let n,a,i=e.instance,l=i.scene.camera,s=e.emitterObject,o=s.model,u=o.viewer,c=u.gl,d=t.uniforms,h=s.colors,f=s.intervals,_=s.replaceableId;if(c.blendFunc(s.blendSrc,s.blendDst),1===_){a=(o.reforged?r.default.reforgedTeamColors:r.default.teamColors)[i.teamColor]}else if(2===_){a=(o.reforged?r.default.reforgedTeamGlows:r.default.teamGlows)[i.teamColor]}else a=s.internalTexture;u.webgl.bindTexture(a,0),n=s.xYQuad?l.vectors:l.billboardedVectors,c.uniform1f(d.u_lifeSpan,s.lifeSpan),c.uniform1f(d.u_timeMiddle,s.timeMiddle),c.uniform1f(d.u_columns,s.columns),c.uniform1f(d.u_rows,s.rows),c.uniform1f(d.u_teamColored,s.teamColored),c.uniform3fv(d["u_intervals[0]"],f[0]),c.uniform3fv(d["u_intervals[1]"],f[1]),c.uniform3fv(d["u_intervals[2]"],f[2]),c.uniform3fv(d["u_intervals[3]"],f[3]),c.uniform4fv(d["u_colors[0]"],h[0]),c.uniform4fv(d["u_colors[1]"],h[1]),c.uniform4fv(d["u_colors[2]"],h[2]),c.uniform3fv(d.u_scaling,s.scaling),s.head&&(c.uniform3fv(d["u_vertices[0]"],n[0]),c.uniform3fv(d["u_vertices[1]"],n[1]),c.uniform3fv(d["u_vertices[2]"],n[2]),c.uniform3fv(d["u_vertices[3]"],n[3])),s.tail&&c.uniform3fv(d.u_cameraZ,l.billboardedVectors[6])}(e,n)):c===t.EMITTER_RIBBON?(function(e,n){let a=e.first,r=n.byteView,i=n.floatView,l=e.emitterObject.columns,s=1/(e.alive-1),o=0;for(;a.next;){let e=a.next.vertices,n=o*t.BYTES_PER_OBJECT,u=o*t.FLOATS_PER_OBJECT+t.FLOAT_OFFSET_P0,c=n+t.BYTE_OFFSET_COLOR,d=n+t.BYTE_OFFSET_LEFT_RIGHT_TOP,h=(a.slot%l+(1-o*s-s))/l,f=a.slot/l,_=h+s,m=a.vertices,p=a.color;i[u+0]=m[0],i[u+1]=m[1],i[u+2]=m[2],i[u+3]=m[3],i[u+4]=m[4],i[u+5]=m[5],i[u+6]=e[3],i[u+7]=e[4],i[u+8]=e[5],i[u+9]=e[0],i[u+10]=e[1],i[u+11]=e[2],r[c+0]=p[0],r[c+1]=p[1],r[c+2]=p[2],r[c+3]=p[3],r[d+0]=255*h,r[d+1]=255*_,r[d+2]=255*f,a=a.next,o+=1}}(e,h),function(e,t){let n=e.instance.textureMapper,a=e.emitterObject,r=a.layer,i=a.model,l=i.viewer.gl,s=t.uniforms,o=i.textures[r.textureId];r.bind(t),i.viewer.webgl.bindTexture(n.get(o)||o,0),l.uniform1f(s.u_columns,a.columns),l.uniform1f(s.u_rows,a.rows)}(e,n)):c===t.EMITTER_SPLAT?(o(e,h),function(e,t){let n=e.instance.textureMapper,a=e.emitterObject,r=a.intervalTimes,i=a.intervals,l=a.colors,s=a.model,o=s.viewer.gl,u=t.uniforms,c=a.internalTexture;o.blendFunc(a.blendSrc,a.blendDst),s.viewer.webgl.bindTexture(n.get(c)||c,0),o.uniform1f(u.u_lifeSpan,a.lifeSpan),o.uniform1f(u.u_columns,a.columns),o.uniform1f(u.u_rows,a.rows),o.uniform3f(u.u_intervalTimes,r[0],r[1],0),o.uniform3fv(u["u_intervals[0]"],i[0]),o.uniform3fv(u["u_intervals[1]"],i[1]),o.uniform4fv(u["u_colors[0]"],l[0]),o.uniform4fv(u["u_colors[1]"],l[1]),o.uniform4fv(u["u_colors[2]"],l[2])}(e,n)):(o(e,h),function(e,t){let n=e.instance.textureMapper,a=e.emitterObject,r=a.intervalTimes,i=a.colors,l=a.model.viewer,s=l.gl,o=t.uniforms,u=a.internalTexture;s.blendFunc(a.blendSrc,a.blendDst),l.webgl.bindTexture(n.get(u)||u,0),s.uniform1f(o.u_lifeSpan,a.lifeSpan),s.uniform1f(o.u_columns,a.columns),s.uniform1f(o.u_rows,a.rows),s.uniform3fv(o.u_intervalTimes,r),s.uniform4fv(o["u_colors[0]"],i[0]),s.uniform4fv(o["u_colors[1]"],i[1]),s.uniform4fv(o["u_colors[2]"],i[2])}(e,n)),h.bindAndUpdate(m),f.uniform1i(n.uniforms.u_emitter,c),f.vertexAttribPointer(p.a_p0,3,f.FLOAT,!1,t.BYTES_PER_OBJECT,t.BYTE_OFFSET_P0),f.vertexAttribPointer(p.a_p1,3,f.FLOAT,!1,t.BYTES_PER_OBJECT,t.BYTE_OFFSET_P1),f.vertexAttribPointer(p.a_p2,3,f.FLOAT,!1,t.BYTES_PER_OBJECT,t.BYTE_OFFSET_P2),f.vertexAttribPointer(p.a_p3,3,f.FLOAT,!1,t.BYTES_PER_OBJECT,t.BYTE_OFFSET_P3),f.vertexAttribPointer(p.a_health,1,f.FLOAT,!1,t.BYTES_PER_OBJECT,t.BYTE_OFFSET_HEALTH),f.vertexAttribPointer(p.a_color,4,f.UNSIGNED_BYTE,!0,t.BYTES_PER_OBJECT,t.BYTE_OFFSET_COLOR),f.vertexAttribPointer(p.a_tail,1,f.UNSIGNED_BYTE,!1,t.BYTES_PER_OBJECT,t.BYTE_OFFSET_TAIL),f.vertexAttribPointer(p.a_leftRightTop,3,f.UNSIGNED_BYTE,!1,t.BYTES_PER_OBJECT,t.BYTE_OFFSET_LEFT_RIGHT_TOP),_.drawArraysInstancedANGLE(f.TRIANGLES,0,6,u)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(364);class r extends a.default{constructor(e,t){super(e),this.emitterObject=t}update(e){this.emitterObject.ok&&super.update(e)}}t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(40),r=new Uint32Array(1);class i extends a.default{constructor(){super(...arguments),this.lastValue=0}updateEmission(e){let t=this.instance;if(t.allowParticleSpawn){this.emitterObject.getValue(r,t);let e=r[0];1===e&&e!==this.lastValue&&(this.currentEmission+=1),this.lastValue=e}}emit(){this.emitObject()}}t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(68),r=1,i=2,l=4,s=8;t.ALPHAMODE_OPAQUE=1,t.ALPHAMODE_MASK=2;const o=4,u=8,c=16,d=32,h=64,f=128,_=256,m=512,p=1024;t.getPrimitiveFlags=function(e){let t=0;return-1!==e.normals&&(t|=r),-1!==e.tangents&&(t|=i),-1!==e.uvSet0&&(t|=l),-1!==e.uvSet1&&(t|=s),t},t.getPrimitiveDefines=function(e){let t=[];return e&r&&t.push("HAS_NORMALS"),e&i&&t.push("HAS_TANGENTS"),e&l&&t.push("HAS_UV_SET0"),e&s&&t.push("HAS_UV_SET1"),t},t.getMaterialFlags=function(e){let n=0;return e.alphaMode===a.ALPHA_MODE_OPAQUE?n|=t.ALPHAMODE_OPAQUE:e.alphaMode===a.ALPHA_MODE_MASK&&(n|=t.ALPHAMODE_MASK),e.metallicRoughness&&(n|=o,-1!==e.baseColorTexture&&(n|=u),-1!==e.metallicRoughnessTexture&&(n|=c)),e.specularGlossiness&&(n|=d,-1!==e.diffuseTexture&&(n|=h),-1!==e.specularGlossinessTexture&&(n|=f)),-1!==e.normalTexture&&(n|=_),-1!==e.occlusionTexture&&(n|=m),-1!==e.emissiveTexture&&(n|=p),n},t.getMaterialDefines=function(e){let n=[];return e&t.ALPHAMODE_OPAQUE?n.push("ALPHAMODE_OPAQUE"):e&t.ALPHAMODE_MASK&&n.push("ALPHAMODE_MASK"),e&o&&(n.push("MATERIAL_METALLICROUGHNESS"),e&u&&n.push("HAS_BASE_COLOR_MAP"),e&c&&n.push("HAS_METALLIC_ROUGHNESS_MAP")),e&d&&(n.push("MATERIAL_SPECULARGLOSSINESS"),e&h&&n.push("HAS_DIFFUSE_MAP"),e&f&&n.push("HAS_SPECULAR_GLOSSINESS_MAP")),e&_&&n.push("HAS_NORMAL_MAP"),e&m&&n.push("HAS_OCCLUSION_MAP"),e&p&&n.push("HAS_EMISSIVE_MAP"),n}},function(e,t,n){"use strict";const a=n(3),r=n(44),i=n(18),l=n(10),s=n(19);e.exports.LUA_AUTHORS=a.LUA_AUTHORS,e.exports.LUA_COPYRIGHT=a.LUA_COPYRIGHT,e.exports.LUA_ERRERR=a.thread_status.LUA_ERRERR,e.exports.LUA_ERRGCMM=a.thread_status.LUA_ERRGCMM,e.exports.LUA_ERRMEM=a.thread_status.LUA_ERRMEM,e.exports.LUA_ERRRUN=a.thread_status.LUA_ERRRUN,e.exports.LUA_ERRSYNTAX=a.thread_status.LUA_ERRSYNTAX,e.exports.LUA_HOOKCALL=a.LUA_HOOKCALL,e.exports.LUA_HOOKCOUNT=a.LUA_HOOKCOUNT,e.exports.LUA_HOOKLINE=a.LUA_HOOKLINE,e.exports.LUA_HOOKRET=a.LUA_HOOKRET,e.exports.LUA_HOOKTAILCALL=a.LUA_HOOKTAILCALL,e.exports.LUA_MASKCALL=a.LUA_MASKCALL,e.exports.LUA_MASKCOUNT=a.LUA_MASKCOUNT,e.exports.LUA_MASKLINE=a.LUA_MASKLINE,e.exports.LUA_MASKRET=a.LUA_MASKRET,e.exports.LUA_MINSTACK=a.LUA_MINSTACK,e.exports.LUA_MULTRET=a.LUA_MULTRET,e.exports.LUA_NUMTAGS=a.constant_types.LUA_NUMTAGS,e.exports.LUA_OK=a.thread_status.LUA_OK,e.exports.LUA_OPADD=a.LUA_OPADD,e.exports.LUA_OPBAND=a.LUA_OPBAND,e.exports.LUA_OPBNOT=a.LUA_OPBNOT,e.exports.LUA_OPBOR=a.LUA_OPBOR,e.exports.LUA_OPBXOR=a.LUA_OPBXOR,e.exports.LUA_OPDIV=a.LUA_OPDIV,e.exports.LUA_OPEQ=a.LUA_OPEQ,e.exports.LUA_OPIDIV=a.LUA_OPIDIV,e.exports.LUA_OPLE=a.LUA_OPLE,e.exports.LUA_OPLT=a.LUA_OPLT,e.exports.LUA_OPMOD=a.LUA_OPMOD,e.exports.LUA_OPMUL=a.LUA_OPMUL,e.exports.LUA_OPPOW=a.LUA_OPPOW,e.exports.LUA_OPSHL=a.LUA_OPSHL,e.exports.LUA_OPSHR=a.LUA_OPSHR,e.exports.LUA_OPSUB=a.LUA_OPSUB,e.exports.LUA_OPUNM=a.LUA_OPUNM,e.exports.LUA_REGISTRYINDEX=a.LUA_REGISTRYINDEX,e.exports.LUA_RELEASE=a.LUA_RELEASE,e.exports.LUA_RIDX_GLOBALS=a.LUA_RIDX_GLOBALS,e.exports.LUA_RIDX_LAST=a.LUA_RIDX_LAST,e.exports.LUA_RIDX_MAINTHREAD=a.LUA_RIDX_MAINTHREAD,e.exports.LUA_SIGNATURE=a.LUA_SIGNATURE,e.exports.LUA_TNONE=a.constant_types.LUA_TNONE,e.exports.LUA_TNIL=a.constant_types.LUA_TNIL,e.exports.LUA_TBOOLEAN=a.constant_types.LUA_TBOOLEAN,e.exports.LUA_TLIGHTUSERDATA=a.constant_types.LUA_TLIGHTUSERDATA,e.exports.LUA_TNUMBER=a.constant_types.LUA_TNUMBER,e.exports.LUA_TSTRING=a.constant_types.LUA_TSTRING,e.exports.LUA_TTABLE=a.constant_types.LUA_TTABLE,e.exports.LUA_TFUNCTION=a.constant_types.LUA_TFUNCTION,e.exports.LUA_TUSERDATA=a.constant_types.LUA_TUSERDATA,e.exports.LUA_TTHREAD=a.constant_types.LUA_TTHREAD,e.exports.LUA_VERSION=a.LUA_VERSION,e.exports.LUA_VERSION_MAJOR=a.LUA_VERSION_MAJOR,e.exports.LUA_VERSION_MINOR=a.LUA_VERSION_MINOR,e.exports.LUA_VERSION_NUM=a.LUA_VERSION_NUM,e.exports.LUA_VERSION_RELEASE=a.LUA_VERSION_RELEASE,e.exports.LUA_YIELD=a.thread_status.LUA_YIELD,e.exports.lua_Debug=a.lua_Debug,e.exports.lua_upvalueindex=a.lua_upvalueindex,e.exports.lua_absindex=r.lua_absindex,e.exports.lua_arith=r.lua_arith,e.exports.lua_atpanic=r.lua_atpanic,e.exports.lua_atnativeerror=r.lua_atnativeerror,e.exports.lua_call=r.lua_call,e.exports.lua_callk=r.lua_callk,e.exports.lua_checkstack=r.lua_checkstack,e.exports.lua_close=s.lua_close,e.exports.lua_compare=r.lua_compare,e.exports.lua_concat=r.lua_concat,e.exports.lua_copy=r.lua_copy,e.exports.lua_createtable=r.lua_createtable,e.exports.lua_dump=r.lua_dump,e.exports.lua_error=r.lua_error,e.exports.lua_gc=r.lua_gc,e.exports.lua_getallocf=r.lua_getallocf,e.exports.lua_getextraspace=r.lua_getextraspace,e.exports.lua_getfield=r.lua_getfield,e.exports.lua_getglobal=r.lua_getglobal,e.exports.lua_gethook=i.lua_gethook,e.exports.lua_gethookcount=i.lua_gethookcount,e.exports.lua_gethookmask=i.lua_gethookmask,e.exports.lua_geti=r.lua_geti,e.exports.lua_getinfo=i.lua_getinfo,e.exports.lua_getlocal=i.lua_getlocal,e.exports.lua_getmetatable=r.lua_getmetatable,e.exports.lua_getstack=i.lua_getstack,e.exports.lua_gettable=r.lua_gettable,e.exports.lua_gettop=r.lua_gettop,e.exports.lua_getupvalue=r.lua_getupvalue,e.exports.lua_getuservalue=r.lua_getuservalue,e.exports.lua_insert=r.lua_insert,e.exports.lua_isboolean=r.lua_isboolean,e.exports.lua_iscfunction=r.lua_iscfunction,e.exports.lua_isfunction=r.lua_isfunction,e.exports.lua_isinteger=r.lua_isinteger,e.exports.lua_islightuserdata=r.lua_islightuserdata,e.exports.lua_isnil=r.lua_isnil,e.exports.lua_isnone=r.lua_isnone,e.exports.lua_isnoneornil=r.lua_isnoneornil,e.exports.lua_isnumber=r.lua_isnumber,e.exports.lua_isproxy=r.lua_isproxy,e.exports.lua_isstring=r.lua_isstring,e.exports.lua_istable=r.lua_istable,e.exports.lua_isthread=r.lua_isthread,e.exports.lua_isuserdata=r.lua_isuserdata,e.exports.lua_isyieldable=l.lua_isyieldable,e.exports.lua_len=r.lua_len,e.exports.lua_load=r.lua_load,e.exports.lua_newstate=s.lua_newstate,e.exports.lua_newtable=r.lua_newtable,e.exports.lua_newthread=s.lua_newthread,e.exports.lua_newuserdata=r.lua_newuserdata,e.exports.lua_next=r.lua_next,e.exports.lua_pcall=r.lua_pcall,e.exports.lua_pcallk=r.lua_pcallk,e.exports.lua_pop=r.lua_pop,e.exports.lua_pushboolean=r.lua_pushboolean,e.exports.lua_pushcclosure=r.lua_pushcclosure,e.exports.lua_pushcfunction=r.lua_pushcfunction,e.exports.lua_pushfstring=r.lua_pushfstring,e.exports.lua_pushglobaltable=r.lua_pushglobaltable,e.exports.lua_pushinteger=r.lua_pushinteger,e.exports.lua_pushjsclosure=r.lua_pushjsclosure,e.exports.lua_pushjsfunction=r.lua_pushjsfunction,e.exports.lua_pushlightuserdata=r.lua_pushlightuserdata,e.exports.lua_pushliteral=r.lua_pushliteral,e.exports.lua_pushlstring=r.lua_pushlstring,e.exports.lua_pushnil=r.lua_pushnil,e.exports.lua_pushnumber=r.lua_pushnumber,e.exports.lua_pushstring=r.lua_pushstring,e.exports.lua_pushthread=r.lua_pushthread,e.exports.lua_pushvalue=r.lua_pushvalue,e.exports.lua_pushvfstring=r.lua_pushvfstring,e.exports.lua_rawequal=r.lua_rawequal,e.exports.lua_rawget=r.lua_rawget,e.exports.lua_rawgeti=r.lua_rawgeti,e.exports.lua_rawgetp=r.lua_rawgetp,e.exports.lua_rawlen=r.lua_rawlen,e.exports.lua_rawset=r.lua_rawset,e.exports.lua_rawseti=r.lua_rawseti,e.exports.lua_rawsetp=r.lua_rawsetp,e.exports.lua_register=r.lua_register,e.exports.lua_remove=r.lua_remove,e.exports.lua_replace=r.lua_replace,e.exports.lua_resume=l.lua_resume,e.exports.lua_rotate=r.lua_rotate,e.exports.lua_setallof=l.lua_setallof,e.exports.lua_setfield=r.lua_setfield,e.exports.lua_setglobal=r.lua_setglobal,e.exports.lua_sethook=i.lua_sethook,e.exports.lua_seti=r.lua_seti,e.exports.lua_setlocal=i.lua_setlocal,e.exports.lua_setmetatable=r.lua_setmetatable,e.exports.lua_settable=r.lua_settable,e.exports.lua_settop=r.lua_settop,e.exports.lua_setupvalue=r.lua_setupvalue,e.exports.lua_setuservalue=r.lua_setuservalue,e.exports.lua_status=r.lua_status,e.exports.lua_stringtonumber=r.lua_stringtonumber,e.exports.lua_toboolean=r.lua_toboolean,e.exports.lua_todataview=r.lua_todataview,e.exports.lua_tointeger=r.lua_tointeger,e.exports.lua_tointegerx=r.lua_tointegerx,e.exports.lua_tojsstring=r.lua_tojsstring,e.exports.lua_tolstring=r.lua_tolstring,e.exports.lua_tonumber=r.lua_tonumber,e.exports.lua_tonumberx=r.lua_tonumberx,e.exports.lua_topointer=r.lua_topointer,e.exports.lua_toproxy=r.lua_toproxy,e.exports.lua_tostring=r.lua_tostring,e.exports.lua_tothread=r.lua_tothread,e.exports.lua_touserdata=r.lua_touserdata,e.exports.lua_type=r.lua_type,e.exports.lua_typename=r.lua_typename,e.exports.lua_upvalueid=r.lua_upvalueid,e.exports.lua_upvaluejoin=r.lua_upvaluejoin,e.exports.lua_version=r.lua_version,e.exports.lua_xmove=r.lua_xmove,e.exports.lua_yield=l.lua_yield,e.exports.lua_yieldk=l.lua_yieldk,e.exports.lua_tocfunction=r.lua_tocfunction},function(e,t,n){"use strict";const{LUA_MULTRET:a,LUA_OPBNOT:r,LUA_OPEQ:i,LUA_OPLE:l,LUA_OPLT:s,LUA_OPUNM:o,LUA_REGISTRYINDEX:u,LUA_RIDX_GLOBALS:c,LUA_VERSION_NUM:d,constant_types:{LUA_NUMTAGS:h,LUA_TBOOLEAN:f,LUA_TCCL:_,LUA_TFUNCTION:m,LUA_TLCF:p,LUA_TLCL:g,LUA_TLIGHTUSERDATA:b,LUA_TLNGSTR:w,LUA_TNIL:v,LUA_TNONE:A,LUA_TNUMFLT:L,LUA_TNUMINT:y,LUA_TSHRSTR:S,LUA_TTABLE:T,LUA_TTHREAD:E,LUA_TUSERDATA:x},thread_status:{LUA_OK:k},from_userstring:M,to_luastring:I}=n(3),{api_check:U}=n(5),P=n(18),R=n(10),{luaU_dump:O}=n(429),C=n(25),B=n(6),F=n(19),{luaS_bless:D,luaS_new:G,luaS_newliteral:N}=n(15),V=n(26),{LUAI_MAXSTACK:j}=n(17),H=n(27),K=n(14),{ZIO:z}=n(45),X=B.TValue,q=B.CClosure,Y=function(e){e.top++,U(e,e.top<=e.ci.top,"stack overflow")},$=function(e,t){U(e,t<e.top-e.ci.funcOff,"not enough elements in the stack")},W=function(e){if(!e)throw TypeError("invalid argument")},Z=function(e){W("number"==typeof e&&(0|e)===e)},J=function(e){return e!==B.luaO_nilobject},Q=function(e,t){let n=e.ci;if(t>0){let a=n.funcOff+t;return U(e,t<=n.top-(n.funcOff+1),"unacceptable index"),a>=e.top?B.luaO_nilobject:e.stack[a]}return t>u?(U(e,0!==t&&-t<=e.top,"invalid index"),e.stack[e.top+t]):t===u?e.l_G.l_registry:(U(e,(t=u-t)<=C.MAXUPVAL+1,"upvalue index too large"),n.func.ttislcf()?B.luaO_nilobject:t<=n.func.value.nupvalues?n.func.value.upvalue[t-1]:B.luaO_nilobject)},ee=function(e,t){let n=e.ci;if(t>0){let a=n.funcOff+t;return U(e,t<=n.top-(n.funcOff+1),"unacceptable index"),a>=e.top?null:a}if(t>u)return U(e,0!==t&&-t<=e.top,"invalid index"),e.top+t;throw Error("attempt to use pseudo-index")},te=function(e,t){let n,a=e.ci.funcOff;t>=0?(U(e,t<=e.stack_last-(a+1),"new top too large"),n=a+1+t):(U(e,-(t+1)<=e.top-(a+1),"invalid new top"),n=e.top+t+1),R.adjust_top(e,n)},ne=function(e,t){te(e,-t-1)},ae=function(e,t,n){for(;t<n;t++,n--){let a=e.stack[t],r=new X(a.type,a.value);B.setobjs2s(e,t,n),B.setobj2s(e,n,r)}},re=function(e,t,n){let a=e.top-1,r=ee(e,t),i=e.stack[r];U(e,J(i)&&t>u,"index not in the stack"),U(e,(n>=0?n:-n)<=a-r+1,"invalid 'n'");let l=n>=0?a-n:r-n-1;ae(e,r,l),ae(e,l+1,e.top-1),ae(e,r,e.top-1)},ie=function(e,t,n){let a=Q(e,t);Q(e,n).setfrom(a)},le=function(e,t,n){if(W("function"==typeof t),Z(n),0===n)e.stack[e.top]=new X(p,t);else{$(e,n),U(e,n<=C.MAXUPVAL,"upvalue index too large");let a=new q(e,t,n);for(let t=0;t<n;t++)a.upvalue[t].setfrom(e.stack[e.top-n+t]);for(let t=1;t<n;t++)delete e.stack[--e.top];n>0&&--e.top,e.stack[e.top].setclCvalue(a)}Y(e)},se=le,oe=function(e,t){le(e,t,0)},ue=oe,ce=function(e,t,n){let a=G(e,M(n));$(e,1),B.pushsvalue2s(e,a),U(e,e.top<=e.ci.top,"stack overflow"),H.settable(e,t,e.stack[e.top-1],e.stack[e.top-2]),delete e.stack[--e.top],delete e.stack[--e.top]},de=function(e,t){ce(e,K.luaH_getint(e.l_G.l_registry.value,c),t)},he=function(e,t,n){let a=G(e,M(n));return B.pushsvalue2s(e,a),U(e,e.top<=e.ci.top,"stack overflow"),H.luaV_gettable(e,t,e.stack[e.top-1],e.top-1),e.stack[e.top-1].ttnov()},fe=function(e,t,n){let a=Q(e,t);return Z(n),U(e,a.ttistable(),"table expected"),B.pushobj2s(e,K.luaH_getint(a.value,n)),U(e,e.top<=e.ci.top,"stack overflow"),e.stack[e.top-1].ttnov()},_e=function(e,t,n){let a=new B.TValue(T,K.luaH_new(e));e.stack[e.top]=a,Y(e)},me=function(e,t,n){switch(Z(n),t.ttype()){case _:{let e=t.value;return 1<=n&&n<=e.nupvalues?{name:I("",!0),val:e.upvalue[n-1]}:null}case g:{let e=t.value,a=e.p;if(!(1<=n&&n<=a.upvalues.length))return null;let r=a.upvalues[n-1].name;return{name:r?r.getstr():I("(*no name)",!0),val:e.upvals[n-1]}}default:return null}},pe=function(e,t){let n=Q(e,t);if(!n.ttisstring()){if(!H.cvt2str(n))return null;B.luaO_tostring(e,n)}return n.svalue()},ge=pe,be=function(e,t){return H.tointeger(Q(e,t))},we=function(e,t){return H.tonumber(Q(e,t))},ve=new WeakMap,Ae=function(e,t){R.luaD_callnoyield(e,t.funcOff,t.nresults)},Le=function(e,t){let n=Q(e,t);return J(n)?n.ttnov():A},ye=I("?"),Se=function(e,t,n){U(e,n===a||e.ci.top-e.top>=n-t,"results from function overflow current stack size")},Te=function(e,t,n,r,i){U(e,null===i||!(e.ci.callstatus&F.CIST_LUA),"cannot use continuations inside hooks"),$(e,t+1),U(e,e.status===k,"cannot do calls on non-normal thread"),Se(e,t,n);let l=e.top-(t+1);null!==i&&0===e.nny?(e.ci.c_k=i,e.ci.c_ctx=r,R.luaD_call(e,l,n)):R.luaD_callnoyield(e,l,n),n===a&&e.ci.top<e.top&&(e.ci.top=e.top)},Ee=function(e,t,n,r,i,l){let s,o;U(e,null===l||!(e.ci.callstatus&F.CIST_LUA),"cannot use continuations inside hooks"),$(e,t+1),U(e,e.status===k,"cannot do calls on non-normal thread"),Se(e,t,n),o=0===r?0:ee(e,r);let u=e.top-(t+1);if(null===l||e.nny>0){let t={funcOff:u,nresults:n};s=R.luaD_pcall(e,Ae,t,u,o)}else{let t=e.ci;t.c_k=l,t.c_ctx=i,t.extra=u,t.c_old_errfunc=e.errfunc,e.errfunc=o,t.callstatus&=~F.CIST_OAH|e.allowhook,t.callstatus|=F.CIST_YPCALL,R.luaD_call(e,u,n),t.callstatus&=~F.CIST_YPCALL,e.errfunc=t.c_old_errfunc,s=k}return n===a&&e.ci.top<e.top&&(e.ci.top=e.top),s},xe=function(e,t,n){let a=Q(e,t);U(e,a.ttisLclosure(),"Lua function expected");let r=a.value;return Z(n),U(e,1<=n&&n<=r.p.upvalues.length,"invalid upvalue index"),{f:r,i:n-1}};e.exports.api_incr_top=Y,e.exports.api_checknelems=$,e.exports.lua_absindex=function(e,t){return t>0||t<=u?t:e.top-e.ci.funcOff+t},e.exports.lua_arith=function(e,t){t!==o&&t!==r?$(e,2):($(e,1),B.pushobj2s(e,e.stack[e.top-1]),U(e,e.top<=e.ci.top,"stack overflow")),B.luaO_arith(e,t,e.stack[e.top-2],e.stack[e.top-1],e.stack[e.top-2]),delete e.stack[--e.top]},e.exports.lua_atpanic=function(e,t){let n=e.l_G.panic;return e.l_G.panic=t,n},e.exports.lua_atnativeerror=function(e,t){let n=e.l_G.atnativeerror;return e.l_G.atnativeerror=t,n},e.exports.lua_call=function(e,t,n){Te(e,t,n,0,null)},e.exports.lua_callk=Te,e.exports.lua_checkstack=function(e,t){let n,a=e.ci;if(U(e,t>=0,"negative 'n'"),e.stack_last-e.top>t)n=!0;else{e.top+F.EXTRA_STACK>j-t?n=!1:(R.luaD_growstack(e,t),n=!0)}return n&&a.top<e.top+t&&(a.top=e.top+t),n},e.exports.lua_compare=function(e,t,n,a){let r=Q(e,t),o=Q(e,n),u=0;if(J(r)&&J(o))switch(a){case i:u=H.luaV_equalobj(e,r,o);break;case s:u=H.luaV_lessthan(e,r,o);break;case l:u=H.luaV_lessequal(e,r,o);break;default:U(e,!1,"invalid option")}return u},e.exports.lua_concat=function(e,t){$(e,t),t>=2?H.luaV_concat(e,t):0===t&&(B.pushsvalue2s(e,D(e,I("",!0))),U(e,e.top<=e.ci.top,"stack overflow"))},e.exports.lua_copy=ie,e.exports.lua_createtable=_e,e.exports.lua_dump=function(e,t,n,a){$(e,1);let r=e.stack[e.top-1];return r.ttisLclosure()?O(e,r.value.p,t,n,a):1},e.exports.lua_error=function(e){$(e,1),P.luaG_errormsg(e)},e.exports.lua_gc=function(){},e.exports.lua_getallocf=function(){return console.warn("lua_getallocf is not available"),0},e.exports.lua_getextraspace=function(){return console.warn("lua_getextraspace is not available"),0},e.exports.lua_getfield=function(e,t,n){return he(e,Q(e,t),n)},e.exports.lua_getglobal=function(e,t){return he(e,K.luaH_getint(e.l_G.l_registry.value,c),t)},e.exports.lua_geti=function(e,t,n){let a=Q(e,t);return Z(n),e.stack[e.top]=new X(y,n),Y(e),H.luaV_gettable(e,a,e.stack[e.top-1],e.top-1),e.stack[e.top-1].ttnov()},e.exports.lua_getmetatable=function(e,t){let n,a=Q(e,t),r=!1;switch(a.ttnov()){case T:case x:n=a.value.metatable;break;default:n=e.l_G.mt[a.ttnov()]}return null!=n&&(e.stack[e.top]=new X(T,n),Y(e),r=!0),r},e.exports.lua_gettable=function(e,t){let n=Q(e,t);return H.luaV_gettable(e,n,e.stack[e.top-1],e.top-1),e.stack[e.top-1].ttnov()},e.exports.lua_gettop=function(e){return e.top-(e.ci.funcOff+1)},e.exports.lua_getupvalue=function(e,t,n){let a=me(0,Q(e,t),n);if(a){let t=a.name,n=a.val;return B.pushobj2s(e,n),U(e,e.top<=e.ci.top,"stack overflow"),t}return null},e.exports.lua_getuservalue=function(e,t){let n=Q(e,t);U(e,n.ttisfulluserdata(),"full userdata expected");let a=n.value.uservalue;return e.stack[e.top]=new X(a.type,a.value),Y(e),e.stack[e.top-1].ttnov()},e.exports.lua_insert=function(e,t){re(e,t,1)},e.exports.lua_isboolean=function(e,t){return Le(e,t)===f},e.exports.lua_iscfunction=function(e,t){let n=Q(e,t);return n.ttislcf(n)||n.ttisCclosure()},e.exports.lua_isfunction=function(e,t){return Le(e,t)===m},e.exports.lua_isinteger=function(e,t){return Q(e,t).ttisinteger()},e.exports.lua_islightuserdata=function(e,t){return Le(e,t)===b},e.exports.lua_isnil=function(e,t){return Le(e,t)===v},e.exports.lua_isnone=function(e,t){return Le(e,t)===A},e.exports.lua_isnoneornil=function(e,t){return Le(e,t)<=0},e.exports.lua_isnumber=function(e,t){return!1!==H.tonumber(Q(e,t))},e.exports.lua_isproxy=function(e,t){let n=ve.get(e);return!!n&&(null===t||t.l_G===n)},e.exports.lua_isstring=function(e,t){let n=Q(e,t);return n.ttisstring()||H.cvt2str(n)},e.exports.lua_istable=function(e,t){return Q(e,t).ttistable()},e.exports.lua_isthread=function(e,t){return Le(e,t)===E},e.exports.lua_isuserdata=function(e,t){let n=Q(e,t);return n.ttisfulluserdata(n)||n.ttislightuserdata()},e.exports.lua_len=function(e,t){let n=Q(e,t),a=new X;H.luaV_objlen(e,a,n),e.stack[e.top]=a,Y(e)},e.exports.lua_load=function(e,t,n,a,r){a=a?M(a):ye,null!==r&&(r=M(r));let i=new z(e,t,n),l=R.luaD_protectedparser(e,i,a,r);if(l===k){let t=e.stack[e.top-1].value;if(t.nupvalues>=1){let n=K.luaH_getint(e.l_G.l_registry.value,c);t.upvals[0].setfrom(n)}}return l},e.exports.lua_newtable=function(e){_e(e)},e.exports.lua_newuserdata=function(e,t){let n=function(e,t){return new B.Udata(e,t)}(e,t);return e.stack[e.top]=new B.TValue(x,n),Y(e),n.data},e.exports.lua_next=function(e,t){let n=Q(e,t);return U(e,n.ttistable(),"table expected"),e.stack[e.top]=new X,K.luaH_next(e,n.value,e.top-1)?(Y(e),1):(delete e.stack[e.top],delete e.stack[--e.top],0)},e.exports.lua_pcall=function(e,t,n,a){return Ee(e,t,n,a,0,null)},e.exports.lua_pcallk=Ee,e.exports.lua_pop=ne,e.exports.lua_pushboolean=function(e,t){e.stack[e.top]=new X(f,!!t),Y(e)},e.exports.lua_pushcclosure=le,e.exports.lua_pushcfunction=oe,e.exports.lua_pushfstring=function(e,t,...n){return t=M(t),B.luaO_pushvfstring(e,t,n)},e.exports.lua_pushglobaltable=function(e){fe(e,u,c)},e.exports.lua_pushinteger=function(e,t){Z(t),e.stack[e.top]=new X(y,t),Y(e)},e.exports.lua_pushjsclosure=se,e.exports.lua_pushjsfunction=ue,e.exports.lua_pushlightuserdata=function(e,t){e.stack[e.top]=new X(b,t),Y(e)},e.exports.lua_pushliteral=function(e,t){if(null==t)e.stack[e.top]=new X(v,null),e.top++;else{W("string"==typeof t);let n=N(e,t);B.pushsvalue2s(e,n),t=n.getstr()}return U(e,e.top<=e.ci.top,"stack overflow"),t},e.exports.lua_pushlstring=function(e,t,n){let a;return Z(n),0===n?(t=I("",!0),a=D(e,t)):(t=M(t),U(e,t.length>=n,"invalid length to lua_pushlstring"),a=G(e,t.subarray(0,n))),B.pushsvalue2s(e,a),U(e,e.top<=e.ci.top,"stack overflow"),a.value},e.exports.lua_pushnil=function(e){e.stack[e.top]=new X(v,null),Y(e)},e.exports.lua_pushnumber=function(e,t){W("number"==typeof t),e.stack[e.top]=new X(L,t),Y(e)},e.exports.lua_pushstring=function(e,t){if(null==t)e.stack[e.top]=new X(v,null),e.top++;else{let n=G(e,M(t));B.pushsvalue2s(e,n),t=n.getstr()}return U(e,e.top<=e.ci.top,"stack overflow"),t},e.exports.lua_pushthread=function(e){return e.stack[e.top]=new X(E,e),Y(e),e.l_G.mainthread===e},e.exports.lua_pushvalue=function(e,t){B.pushobj2s(e,Q(e,t)),U(e,e.top<=e.ci.top,"stack overflow")},e.exports.lua_pushvfstring=function(e,t,n){return t=M(t),B.luaO_pushvfstring(e,t,n)},e.exports.lua_rawequal=function(e,t,n){let a=Q(e,t),r=Q(e,n);return J(a)&&J(r)?H.luaV_equalobj(null,a,r):0},e.exports.lua_rawget=function(e,t){let n=Q(e,t);return U(e,n.ttistable(n),"table expected"),B.setobj2s(e,e.top-1,K.luaH_get(e,n.value,e.stack[e.top-1])),e.stack[e.top-1].ttnov()},e.exports.lua_rawgeti=fe,e.exports.lua_rawgetp=function(e,t,n){let a=Q(e,t);U(e,a.ttistable(),"table expected");let r=new X(b,n);return B.pushobj2s(e,K.luaH_get(e,a.value,r)),U(e,e.top<=e.ci.top,"stack overflow"),e.stack[e.top-1].ttnov()},e.exports.lua_rawlen=function(e,t){let n=Q(e,t);switch(n.ttype()){case S:case w:return n.vslen();case x:return n.value.len;case T:return K.luaH_getn(n.value);default:return 0}},e.exports.lua_rawset=function(e,t){$(e,2);let n=Q(e,t);U(e,n.ttistable(),"table expected");let a=e.stack[e.top-2],r=e.stack[e.top-1];K.luaH_setfrom(e,n.value,a,r),K.invalidateTMcache(n.value),delete e.stack[--e.top],delete e.stack[--e.top]},e.exports.lua_rawseti=function(e,t,n){Z(n),$(e,1);let a=Q(e,t);U(e,a.ttistable(),"table expected"),K.luaH_setint(a.value,n,e.stack[e.top-1]),delete e.stack[--e.top]},e.exports.lua_rawsetp=function(e,t,n){$(e,1);let a=Q(e,t);U(e,a.ttistable(),"table expected");let r=new X(b,n),i=e.stack[e.top-1];K.luaH_setfrom(e,a.value,r,i),delete e.stack[--e.top]},e.exports.lua_register=function(e,t,n){oe(e,n),de(e,t)},e.exports.lua_remove=function(e,t){re(e,t,-1),ne(e,1)},e.exports.lua_replace=function(e,t){ie(e,-1,t),ne(e,1)},e.exports.lua_rotate=re,e.exports.lua_setallocf=function(){return console.warn("lua_setallocf is not available"),0},e.exports.lua_setfield=function(e,t,n){ce(e,Q(e,t),n)},e.exports.lua_setglobal=de,e.exports.lua_seti=function(e,t,n){Z(n),$(e,1);let a=Q(e,t);e.stack[e.top]=new X(y,n),Y(e),H.settable(e,a,e.stack[e.top-1],e.stack[e.top-2]),delete e.stack[--e.top],delete e.stack[--e.top]},e.exports.lua_setmetatable=function(e,t){let n;$(e,1);let a=Q(e,t);switch(e.stack[e.top-1].ttisnil()?n=null:(U(e,e.stack[e.top-1].ttistable(),"table expected"),n=e.stack[e.top-1].value),a.ttnov()){case x:case T:a.value.metatable=n;break;default:e.l_G.mt[a.ttnov()]=n}return delete e.stack[--e.top],!0},e.exports.lua_settable=function(e,t){$(e,2);let n=Q(e,t);H.settable(e,n,e.stack[e.top-2],e.stack[e.top-1]),delete e.stack[--e.top],delete e.stack[--e.top]},e.exports.lua_settop=te,e.exports.lua_setupvalue=function(e,t,n){let a=Q(e,t);$(e,1);let r=me(0,a,n);if(r){let t=r.name;return r.val.setfrom(e.stack[e.top-1]),delete e.stack[--e.top],t}return null},e.exports.lua_setuservalue=function(e,t){$(e,1);let n=Q(e,t);U(e,n.ttisfulluserdata(),"full userdata expected"),n.value.uservalue.setfrom(e.stack[e.top-1]),delete e.stack[--e.top]},e.exports.lua_status=function(e){return e.status},e.exports.lua_stringtonumber=function(e,t){let n=new X,a=B.luaO_str2num(t,n);return 0!==a&&(e.stack[e.top]=n,Y(e)),a},e.exports.lua_toboolean=function(e,t){return!Q(e,t).l_isfalse()},e.exports.lua_tocfunction=function(e,t){let n=Q(e,t);return n.ttislcf()||n.ttisCclosure()?n.value:null},e.exports.lua_todataview=function(e,t){let n=pe(e,t);return new DataView(n.buffer,n.byteOffset,n.byteLength)},e.exports.lua_tointeger=function(e,t){let n=be(e,t);return!1===n?0:n},e.exports.lua_tointegerx=be,e.exports.lua_tojsstring=function(e,t){let n=Q(e,t);if(!n.ttisstring()){if(!H.cvt2str(n))return null;B.luaO_tostring(e,n)}return n.jsstring()},e.exports.lua_tolstring=pe,e.exports.lua_tonumber=function(e,t){let n=we(e,t);return!1===n?0:n},e.exports.lua_tonumberx=we,e.exports.lua_topointer=function(e,t){let n=Q(e,t);switch(n.ttype()){case T:case g:case _:case p:case E:case x:case b:return n.value;default:return null}},e.exports.lua_toproxy=function(e,t){let n=Q(e,t);return function(e,t,n){let a=function(a){U(a,a instanceof F.lua_State&&e===a.l_G,"must be from same global state"),a.stack[a.top]=new X(t,n),Y(a)};return ve.set(a,e),a}(e.l_G,n.type,n.value)},e.exports.lua_tostring=ge,e.exports.lua_tothread=function(e,t){let n=Q(e,t);return n.ttisthread()?n.value:null},e.exports.lua_touserdata=function(e,t){let n=Q(e,t);switch(n.ttnov()){case x:return n.value.data;case b:return n.value;default:return null}},e.exports.lua_type=Le,e.exports.lua_typename=function(e,t){return U(e,A<=t&&t<h,"invalid tag"),V.ttypename(t)},e.exports.lua_upvalueid=function(e,t,n){let a=Q(e,t);switch(a.ttype()){case g:{let a=xe(e,t,n);return a.f.upvals[a.i]}case _:{let t=a.value;return U(e,(0|n)===n&&n>0&&n<=t.nupvalues,"invalid upvalue index"),t.upvalue[n-1]}default:return U(e,!1,"closure expected"),null}},e.exports.lua_upvaluejoin=function(e,t,n,a,r){let i=xe(e,t,n),l=xe(e,a,r),s=l.f.upvals[l.i];i.f.upvals[i.i]=s},e.exports.lua_version=function(e){return null===e?d:e.l_G.version},e.exports.lua_xmove=function(e,t,n){if(e!==t){$(e,n),U(e,e.l_G===t.l_G,"moving among independent states"),U(e,t.ci.top-t.top>=n,"stack overflow"),e.top-=n;for(let a=0;a<n;a++)t.stack[t.top]=new B.TValue,B.setobj2s(t,t.top,e.stack[e.top+a]),delete e.stack[e.top+a],t.top++}}},function(e,t,n){"use strict";const{lua_assert:a}=n(5);const r=function(e){let t=e.reader(e.L,e.data);if(null===t)return-1;a(t instanceof Uint8Array,"Should only load binary of array of bytes");let n=t.length;return 0===n?-1:(e.buffer=t,e.off=0,e.n=n-1,e.buffer[e.off++])};e.exports.EOZ=-1,e.exports.luaZ_buffer=function(e){return e.buffer.subarray(0,e.n)},e.exports.luaZ_buffremove=function(e,t){e.n-=t},e.exports.luaZ_fill=r,e.exports.luaZ_read=function(e,t,n,a){for(;a;){if(0===e.n){if(-1===r(e))return a;e.n++,e.off--}let i=a<=e.n?a:e.n;for(let a=0;a<i;a++)t[n++]=e.buffer[e.off++];e.n-=i,0===e.n&&(e.buffer=null),a-=i}return 0},e.exports.luaZ_resetbuffer=function(e){e.n=0},e.exports.luaZ_resizebuffer=function(e,t,n){let a=new Uint8Array(n);t.buffer&&a.set(t.buffer),t.buffer=a},e.exports.MBuffer=class{constructor(){this.buffer=null,this.n=0}},e.exports.ZIO=class{constructor(e,t,n){this.L=e,a("function"==typeof t,"ZIO requires a reader"),this.reader=t,this.data=n,this.n=0,this.buffer=null,this.off=0}zgetc(){return this.n-- >0?this.buffer[this.off++]:r(this)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(t){let n=Object.entries(t).map(([e,t])=>`${e}=${t}`).join("&"),a="&";return-1===e.indexOf("?")&&(a="?"),`${e}${a}${n}`}return e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(e){this.min=e.readFloat32Array(3),this.max=e.readFloat32Array(3),this.radius=e.readFloat32()}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(1),r=n(49),i=n(50),l=n(200),s=n(201),o=n(204),u=n(205),c=n(206),d=n(207),h=n(78),f=n(208),_=n(209),m=n(210),p=n(211),g=n(212),b=n(213),w=n(214),v=n(215),A=n(216),L=n(217),y=n(218);t.default=class{constructor(e){this.version=800,this.name="",this.animationFile="",this.extent=new i.default,this.blendTime=0,this.sequences=[],this.globalSequences=[],this.materials=[],this.textures=[],this.textureAnimations=[],this.geosets=[],this.geosetAnimations=[],this.bones=[],this.lights=[],this.helpers=[],this.attachments=[],this.pivotPoints=[],this.particleEmitters=[],this.particleEmitters2=[],this.ribbonEmitters=[],this.cameras=[],this.eventObjects=[],this.collisionShapes=[],this.bindPose=[],this.corns=[],this.faceEffectTarget="",this.faceEffect="",this.unknownChunks=[],e&&this.load(e)}load(e){e instanceof ArrayBuffer?this.loadMdx(e):this.loadMdl(e)}loadMdx(e){let t=new a.default(e);if("MDLX"!==t.read(4))throw new Error("WrongMagicNumber");for(;t.remaining()>0;){let e=t.read(4),n=t.readUint32();"VERS"===e?this.loadVersionChunk(t):"MODL"===e?this.loadModelChunk(t):"SEQS"===e?this.loadStaticObjects(this.sequences,l.default,t,n/132):"GLBS"===e?this.loadGlobalSequenceChunk(t,n):"MTLS"===e?this.loadDynamicObjects(this.materials,s.default,t,n):"TEXS"===e?this.loadStaticObjects(this.textures,o.default,t,n/268):"TXAN"===e?this.loadDynamicObjects(this.textureAnimations,u.default,t,n):"GEOS"===e?this.loadDynamicObjects(this.geosets,c.default,t,n):"GEOA"===e?this.loadDynamicObjects(this.geosetAnimations,d.default,t,n):"BONE"===e?this.loadDynamicObjects(this.bones,h.default,t,n):"LITE"===e?this.loadDynamicObjects(this.lights,f.default,t,n):"HELP"===e?this.loadDynamicObjects(this.helpers,_.default,t,n):"ATCH"===e?this.loadDynamicObjects(this.attachments,m.default,t,n):"PIVT"===e?this.loadPivotPointChunk(t,n):"PREM"===e?this.loadDynamicObjects(this.particleEmitters,p.default,t,n):"PRE2"===e?this.loadDynamicObjects(this.particleEmitters2,g.default,t,n):"RIBB"===e?this.loadDynamicObjects(this.ribbonEmitters,b.default,t,n):"CAMS"===e?this.loadDynamicObjects(this.cameras,w.default,t,n):"EVTS"===e?this.loadDynamicObjects(this.eventObjects,v.default,t,n):"CLID"===e?this.loadDynamicObjects(this.collisionShapes,A.default,t,n):"BPOS"===e?this.loadBindPoseChunk(t,n):"CORN"===e?this.loadDynamicObjects(this.corns,L.default,t,n):"FAFX"===e?this.loadFaceEffectChunk(t,n):this.unknownChunks.push(new y.default(t,n,e))}}loadVersionChunk(e){this.version=e.readUint32()}loadModelChunk(e){this.name=e.read(80),this.animationFile=e.read(260),this.extent.readMdx(e),this.blendTime=e.readUint32()}loadStaticObjects(e,t,n,a){for(let r=0;r<a;r++){let a=new t;a.readMdx(n),e.push(a)}}loadGlobalSequenceChunk(e,t){for(let n=0,a=t/4;n<a;n++)this.globalSequences.push(e.readUint32())}loadDynamicObjects(e,t,n,a){let r=n.index+a;for(;n.index<r;){let a=new t;a.readMdx(n,this.version),e.push(a)}}loadPivotPointChunk(e,t){for(let n=0,a=t/12;n<a;n++)this.pivotPoints.push(e.readFloat32Array(3))}loadBindPoseChunk(e,t){for(let t=0,n=e.readUint32();t<n;t++)this.bindPose[t]=e.readFloat32Array(12)}loadFaceEffectChunk(e,t){this.faceEffectTarget=e.read(80),this.faceEffect=e.read(260)}saveMdx(){let e=new ArrayBuffer(this.getByteLength()),t=new a.default(e);t.write("MDLX"),this.saveVersionChunk(t),this.saveModelChunk(t),this.saveStaticObjectChunk(t,"SEQS",this.sequences,132),this.saveGlobalSequenceChunk(t),this.saveDynamicObjectChunk(t,"MTLS",this.materials),this.saveStaticObjectChunk(t,"TEXS",this.textures,268),this.saveDynamicObjectChunk(t,"TXAN",this.textureAnimations),this.saveDynamicObjectChunk(t,"GEOS",this.geosets),this.saveDynamicObjectChunk(t,"GEOA",this.geosetAnimations),this.saveDynamicObjectChunk(t,"BONE",this.bones),this.saveDynamicObjectChunk(t,"LITE",this.lights),this.saveDynamicObjectChunk(t,"HELP",this.helpers),this.saveDynamicObjectChunk(t,"ATCH",this.attachments),this.savePivotPointChunk(t),this.saveDynamicObjectChunk(t,"PREM",this.particleEmitters),this.saveDynamicObjectChunk(t,"PRE2",this.particleEmitters2),this.saveDynamicObjectChunk(t,"RIBB",this.ribbonEmitters),this.saveDynamicObjectChunk(t,"CAMS",this.cameras),this.saveDynamicObjectChunk(t,"EVTS",this.eventObjects),this.saveDynamicObjectChunk(t,"CLID",this.collisionShapes),this.version>800&&(this.saveBindPoseChunk(t),this.saveDynamicObjectChunk(t,"CORN",this.corns),this.saveFaceEffectChunk(t));for(let e of this.unknownChunks)e.writeMdx(t);return e}saveVersionChunk(e){e.write("VERS"),e.writeUint32(4),e.writeUint32(this.version)}saveModelChunk(e){e.write("MODL"),e.writeUint32(372),e.write(this.name),e.skip(80-this.name.length),e.write(this.animationFile),e.skip(260-this.animationFile.length),this.extent.writeMdx(e),e.writeUint32(this.blendTime)}saveStaticObjectChunk(e,t,n,a){if(n.length){e.write(t),e.writeUint32(n.length*a);for(let t of n)t.writeMdx(e)}}saveGlobalSequenceChunk(e){if(this.globalSequences.length){e.write("GLBS"),e.writeUint32(4*this.globalSequences.length);for(let t of this.globalSequences)e.writeUint32(t)}}saveDynamicObjectChunk(e,t,n){if(n.length){e.write(t),e.writeUint32(this.getObjectsByteLength(n));for(let t of n)t.writeMdx(e,this.version)}}savePivotPointChunk(e){if(this.pivotPoints.length){e.write("PIVT"),e.writeUint32(12*this.pivotPoints.length);for(let t of this.pivotPoints)e.writeFloat32Array(t)}}saveBindPoseChunk(e){if(this.bindPose.length){e.write("BPOS"),e.writeUint32(4+48*this.bindPose.length),e.writeUint32(this.bindPose.length);for(let t of this.bindPose)e.writeFloat32Array(t)}}saveFaceEffectChunk(e){""!==this.faceEffectTarget&&""!==this.faceEffect&&(e.write("FAFX"),e.writeUint32(340),e.write(this.faceEffectTarget),e.skip(80-this.faceEffectTarget.length),e.write(this.faceEffect),e.skip(260-this.faceEffect.length))}loadMdl(e){let t,n=new r.default(e);for(;t=n.read();)if("Version"===t)this.loadVersionBlock(n);else if("Model"===t)this.loadModelBlock(n);else if("Sequences"===t)this.loadNumberedObjectBlock(this.sequences,l.default,"Anim",n);else if("GlobalSequences"===t)this.loadGlobalSequenceBlock(n);else if("Textures"===t)this.loadNumberedObjectBlock(this.textures,o.default,"Bitmap",n);else if("Materials"===t)this.loadNumberedObjectBlock(this.materials,s.default,"Material",n);else if("TextureAnims"===t)this.loadNumberedObjectBlock(this.textureAnimations,u.default,"TVertexAnim",n);else if("Geoset"===t)this.loadObject(this.geosets,c.default,n);else if("GeosetAnim"===t)this.loadObject(this.geosetAnimations,d.default,n);else if("Bone"===t)this.loadObject(this.bones,h.default,n);else if("Light"===t)this.loadObject(this.lights,f.default,n);else if("Helper"===t)this.loadObject(this.helpers,_.default,n);else if("Attachment"===t)this.loadObject(this.attachments,m.default,n);else if("PivotPoints"===t)this.loadPivotPointBlock(n);else if("ParticleEmitter"===t)this.loadObject(this.particleEmitters,p.default,n);else if("ParticleEmitter2"===t)this.loadObject(this.particleEmitters2,g.default,n);else if("RibbonEmitter"===t)this.loadObject(this.ribbonEmitters,b.default,n);else if("Camera"===t)this.loadObject(this.cameras,w.default,n);else if("EventObject"===t)this.loadObject(this.eventObjects,v.default,n);else{if("CollisionShape"!==t)throw new Error(`Unsupported block: ${t}`);this.loadObject(this.collisionShapes,A.default,n)}}loadVersionBlock(e){for(let t of e.readBlock()){if("FormatVersion"!==t)throw new Error(`Unknown token in Version: "${t}"`);this.version=e.readInt()}}loadModelBlock(e){this.name=e.readSafe();for(let t of e.readBlockSafe())if(t.startsWith("Num"))e.read();else if("BlendTime"===t)this.blendTime=e.readInt();else if("MinimumExtent"===t)e.readFloatArray(this.extent.min);else if("MaximumExtent"===t)e.readFloatArray(this.extent.max);else{if("BoundsRadius"!==t)throw new Error(`Unknown token in Model: "${t}"`);this.extent.boundsRadius=e.readFloat()}}loadNumberedObjectBlock(e,t,n,a){a.read();for(let r of a.readBlock()){if(r!==n)throw new Error(`Unknown token in ${n}: "${r}"`);{let n=new t;n.readMdl(a),e.push(n)}}}loadGlobalSequenceBlock(e){e.read();for(let t of e.readBlock()){if("Duration"!==t)throw new Error(`Unknown token in GlobalSequences: "${t}"`);this.globalSequences.push(e.readInt())}}loadObject(e,t,n){let a=new t;a.readMdl(n),e.push(a)}loadPivotPointBlock(e){let t=e.readInt();e.read();for(let n=0;n<t;n++)this.pivotPoints.push(e.readFloatArray(new Float32Array(3)));e.read()}saveMdl(){let e=new r.default;return this.saveVersionBlock(e),this.saveModelBlock(e),this.saveStaticObjectsBlock(e,"Sequences",this.sequences),this.saveGlobalSequenceBlock(e),this.saveStaticObjectsBlock(e,"Textures",this.textures),this.saveStaticObjectsBlock(e,"Materials",this.materials),this.saveStaticObjectsBlock(e,"TextureAnims",this.textureAnimations),this.saveObjects(e,this.geosets),this.saveObjects(e,this.geosetAnimations),this.saveObjects(e,this.bones),this.saveObjects(e,this.lights),this.saveObjects(e,this.helpers),this.saveObjects(e,this.attachments),this.savePivotPointBlock(e),this.saveObjects(e,this.particleEmitters),this.saveObjects(e,this.particleEmitters2),this.saveObjects(e,this.ribbonEmitters),this.saveObjects(e,this.cameras),this.saveObjects(e,this.eventObjects),this.saveObjects(e,this.collisionShapes),e.buffer}saveVersionBlock(e){e.startBlock("Version"),e.writeAttrib("FormatVersion",this.version),e.endBlock()}saveModelBlock(e){e.startObjectBlock("Model",this.name),e.writeAttrib("BlendTime",this.blendTime),this.extent.writeMdl(e),e.endBlock()}saveStaticObjectsBlock(e,t,n){if(n.length){e.startBlock(t,n.length);for(let t of n)t.writeMdl(e);e.endBlock()}}saveGlobalSequenceBlock(e){if(this.globalSequences.length){e.startBlock("GlobalSequences",this.globalSequences.length);for(let t of this.globalSequences)e.writeAttrib("Duration",t);e.endBlock()}}saveObjects(e,t){for(let n of t)n.writeMdl(e)}savePivotPointBlock(e){if(this.pivotPoints.length){e.startBlock("PivotPoints",this.pivotPoints.length);for(let t of this.pivotPoints)e.writeFloatArray(t);e.endBlock()}}getByteLength(){let e=396;return e+=this.getStaticObjectsChunkByteLength(this.sequences,132),e+=this.getStaticObjectsChunkByteLength(this.globalSequences,4),e+=this.getDynamicObjectsChunkByteLength(this.materials),e+=this.getStaticObjectsChunkByteLength(this.textures,268),e+=this.getDynamicObjectsChunkByteLength(this.textureAnimations),e+=this.getDynamicObjectsChunkByteLength(this.geosets),e+=this.getDynamicObjectsChunkByteLength(this.geosetAnimations),e+=this.getDynamicObjectsChunkByteLength(this.bones),e+=this.getDynamicObjectsChunkByteLength(this.lights),e+=this.getDynamicObjectsChunkByteLength(this.helpers),e+=this.getDynamicObjectsChunkByteLength(this.attachments),e+=this.getStaticObjectsChunkByteLength(this.pivotPoints,12),e+=this.getDynamicObjectsChunkByteLength(this.particleEmitters),e+=this.getDynamicObjectsChunkByteLength(this.particleEmitters2),e+=this.getDynamicObjectsChunkByteLength(this.ribbonEmitters),e+=this.getDynamicObjectsChunkByteLength(this.cameras),e+=this.getDynamicObjectsChunkByteLength(this.eventObjects),e+=this.getDynamicObjectsChunkByteLength(this.collisionShapes),this.version>800&&(e+=this.getBindPoseChunkByteLength(),e+=this.getDynamicObjectsChunkByteLength(this.corns),e+=this.getFaceEffectChunkByteLength()),e+=this.getObjectsByteLength(this.unknownChunks),e}getObjectsByteLength(e){let t=0;for(let n of e)t+=n.getByteLength(this.version);return t}getDynamicObjectsChunkByteLength(e){return e.length?8+this.getObjectsByteLength(e):0}getStaticObjectsChunkByteLength(e,t){return e.length?8+e.length*t:0}getBindPoseChunkByteLength(){return this.bindPose.length?12+48*this.bindPose.length:0}getFaceEffectChunkByteLength(){return""!==this.faceEffectTarget&&""!==this.faceEffect?348:0}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(e){this.index=0,this.ident=0,this.fractionDigits=6,this.buffer=e||""}read(){let e=this.buffer,t=e.length,n=!1,a=!1,r="";for(;this.index<t;){let t=e[this.index++];if(n)"\n"===t&&(n=!1);else if(a)if("\\"===t)r+=t+e[this.index++];else if("\n"===t)r+="\\n";else if("\r"===t)r+="\\r";else{if('"'===t)return r;r+=t}else if(" "===t||","===t||"\t"===t||"\n"===t||":"===t||"\r"===t){if(r.length)return r}else{if("{"===t||"}"===t)return r.length?(this.index--,r):t;if("/"===t&&"/"===e[this.index]){if(r.length)return this.index--,r;n=!0}else if('"'===t){if(r.length)return this.index--,r;a=!0}else r+=t}}}peek(){let e=this.index,t=this.read();return this.index=e,t}readSafe(){let e=this.read();if(void 0===e)throw new Error("End of stream reached prematurely");return e}readInt(){return parseInt(this.read())}readFloat(){return parseFloat(this.read())}readKeyframe(e){return 1===e.length?e instanceof Float32Array?e[0]=this.readFloat():e[0]=this.readInt():this.readTypedArray(e),e}readIntArray(e){this.read();for(let t=0,n=e.length;t<n;t++)e[t]=this.readInt();return this.read(),e}readFloatArray(e){this.read();for(let t=0,n=e.length;t<n;t++)e[t]=this.readFloat();return this.read(),e}readTypedArray(e){e instanceof Float32Array?this.readFloatArray(e):this.readIntArray(e)}readColor(e){this.read(),e[2]=this.readFloat(),e[1]=this.readFloat(),e[0]=this.readFloat(),this.read()}readVectorArray(e,t){this.read();for(let n=0,a=e.length/t;n<a;n++){this.read();for(let a=0;a<t;a++)e[n*t+a]=this.readFloat();this.read()}return this.read(),e}*readBlock(){this.read();let e=this.read();for(;"}"!==e;)yield e,e=this.read()}*readBlockSafe(){this.readSafe();let e=this.readSafe();for(;"}"!==e;)yield e,e=this.readSafe()}writeColor(e,t){this.writeLine(`${e} { ${t[2]}, ${t[1]}, ${t[0]} },`)}writeFlag(e){this.writeLine(`${e},`)}writeAttrib(e,t){this.writeLine(`${e} ${t},`)}writeFloatAttrib(e,t){this.writeLine(`${e} ${this.formatFloat(t)},`)}writeStringAttrib(e,t){this.writeLine(`${e} "${t}",`)}writeArrayAttrib(e,t){this.writeLine(`${e} { ${t.join(", ")} },`)}writeFloatArrayAttrib(e,t){this.writeLine(`${e} { ${this.formatFloatArray(t)} },`)}writeTypedArrayAttrib(e,t){t instanceof Float32Array?this.writeFloatArrayAttrib(e,t):this.writeArrayAttrib(e,t)}writeKeyframe(e,t){1===t.length?t instanceof Float32Array?this.writeFloatAttrib(e,t[0]):this.writeAttrib(e,t[0]):this.writeTypedArrayAttrib(e,t)}writeArray(e){this.writeLine(`{ ${e.join(", ")} },`)}writeFloatArray(e){this.writeLine(`{ ${this.formatFloatArray(e)} },`)}writeVectorArray(e,t,n){this.startBlock(e,t.length/n);for(let e=0,a=t.length;e<a;e+=n)this.writeFloatArray(t.subarray(e,e+n));this.endBlock()}write(e){this.buffer+=e}writeLine(e){this.buffer+=`${"\t".repeat(this.ident)}${e}\n`}startBlock(...e){e.length?this.writeLine(`${e.join(" ")} {`):this.writeLine("{"),this.ident+=1}startObjectBlock(e,t){this.writeLine(`${e} "${t.replace(/"/g,'\\"')}" {`),this.ident+=1}endBlock(){this.ident-=1,this.writeLine("}")}endBlockComma(){this.ident-=1,this.writeLine("},")}indent(){this.ident+=1}unindent(){this.ident-=1}formatFloat(e){let t=e.toString(),n=e.toFixed(this.fractionDigits);return t.length>n.length?n:t}formatFloatArray(e){let t=[];for(let n=0,a=e.length;n<a;n++)t[n]=this.formatFloat(e[n]);return t.join(", ")}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(){this.boundsRadius=0,this.min=new Float32Array(3),this.max=new Float32Array(3)}readMdx(e){this.boundsRadius=e.readFloat32(),e.readFloat32Array(this.min),e.readFloat32Array(this.max)}writeMdx(e){e.writeFloat32(this.boundsRadius),e.writeFloat32Array(this.min),e.writeFloat32Array(this.max)}writeMdl(e){0===this.min[0]&&0===this.min[1]&&0===this.min[2]||e.writeFloatArrayAttrib("MinimumExtent",this.min),0===this.max[0]&&0===this.max[1]&&0===this.max[2]||e.writeFloatArrayAttrib("MaximumExtent",this.max),0!==this.boundsRadius&&e.writeFloatAttrib("BoundsRadius",this.boundsRadius)}}},function(e,t,n){"use strict";e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(1),r=n(236),i=n(239);t.default=class{constructor(e){this.version=0,this.u1=new Uint8Array(4),this.doodads=[],this.u2=new Uint8Array(4),this.terrainDoodads=[],e&&this.load(e)}load(e){let t=new a.default(e);if("W3do"!==t.read(4))return!1;this.version=t.readInt32(),t.readUint8Array(this.u1);for(let e=0,n=t.readInt32();e<n;e++){let e=new r.default;e.load(t,this.version),this.doodads.push(e)}t.readUint8Array(this.u2);for(let e=0,n=t.readInt32();e<n;e++){let e=new i.default;e.load(t,this.version),this.terrainDoodads.push(e)}return!0}save(){let e=new ArrayBuffer(this.getByteLength()),t=new a.default(e);t.write("W3do"),t.writeInt32(this.version),t.writeUint8Array(this.u1),t.writeUint32(this.doodads.length);for(let e of this.doodads)e.save(t,this.version);t.writeUint8Array(this.u2),t.writeUint32(this.terrainDoodads.length);for(let e of this.terrainDoodads)e.save(t,this.version);return e}getByteLength(){let e=24+16*this.terrainDoodads.length;for(let t of this.doodads)e+=t.getByteLength(this.version);return e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(1),r=n(88);t.default=class{constructor(e){this.version=0,this.originalTable=new r.default,this.customTable=new r.default,e&&this.load(e)}load(e){let t;t=e instanceof ArrayBuffer?new a.default(e):e,this.version=t.readInt32(),this.originalTable.load(t,!0),this.customTable.load(t,!0)}save(e){return e||(e=new a.default(new ArrayBuffer(this.getByteLength()))),e.writeInt32(this.version),this.originalTable.save(e,!0),this.customTable.save(e,!0),e.buffer}getByteLength(){return 4+this.originalTable.getByteLength(!0)+this.customTable.getByteLength(!0)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(1),r=n(243);t.default=class{constructor(e){this.version=0,this.tileset="A",this.haveCustomTileset=0,this.groundTilesets=[],this.cliffTilesets=[],this.mapSize=new Int32Array(2),this.centerOffset=new Float32Array(2),this.corners=[],e&&this.load(e)}load(e){let t=new a.default(e);if("W3E!"!==t.read(4))return!1;this.version=t.readInt32(),this.tileset=t.read(1),this.haveCustomTileset=t.readInt32();for(let e=0,n=t.readInt32();e<n;e++)this.groundTilesets[e]=t.read(4);for(let e=0,n=t.readInt32();e<n;e++)this.cliffTilesets[e]=t.read(4);t.readInt32Array(this.mapSize),t.readFloat32Array(this.centerOffset);for(let e=0,n=this.mapSize[1];e<n;e++){this.corners[e]=[];for(let n=0,a=this.mapSize[0];n<a;n++){let a=new r.default;a.load(t),this.corners[e][n]=a}}return!0}save(){let e=new ArrayBuffer(this.getByteLength()),t=new a.default(e);t.write("W3E!"),t.writeInt32(this.version),t.write(this.tileset),t.writeInt32(this.haveCustomTileset),t.writeUint32(this.groundTilesets.length);for(let e of this.groundTilesets)t.write(e);t.writeUint32(this.cliffTilesets.length);for(let e of this.cliffTilesets)t.write(e);t.writeInt32Array(this.mapSize),t.writeFloat32Array(this.centerOffset);for(let e of this.corners)for(let n of e)n.save(t);return e}getByteLength(){return 37+4*this.groundTilesets.length+4*this.cliffTilesets.length+this.mapSize[0]*this.mapSize[1]*7}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(1),r=n(244),i=n(245),l=n(246),s=n(247),o=n(248),u=n(250);t.default=class{constructor(e){this.version=0,this.saves=0,this.editorVersion=0,this.unknown1=new Uint8Array(16),this.name="",this.author="",this.description="",this.recommendedPlayers="",this.cameraBounds=new Float32Array(8),this.cameraBoundsComplements=new Int32Array(4),this.playableSize=new Int32Array(2),this.flags=0,this.tileset="A",this.campaignBackground=0,this.loadingScreenModel="",this.loadingScreenText="",this.loadingScreenTitle="",this.loadingScreenSubtitle="",this.loadingScreen=0,this.prologueScreenModel="",this.prologueScreenText="",this.prologueScreenTitle="",this.prologueScreenSubtitle="",this.useTerrainFog=0,this.fogHeight=new Float32Array(2),this.fogDensity=0,this.fogColor=new Uint8Array(4),this.globalWeather=0,this.soundEnvironment="",this.lightEnvironmentTileset="\0",this.waterVertexColor=new Uint8Array(4),this.unknown2=new Uint8Array(4),this.players=[],this.forces=[],this.upgradeAvailabilityChanges=[],this.techAvailabilityChanges=[],this.randomUnitTables=[],this.randomItemTables=[],e&&this.load(e)}load(e){let t=new a.default(e);this.version=t.readInt32(),this.saves=t.readInt32(),this.editorVersion=t.readInt32(),this.version>27&&t.readUint8Array(this.unknown1),this.name=t.readUntilNull(),this.author=t.readUntilNull(),this.description=t.readUntilNull(),this.recommendedPlayers=t.readUntilNull(),t.readFloat32Array(this.cameraBounds),t.readInt32Array(this.cameraBoundsComplements),t.readInt32Array(this.playableSize),this.flags=t.readUint32(),this.tileset=t.read(1),this.campaignBackground=t.readInt32(),this.version>24&&(this.loadingScreenModel=t.readUntilNull()),this.loadingScreenText=t.readUntilNull(),this.loadingScreenTitle=t.readUntilNull(),this.loadingScreenSubtitle=t.readUntilNull(),this.loadingScreen=t.readInt32(),this.version>24&&(this.prologueScreenModel=t.readUntilNull()),this.prologueScreenText=t.readUntilNull(),this.prologueScreenTitle=t.readUntilNull(),this.prologueScreenSubtitle=t.readUntilNull(),this.version>24&&(this.useTerrainFog=t.readInt32(),t.readFloat32Array(this.fogHeight),this.fogDensity=t.readFloat32(),t.readUint8Array(this.fogColor),this.globalWeather=t.readInt32(),this.soundEnvironment=t.readUntilNull(),this.lightEnvironmentTileset=t.read(1,!0),t.readUint8Array(this.waterVertexColor)),this.version>27&&t.readUint8Array(this.unknown2);for(let e=0,n=t.readInt32();e<n;e++){let n=new r.default;n.load(t),this.players[e]=n}for(let e=0,n=t.readInt32();e<n;e++){let n=new i.default;n.load(t),this.forces[e]=n}for(let e=0,n=t.readInt32();e<n;e++){let n=new l.default;n.load(t),this.upgradeAvailabilityChanges[e]=n}for(let e=0,n=t.readInt32();e<n;e++){let n=new s.default;n.load(t),this.techAvailabilityChanges[e]=n}for(let e=0,n=t.readInt32();e<n;e++){let n=new o.default;n.load(t),this.randomUnitTables[e]=n}if(this.version>24)for(let e=0,n=t.readInt32();e<n;e++){let n=new u.default;n.load(t),this.randomItemTables[e]=n}}save(){let e=new ArrayBuffer(this.getByteLength()),t=new a.default(e);t.writeInt32(this.version),t.writeInt32(this.saves),t.writeInt32(this.editorVersion),this.version>27&&t.writeUint8Array(this.unknown1),t.write(`${this.name}\0`),t.write(`${this.author}\0`),t.write(`${this.description}\0`),t.write(`${this.recommendedPlayers}\0`),t.writeFloat32Array(this.cameraBounds),t.writeInt32Array(this.cameraBoundsComplements),t.writeInt32Array(this.playableSize),t.writeUint32(this.flags),t.write(this.tileset),t.writeInt32(this.campaignBackground),this.version>24&&t.write(`${this.loadingScreenModel}\0`),t.write(`${this.loadingScreenText}\0`),t.write(`${this.loadingScreenTitle}\0`),t.write(`${this.loadingScreenSubtitle}\0`),t.writeInt32(this.loadingScreen),this.version>24&&t.write(`${this.prologueScreenModel}\0`),t.write(`${this.prologueScreenText}\0`),t.write(`${this.prologueScreenTitle}\0`),t.write(`${this.prologueScreenSubtitle}\0`),this.version>24&&(t.writeInt32(this.useTerrainFog),t.writeFloat32Array(this.fogHeight),t.writeFloat32(this.fogDensity),t.writeUint8Array(this.fogColor),t.writeInt32(this.globalWeather),t.write(`${this.soundEnvironment}\0`),t.write(this.lightEnvironmentTileset),t.writeUint8Array(this.waterVertexColor)),this.version>27&&t.writeUint8Array(this.unknown2),t.writeUint32(this.players.length);for(let e of this.players)e.save(t);t.writeUint32(this.forces.length);for(let e of this.forces)e.save(t);t.writeUint32(this.upgradeAvailabilityChanges.length);for(let e of this.upgradeAvailabilityChanges)e.save(t);t.writeUint32(this.techAvailabilityChanges.length);for(let e of this.techAvailabilityChanges)e.save(t);t.writeUint32(this.randomUnitTables.length);for(let e of this.randomUnitTables)e.save(t);if(this.version>24){t.writeUint32(this.randomItemTables.length);for(let e of this.randomItemTables)e.save(t)}return e}getByteLength(){let e=111+this.name.length+this.author.length+this.description.length+this.recommendedPlayers.length+this.loadingScreenText.length+this.loadingScreenTitle.length+this.loadingScreenSubtitle.length+this.prologueScreenText.length+this.prologueScreenTitle.length+this.prologueScreenSubtitle.length;for(let t of this.players)e+=t.getByteLength();for(let t of this.forces)e+=t.getByteLength();e+=16*this.upgradeAvailabilityChanges.length,e+=8*this.techAvailabilityChanges.length;for(let t of this.randomUnitTables)e+=t.getByteLength();if(this.version>24){e+=36+this.loadingScreenModel.length+this.prologueScreenModel.length+this.soundEnvironment.length;for(let t of this.randomItemTables)e+=t.getByteLength()}return e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(1),r=n(88);t.default=class{constructor(e){this.version=0,this.originalTable=new r.default,this.customTable=new r.default,e&&this.load(e)}load(e){let t;t=e instanceof ArrayBuffer?new a.default(e):e,this.version=t.readInt32(),this.originalTable.load(t,!1),this.customTable.load(t,!1)}save(e){return e||(e=new a.default(new ArrayBuffer(this.getByteLength()))),e.writeInt32(this.version),this.originalTable.save(e,!1),this.customTable.save(e,!1),e.buffer}getByteLength(){return 4+this.originalTable.getByteLength(!1)+this.customTable.getByteLength(!1)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(94);class r{constructor(){this.type=0,this.value="",this.subParameters=null,this.u1=0,this.isArray=0,this.arrayIndex=null}load(e,t,n){if(this.type=e.readInt32(),this.value=e.readUntilNull(),e.readInt32()){let r=new a.default;r.load(e,t,n),this.subParameters=r}if((4===t&&2===this.type||7===t&&this.subParameters)&&(this.u1=e.readInt32()),(4===t&&2!==this.type||7===t)&&(this.isArray=e.readInt32()),this.isArray){let a=new r;a.load(e,t,n),this.arrayIndex=a}}save(e,t){e.writeInt32(this.type),e.write(`${this.value}\0`),this.subParameters?(e.writeInt32(1),this.subParameters.save(e,t)):e.writeInt32(0),(4===t&&2===this.type||7===t&&this.subParameters)&&e.writeInt32(this.u1),(4===t&&2!==this.type||7===t)&&e.writeInt32(this.isArray),this.isArray&&this.arrayIndex&&this.arrayIndex.save(e,t)}getByteLength(e){let t=9+this.value.length;return this.subParameters&&(t+=this.subParameters.getByteLength(e)),(4===e&&2===this.type||7===e&&this.subParameters)&&(t+=4),(4===e&&2!==this.type||7===e)&&(t+=4),this.isArray&&this.arrayIndex&&(t+=this.arrayIndex.getByteLength(e)),t}}t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(59),r=n(60),i=n(297),l=n(298),s=n(301),o=n(100),u=n(36),c=n(304),d=n(305),h=n(306),f=n(22),_=n(104),m=n(307);class p extends a.EventEmitter{constructor(e,t){super(),this.resources=[],this.fetchCache=new Map,this.resourcesLoading=new Set,this.handlers=new Set,this.frameTime=1e3/60,this.scenes=[],this.visibleCells=0,this.visibleInstances=0,this.updatedParticles=0,this.frame=0,this.audioEnabled=!1,this.textureMappers=new Map,this.canvas=e,this.webgl=new l.default(e,t),this.gl=this.webgl.gl;let n=this.gl;this.rectBuffer=n.createBuffer(),n.bindBuffer(n.ARRAY_BUFFER,this.rectBuffer),n.bufferData(n.ARRAY_BUFFER,new Uint8Array([0,1,2,0,2,3]),n.STATIC_DRAW),this.buffer=new d.default(n),this.on("loadstart",e=>{this.resourcesLoading.add(e)}),this.on("loadend",e=>{this.resourcesLoading.delete(e),0===this.resourcesLoading.size&&setTimeout(()=>this.emit("idle"),0)})}enableAudio(){return"function"==typeof AudioContext&&(this.audioEnabled=!0,!0)}addHandler(e){if(e){let t=this.handlers;if(!t.has(e))return e.load&&!e.load(this)?(this.emit("error",this,"The handler's load function failed",e),!1):(t.add(e),!0)}return!1}addScene(){let e=new o.default(this);return this.scenes.push(e),e}removeScene(e){let t=this.scenes,n=t.indexOf(e);return-1!==n&&(t.splice(n,1),!0)}clear(){this.scenes.length=0}findHandler(e){for(let t of this.handlers)for(let n of t.extensions)if(e===n[0])return[t,n[1]]}load(e,t,n){if(_.isImageSource(e))return this.loadImageTexture(()=>[e]);if(t){let[a,i,l]=t(e,n);if("string"!=typeof i)return void this.emit("error",this,"The path solver did not return an extension",t);if("."!==i[0]&&(i="."+i),_.isImageSource(a))return this.loadImageTexture(()=>[a]);if(_.isImageExtension(i)){let e=this.fetchCache.get(a);return e||(e=this.loadImageTexture(()=>[a]),this.fetchCache.set(a,e),e)}let s=this.findHandler(i.toLowerCase());if(s){if(l){let e=this.fetchCache.get(a);if(e)return e}let e=new s[0].resource({viewer:this,extension:i,pathSolver:t,fetchUrl:l?a:""});if(this.resources.push(e),l&&this.fetchCache.set(a,e),this.registerEvents(e),e.emit("loadstart",e),l){let t=s[1];r.fetchDataType(a,t).then(t=>{let n=t.data;t.ok?e.loadData(n):e.error(t.error,n)})}else e.loadData(a);return e}this.emit("error",this,`Unknown extension "${i}" for "${e}". Did you forget to add the handler?`)}else this.emit("error",this,`Could not resolve "${e}". Did you forget to pass a path solver?`)}has(e){return this.fetchCache.has(e)}get(e){return this.fetchCache.get(e)}loadGeneric(e,t,n){let a=this.fetchCache.get(e);if(a)return a;let i=new c.default({viewer:this,fetchUrl:e});return this.resources.push(i),this.fetchCache.set(e,i),this.registerEvents(i),i.emit("loadstart",i),r.fetchDataType(e,t).then(e=>{let t=e.data;if(e.ok)if(n){try{t=n(t)}catch(e){i.emit("error","An exception was thrown while running the client callback",e)}t instanceof Promise?t.then(e=>i.loadData(e)):i.loadData(t)}else i.loadData(t);else i.error(e.error,t)}),i}loadImageTexture(e){let t=new _.ImageTexture({viewer:this,pathSolver:e});return this.resources.push(t),this.registerEvents(t),t.emit("loadstart",t),t.loadData(),t}loadCubeMap(e){let t=new m.default({viewer:this,pathSolver:e});return this.resources.push(t),this.registerEvents(t),t.emit("loadstart",t),t.loadData(),t}unload(e){let t=e.fetchUrl;""!==t&&this.fetchCache.delete(t);let n=this.resources,a=n.indexOf(e);return-1!==a&&(n.splice(a,1),!0)}promise(){let e=new s.default({viewer:this});return this.registerEvents(e),e.promise(),e}whenLoaded(e,t){let n=[];for(let t of e)t instanceof u.Resource&&n.push(t.whenLoaded());let a=Promise.all(n);if(!t)return a;a.then(e=>t(e))}whenAllLoaded(e){let t=new Promise(e=>{0===this.resourcesLoading.size?e(this):this.once("idle",()=>e(this))});if(!e)return t;t.then(()=>e(this))}toBlob(e){let t=new Promise(e=>this.canvas.toBlob(t=>e(t)));if(!e)return t;t.then(t=>e(t))}updateAndRender(){this.update(),this.startFrame(),this.render()}update(){let e=.001*this.frameTime;this.frame+=1,this.visibleCells=0,this.visibleInstances=0,this.updatedParticles=0;for(let t of this.scenes)t.update(e),this.visibleCells+=t.visibleCells,this.visibleInstances+=t.visibleInstances,this.updatedParticles+=t.updatedParticles}startFrame(){let e=this.gl;e.depthMask(!0),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT)}render(){this.renderOpaque(),this.renderTranslucent()}renderOpaque(){for(let e of this.scenes)e.renderOpaque()}renderTranslucent(){for(let e of this.scenes)e.renderTranslucent()}clearEmittedObjects(){for(let e of this.scenes)e.clearEmittedObjects()}registerEvents(e){["loadstart","load","error","loadend"].map(t=>e.once(t,(...e)=>this.emit(t,...e)))}baseTextureMapper(e){let t=this.textureMappers;t.has(e)||t.set(e,[]);let n=t.get(e);return n.length||(n[0]=new h.default(e)),n[0]}changeTextureMapper(e,t,n){let a=new Map(e.textureMapper.textures);n instanceof f.default?a.set(t,n):a.delete(t);let r=e.model,l=this.textureMappers.get(r);for(let e of l)if(i.default(e.textures,a))return e;let s=new h.default(r,a);return l.push(s),s}}t.default=p},function(e,t,n){"use strict";var a,r="object"==typeof Reflect?Reflect:null,i=r&&"function"==typeof r.apply?r.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};a=r&&"function"==typeof r.ownKeys?r.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var l=Number.isNaN||function(e){return e!=e};function s(){s.init.call(this)}e.exports=s,s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var o=10;function u(e){return void 0===e._maxListeners?s.defaultMaxListeners:e._maxListeners}function c(e,t,n,a){var r,i,l,s;if("function"!=typeof n)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof n);if(void 0===(i=e._events)?(i=e._events=Object.create(null),e._eventsCount=0):(void 0!==i.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),i=e._events),l=i[t]),void 0===l)l=i[t]=n,++e._eventsCount;else if("function"==typeof l?l=i[t]=a?[n,l]:[l,n]:a?l.unshift(n):l.push(n),(r=u(e))>0&&l.length>r&&!l.warned){l.warned=!0;var o=new Error("Possible EventEmitter memory leak detected. "+l.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");o.name="MaxListenersExceededWarning",o.emitter=e,o.type=t,o.count=l.length,s=o,console&&console.warn&&console.warn(s)}return e}function d(){for(var e=[],t=0;t<arguments.length;t++)e.push(arguments[t]);this.fired||(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,i(this.listener,this.target,e))}function h(e,t,n){var a={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},r=d.bind(a);return r.listener=n,a.wrapFn=r,r}function f(e,t,n){var a=e._events;if(void 0===a)return[];var r=a[t];return void 0===r?[]:"function"==typeof r?n?[r.listener||r]:[r]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(r):m(r,r.length)}function _(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function m(e,t){for(var n=new Array(t),a=0;a<t;++a)n[a]=e[a];return n}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(e){if("number"!=typeof e||e<0||l(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");o=e}}),s.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||l(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},s.prototype.getMaxListeners=function(){return u(this)},s.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var a="error"===e,r=this._events;if(void 0!==r)a=a&&void 0===r.error;else if(!a)return!1;if(a){var l;if(t.length>0&&(l=t[0]),l instanceof Error)throw l;var s=new Error("Unhandled error."+(l?" ("+l.message+")":""));throw s.context=l,s}var o=r[e];if(void 0===o)return!1;if("function"==typeof o)i(o,this,t);else{var u=o.length,c=m(o,u);for(n=0;n<u;++n)i(c[n],this,t)}return!0},s.prototype.addListener=function(e,t){return c(this,e,t,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(e,t){return c(this,e,t,!0)},s.prototype.once=function(e,t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);return this.on(e,h(this,e,t)),this},s.prototype.prependOnceListener=function(e,t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);return this.prependListener(e,h(this,e,t)),this},s.prototype.removeListener=function(e,t){var n,a,r,i,l;if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);if(void 0===(a=this._events))return this;if(void 0===(n=a[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete a[e],a.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(r=-1,i=n.length-1;i>=0;i--)if(n[i]===t||n[i].listener===t){l=n[i].listener,r=i;break}if(r<0)return this;0===r?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,r),1===n.length&&(a[e]=n[0]),void 0!==a.removeListener&&this.emit("removeListener",e,l||t)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(e){var t,n,a;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var r,i=Object.keys(n);for(a=0;a<i.length;++a)"removeListener"!==(r=i[a])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(a=t.length-1;a>=0;a--)this.removeListener(e,t[a]);return this},s.prototype.listeners=function(e){return f(this,e,!0)},s.prototype.rawListeners=function(e){return f(this,e,!1)},s.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):_.call(e,t)},s.prototype.listenerCount=_,s.prototype.eventNames=function(){return this._eventsCount>0?a(this._events):[]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fetchDataType=async function(e,t){if("image"===t)return new Promise(t=>{let n=new Image;n.onload=()=>{t({ok:!0,data:n})},n.onerror=e=>{t({ok:!1,error:"ImageError",data:e})},n.src=e});{let n;try{n=await fetch(e)}catch(e){return{ok:!1,error:"NetworkError",data:e}}if(!n.ok)return{ok:!1,error:"HttpError",data:n};try{let e=null;return"text"===t?e=await n.text():"arrayBuffer"===t?e=await n.arrayBuffer():"blob"===t&&(e=await n.blob()),{ok:!0,data:e}}catch(e){return{ok:!1,error:"DataError",data:e}}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(310);t.default={load:e=>(e.webgl.ensureExtension("WEBGL_compressed_texture_s3tc")||console.warn("DDS: No compressed textures support! This might reduce performance."),!0),extensions:[[".dds","arrayBuffer"]],resource:a.default}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(311),r=n(315),i=n(316);let l={standard:null};t.default={extensions:[[".geo"]],load(e){let t=e.webgl;return t.ensureExtension("ANGLE_instanced_arrays")?(l.standard=t.createShaderProgram(r.default,i.default),null!==l.standard):(console.error("GEO: No instanced rendering support!"),!1)},resource:a.default,shaders:l}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(61),r=n(64),i=n(318),l=n(334),s=n(335);let o={standard:[]};t.default={extensions:[[".m3","arrayBuffer"]],load(e){let t=e.gl,n=e.webgl,i=[[255,3,3],[0,66,255],[28,230,185],[84,0,129],[255,252,1],[254,138,14],[32,192,0],[229,91,176],[149,150,151],[126,191,241],[16,98,70],[78,42,4],[40,40,40],[0,0,0]];if(!n.ensureExtension("OES_texture_float"))return console.error("M3: No float texture support!"),!1;e.addHandler(a.default),e.addHandler(r.default);for(let e=0;e<4;e++){let a=n.createShaderProgram(`#define EXPLICITUV${e}\n${l.default}`,s.default);if(null===a)return!1;n.useShaderProgram(a);for(let e=0;e<14;e++){let n=i[e];t.uniform3f(a.uniforms["u_teamColors["+e+"]"],n[0]/255,n[1]/255,n[2]/255)}o.standard[e]=a}return!0},resource:i.default,lightPosition:new Float32Array([0,0,1e4]),shaders:o}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(317);t.default={extensions:[[".tga","arrayBuffer"]],resource:a.default}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default="\nuniform sampler2D u_boneMap;\nuniform float u_vectorSize;\nuniform float u_rowSize;\n\nmat4 fetchMatrix(float column, float row) {\n  column *= u_vectorSize * 4.0;\n  row *= u_rowSize;\n  // Add in half a texel, to sample in the middle of the texel.\n  // Otherwise, since the sample is directly on the boundary, floating point errors can cause the sample to get the wrong pixel.\n  // This is most noticeable with NPOT textures, which the bone maps are.\n  column += 0.5 * u_vectorSize;\n  row += 0.5 * u_rowSize;\n\n  return mat4(texture2D(u_boneMap, vec2(column, row)),\n              texture2D(u_boneMap, vec2(column + u_vectorSize, row)),\n              texture2D(u_boneMap, vec2(column + u_vectorSize * 2.0, row)),\n              texture2D(u_boneMap, vec2(column + u_vectorSize * 3.0, row)));\n}\n"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.layerFilterMode=function(e,t){return 2===e?[t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA]:3===e?[t.SRC_ALPHA,t.ONE]:4===e?[t.SRC_ALPHA,t.ONE]:5===e?[t.ZERO,t.SRC_COLOR]:6===e?[t.DST_COLOR,t.SRC_COLOR]:[0,0]},t.emitterFilterMode=function(e,t){return 0===e?[t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA]:1===e?[t.SRC_ALPHA,t.ONE]:2===e?[t.ZERO,t.SRC_COLOR]:3===e?[t.DST_COLOR,t.SRC_COLOR]:4===e?[t.SRC_ALPHA,t.ONE]:[0,0]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(73),r=n(72);t.MappedData=class{constructor(e){this.map={},e&&this.load(e)}load(e){if(e.startsWith("ID;")){let t=new a.default(e).rows,n=t[0],r=this.map;for(let e=1,a=t.length;e<a;e++){let a=t[e],i=a[0];if(i){i=i.toLowerCase(),r[i]||(r[i]={});let e=r[i];for(let t=0,r=n.length;t<r;t++){let r=n[t];void 0===r&&(r=`column${t}`),e[`${r}`]=a[t]}}}}else{let t=new r.default(e).sections,n=this.map;for(let[e,a]of t.entries()){n[e]||(n[e]={});let t=n[e];for(let[e,n]of a)t[e]=n}}}getRow(e){return this.map[e.toLowerCase()]}getProperty(e,t){return this.map[e.toLowerCase()][t]}setRow(e,t){this.map[e.toLowerCase()]=t}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(2),r=n(42);t.ALPHA_MODE_OPAQUE=0,t.ALPHA_MODE_MASK=1,t.ALPHA_MODE_BLEND=2;t.GltfMaterial=class{constructor(e,n){if(this.doubleSided=!1,this.alphaMode=t.ALPHA_MODE_OPAQUE,this.alphaCutoff=.5,this.metallicRoughness=!1,this.baseColorFactor=a.vec4.fromValues(1,1,1,1),this.baseColorTexture=-1,this.baseColorUvSet=0,this.metallicFactor=1,this.roughnessFactor=1,this.metallicRoughnessTexture=-1,this.metallicRoughnessUvSet=0,this.specularGlossiness=!1,this.diffuseFactor=a.vec3.fromValues(1,1,1),this.diffuseTexture=-1,this.specularFactor=a.vec3.fromValues(1,1,1),this.glossinessFactor=1,this.specularGlossinessTexture=-1,this.specularGlossinessUvSet=0,this.normalScale=1,this.normalTexture=-1,this.normalUvSet=0,this.occlusionStrength=1,this.occlusionTexture=-1,this.occlusionUvSet=0,this.emissiveFactor=a.vec3.create(),this.emissiveTexture=-1,this.emissiveUvSet=0,this.model=e,void 0!==n.doubleSided&&(this.doubleSided=n.doubleSided),void 0!==n.alphaMode){let e=n.alphaMode;"OPAQUE"===e?this.alphaMode=t.ALPHA_MODE_OPAQUE:"MASK"===e?this.alphaMode=t.ALPHA_MODE_MASK:"BLEND"===e&&(this.alphaMode=t.ALPHA_MODE_BLEND)}if(void 0!==n.alphaCutoff&&(this.alphaCutoff=n.alphaCutoff),void 0!==n.pbrMetallicRoughness){let e=n.pbrMetallicRoughness;this.metallicRoughness=!0,void 0!==e.baseColorFactor&&a.vec4.copy(this.baseColorFactor,e.baseColorFactor),void 0!==e.baseColorTexture&&(this.baseColorTexture=e.baseColorTexture.index),void 0!==e.metallicFactor&&(this.metallicFactor=e.metallicFactor),void 0!==e.roughnessFactor&&(this.roughnessFactor=e.roughnessFactor),void 0!==e.metallicRoughnessTexture&&(this.metallicRoughnessTexture=e.metallicRoughnessTexture.index)}void 0!==n.normalScale&&(this.normalScale=n.normalScale),void 0!==n.normalTexture&&(this.normalTexture=n.normalTexture.index),void 0!==n.occlusionStrength&&(this.occlusionStrength=n.occlusionStrength),void 0!==n.occlusionTexture&&(this.occlusionTexture=n.occlusionTexture.index),void 0!==n.emissiveFactor&&a.vec3.copy(this.emissiveFactor,n.emissiveFactor),void 0!==n.emissiveTexture&&(this.emissiveTexture=n.emissiveTexture.index),this.flags=r.getMaterialFlags(this)}bind(e,n){let a=this.model,r=a.viewer,i=r.gl,l=r.webgl,s=a.textures,o=e.uniforms;this.doubleSided?i.disable(i.CULL_FACE):i.enable(i.CULL_FACE),this.alphaMode===t.ALPHA_MODE_OPAQUE?i.disable(i.BLEND):this.alphaMode===t.ALPHA_MODE_MASK?(i.disable(i.BLEND),i.uniform1f(o.u_alphaCutoff,this.alphaCutoff)):this.alphaMode===t.ALPHA_MODE_BLEND&&(i.enable(i.BLEND),i.blendFunc(i.SRC_ALPHA,i.ONE_MINUS_SRC_ALPHA)),this.metallicRoughness&&(i.uniform4fv(o.u_baseColorFactor,this.baseColorFactor),-1!==this.baseColorTexture&&(l.bindTexture(n.get(this.baseColorTexture)||s[this.baseColorTexture],3),i.uniform1i(o.u_baseColorSampler,3),i.uniform1i(o.u_baseColorUvSet,this.baseColorUvSet)),i.uniform1f(o.u_metallicFactor,this.metallicFactor),i.uniform1f(o.u_roughnessFactor,this.roughnessFactor),-1!==this.metallicRoughnessTexture&&(l.bindTexture(n.get(this.metallicRoughnessTexture)||s[this.metallicRoughnessTexture],4),i.uniform1i(o.u_metallicRoughnessSampler,4),i.uniform1i(o.u_metallicRoughnessUvSet,this.metallicRoughnessUvSet))),-1!==this.normalTexture&&(i.uniform1f(o.u_normalScale,this.normalScale),l.bindTexture(n.get(this.normalTexture)||s[this.normalTexture],5),i.uniform1i(o.u_normalSampler,5),i.uniform1i(o.u_normalUvSet,this.normalUvSet)),-1!==this.occlusionTexture&&(i.uniform1f(o.u_occlusionStrength,this.occlusionStrength),l.bindTexture(n.get(this.occlusionTexture)||s[this.occlusionTexture],6),i.uniform1i(o.u_occlusionSampler,6),i.uniform1i(o.u_occlusionUvSet,this.occlusionUvSet)),-1!==this.emissiveTexture&&(i.uniform3fv(o.u_emissiveFactor,this.emissiveFactor),l.bindTexture(n.get(this.emissiveTexture)||s[this.emissiveTexture],7),i.uniform1i(o.u_emissiveSampler,7),i.uniform1i(o.u_emissiveUvSet,this.emissiveUvSet))}}},function(e,t,n){"use strict";const{constant_types:{LUA_TBOOLEAN:a,LUA_TLNGSTR:r},thread_status:{LUA_ERRSYNTAX:i},to_luastring:l}=n(3),{LUA_MINBUFFER:s,MAX_INT:o,lua_assert:u}=n(5),c=n(18),d=n(10),{lisdigit:h,lislalnum:f,lislalpha:_,lisspace:m,lisxdigit:p}=n(122),g=n(6),{luaS_bless:b,luaS_hash:w,luaS_hashlongstr:v,luaS_new:A}=n(15),L=n(14),{EOZ:y,luaZ_buffer:S,luaZ_buffremove:T,luaZ_resetbuffer:E,luaZ_resizebuffer:x}=n(45),k=l("_ENV",!0),M={TK_AND:257,TK_BREAK:258,TK_DO:259,TK_ELSE:260,TK_ELSEIF:261,TK_END:262,TK_FALSE:263,TK_FOR:264,TK_FUNCTION:265,TK_GOTO:266,TK_IF:267,TK_IN:268,TK_LOCAL:269,TK_NIL:270,TK_NOT:271,TK_OR:272,TK_REPEAT:273,TK_RETURN:274,TK_THEN:275,TK_TRUE:276,TK_UNTIL:277,TK_WHILE:278,TK_IDIV:279,TK_CONCAT:280,TK_DOTS:281,TK_EQ:282,TK_GE:283,TK_LE:284,TK_NE:285,TK_SHL:286,TK_SHR:287,TK_DBCOLON:288,TK_EOS:289,TK_FLT:290,TK_INT:291,TK_NAME:292,TK_STRING:293},I=["and","break","do","else","elseif","end","false","for","function","goto","if","in","local","nil","not","or","repeat","return","then","true","until","while","//","..","...","==",">=","<=","~=","<<",">>","::","<eof>","<number>","<integer>","<name>","<string>"].map((e,t)=>l(e));class U{constructor(){this.r=NaN,this.i=NaN,this.ts=null}}class P{constructor(){this.token=NaN,this.seminfo=new U}}const R=function(e,t){let n=e.buff;if(n.n+1>n.buffer.length){n.buffer.length>=o/2&&K(e,l("lexical element too long",!0),0);let t=2*n.buffer.length;x(e.L,n,t)}n.buffer[n.n++]=t<0?255+t+1:t},O=function(e,t){if(t<257)return g.luaO_pushfstring(e.L,l("'%c'",!0),t);{let n=I[t-257];return t<289?g.luaO_pushfstring(e.L,l("'%s'",!0),n):n}},C=function(e){return 10===e.current||13===e.current},B=function(e){e.current=e.z.zgetc()},F=function(e){R(e,e.current),B(e)},D=new g.TValue(a,!0),G=function(e,t){let n=e.L,a=A(n,t),i=e.h.strong.get(v(a));if(i)a=i.key.tsvalue();else{let t=new g.TValue(r,a);L.luaH_setfrom(n,e.h,t,D)}return a},N=function(e){let t=e.current;u(C(e)),B(e),C(e)&&e.current!==t&&B(e),++e.linenumber>=o&&K(e,l("chunk has too many lines",!0),0)},V=function(e,t){return e.current===t&&(B(e),!0)},j=function(e,t){return(e.current===t[0].charCodeAt(0)||e.current===t[1].charCodeAt(0))&&(F(e),!0)},H=function(e,t){let n="Ee",a=e.current;for(u(h(e.current)),F(e),48===a&&j(e,"xX")&&(n="Pp");;)if(j(e,n)&&j(e,"-+"),p(e.current))F(e);else{if(46!==e.current)break;F(e)}let r=new g.TValue;return 0===g.luaO_str2num(S(e.buff),r)&&K(e,l("malformed number",!0),290),r.ttisinteger()?(t.i=r.value,291):(u(r.ttisfloat()),t.r=r.value,290)},K=function(e,t,n){t=c.luaG_addinfo(e.L,t,e.source,e.linenumber),n&&g.luaO_pushfstring(e.L,l("%s near %s"),t,function(e,t){switch(t){case 292:case 293:case 290:case 291:return g.luaO_pushfstring(e.L,l("'%s'",!0),S(e.buff));default:return O(e,t)}}(e,n)),d.luaD_throw(e.L,i)},z=function(e){let t=0,n=e.current;for(u(91===n||93===n),F(e);61===e.current;)F(e),t++;return e.current===n?t:-t-1},X=function(e,t,n){let a=e.linenumber;F(e),C(e)&&N(e);let r=!1;for(;!r;)switch(e.current){case y:K(e,l(`unfinished long ${t?"string":"comment"} (starting at line ${a})`),289);break;case 93:z(e)===n&&(F(e),r=!0);break;case 10:case 13:R(e,10),N(e),t||E(e.buff);break;default:t?F(e):B(e)}t&&(t.ts=G(e,e.buff.buffer.subarray(2+n,e.buff.n-(2+n))))},q=function(e,t,n){t||(e.current!==y&&F(e),K(e,n,293))},Y=function(e){return F(e),q(e,p(e.current),l("hexadecimal digit expected",!0)),g.luaO_hexavalue(e.current)},$=function(e){let t=Y(e);return t=(t<<4)+Y(e),T(e.buff,2),t},W=function(e){let t=new Uint8Array(g.UTF8BUFFSZ),n=g.luaO_utf8esc(t,function(e){let t=4;F(e),q(e,123===e.current,l("missing '{'",!0));let n=Y(e);for(F(e);p(e.current);)t++,n=(n<<4)+g.luaO_hexavalue(e.current),q(e,n<=1114111,l("UTF-8 value too large",!0)),F(e);return q(e,125===e.current,l("missing '}'",!0)),B(e),T(e.buff,t),n}(e));for(;n>0;n--)R(e,t[g.UTF8BUFFSZ-n])},Z=function(e){let t,n=0;for(t=0;t<3&&h(e.current);t++)n=10*n+e.current-48,F(e);return q(e,n<=255,l("decimal escape too large",!0)),T(e.buff,t),n},J=function(e,t,n){for(F(e);e.current!==t;)switch(e.current){case y:K(e,l("unfinished string",!0),289);break;case 10:case 13:K(e,l("unfinished string",!0),293);break;case 92:{let t,n;switch(F(e),e.current){case 97:n=7,t="read_save";break;case 98:n=8,t="read_save";break;case 102:n=12,t="read_save";break;case 110:n=10,t="read_save";break;case 114:n=13,t="read_save";break;case 116:n=9,t="read_save";break;case 118:n=11,t="read_save";break;case 120:n=$(e),t="read_save";break;case 117:W(e),t="no_save";break;case 10:case 13:N(e),n=10,t="only_save";break;case 92:case 34:case 39:n=e.current,t="read_save";break;case y:t="no_save";break;case 122:for(T(e.buff,1),B(e);m(e.current);)C(e)?N(e):B(e);t="no_save";break;default:q(e,h(e.current),l("invalid escape sequence",!0)),n=Z(e),t="only_save"}"read_save"===t&&B(e),"read_save"!==t&&"only_save"!==t||(T(e.buff,1),R(e,n));break}default:F(e)}F(e),n.ts=G(e,e.buff.buffer.subarray(1,e.buff.n-1))},Q=Object.create(null);I.forEach((e,t)=>Q[w(e)]=t);const ee=function(e,t){for(E(e.buff);;)switch(u("number"==typeof e.current),e.current){case 10:case 13:N(e);break;case 32:case 12:case 9:case 11:B(e);break;case 45:if(B(e),45!==e.current)return 45;if(B(e),91===e.current){let t=z(e);if(E(e.buff),t>=0){X(e,null,t),E(e.buff);break}}for(;!C(e)&&e.current!==y;)B(e);break;case 91:{let n=z(e);return n>=0?(X(e,t,n),293):(-1!==n&&K(e,l("invalid long string delimiter",!0),293),91)}case 61:return B(e),V(e,61)?282:61;case 60:return B(e),V(e,61)?284:V(e,60)?286:60;case 62:return B(e),V(e,61)?283:V(e,62)?287:62;case 47:return B(e),V(e,47)?279:47;case 126:return B(e),V(e,61)?285:126;case 58:return B(e),V(e,58)?288:58;case 34:case 39:return J(e,e.current,t),293;case 46:return F(e),V(e,46)?V(e,46)?281:280:h(e.current)?H(e,t):46;case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return H(e,t);case y:return 289;default:if(_(e.current)){do{F(e)}while(f(e.current));let n=G(e,S(e.buff));t.ts=n;let a=Q[v(n)];return void 0!==a&&a<=22?a+257:292}{let t=e.current;return B(e),t}}};e.exports.FIRST_RESERVED=257,e.exports.LUA_ENV=k,e.exports.LexState=class{constructor(){this.current=NaN,this.linenumber=NaN,this.lastline=NaN,this.t=new P,this.lookahead=new P,this.fs=null,this.L=null,this.z=null,this.buff=null,this.h=null,this.dyd=null,this.source=null,this.envn=null}},e.exports.RESERVED=M,e.exports.isreserved=function(e){let t=Q[v(e)];return void 0!==t&&t<=22},e.exports.luaX_lookahead=function(e){return u(289===e.lookahead.token),e.lookahead.token=ee(e,e.lookahead.seminfo),e.lookahead.token},e.exports.luaX_newstring=G,e.exports.luaX_next=function(e){e.lastline=e.linenumber,289!==e.lookahead.token?(e.t.token=e.lookahead.token,e.t.seminfo.i=e.lookahead.seminfo.i,e.t.seminfo.r=e.lookahead.seminfo.r,e.t.seminfo.ts=e.lookahead.seminfo.ts,e.lookahead.token=289):e.t.token=ee(e,e.t.seminfo)},e.exports.luaX_setinput=function(e,t,n,a,r){t.t={token:0,seminfo:new U},t.L=e,t.current=r,t.lookahead={token:289,seminfo:new U},t.z=n,t.fs=null,t.linenumber=1,t.lastline=1,t.source=a,t.envn=b(e,k),x(e,t.buff,s)},e.exports.luaX_syntaxerror=function(e,t){K(e,t,e.t.token)},e.exports.luaX_token2str=O,e.exports.luaX_tokens=I},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(0);class r extends a.default{}t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(e,t,n){if(this.index=0,this.bitBuffer=0,this.bits=0,ArrayBuffer.isView(e)&&(t=e.byteOffset,n=e.byteLength,e=e.buffer),!(e instanceof ArrayBuffer))throw new TypeError(`BitStream: expected ArrayBuffer or TypedArray, got ${e}`);t=t||0,n=n||e.byteLength,this.buffer=e,this.uint8array=new Uint8Array(e,t,n),this.byteLength=e.byteLength}peekBits(e){return this.loadBits(e),this.bitBuffer&(1<<e)-1}readBits(e){let t=this.peekBits(e);return this.bitBuffer>>>=e,this.bits-=e,t}skipBits(e){this.loadBits(e),this.bitBuffer>>>=e,this.bits-=e}loadBits(e){for(;this.bits<e;)this.bitBuffer+=this.uint8array[this.index]<<this.bits,this.bits+=8,this.index+=1}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(e){this.properties=new Map,this.sections=new Map,e&&this.load(e)}load(e){let t=this.properties,n=this.sections;for(let a of e.split("\r\n"))if(a.length&&!a.startsWith("//")&&!a.startsWith(";")){let e=a.match(/^\[(.+?)\]/);if(e){let a=e[1].trim().toLowerCase();t=n.get(a),t||(t=new Map,n.set(a,t))}else e=a.match(/^(.+?)=(.*?)$/),e&&t.set(e[1].toLowerCase(),e[2])}}save(){let e=[];for(let[t,n]of this.properties)e.push(`${t}=${n}`);for(let[t,n]of this.sections){e.push(`[${t}]`);for(let[t,a]of n)e.push(`${t}=${a}`)}return e.join("\r\n")}getSection(e){return this.sections.get(e.toLowerCase())}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(e){this.rows=[],e&&this.load(e)}load(e){if(!e.startsWith("ID"))throw new Error("WrongMagicNumber");let t=this.rows,n=0,a=0;for(let r of e.split("\n"))if("B"!==r[0])for(let e of r.split(";")){let r,i=e[0],l=e.substring(1).trim();"X"===i?n=parseInt(l,10)-1:"Y"===i?a=parseInt(l,10)-1:"K"===i&&(t[a]||(t[a]=[]),r='"'===l[0]?l.substring(1,l.length-1):"TRUE"===l||"FALSE"!==l&&parseFloat(l),t[a][n]=r)}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(1),r=n(180),i=n(76);t.default=class{constructor(e){this.entries=[],this.model=null;let t=new a.default(e),n=new i.default(t,11,this.entries);if("MD34"!==n.tag)throw new Error("WrongMagicNumber");{t.seek(n.offset);for(let e=0,a=n.entries;e<a;e++)this.entries[e]=new r.default(t,this.entries);let e=this.entries[n.model.id].entries;e&&(this.model=e[0])}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return[...e].reverse().join("")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(75),r=n(4);t.default=class{constructor(e,t,n){this.version=t,this.tag=a.default(e.read(4)),this.offset=e.readUint32(),this.entries=e.readUint32(),this.model=new r.default(e,n)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class a{constructor(){this.name="",this.interpolationType=0,this.globalSequenceId=-1,this.frames=[],this.values=[],this.inTans=[],this.outTans=[]}readMdx(e,t){let n=this.frames,a=this.values,r=this.inTans,i=this.outTans,l=e.readUint32(),s=e.readUint32();this.name=t,this.interpolationType=s,this.globalSequenceId=e.readInt32();for(let t=0;t<l;t++)n.push(e.readInt32()),a.push(this.readMdxValue(e)),s>1&&(r.push(this.readMdxValue(e)),i.push(this.readMdxValue(e)))}writeMdx(e){let t=this.interpolationType,n=this.frames,a=this.values,r=this.inTans,i=this.outTans,l=n.length;e.write(this.name),e.writeUint32(l),e.writeUint32(t),e.writeInt32(this.globalSequenceId);for(let s=0;s<l;s++)e.writeInt32(n[s]),e.writeTypedArray(a[s]),t>1&&(e.writeTypedArray(r[s]),e.writeTypedArray(i[s]))}readMdl(e,t){let n=this.frames,a=this.values,r=this.inTans,i=this.outTans;this.name=t;let l=e.readInt();e.read();let s=0,o=e.read();"DontInterp"===o?s=0:"Linear"===o?s=1:"Hermite"===o?s=2:"Bezier"===o&&(s=3),this.interpolationType=s,"GlobalSeqId"===e.peek()&&(e.read(),this.globalSequenceId=e.readInt());for(let t=0;t<l;t++)n[t]=e.readInt(),a[t]=this.readMdlValue(e),s>1&&(e.read(),r[t]=this.readMdlValue(e),e.read(),i[t]=this.readMdlValue(e));e.read()}writeMdl(e,t){let n=this.interpolationType,a=this.frames,r=this.values,i=this.inTans,l=this.outTans,s=a.length;e.startBlock(t,this.frames.length);let o="";0===this.interpolationType?o="DontInterp":1===this.interpolationType?o="Linear":2===this.interpolationType?o="Hermite":3===this.interpolationType&&(o="Bezier"),e.writeFlag(o),-1!==this.globalSequenceId&&e.writeAttrib("GlobalSeqId",this.globalSequenceId);for(let t=0;t<s;t++)e.writeKeyframe(`${a[t]}:`,r[t]),n>1&&(e.indent(),e.writeKeyframe("InTan",i[t]),e.writeKeyframe("OutTan",l[t]),e.unindent());e.endBlock()}getByteLength(){let e=this.frames.length,t=16;if(e){let n=this.values[0].byteLength,a=1;this.interpolationType>1&&(a=3),t+=(4+a*n)*e}return t}}t.Animation=a;t.UintAnimation=class extends a{readMdxValue(e){return e.readUint32Array(1)}readMdlValue(e){return e.readKeyframe(new Uint32Array(1))}};t.FloatAnimation=class extends a{readMdxValue(e){return e.readFloat32Array(1)}readMdlValue(e){return e.readKeyframe(new Float32Array(1))}};t.Vector3Animation=class extends a{readMdxValue(e){return e.readFloat32Array(3)}readMdlValue(e){return e.readKeyframe(new Float32Array(3))}};t.Vector4Animation=class extends a{readMdxValue(e){return e.readFloat32Array(4)}readMdlValue(e){return e.readKeyframe(new Float32Array(4))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(8);class r extends a.default{constructor(){super(256),this.geosetId=-1,this.geosetAnimationId=-1}readMdx(e){super.readMdx(e),this.geosetId=e.readInt32(),this.geosetAnimationId=e.readInt32()}writeMdx(e){super.writeMdx(e),e.writeInt32(this.geosetId),e.writeInt32(this.geosetAnimationId)}readMdl(e){for(let t of super.readGenericBlock(e))if("GeosetId"===t)t=e.readSafe(),this.geosetId="Multiple"===t?-1:parseInt(t);else{if("GeosetAnimId"!==t)throw new Error(`Unknown token in Bone ${this.name}: "${t}"`);t=e.readSafe(),this.geosetAnimationId="None"===t?-1:parseInt(t)}}writeMdl(e){e.startObjectBlock("Bone",this.name),this.writeGenericHeader(e);let t=this.geosetId,n=this.geosetAnimationId;-1===t&&(t="Multiple"),-1===n&&(n="None"),e.writeAttrib("GeosetId",t),e.writeAttrib("GeosetAnimId",n),this.writeGenericAnimations(e),e.endBlock()}getByteLength(){return 8+super.getByteLength()}}t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(12),r=n(29),i=n(1),l=n(80),s=n(220),o=n(221),u=n(223),c=n(225),d=n(21);t.default=class{constructor(e,t){this.headerOffset=0,this.sectorSize=4096,this.c=new s.default,this.hashTable=new o.default(this.c),this.blockTable=new u.default(this.c),this.files=[],this.readonly=!!t,e&&this.load(e)}load(e){let t=new Uint8Array(e),n=l.searchHeader(t);if(-1===n)return!1;let a=new Uint32Array(e,n,8),i=a[3],s=r.numberToUint32(a[4]+n),o=r.numberToUint32(a[5]+n),u=a[6],h=a[7];h>u&&(h=u),this.headerOffset=n,this.sectorSize=512*(1<<(i>>>16)),this.hashTable.load(t.slice(s,s+16*u)),this.blockTable.load(t.slice(o,o+16*h)),this.files.length=0;for(let t of this.hashTable.entries){let n=t.blockIndex;if(n<d.HASH_ENTRY_DELETED){let a=new c.default(this,t,this.blockTable.entries[n],e);this.files[n]=a}}let f=this.get("(listfile)");if(this.get("(attributes)"),this.get("(signature)"),f){let e=f.text();if(e)for(let t of e.split("\r\n"))this.get(t)}return!0}save(){if(this.readonly)return null;this.delete("(attributes)"),this.saveMemory(),this.setListFile();let e=32;for(let t of this.files){if(!t.offsetChanged(e))return null;t.encode(),e+=t.block.compressedSize}let t=this.hashTable,n=this.blockTable,a=t.entries.length,r=n.entries.length,i=e-32,l=32+i+16*a+16*r,s=32+i,o=s+16*a,u=new Uint8Array(l),c=new Uint32Array(u.buffer,0,8);c[0]=d.MAGIC,c[1]=32,c[2]=l,c[3]=Math.log2(this.sectorSize/512)<<16,c[4]=s,c[5]=o,c[6]=a,c[7]=r,e=32;for(let t of this.files)t.save(u.subarray(e,e+t.block.compressedSize)),e+=t.block.compressedSize;return t.save(u.subarray(e,e+16*t.entries.length)),e+=16*t.entries.length,n.save(u.subarray(e,e+16*n.entries.length)),u.buffer}saveMemory(){if(this.readonly)return 0;let e=this.blockTable.entries,t=this.hashTable.entries,n=e.length,a=0;for(;n--;){let r=e[n];if(0===r.normalSize)this.removeBlock(n),a+=r.compressedSize;else{let e=!1;for(let a of t)a.blockIndex===n&&(e=!0);e||(this.removeBlock(n),a+=r.compressedSize)}}return a}removeBlock(e){for(let t of this.hashTable.entries)t.blockIndex<d.HASH_ENTRY_DELETED&&t.blockIndex>e&&(t.blockIndex-=1);this.blockTable.entries.splice(e,1)}getFileNames(){let e=[];for(let t of this.files)t&&""!==t.name&&e.push(t.name);return e}setListFile(){return!this.readonly&&this.set("(listfile)",this.getFileNames().join("\r\n"))}set(e,t){if(this.readonly)return!1;let n;if(t instanceof ArrayBuffer)n=t;else{let e=new i.default(new Uint8Array(t.length));e.write(t),n=e.buffer}let a=this.get(e);if(a)a.set(n);else{let t=this.blockTable.entries.length,r=this.hashTable.add(e,t);if(!r)return!1;let i=this.blockTable.add(n);a=new c.default(this,r,i,n),a.name=e,a.nameResolved=!0,this.files[t]=a}return!0}get(e){let t=this.hashTable.get(e);if(t){let n=t.blockIndex;if(n<d.HASH_ENTRY_DELETED){let t=this.files[n];if(t)return t.name=e,t.nameResolved=!0,t}}return null}has(e){return!!this.get(e)}delete(e){if(this.readonly)return!1;let t=this.get(e);return!!t&&(t.delete(),!0)}rename(e,t){if(this.readonly)return!1;let n=this.get(e);return!!n&&(n.rename(t),!0)}resizeHashtable(e){if(this.readonly)return!1;e=Math.max(4,a.powerOfTwo(e));let t=this.files;if(t.length>e)return!1;for(let e of t)if(!e.nameResolved)return!1;let n=this.hashTable,r=n.entries,i=r.slice();n.clear(),n.addEmpties(e);for(let e of i)if(e.blockIndex!==d.HASH_ENTRY_EMPTY){let a=t[e.blockIndex];r[n.getInsertionIndex(a.name)].copy(e)}return!0}}},function(e,t,n){"use strict";function a(e){let t=-1;for(let n=0,a=Math.ceil(e.byteLength/512);n<a;n++){let a=512*n;77===e[a]&&80===e[a+1]&&81===e[a+2]&&26===e[a+3]&&(t=a)}return t}Object.defineProperty(t,"__esModule",{value:!0}),t.searchHeader=a,t.isArchive=function(e){return 72===e[0]&&77===e[1]&&51===e[2]&&87===e[3]||-1!==a(e)}},function(e,t,n){"use strict";e.exports=function(e,t,n,a){for(var r=65535&e|0,i=e>>>16&65535|0,l=0;0!==n;){n-=l=n>2e3?2e3:n;do{i=i+(r=r+t[a++]|0)|0}while(--l);r%=65521,i%=65521}return r|i<<16|0}},function(e,t,n){"use strict";var a=function(){for(var e,t=[],n=0;n<256;n++){e=n;for(var a=0;a<8;a++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t}();e.exports=function(e,t,n,r){var i=a,l=r+n;e^=-1;for(var s=r;s<l;s++)e=e>>>8^i[255&(e^t[s])];return-1^e}},function(e,t,n){"use strict";var a=n(16),r=!0,i=!0;try{String.fromCharCode.apply(null,[0])}catch(e){r=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){i=!1}for(var l=new a.Buf8(256),s=0;s<256;s++)l[s]=s>=252?6:s>=248?5:s>=240?4:s>=224?3:s>=192?2:1;function o(e,t){if(t<65534&&(e.subarray&&i||!e.subarray&&r))return String.fromCharCode.apply(null,a.shrinkBuf(e,t));for(var n="",l=0;l<t;l++)n+=String.fromCharCode(e[l]);return n}l[254]=l[254]=1,t.string2buf=function(e){var t,n,r,i,l,s=e.length,o=0;for(i=0;i<s;i++)55296==(64512&(n=e.charCodeAt(i)))&&i+1<s&&56320==(64512&(r=e.charCodeAt(i+1)))&&(n=65536+(n-55296<<10)+(r-56320),i++),o+=n<128?1:n<2048?2:n<65536?3:4;for(t=new a.Buf8(o),l=0,i=0;l<o;i++)55296==(64512&(n=e.charCodeAt(i)))&&i+1<s&&56320==(64512&(r=e.charCodeAt(i+1)))&&(n=65536+(n-55296<<10)+(r-56320),i++),n<128?t[l++]=n:n<2048?(t[l++]=192|n>>>6,t[l++]=128|63&n):n<65536?(t[l++]=224|n>>>12,t[l++]=128|n>>>6&63,t[l++]=128|63&n):(t[l++]=240|n>>>18,t[l++]=128|n>>>12&63,t[l++]=128|n>>>6&63,t[l++]=128|63&n);return t},t.buf2binstring=function(e){return o(e,e.length)},t.binstring2buf=function(e){for(var t=new a.Buf8(e.length),n=0,r=t.length;n<r;n++)t[n]=e.charCodeAt(n);return t},t.buf2string=function(e,t){var n,a,r,i,s=t||e.length,u=new Array(2*s);for(a=0,n=0;n<s;)if((r=e[n++])<128)u[a++]=r;else if((i=l[r])>4)u[a++]=65533,n+=i-1;else{for(r&=2===i?31:3===i?15:7;i>1&&n<s;)r=r<<6|63&e[n++],i--;i>1?u[a++]=65533:r<65536?u[a++]=r:(r-=65536,u[a++]=55296|r>>10&1023,u[a++]=56320|1023&r)}return o(u,a)},t.utf8border=function(e,t){var n;for((t=t||e.length)>e.length&&(t=e.length),n=t-1;n>=0&&128==(192&e[n]);)n--;return n<0?t:0===n?t:n+l[e[n]]>t?n:t}},function(e,t,n){"use strict";e.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},function(e,t,n){"use strict";e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(1),r=n(79),i=n(52),l=n(87),s=n(53),o=n(54),u=n(55),c=n(56),d=n(89),h=n(91),f=n(95),_=n(35);t.default=class{constructor(e,t){this.unknown=0,this.name="",this.flags=0,this.maxPlayers=0,this.u1=0,this.archive=new r.default(void 0,t),this.imports=new l.default,this.readonly=!!t,e&&this.load(e)}load(e){let t=new a.default(e);return"HM3W"===t.read(4)&&(this.u1=t.readUint32(),this.name=t.readUntilNull(),this.flags=t.readUint32(),this.maxPlayers=t.readUint32()),!!this.archive.load(e)&&(this.readImports(),!0)}save(){if(this.readonly)return null;this.setImportsFile();let e=this.archive.save();if(!e)return null;let t=new ArrayBuffer(512+e.byteLength),n=new Uint8Array(t),r=new a.default(t);return r.write("HM3W"),r.writeUint32(this.u1),r.write(`${this.name}\0`),r.writeUint32(this.flags),r.writeUint32(this.maxPlayers),n.set(new Uint8Array(e),512),t}getFileNames(){return this.archive.getFileNames()}getImportNames(){let e=[];for(let t of this.imports.entries.values()){let n=t.isCustom;10===n||13===n?e.push(t.path):e.push(`war3mapImported\\${t.path}`)}return e}setImportsFile(){return!this.readonly&&(this.imports.entries.size>0&&this.set("war3map.imp",this.imports.save()))}import(e,t){return!this.readonly&&(!!this.archive.set(e,t)&&(this.imports.set(e),!0))}set(e,t){return!this.readonly&&this.archive.set(e,t)}get(e){return this.archive.get(e)}getScriptFile(){return this.get("war3map.j")||this.get("scripts\\war3map.j")||this.get("war3map.lua")||this.get("scripts\\war3map.lua")}has(e){return this.archive.has(e)}delete(e){return!this.readonly&&(this.imports.delete(e),this.archive.delete(e))}rename(e,t){return!this.readonly&&(!!this.archive.rename(e,t)&&(this.imports.rename(e,t),!0))}readImports(){let e=this.archive.get("war3map.imp");if(e){let t=e.arrayBuffer();t&&this.imports.load(t)}}readMapInformation(){let e=this.archive.get("war3map.w3i");if(e){let t=e.arrayBuffer();if(t)return new u.default(t)}}readEnvironment(){let e=this.archive.get("war3map.w3e");if(e){let t=e.arrayBuffer();if(t)return new o.default(t)}}readDoodads(){let e=this.archive.get("war3map.doo");if(e){let t=e.arrayBuffer();if(t)return new i.default(t)}}readUnits(){let e=this.archive.get("war3mapUnits.doo");if(e){let t=e.arrayBuffer();if(t)return new _.default(t)}}readTriggers(e){let t=this.archive.get("war3map.wtg");if(t){let n=t.arrayBuffer();if(n)return new h.default(n,e)}}readCustomTextTriggers(){let e=this.archive.get("war3map.wct");if(e){let t=e.arrayBuffer();if(t)return new d.default(t)}}readStringTable(){let e=this.archive.get("war3map.wts");if(e){let t=e.text();if(t)return new f.default(t)}}readModifications(){let e={},t=["w3u","w3t","w3b","w3d","w3a","w3h","w3q"],n=[!1,!1,!1,!0,!0,!1,!0];for(let a=0,r=t.length;a<r;a++){let r=this.archive.get(`war3map.${t[a]}`);if(r){let i=r.arrayBuffer();if(i){let r;r=n[a]?new s.default(i):new c.default(i),e[t[a]]=r}}}return e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(1),r=n(240);t.default=class{constructor(e){this.version=1,this.entries=new Map,e&&this.load(e)}load(e){let t=new a.default(e);this.version=t.readUint32();for(let e=0,n=t.readUint32();e<n;e++){let e=new r.default;e.load(t),e.isCustom?this.entries.set(e.path,e):this.entries.set(`war3mapimported\\${e.path}`,e)}}save(){let e=new ArrayBuffer(this.getByteLength()),t=new a.default(e);t.writeUint32(this.version),t.writeUint32(this.entries.size);for(let e of this.entries.values())e.save(t);return e}getByteLength(){let e=8;for(let t of this.entries.values())e+=t.getByteLength();return e}set(e){if(!this.entries.has(e)){let t=new r.default;return t.isCustom=10,t.path=e,this.entries.set(e,t),!0}return!1}has(e){return this.entries.has(e)}delete(e){return this.entries.delete(e)}rename(e,t){let n=this.entries.get(e);return!!n&&(n.isCustom=10,n.path=t,!0)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(241);t.default=class{constructor(){this.objects=[]}load(e,t){for(let n=0,r=e.readUint32();n<r;n++){let r=new a.default;r.load(e,t),this.objects[n]=r}}save(e,t){e.writeUint32(this.objects.length);for(let n of this.objects)n.save(e,t)}getByteLength(e){let t=4;for(let n of this.objects)t+=n.getByteLength(e);return t}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(1),r=n(90);t.default=class{constructor(e){this.version=0,this.comment="",this.trigger=new r.default,this.triggers=[],e&&this.load(e)}load(e){let t=new a.default(e);this.version=t.readInt32(),1===this.version&&(this.comment=t.readUntilNull(),this.trigger.load(t));for(let e=0,n=t.readUint32();e<n;e++){let n=new r.default;n.load(t),this.triggers[e]=n}}save(){let e=new ArrayBuffer(this.getByteLength()),t=new a.default(e);t.writeInt32(this.version),1===this.version&&(t.write(`${this.comment}\0`),this.trigger.save(t)),t.writeUint32(this.triggers.length);for(let e of this.triggers)e.save(t);return e}getByteLength(){let e=8;1===this.version&&(e+=this.comment.length+1+this.trigger.getByteLength());for(let t of this.triggers)e+=t.getByteLength();return e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(){this.text=""}load(e){let t=e.readInt32();t&&(this.text=e.read(t-1),e.skip(1))}save(e){this.text.length?(e.writeInt32(this.text.length+1),e.write(`${this.text}\0`)):e.writeInt32(0)}getByteLength(){let e=4;return this.text.length&&(e+=this.text.length+1),e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(1),r=n(253),i=n(254),l=n(92);t.default=class{constructor(e,t){this.version=0,this.categories=[],this.u1=0,this.variables=[],this.triggers=[],e&&t&&this.load(e,t)}load(e,t){let n=new a.default(e);if("WTG!"!==n.read(4))throw new Error("Not a WTG file");this.version=n.readInt32();for(let e=0,t=n.readUint32();e<t;e++){let t=new r.default;t.load(n,this.version),this.categories[e]=t}this.u1=n.readInt32();for(let e=0,t=n.readUint32();e<t;e++){let t=new i.default;t.load(n,this.version),this.variables[e]=t}for(let e=0,a=n.readUint32();e<a;e++){let a=new l.default;a.load(n,this.version,t),this.triggers[e]=a}}save(){let e=new ArrayBuffer(this.getByteLength()),t=new a.default(e);t.write("WTG!"),t.writeInt32(this.version),t.writeUint32(this.categories.length);for(let e of this.categories)e.save(t,this.version);t.writeInt32(this.u1),t.writeUint32(this.variables.length);for(let e of this.variables)e.save(t,this.version);t.writeUint32(this.triggers.length);for(let e of this.triggers)e.save(t,this.version);return e}getByteLength(){let e=24,t=this.version;for(let n of this.categories)e+=n.getByteLength(t);for(let n of this.variables)e+=n.getByteLength(t);for(let n of this.triggers)e+=n.getByteLength(t);return e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(93);t.default=class{constructor(){this.name="",this.description="",this.isComment=0,this.isEnabled=0,this.isCustom=0,this.isInitiallyOff=0,this.runOnInitialization=0,this.category=0,this.ecas=[]}load(e,t,n){this.name=e.readUntilNull(),this.description=e.readUntilNull(),7===t&&(this.isComment=e.readInt32()),this.isEnabled=e.readInt32(),this.isCustom=e.readInt32(),this.isInitiallyOff=e.readInt32(),this.runOnInitialization=e.readInt32(),this.category=e.readInt32();for(let r=0,i=e.readUint32();r<i;r++){let i=new a.default;i.load(e,t,!1,n),this.ecas[r]=i}}save(e,t){e.write(`${this.name}\0`),e.write(`${this.description}\0`),7===t&&e.writeInt32(this.isComment),e.writeInt32(this.isEnabled),e.writeInt32(this.isCustom),e.writeInt32(this.isInitiallyOff),e.writeInt32(this.runOnInitialization),e.writeInt32(this.category),e.writeUint32(this.ecas.length);for(let n of this.ecas)n.save(e,t)}getByteLength(e){let t=26+this.name.length+this.description.length;7===e&&(t+=4);for(let n of this.ecas)t+=n.getByteLength(e);return t}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(57);class r{constructor(){this.type=-1,this.group=-1,this.name="",this.isEnabled=0,this.parameters=[],this.ecas=[]}load(e,t,n,i){this.type=e.readInt32(),n&&(this.group=e.readUint32()),this.name=e.readUntilNull(),this.isEnabled=e.readInt32();for(let n=0,r=i.getFunction(this.type,this.name).args.length;n<r;n++){let r=new a.default;r.load(e,t,i),this.parameters[n]=r}if(7===t)for(let n=0,a=e.readUint32();n<a;n++){let a=new r;a.load(e,t,!0,i),this.ecas[n]=a}}save(e,t){e.writeInt32(this.type),-1!==this.group&&e.writeInt32(this.group),e.write(`${this.name}\0`),e.writeInt32(this.isEnabled);for(let n of this.parameters)n.save(e,t);if(7===t){e.writeUint32(this.ecas.length);for(let n of this.ecas)n.save(e,t)}}getByteLength(e){let t=9+this.name.length;-1!==this.group&&(t+=4);for(let n of this.parameters)t+=n.getByteLength(e);if(7===e){t+=4;for(let n of this.ecas)t+=n.getByteLength(e)}return t}}t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(57);t.default=class{constructor(){this.type=0,this.name="",this.beginParameters=0,this.parameters=[]}load(e,t,n){if(this.type=e.readInt32(),this.name=e.readUntilNull(),this.beginParameters=e.readInt32(),this.beginParameters){for(let r=0,i=n.getFunction(this.type,this.name).args.length;r<i;r++){let i=new a.default;i.load(e,t,n),this.parameters[r]=i}}}save(e,t){e.writeInt32(this.type),e.write(`${this.name}\0`),e.writeInt32(this.beginParameters);for(let n of this.parameters)n.save(e,t)}getByteLength(e){let t=9+this.name.length;if(this.parameters.length)for(let n of this.parameters)t+=n.getByteLength(e);return t}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(49);t.default=class{constructor(e){this.stringMap=new Map,e&&this.load(e)}load(e){let t,n=new a.default(e);for(n.index+=3;t=n.read();)if("STRING"===t){let t=n.readInt();n.read();let a=e.indexOf("}",n.index);this.stringMap.set(t,e.slice(n.index,a).trim()),n.index=a}}save(){let e="";for(let[t,n]of this.stringMap)e+=`STRING ${t}\n{\n${n}\n}\n`;return e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(255),r=n(257),i=n(258),l=n(259);t.default=class{constructor(){this.id="\0\0\0\0",this.variation=0,this.location=new Float32Array(3),this.angle=0,this.scale=new Float32Array([1,1,1]),this.flags=0,this.player=0,this.unknown=0,this.hitpoints=-1,this.mana=-1,this.droppedItemTable=0,this.droppedItemSets=[],this.goldAmount=0,this.targetAcquisition=0,this.heroLevel=0,this.heroStrength=0,this.heroAgility=0,this.heroIntelligence=0,this.itemsInInventory=[],this.modifiedAbilities=[],this.randomFlag=0,this.level=new Uint8Array(3),this.itemClass=0,this.unitGroup=0,this.positionInGroup=0,this.randomUnitTables=[],this.customTeamColor=0,this.waygate=0,this.creationNumber=0}load(e,t){this.id=e.read(4),this.variation=e.readInt32(),e.readFloat32Array(this.location),this.angle=e.readFloat32(),e.readFloat32Array(this.scale),this.flags=e.readUint8(),this.player=e.readInt32(),this.unknown=e.readUint16(),this.hitpoints=e.readInt32(),this.mana=e.readInt32(),t>7&&(this.droppedItemTable=e.readInt32());for(let t=0,n=e.readInt32();t<n;t++){let n=new a.default;n.load(e),this.droppedItemSets[t]=n}this.goldAmount=e.readInt32(),this.targetAcquisition=e.readFloat32(),this.heroLevel=e.readInt32(),t>7&&(this.heroStrength=e.readInt32(),this.heroAgility=e.readInt32(),this.heroIntelligence=e.readInt32());for(let t=0,n=e.readInt32();t<n;t++){let n=new r.default;n.load(e),this.itemsInInventory[t]=n}for(let t=0,n=e.readInt32();t<n;t++){let n=new i.default;n.load(e),this.modifiedAbilities[t]=n}if(this.randomFlag=e.readInt32(),0===this.randomFlag)e.readUint8Array(this.level),this.itemClass=e.readUint8();else if(1===this.randomFlag)this.unitGroup=e.readUint32(),this.positionInGroup=e.readUint32();else if(2===this.randomFlag)for(let t=0,n=e.readInt32();t<n;t++){let n=new l.default;n.load(e),this.randomUnitTables[t]=n}this.customTeamColor=e.readInt32(),this.waygate=e.readInt32(),this.creationNumber=e.readInt32()}save(e,t){e.write(this.id),e.writeInt32(this.variation),e.writeFloat32Array(this.location),e.writeFloat32(this.angle),e.writeFloat32Array(this.scale),e.writeUint8(this.flags),e.writeInt32(this.player),e.writeUint16(this.unknown),e.writeInt32(this.hitpoints),e.writeInt32(this.mana),t>7&&e.writeInt32(this.droppedItemTable),e.writeInt32(this.droppedItemSets.length);for(let t of this.droppedItemSets)t.save(e);e.writeInt32(this.goldAmount),e.writeFloat32(this.targetAcquisition),e.writeInt32(this.heroLevel),t>7&&(e.writeInt32(this.heroStrength),e.writeInt32(this.heroAgility),e.writeInt32(this.heroIntelligence)),e.writeInt32(this.itemsInInventory.length);for(let t of this.itemsInInventory)t.save(e);e.writeInt32(this.modifiedAbilities.length);for(let t of this.modifiedAbilities)t.save(e);if(e.writeInt32(this.randomFlag),0===this.randomFlag)e.writeUint8Array(this.level),e.writeUint8(this.itemClass);else if(1===this.randomFlag)e.writeUint32(this.unitGroup),e.writeUint32(this.positionInGroup);else if(2===this.randomFlag){e.writeInt32(this.randomUnitTables.length);for(let t of this.randomUnitTables)t.save(e)}e.writeInt32(this.customTeamColor),e.writeInt32(this.waygate),e.writeInt32(this.creationNumber)}getByteLength(e){let t=91;e>7&&(t+=16);for(let e of this.droppedItemSets)t+=e.getByteLength();return t+=8*this.itemsInInventory.length,t+=12*this.modifiedAbilities.length,0===this.randomFlag?t+=4:1===this.randomFlag?t+=8:2===this.randomFlag&&(t+=4+8*this.randomUnitTables.length),t}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(293),r=n(71),i=n(98),l=827345986,s=0;t.default=class{constructor(e){this.content=0,this.alphaBits=0,this.width=0,this.height=0,this.type=0,this.hasMipmaps=!1,this.mipmapOffsets=new Uint32Array(16),this.mipmapSizes=new Uint32Array(16),this.uint8array=null,this.jpgHeader=null,this.pallete=null,e&&this.load(e)}load(e){let t=new Int32Array(e,0,40);if(t[0]!==l)throw new Error("WrongMagicNumber");this.content=t[1],this.alphaBits=t[2],this.width=t[3],this.height=t[4],this.type=t[5],this.hasMipmaps=0!==t[6];for(let e=0;e<16;e++)this.mipmapOffsets[e]=t[7+e],this.mipmapSizes[e]=t[23+e];this.uint8array=new Uint8Array(e),this.content===s?this.jpgHeader=new Uint8Array(e,160,t[39]):this.pallete=new Uint8Array(e,156,1024)}getMipmap(e){let t,n=this.uint8array,l=this.mipmapOffsets[e],o=this.mipmapSizes[e];if(this.content===s){let e=this.jpgHeader,r=new Uint8Array(e.length+o),i=new a.JpegImage;r.set(e),r.set(n.subarray(l,l+o),e.length),i.parse(r),t=new ImageData(i.width,i.height),i.getData(t)}else{let a,s=this.pallete,o=Math.max(this.width/(1<<e),1),u=Math.max(this.height/(1<<e),1),c=o*u,d=this.alphaBits,h=0;t=new ImageData(o,u),d>0&&(a=new r.default(n.buffer,l+c,Math.ceil(c*d/8)),h=i.default(d,8));let f=t.data;for(let e=0;e<c;e++){let t=4*e,r=4*n[l+e];f[t]=s[r+2],f[t+1]=s[r+1],f[t+2]=s[r],f[t+3]=d>0?a.readBits(d)*h:255}}return t}mipmaps(){return this.hasMipmaps?Math.ceil(Math.log2(Math.max(this.width,this.height)))+1:1}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return((1<<t)-1)/((1<<e)-1)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(29),r=n(295),i=542327876,l=131072,s=4;t.FOURCC_DXT1=827611204,t.FOURCC_DXT3=861165636,t.FOURCC_DXT5=894720068,t.FOURCC_ATI2=843666497;t.DdsImage=class{constructor(e){this.width=0,this.height=0,this.format=0,this.mipmapWidths=[],this.mipmapHeights=[],this.mipmapDatas=[],e&&this.load(e)}load(e){let n=new Int32Array(e,0,31);if(n[0]!==i)throw new Error("Wrong magic number");if(!(n[20]&s))throw new Error("Not FourCC");let r=n[21];if(r!==t.FOURCC_DXT1&&r!==t.FOURCC_DXT3&&r!==t.FOURCC_DXT5&&r!==t.FOURCC_ATI2)throw new Error(`Unsupported FourCC: ${a.base256ToString(r)}`);this.format=r;let o=1;n[2]&l&&(o=Math.max(1,n[7]));let u=n[4],c=n[3],d=16;r===t.FOURCC_DXT1&&(d=8),this.width=u,this.height=c;let h=n[1]+4;for(let t=0;t<o;t++){let n=Math.max(4,u)/4*Math.max(4,c)/4*d;this.mipmapWidths[t]=u,this.mipmapHeights[t]=c,this.mipmapDatas[t]=new Uint8Array(e,h,n),h+=n,u=Math.max(u/2,1),c=Math.max(c/2,1)}}mipmaps(){return this.mipmapDatas.length}getMipmap(e,n=!1){let a,i=this.mipmapWidths[e],l=this.mipmapHeights[e],s=this.mipmapDatas[e];return a=n?s:this.format===t.FOURCC_DXT1?r.decodeDxt1(s,i,l):this.format===t.FOURCC_DXT3?r.decodeDxt3(s,i,l):this.format===t.FOURCC_DXT5?r.decodeDxt5(s,i,l):r.decodeRgtc(s,i,l),{width:i,height:l,data:a}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(101),r=n(102),i=n(303);t.default=class{constructor(e){this.camera=new a.default,this.grid=new r.default(-1e5,-1e5,2e5,2e5,2e5,2e5),this.visibleCells=0,this.visibleInstances=0,this.updatedParticles=0,this.audioEnabled=!1,this.audioContext=null,this.instances=[],this.currentInstance=0,this.batchedInstances=[],this.currentBatchedInstance=0,this.batches=new Map,this.emittedObjectUpdater=new i.default,this.viewer=e;let t=e.canvas;this.camera.viewport([0,0,t.width,t.height]),this.camera.perspective(Math.PI/4,t.width/t.height,8,1e4)}async enableAudio(){return"function"==typeof AudioContext&&(this.audioContext||(this.audioContext=new AudioContext),"suspended"!==this.audioContext.state&&await this.audioContext.resume(),this.audioEnabled="running"===this.audioContext.state,this.audioEnabled)}disableAudio(){this.audioContext&&this.audioContext.suspend(),this.audioEnabled=!1}addInstance(e){return!(e.scene===this||(e.scene&&e.scene.removeInstance(e),e.scene=this,!e.model.ok))&&(this.grid.moved(e),!0)}removeInstance(e){return e.scene===this&&(this.grid.remove(e),e.scene=null,!0)}clear(){for(let e of this.grid.cells)for(let t of e.instances)t.scene=null;this.grid.clear()}detach(){return!!this.viewer&&this.viewer.removeScene(this)}addToBatch(e){let t=e.textureMapper,n=this.batches,a=n.get(t);a||(a=e.getBatch(t),n.set(t,a)),a.add(e)}update(e){let t=this.camera;if(t.update(),this.audioContext){let[e,n,a]=t.location,[r,i,l]=t.directionY,[s,o,u]=t.directionZ,c=this.audioContext.listener;c.setPosition(-e,-n,-a),c.setOrientation(r,i,l,s,o,u)}let n=this.viewer.frame,a=this.instances,r=this.batchedInstances,i=0,l=0;this.visibleCells=0,this.visibleInstances=0;for(let s of this.grid.cells)if(s.isVisible(t)){this.visibleCells+=1;for(let o of s.instances)o.rendered&&o.cullFrame<n&&o.isVisible(t)&&(o.cullFrame=n,o.updateFrame<n&&o.update(e,this),o.isBatched()?r[l++]=o:a[i++]=o,this.visibleInstances+=1)}r.length=l,a.length=i,a.sort((e,t)=>t.depth-e.depth),this.emittedObjectUpdater.update(e),this.updatedParticles=this.emittedObjectUpdater.alive}renderOpaque(){let e=this.camera.rect;this.viewer.gl.viewport(e[0],e[1],e[2],e[3]);for(let e of this.batches.values())e.clear();for(let e of this.batchedInstances)this.addToBatch(e);for(let e of this.batches.values())e.render();for(let e of this.instances)e.renderOpaque()}renderTranslucent(){let e=this.camera.rect;this.viewer.gl.viewport(e[0],e[1],e[2],e[3]);for(let e of this.instances)e.renderTranslucent()}clearEmittedObjects(){for(let e of this.emittedObjectUpdater.objects)e.health=0}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(2),r=n(7),i=a.vec3.create(),l=a.vec3.create(),s=a.vec3.create(),o=a.quat.create(),u=a.quat.setAxisAngle(a.quat.create(),r.VEC3_UNIT_X,Math.PI/2);t.default=class{constructor(){this.rect=a.vec4.create(),this.isPerspective=!0,this.fov=0,this.aspect=0,this.isOrtho=!1,this.leftClipPlane=0,this.rightClipPlane=0,this.bottomClipPlane=0,this.topClipPlane=0,this.nearClipPlane=0,this.farClipPlane=0,this.location=a.vec3.create(),this.rotation=a.quat.create(),this.inverseRotation=a.quat.create(),this.viewMatrix=a.mat4.create(),this.projectionMatrix=a.mat4.create(),this.viewProjectionMatrix=a.mat4.create(),this.inverseViewMatrix=a.mat4.create(),this.inverseWorldProjectionMatrix=a.mat4.create(),this.directionX=a.vec3.create(),this.directionY=a.vec3.create(),this.directionZ=a.vec3.create(),this.vectors=[a.vec3.fromValues(-1,-1,0),a.vec3.fromValues(-1,1,0),a.vec3.fromValues(1,1,0),a.vec3.fromValues(1,-1,0),a.vec3.fromValues(1,0,0),a.vec3.fromValues(0,1,0),a.vec3.fromValues(0,0,1)],this.billboardedVectors=[a.vec3.create(),a.vec3.create(),a.vec3.create(),a.vec3.create(),a.vec3.create(),a.vec3.create(),a.vec3.create()],this.planes=[a.vec4.create(),a.vec4.create(),a.vec4.create(),a.vec4.create(),a.vec4.create(),a.vec4.create()],this.lines=[a.vec4.create(),a.vec4.create(),a.vec4.create(),a.vec4.create(),a.vec4.create(),a.vec4.create(),a.vec4.create(),a.vec4.create(),a.vec4.create(),a.vec4.create(),a.vec4.create(),a.vec4.create()],this.dirty=!0}perspective(e,t,n,a){this.isPerspective=!0,this.isOrtho=!1,this.fov=e,this.aspect=t,this.nearClipPlane=n,this.farClipPlane=a,this.dirty=!0}ortho(e,t,n,a,r,i){this.isPerspective=!1,this.isOrtho=!0,this.leftClipPlane=e,this.rightClipPlane=t,this.bottomClipPlane=n,this.topClipPlane=a,this.nearClipPlane=r,this.farClipPlane=i,this.dirty=!0}viewport(e){a.vec4.copy(this.rect,e),this.aspect=e[2]/e[3],this.dirty=!0}setLocation(e){a.vec3.copy(this.location,e),this.dirty=!0}move(e){a.vec3.add(this.location,this.location,e),this.dirty=!0}setRotation(e){a.quat.copy(this.rotation,e),this.dirty=!0}rotate(e){a.quat.mul(this.rotation,this.rotation,e),this.dirty=!0}face(e,t){a.quat.mul(this.rotation,u,r.quatLookAt(o,e,this.location,t)),this.dirty=!0}moveToAndFace(e,t,n){a.vec3.copy(this.location,e),this.face(t,n)}reset(){a.vec3.set(this.location,0,0,0),a.quat.identity(this.rotation),this.dirty=!0}update(){if(this.dirty){this.dirty=!1;let e=this.location,t=this.rotation,n=this.inverseRotation,l=this.viewMatrix,s=this.projectionMatrix,o=this.viewProjectionMatrix,u=this.vectors,c=this.billboardedVectors;this.isPerspective?a.mat4.perspective(s,this.fov,this.aspect,this.nearClipPlane,this.farClipPlane):a.mat4.ortho(s,this.leftClipPlane,this.rightClipPlane,this.bottomClipPlane,this.topClipPlane,this.nearClipPlane,this.farClipPlane),a.mat4.fromQuat(l,t),a.mat4.translate(l,l,a.vec3.negate(i,e)),a.quat.conjugate(n,t),a.mat4.mul(o,s,l),r.unpackPlanes(this.planes,o),a.mat4.invert(this.inverseViewMatrix,l),a.mat4.invert(this.inverseWorldProjectionMatrix,o),a.vec3.transformQuat(this.directionX,r.VEC3_UNIT_X,n),a.vec3.transformQuat(this.directionY,r.VEC3_UNIT_Y,n),a.vec3.transformQuat(this.directionZ,r.VEC3_UNIT_Z,n);for(let e=0;e<7;e++)a.vec3.transformQuat(c[e],u[e],n)}}cameraToWorld(e,t){return a.vec3.transformMat4(e,t,this.inverseViewMatrix)}worldToCamera(e,t){return a.vec3.transformMat4(e,t,this.viewMatrix)}worldToScreen(e,t){let n=this.rect;return a.vec3.transformMat4(i,t,this.viewProjectionMatrix),e[0]=Math.round((i[0]+1)/2*n[2]),e[1]=Math.round((i[1]+1)/2*n[3]),e}screenToWorldRay(e,t){let n=i,o=l,u=s,c=t[0],d=t[1],h=this.inverseWorldProjectionMatrix,f=this.rect;return r.unproject(n,a.vec3.set(u,c,d,0),h,f),r.unproject(o,a.vec3.set(u,c,d,1),h,f),e.set(n,0),e.set(o,3),e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(302);t.default=class{constructor(e,t,n,r,i,l){this.cells=[];let s=n/i,o=r/l;this.x=e,this.y=t,this.width=n,this.depth=r,this.cellWidth=i,this.cellDepth=l,this.columns=s,this.rows=o;for(let n=0;n<o;n++)for(let r=0;r<s;r++){let o=e+r*i,u=o+i,c=t+n*l,d=c+l;this.cells[n*s+r]=new a.default(o,u,c,d)}}add(e){let t=this.cells,n=this.columns,a=e.left,r=e.right+1,i=e.bottom,l=e.top+1;if(-1!==a)for(let s=i;s<l;s++)for(let i=a;i<r;i++)t[s*n+i].add(e)}remove(e){let t=this.cells,n=this.columns,a=e.left,r=e.right+1,i=e.bottom,l=e.top+1;if(-1!==a){e.left=-1;for(let s=i;s<l;s++)for(let i=a;i<r;i++)t[s*n+i].remove(e)}}moved(e){let t=this.cellWidth,n=this.cellDepth,a=e.model.bounds,r=e.worldLocation[0]+a.x-this.x,i=e.worldLocation[1]+a.y-this.y,l=a.r,s=e.worldScale,o=Math.floor((r-l*s[0])/t),u=Math.floor((r+l*s[0])/t),c=Math.floor((i-l*s[1])/n),d=Math.floor((i+l*s[1])/n);u<0||o>this.columns-1||d<0||c>this.rows-1?this.remove(e):(o=Math.max(o,0),u=Math.min(u,this.columns-1),c=Math.max(c,0),d=Math.min(d,this.rows-1),o===e.left&&u===e.right&&c===e.bottom&&d===e.top||(this.remove(e),e.left=o,e.right=u,e.bottom=c,e.top=d,this.add(e)))}clear(){for(let e of this.cells)e.clear()}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(36);class r extends a.Resource{constructor(e){super(e),this.pathSolver=e.pathSolver}}t.HandlerResource=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(12),r=n(33),i=n(60),l=n(22);function s(e){return e instanceof ImageData||e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||e instanceof HTMLVideoElement}t.isImageSource=s,t.isImageExtension=function(e){return".png"===e||".jpg"===e||".gif"===e};class o extends l.default{async load(){let e=this.pathSolver(void 0)[0];if(!s(e)){let t=e,n=await i.fetchDataType(t,"image");if(!n.ok)throw new Error("Failed to fetch");this.extension=t.slice(t.lastIndexOf(".")),this.fetchUrl=t,e=n.data}let t=e,n=a.powerOfTwo(t.width),l=a.powerOfTwo(t.height);n===t.width&&l===t.height||(t instanceof ImageData||(t=r.imageToImageData(t)),t=r.scaleNPOT(t));let o=this.viewer.gl;this.webglResource=o.createTexture(),o.bindTexture(o.TEXTURE_2D,this.webglResource),o.texImage2D(o.TEXTURE_2D,0,o.RGBA,o.RGBA,o.UNSIGNED_BYTE,t),o.generateMipmap(o.TEXTURE_2D),this.width=t.width,this.height=t.height,this.wrapS=o.REPEAT,this.wrapT=o.REPEAT,this.minFilter=o.LINEAR_MIPMAP_LINEAR}}t.ImageTexture=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(309);t.default={extensions:[[".blp","arrayBuffer"]],resource:a.default}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(38);class r extends a.default{isBatched(){return!0}}t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(e,t,n){this.instances=[],this.count=0,this.scene=e,this.model=t,this.textureMapper=n}clear(){this.count=0}add(e){this.instances[this.count++]=e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(e,t=4,n=1,a=1){this.width=0,this.height=0,this.gl=e,this.texture=e.createTexture(),this.format=3===t?e.RGB:e.RGBA,e.bindTexture(e.TEXTURE_2D,this.texture),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),this.reserve(n,a)}reserve(e,t){if(this.width<e||this.height<this.height){const n=this.gl;this.width=Math.max(this.width,e),this.height=Math.max(this.height,t),n.bindTexture(n.TEXTURE_2D,this.texture),n.texImage2D(n.TEXTURE_2D,0,this.format,this.width,this.height,0,this.format,n.FLOAT,null)}}bindAndUpdate(e,t=this.width,n=this.height){const a=this.gl;a.bindTexture(a.TEXTURE_2D,this.texture),a.texSubImage2D(a.TEXTURE_2D,0,0,0,t,n,this.format,a.FLOAT,e)}bind(e){const t=this.gl;t.activeTexture(t.TEXTURE0+e),t.bindTexture(t.TEXTURE_2D,this.texture)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={1:"TeamColor/TeamColor00",2:"TeamGlow/TeamGlow00",11:"Cliff/Cliff0",21:"",31:"LordaeronTree/LordaeronSummerTree",32:"AshenvaleTree/AshenTree",33:"BarrensTree/BarrensTree",34:"NorthrendTree/NorthTree",35:"Mushroom/MushroomTree",36:"RuinsTree/RuinsTree",37:"OutlandMushroomTree/MushroomTree"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(9),r=n(39);class i extends a.default{constructor(e,t,n){super(e,t,n),this.geometryEmitterType=r.EMITTER_RIBBON,this.ok=!0,this.layer=e.materials[t.materialId].layers[0],this.heightAbove=t.heightAbove,this.heightBelow=t.heightBelow,this.alpha=t.alpha,this.color=t.color,this.lifeSpan=t.lifeSpan,this.textureSlot=t.textureSlot,this.emissionRate=t.emissionRate,this.gravity=t.gravity,this.columns=t.columns,this.rows=t.rows}getHeightBelow(e,t){return this.getScalarValue(e,"KRHB",t,this.heightBelow)}getHeightAbove(e,t){return this.getScalarValue(e,"KRHA",t,this.heightAbove)}getTextureSlot(e,t){return this.getScalarValue(e,"KRTX",t,0)}getColor(e,t){return this.getVectorValue(e,"KRCO",t,this.color)}getAlpha(e,t){return this.getScalarValue(e,"KRAL",t,this.alpha)}getVisibility(e,t){return this.getScalarValue(e,"KRVS",t,1)}}t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(e,t,n,a){this.index=e,this.geoset=t,this.layer=n,this.isExtended=a}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(e,t,n){this.index=e,this.geoset=t,this.material=n}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(13);t.default=class{constructor(e,t){this.objects=[],this.model=e,this.isExtended=t}render(e){let t,n=e.scene,r=e.textureMapper,i=e.geosetColors,l=e.layerAlphas,s=e.layerTextures,o=e.uvAnims,u=this.model,c=u.replaceables,d=u.textures,h=a.default.teamColors,f=a.default.teamGlows,_=u.batches,m=u.viewer,p=m.gl,g=this.isExtended;t=g?a.default.shaders.extended:a.default.shaders.complex,t.use();let b=t.uniforms;p.uniformMatrix4fv(b.u_VP,!1,n.camera.viewProjectionMatrix);let w=e.boneTexture;w?(w.bind(15),p.uniform1f(b.u_hasBones,1),p.uniform1i(b.u_boneMap,15),p.uniform1f(b.u_vectorSize,1/w.width),p.uniform1f(b.u_rowSize,1)):p.uniform1f(b.u_hasBones,0),p.uniform1i(b.u_texture,0),p.bindBuffer(p.ARRAY_BUFFER,u.arrayBuffer),p.bindBuffer(p.ELEMENT_ARRAY_BUFFER,u.elementBuffer),p.uniform4fv(b.u_vertexColor,e.vertexColor);for(let n of this.objects){let a=_[n],u=a.geoset,w=a.layer,v=u.index,A=w.index,L=i[v],y=l[A];if(L[3]>.01&&y>.01){let n=s[A],a=o[A];p.uniform4fv(b.u_geosetColor,L),p.uniform1f(b.u_layerAlpha,y),p.uniform2f(b.u_uvTrans,a[0],a[1]),p.uniform2f(b.u_uvRot,a[2],a[3]),p.uniform1f(b.u_uvScale,a[4]),w.bind(t);let i,l=c[n];1===l?i=h[e.teamColor]:2===l?i=f[e.teamColor]:(i=d[n],i=r.get(i)||i),m.webgl.bindTexture(i,0),g?u.bindExtended(t,w.coordId):u.bind(t,w.coordId),u.render()}}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(13);t.default=class{constructor(e,t){this.objects=[],this.model=e,this.shader=t}render(e){let t=e.scene,n=e.textureMapper,r=e.boneTexture,i=e.layerAlphas,l=this.model,s=l.batches,o=l.viewer,u=o.gl,c=o.webgl,d=l.textures,h=a.default.reforgedTeamColors,f=a.default.shaders.hd;f.use();let _=f.uniforms;u.uniformMatrix4fv(_.u_VP,!1,t.camera.viewProjectionMatrix),r?(r.bind(15),u.uniform1f(_.u_hasBones,1),u.uniform1i(_.u_boneMap,15),u.uniform1f(_.u_vectorSize,1/r.width),u.uniform1f(_.u_rowSize,1)):u.uniform1f(_.u_hasBones,0),u.uniform1i(_.u_diffuseMap,0),u.uniform1i(_.u_ormMap,1),u.uniform1i(_.u_teamColorMap,2),u.bindBuffer(u.ARRAY_BUFFER,l.arrayBuffer),u.bindBuffer(u.ELEMENT_ARRAY_BUFFER,l.elementBuffer),u.disable(u.BLEND),u.enable(u.DEPTH_TEST),u.depthMask(!0);for(let t of this.objects){let a=s[t],r=a.geoset,l=a.material.layers,o=l[0],m=l[2],p=i[o.index];if(p>0){u.uniform1f(_.u_layerAlpha,p),u.uniform1f(_.u_filterMode,o.filterMode);let t=d[o.textureId],a=d[m.textureId],i=h[e.teamColor];c.bindTexture(n.get(t)||t,0),c.bindTexture(n.get(a)||a,1),c.bindTexture(n.get(i)||i,2),r.bindHd(f,o.coordId),r.render()}}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(2),r=n(24),i=a.vec3.create();class l extends r.default{constructor(){super(...arguments),this.vertices=new Float32Array(12)}bind(){let e=this.emitter,t=e.instance,n=e.emitterObject,r=this.vertices,l=n.scale,s=t.nodes[n.index].worldMatrix;this.health=n.lifeSpan,i[0]=l,i[1]=l,a.vec3.transformMat4(r.subarray(0,2),i,s),i[0]=-l,i[1]=l,a.vec3.transformMat4(r.subarray(3,5),i,s),i[0]=-l,i[1]=-l,a.vec3.transformMat4(r.subarray(6,8),i,s),i[0]=l,i[1]=-l,a.vec3.transformMat4(r.subarray(9,11),i,s)}update(e){this.health-=e}}t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(385),r=n(42),i=n(394),l=n(396);let s={},o={hasTextures:0,specularTexture:null,diffuseTexture:null,brdfLUTTexture:null},u=["USE_ENV"];t.default={extensions:[[".gltf","text"],[".glb","arrayBuffer"]],load(e){let t=e.webgl;return t.ensureExtension("OES_standard_derivatives")?(t.ensureExtension("EXT_shader_texture_lod")?u.push("USE_TEX_LOD"):console.warn("glTF: No shader texture LOD support! This reduces the quality of environment mapping."),!0):(console.error("glTF: No standard derivatives support!"),!1)},resource:a.default,async loadEnv(e,t,n,a){o.specularTexture=e.loadCubeMap(t),o.diffuseTexture=e.loadCubeMap(n),o.brdfLUTTexture=e.loadImageTexture(a),await e.whenLoaded([o.specularTexture,o.diffuseTexture,o.brdfLUTTexture]),o.specularTexture.ok&&o.diffuseTexture.ok&&o.brdfLUTTexture.ok&&(o.hasTextures=1)},getShader(e){let t=e.primitiveFlags,n=e.materialFlags;if(s[t]||(s[t]={}),!s[t][n]){let a=[...r.getPrimitiveDefines(t),...r.getMaterialDefines(n),...u].map(e=>`#define ${e}`).join("\n")+"\n",o=e.model.viewer.webgl.createShaderProgram(a+i.default,a+l.default);if(!o||!o.ok)throw new Error("glTF: Failed to compile a shader!");s[t][n]=o}return s[t][n]},shaders:s,env:o}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e.reverse().filter((e,t,n)=>-1===n.indexOf(e,t+1)).reverse()}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(119);t.default=function(e){let t,n=new a.default(e),r=[];for(;void 0!==(t=n.read());)if("function"===t){let e=n.readSafe();n.read(),t=n.read();let a="";if("nothing"!==t)for(a+=n.readSafe();","===n.read();)n.read(),a+=","+n.readSafe();else n.read();n.read();let i=`function ${e}(${a})`,l=[];for(;"endfunction"!==(t=n.readSafe());)if("local"===t){n.read();let e=n.readSafe();"array"===e?l.push(`local ${n.readSafe()}={}`):l.push(`local ${e}${n.readUntil("\n")}\n`)}else if("if"===t||"elseif"===t||"not"===t)l.push(t+" ");else if("then"===t)l.push(" "+t);else if("loop"===t)l.push("while 1 do");else if("endloop"===t||"endif"===t)l.push("end");else if("exitwhen"===t)l.push(`if ${n.readUntil("\n")} then break end\n`);else if("return"===t){let e=n.readUntil("\n");t=n.peek(),"endif"===t||"endloop"===t||"endfunction"===t?l.push(`return ${e}\n`):l.push(`if 1 then return ${e} end\n`)}else if("\n"===t){let e=l[l.length-1];e&&"\n"!==e[e.length-1]&&l.push("\n")}else"set"!==t&&"call"!==t&&"function"!==t&&l.push(t);r.push(`${i}\n${l.join("")}end`)}else if("globals"===t)for(;"endglobals"!==(t=n.read());)if("\n"!==t){"constant"===t&&(t=n.read());let e=n.read();if("array"===e)r.push(`${n.readSafe()}={}`);else{let t="nil";"="===n.peek()&&(n.read(),t=n.readUntil("\n")),"nil"!==t&&r.push(`${e}=${t}`)}}return r.join("\n")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(29);t.default=class{constructor(e){this.buffer=e,this.index=0}read(){let e=this.buffer,t=e.length,n=!1,a=!1,r=!1,i="";for(;this.index<t;){let l=e[this.index++];if(n)"\n"===l&&(n=!1,this.index--);else if(a){if(i+="\\"===l?l+e[this.index++]:"\n"===l?"\\n":"\r"===l?"\\r":l,'"'===l)return i}else if(r){if(i+=l,"'"===l)return i}else if(" "===l||"\t"===l){if(i.length)return i}else if("("===l||")"===l||"["===l||"]"===l||"="===l||"\r"===l||"\n"===l||","===l||"!"===l||"-"===l||"<"===l||">"===l||"+"===l||"*"===l||"/"===l){if(i.length)return this.index--,i;{let t=e[this.index];if("="===l&&"="===t)return this.index++,"==";if("\r"===l)return"\n"===t&&this.index++,"\n";if("!"===l&&"="===t)return this.index++,"!=";if("/"!==l||"/"!==t)return l;if(i.length)return this.index--,i;n=!0}}else if('"'===l){if(i.length)return this.index--,i;i+=l,a=!0}else if("'"===l){if(i.length)return this.index--,i;i+=l,r=!0}else i+=l;if(this.index===t)return i}return""}peek(){let e=this.index,t=this.read();return this.index=e,t}readSafe(){let e=this.read();return"null"===e?"nil":"!="===e?"~=":"'"===e[0]?`${a.stringToBase256(e.slice(1,e.indexOf("'",1)))}`:"break"===e||"do"===e||"end"===e||"for"===e||"goto"===e||"in"===e||"nil"===e||"repeat"===e||"until"===e||"while"===e?e+"_":"and"===e||"or"===e?" "+e+" ":"$"===e[0]?"0x"+e.slice(1):e}readUntil(e){let t,n="";for(;(t=this.readSafe())!==e;)n+=t;return n}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(59),r=n(121),i=n(43),l=n(124),s=n(118),o=n(125),u=n(126),c=n(441),d=n(443);class h extends a.EventEmitter{constructor(){super(),this.map=null,this.handle=0,this.freeHandles=[],this.handles=[],this.name="",this.description="",this.players=[],this.actualPlayers=0,this.startLocations=[],this.constantHandles=c.default(),this.timers=new Set,this.triggers=new Set,this.threads=new Set,this.currentThread=null,this.enumUnit=null,this.filterUnit=null,this.enumPlayer=null,this.t=0,this.L=l.luaL_newstate(),o.default(this),i.lua_atnativeerror(this.L,e=>{let t=i.lua_touserdata(e,-1);return i.lua_pushstring(e,t.stack),1});for(let e=0;e<28;e++)this.players[e]=this.addHandle(new u.default(e,28))}start(){this.t=performance.now()}step(){let e=performance.now(),t=.001*(e-this.t),n=this.timers,a=this.threads;for(let e of n)if(e.elapsed+=t,e.elapsed>=e.timeout){let t=new d.default(this.L,{expiredTimer:e}),a=t.L;i.lua_rawgeti(a,i.LUA_REGISTRYINDEX,e.handlerFunc),this.threads.add(t),e.periodic?e.elapsed=0:n.delete(e)}for(let e of a)if(e.sleep-=t,e.sleep<=0){this.currentThread=e;let t=e.L,n=i.lua_resume(t,this.L,0);n===i.LUA_OK?a.delete(e):n===i.LUA_YIELD?e.sleep=l.luaL_checknumber(t,1):(console.log("[JS] Something went wrong during execution"),console.log(r.to_jsstring(l.luaL_tolstring(t,-1))),i.lua_pop(t,2))}this.t=e}addHandle(e){if(-1===e.handleId){let t;t=this.freeHandles.length?this.freeHandles.pop():this.handle++,this.handles[t]=e,e.handleId=t}return e}freeHandle(e){-1!==e.handleId&&(this.freeHandles.push(e.handleId),this.handles[e.handleId]=null,e.handleId=-1)}call(e){let t=this.L;"string"==typeof e?i.lua_getglobal(t,e):"number"==typeof e&&i.lua_rawgeti(t,i.LUA_REGISTRYINDEX,e),i.lua_pcall(t,0,0,0)&&(console.log("Something went wrong during execution"),console.log(r.to_jsstring(l.luaL_tolstring(t,-1))),i.lua_pop(t,2))}run(e,t){let n=this.L;t&&(e=s.default(e)),l.luaL_loadstring(n,r.to_luastring(e))&&(console.log("Something went wrong during execution"),console.log(r.to_jsstring(l.luaL_tolstring(n,-1))),i.lua_pop(n,2)),i.lua_pcall(n,0,0,0)&&(console.log("Something went wrong during execution"),console.log(r.to_jsstring(l.luaL_tolstring(n,-1))),i.lua_pop(n,2))}open(e){this.map=e;let t=e.getScriptFile();if(t){let e=t.text();if(e){let n=t.name.endsWith(".j");this.run(e,n)}}}}t.default=h},function(e,t,n){const a=n(3),r="Fengari 0.1.4  Copyright (C) 2017-2018 B. Giannangeli, Daurnimator\nBased on: "+a.LUA_COPYRIGHT;e.exports.FENGARI_AUTHORS="B. Giannangeli, Daurnimator",e.exports.FENGARI_COPYRIGHT=r,e.exports.FENGARI_RELEASE="Fengari 0.1.4",e.exports.FENGARI_VERSION="Fengari 0.1",e.exports.FENGARI_VERSION_MAJOR="0",e.exports.FENGARI_VERSION_MINOR="1",e.exports.FENGARI_VERSION_NUM=1,e.exports.FENGARI_VERSION_RELEASE="4",e.exports.is_luastring=a.is_luastring,e.exports.luastring_eq=a.luastring_eq,e.exports.luastring_from=a.luastring_from,e.exports.luastring_indexOf=a.luastring_indexOf,e.exports.luastring_of=a.luastring_of,e.exports.to_jsstring=a.to_jsstring,e.exports.to_luastring=a.to_luastring,e.exports.to_uristring=a.to_uristring,e.exports.from_userstring=a.from_userstring},function(e,t,n){"use strict";const{luastring_of:a}=n(3),r=a(0,0,0,0,0,0,0,0,0,0,8,8,8,8,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,12,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,22,22,22,22,22,22,22,22,22,22,4,4,4,4,4,4,4,21,21,21,21,21,21,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,4,4,4,4,5,4,21,21,21,21,21,21,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);e.exports.lisdigit=function(e){return 0!=(2&r[e+1])},e.exports.lislalnum=function(e){return 0!=(3&r[e+1])},e.exports.lislalpha=function(e){return 0!=(1&r[e+1])},e.exports.lisprint=function(e){return 0!=(4&r[e+1])},e.exports.lisspace=function(e){return 0!=(8&r[e+1])},e.exports.lisxdigit=function(e){return 0!=(16&r[e+1])}},function(e,t,n){"use strict";const{LUA_MULTRET:a,to_luastring:r}=n(3),{BinOpr:{OPR_ADD:i,OPR_AND:l,OPR_BAND:s,OPR_BOR:o,OPR_BXOR:u,OPR_CONCAT:c,OPR_DIV:d,OPR_EQ:h,OPR_GE:f,OPR_GT:_,OPR_IDIV:m,OPR_LE:p,OPR_LT:g,OPR_MOD:b,OPR_MUL:w,OPR_NE:v,OPR_NOBINOPR:A,OPR_OR:L,OPR_POW:y,OPR_SHL:S,OPR_SHR:T,OPR_SUB:E},UnOpr:{OPR_BNOT:x,OPR_LEN:k,OPR_MINUS:M,OPR_NOT:I,OPR_NOUNOPR:U},NO_JUMP:P,getinstruction:R,luaK_checkstack:O,luaK_codeABC:C,luaK_codeABx:B,luaK_codeAsBx:F,luaK_codek:D,luaK_concat:G,luaK_dischargevars:N,luaK_exp2RK:V,luaK_exp2anyreg:j,luaK_exp2anyregup:H,luaK_exp2nextreg:K,luaK_exp2val:z,luaK_fixline:X,luaK_getlabel:q,luaK_goiffalse:Y,luaK_goiftrue:$,luaK_indexed:W,luaK_infix:Z,luaK_intK:J,luaK_jump:Q,luaK_jumpto:ee,luaK_nil:te,luaK_patchclose:ne,luaK_patchlist:ae,luaK_patchtohere:re,luaK_posfix:ie,luaK_prefix:le,luaK_reserveregs:se,luaK_ret:oe,luaK_self:ue,luaK_setlist:ce,luaK_setmultret:de,luaK_setoneret:he,luaK_setreturns:fe,luaK_storevar:_e,luaK_stringK:me}=n(427),pe=n(10),ge=n(25),be=n(69),{LUAI_MAXCCALLS:we,MAX_INT:ve,lua_assert:Ae}=n(5),Le=n(6),{OpCodesI:{OP_CALL:ye,OP_CLOSURE:Se,OP_FORLOOP:Te,OP_FORPREP:Ee,OP_GETUPVAL:xe,OP_MOVE:ke,OP_NEWTABLE:Me,OP_SETTABLE:Ie,OP_TAILCALL:Ue,OP_TFORCALL:Pe,OP_TFORLOOP:Re,OP_VARARG:Oe},LFIELDS_PER_FLUSH:Ce,SETARG_B:Be,SETARG_C:Fe,SET_OPCODE:De}=n(28),{luaS_eqlngstr:Ge,luaS_new:Ne,luaS_newliteral:Ve}=n(15),je=n(14),He=ge.Proto,Ke=be.RESERVED,ze=function(e){return e===Ye.VCALL||e===Ye.VVARARG},Xe=function(e,t){return Ge(e,t)};class qe{constructor(){this.previous=null,this.firstlabel=NaN,this.firstgoto=NaN,this.nactvar=NaN,this.upval=NaN,this.isloop=NaN}}const Ye={VVOID:0,VNIL:1,VTRUE:2,VFALSE:3,VK:4,VKFLT:5,VKINT:6,VNONRELOC:7,VLOCAL:8,VUPVAL:9,VINDEXED:10,VJMP:11,VRELOCABLE:12,VCALL:13,VVARARG:14};class $e{constructor(){this.k=NaN,this.u={ival:NaN,nval:NaN,info:NaN,ind:{idx:NaN,t:NaN,vt:NaN}},this.t=NaN,this.f=NaN}to(e){this.k=e.k,this.u=e.u,this.t=e.t,this.f=e.f}}class We{constructor(){this.f=null,this.prev=null,this.ls=null,this.bl=null,this.pc=NaN,this.lasttarget=NaN,this.jpc=NaN,this.nk=NaN,this.np=NaN,this.firstlocal=NaN,this.nlocvars=NaN,this.nactvar=NaN,this.nups=NaN,this.freereg=NaN}}class Ze{constructor(){this.idx=NaN}}class Je{constructor(){this.name=null,this.pc=NaN,this.line=NaN,this.nactvar=NaN}}class Qe{constructor(){this.arr=[],this.n=NaN,this.size=NaN}}const et=function(e,t){e.t.token=0,be.luaX_syntaxerror(e,t)},tt=function(e,t){be.luaX_syntaxerror(e,Le.luaO_pushfstring(e.L,r("%s expected",!0),be.luaX_token2str(e,t)))},nt=function(e,t,n,a){t>n&&function(e,t,n){let a=e.ls.L,i=e.f.linedefined,l=0===i?r("main function",!0):Le.luaO_pushfstring(a,r("function at line %d",!0),i),s=Le.luaO_pushfstring(a,r("too many %s (limit is %d) in %s",!0),n,t,l);be.luaX_syntaxerror(e.ls,s)}(e,n,a)},at=function(e,t){return e.t.token===t&&(be.luaX_next(e),!0)},rt=function(e,t){e.t.token!==t&&tt(e,t)},it=function(e,t){rt(e,t),be.luaX_next(e)},lt=function(e,t,n){t||be.luaX_syntaxerror(e,n)},st=function(e,t,n,a){at(e,t)||(a===e.linenumber?tt(e,t):be.luaX_syntaxerror(e,Le.luaO_pushfstring(e.L,r("%s expected (to close %s at line %d)"),be.luaX_token2str(e,t),be.luaX_token2str(e,n),a)))},ot=function(e){rt(e,Ke.TK_NAME);let t=e.t.seminfo.ts;return be.luaX_next(e),t},ut=function(e,t,n){e.f=e.t=P,e.k=t,e.u.info=n},ct=function(e,t,n){ut(t,Ye.VK,me(e.fs,n))},dt=function(e,t){ct(e,t,ot(e))},ht=function(e,t){let n=e.fs,a=e.dyd,i=function(e,t){let n=e.fs,a=n.f;return a.locvars[n.nlocvars]=new Le.LocVar,a.locvars[n.nlocvars].varname=t,n.nlocvars++}(e,t);nt(n,a.actvar.n+1-n.firstlocal,200,r("local variables",!0)),a.actvar.arr[a.actvar.n]=new Ze,a.actvar.arr[a.actvar.n].idx=i,a.actvar.n++},ft=function(e,t){ht(e,be.luaX_newstring(e,r(t,!0)))},_t=function(e,t){let n=e.ls.dyd.actvar.arr[e.firstlocal+t].idx;return Ae(n<e.nlocvars),e.f.locvars[n]},mt=function(e,t){let n=e.fs;for(n.nactvar=n.nactvar+t;t;t--)_t(n,n.nactvar-t).startpc=n.pc},pt=function(e,t,n){let a=e.f;return nt(e,e.nups+1,ge.MAXUPVAL,r("upvalues",!0)),a.upvalues[e.nups]={instack:n.k===Ye.VLOCAL,idx:n.u.info,name:t},e.nups++},gt=function(e,t,n,a){if(null===e)ut(n,Ye.VVOID,0);else{let r=function(e,t){for(let n=e.nactvar-1;n>=0;n--)if(Xe(t,_t(e,n).varname))return n;return-1}(e,t);if(r>=0)ut(n,Ye.VLOCAL,r),a||function(e,t){let n=e.bl;for(;n.nactvar>t;)n=n.previous;n.upval=1}(e,r);else{let a=function(e,t){let n=e.f.upvalues;for(let a=0;a<e.nups;a++)if(Xe(n[a].name,t))return a;return-1}(e,t);if(a<0){if(gt(e.prev,t,n,0),n.k===Ye.VVOID)return;a=pt(e,t,n)}ut(n,Ye.VUPVAL,a)}}},bt=function(e,t){let n=ot(e),a=e.fs;if(gt(a,n,t,1),t.k===Ye.VVOID){let r=new $e;gt(a,e.envn,t,1),Ae(t.k!==Ye.VVOID),ct(e,r,n),W(a,t,r)}},wt=function(e,t,n,a){let r=e.fs,i=t-n;if(ze(a.k))i++,i<0&&(i=0),fe(r,a,i),i>1&&se(r,i-1);else if(a.k!==Ye.VVOID&&K(r,a),i>0){let e=r.freereg;se(r,i),te(r,e,i)}n>t&&(e.fs.freereg-=n-t)},vt=function(e){let t=e.L;++t.nCcalls,nt(e.fs,t.nCcalls,we,r("JS levels",!0))},At=function(e){return e.L.nCcalls--},Lt=function(e,t,n){let a=e.fs,i=e.dyd.gt,l=i.arr[t];if(Ae(Xe(l.name,n.name)),l.nactvar<n.nactvar){let t=_t(a,l.nactvar).varname,n=Le.luaO_pushfstring(e.L,r("<goto %s> at line %d jumps into the scope of local '%s'"),l.name.getstr(),l.line,t.getstr());et(e,n)}ae(a,l.pc,n.pc);for(let e=t;e<i.n-1;e++)i.arr[e]=i.arr[e+1];i.n--},yt=function(e,t){let n=e.fs.bl,a=e.dyd,r=a.gt.arr[t];for(let i=n.firstlabel;i<a.label.n;i++){let l=a.label.arr[i];if(Xe(l.name,r.name))return r.nactvar>l.nactvar&&(n.upval||a.label.n>n.firstlabel)&&ne(e.fs,r.pc,l.nactvar),Lt(e,t,l),!0}return!1},St=function(e,t,n,a,r){let i=t.n;return t.arr[i]=new Je,t.arr[i].name=n,t.arr[i].line=a,t.arr[i].nactvar=e.fs.nactvar,t.arr[i].pc=r,t.n=i+1,i},Tt=function(e,t){let n=e.dyd.gt,a=e.fs.bl.firstgoto;for(;a<n.n;)Xe(n.arr[a].name,t.name)?Lt(e,a,t):a++},Et=function(e,t,n){t.isloop=n,t.nactvar=e.nactvar,t.firstlabel=e.ls.dyd.label.n,t.firstgoto=e.ls.dyd.gt.n,t.upval=0,t.previous=e.bl,e.bl=t,Ae(e.freereg===e.nactvar)},xt=function(e,t,n){t.prev=e.fs,t.ls=e,e.fs=t,t.pc=0,t.lasttarget=0,t.jpc=P,t.freereg=0,t.nk=0,t.np=0,t.nups=0,t.nlocvars=0,t.nactvar=0,t.firstlocal=e.dyd.actvar.n,t.bl=null;let a=t.f;a.source=e.source,a.maxstacksize=2,Et(t,n,!1)},kt=function(e){let t=e.bl,n=e.ls;if(t.previous&&t.upval){let n=Q(e);ne(e,n,t.nactvar),re(e,n)}t.isloop&&function(e){let t=Ve(e.L,"break"),n=St(e,e.dyd.label,t,0,e.fs.pc);Tt(e,e.dyd.label.arr[n])}(n),e.bl=t.previous,function(e,t){for(e.ls.dyd.actvar.n-=e.nactvar-t;e.nactvar>t;)_t(e,--e.nactvar).endpc=e.pc}(e,t.nactvar),Ae(t.nactvar===e.nactvar),e.freereg=e.nactvar,n.dyd.label.n=t.firstlabel,t.previous?function(e,t){let n=t.firstgoto,a=e.ls.dyd.gt;for(;n<a.n;){let r=a.arr[n];r.nactvar>t.nactvar&&(t.upval&&ne(e,r.pc,t.nactvar),r.nactvar=t.nactvar),yt(e.ls,n)||n++}}(e,t):t.firstgoto<n.dyd.gt.n&&function(e,t){let n=be.isreserved(t.name)?"<%s> at line %d not inside a loop":"no visible label '%s' for <goto> at line %d";n=Le.luaO_pushfstring(e.L,r(n),t.name.getstr(),t.line),et(e,n)}(n,n.dyd.gt.arr[t.firstgoto])},Mt=function(e){let t=e.fs;oe(t,0,0),kt(t),Ae(null===t.bl),e.fs=t.prev},It=function(e,t){switch(e.t.token){case Ke.TK_ELSE:case Ke.TK_ELSEIF:case Ke.TK_END:case Ke.TK_EOS:return!0;case Ke.TK_UNTIL:return t;default:return!1}},Ut=function(e){for(;!It(e,1);){if(e.t.token===Ke.TK_RETURN)return void rn(e);rn(e)}},Pt=function(e,t){let n=e.fs,a=new $e;H(n,t),be.luaX_next(e),dt(e,a),W(n,t,a)},Rt=function(e,t){be.luaX_next(e),Xt(e,t),z(e.fs,t),it(e,93)};class Ot{constructor(){this.v=new $e,this.t=new $e,this.nh=NaN,this.na=NaN,this.tostore=NaN}}const Ct=function(e,t){let n=e.fs,a=e.fs.freereg,i=new $e,l=new $e;e.t.token===Ke.TK_NAME?(nt(n,t.nh,ve,r("items in a constructor",!0)),dt(e,i)):Rt(e,i),t.nh++,it(e,61);let s=V(n,i);Xt(e,l),C(n,Ie,t.t.u.info,s,V(n,l)),n.freereg=a},Bt=function(e,t){t.v.k!==Ye.VVOID&&(K(e,t.v),t.v.k=Ye.VVOID,t.tostore===Ce&&(ce(e,t.t.u.info,t.na,t.tostore),t.tostore=0))},Ft=function(e,t){Xt(e,t.v),nt(e.fs,t.na,ve,r("items in a constructor",!0)),t.na++,t.tostore++},Dt=function(e,t){switch(e.t.token){case Ke.TK_NAME:61!==be.luaX_lookahead(e)?Ft(e,t):Ct(e,t);break;case 91:Ct(e,t);break;default:Ft(e,t)}},Gt=function(e,t){let n=e.fs,r=e.linenumber,i=C(n,Me,0,0,0),l=new Ot;l.na=l.nh=l.tostore=0,l.t=t,ut(t,Ye.VRELOCABLE,i),ut(l.v,Ye.VVOID,0),K(e.fs,t),it(e,123);do{if(Ae(l.v.k===Ye.VVOID||l.tostore>0),125===e.t.token)break;Bt(n,l),Dt(e,l)}while(at(e,44)||at(e,59));st(e,125,123,r),function(e,t){0!==t.tostore&&(ze(t.v.k)?(de(e,t.v),ce(e,t.t.u.info,t.na,a),t.na--):(t.v.k!==Ye.VVOID&&K(e,t.v),ce(e,t.t.u.info,t.na,t.tostore)))}(n,l),Be(n.f.code[i],Le.luaO_int2fb(l.na)),Fe(n.f.code[i],Le.luaO_int2fb(l.nh))},Nt=function(e,t,n,a){let i=new We,l=new qe;i.f=function(e){let t=e.L,n=new He(t),a=e.fs;return a.f.p[a.np++]=n,n}(e),i.f.linedefined=a,xt(e,i,l),it(e,40),n&&(ft(e,"self"),mt(e,1)),function(e){let t=e.fs,n=t.f,a=0;if(n.is_vararg=!1,41!==e.t.token)do{switch(e.t.token){case Ke.TK_NAME:ht(e,ot(e)),a++;break;case Ke.TK_DOTS:be.luaX_next(e),n.is_vararg=!0;break;default:be.luaX_syntaxerror(e,r("<name> or '...' expected",!0))}}while(!n.is_vararg&&at(e,44));mt(e,a),n.numparams=t.nactvar,se(t,t.nactvar)}(e),it(e,41),Ut(e),i.f.lastlinedefined=e.linenumber,st(e,Ke.TK_END,Ke.TK_FUNCTION,a),function(e,t){let n=e.fs.prev;ut(t,Ye.VRELOCABLE,B(n,Se,0,n.np-1)),K(n,t)}(e,t),Mt(e)},Vt=function(e,t){let n=1;for(Xt(e,t);at(e,44);)K(e.fs,t),Xt(e,t),n++;return n},jt=function(e,t,n){let i,l=e.fs,s=new $e;switch(e.t.token){case 40:be.luaX_next(e),41===e.t.token?s.k=Ye.VVOID:(Vt(e,s),de(l,s)),st(e,41,40,n);break;case 123:Gt(e,s);break;case Ke.TK_STRING:ct(e,s,e.t.seminfo.ts),be.luaX_next(e);break;default:be.luaX_syntaxerror(e,r("function arguments expected",!0))}Ae(t.k===Ye.VNONRELOC);let o=t.u.info;ze(s.k)?i=a:(s.k!==Ye.VVOID&&K(l,s),i=l.freereg-(o+1)),ut(t,Ye.VCALL,C(l,ye,o,i+1,2)),X(l,n),l.freereg=o+1},Ht=function(e,t){let n=e.fs,a=e.linenumber;for(!function(e,t){switch(e.t.token){case 40:{let n=e.linenumber;return be.luaX_next(e),Xt(e,t),st(e,41,40,n),void N(e.fs,t)}case Ke.TK_NAME:return void bt(e,t);default:be.luaX_syntaxerror(e,r("unexpected symbol",!0))}}(e,t);;)switch(e.t.token){case 46:Pt(e,t);break;case 91:{let a=new $e;H(n,t),Rt(e,a),W(n,t,a);break}case 58:{let r=new $e;be.luaX_next(e),dt(e,r),ue(n,t,r),jt(e,t,a);break}case 40:case Ke.TK_STRING:case 123:K(n,t),jt(e,t,a);break;default:return}},Kt=[{left:10,right:10},{left:10,right:10},{left:11,right:11},{left:11,right:11},{left:14,right:13},{left:11,right:11},{left:11,right:11},{left:6,right:6},{left:4,right:4},{left:5,right:5},{left:7,right:7},{left:7,right:7},{left:9,right:8},{left:3,right:3},{left:3,right:3},{left:3,right:3},{left:3,right:3},{left:3,right:3},{left:3,right:3},{left:2,right:2},{left:1,right:1}],zt=function(e,t,n){vt(e);let a=function(e){switch(e){case Ke.TK_NOT:return I;case 45:return M;case 126:return x;case 35:return k;default:return U}}(e.t.token);if(a!==U){let n=e.linenumber;be.luaX_next(e),zt(e,t,12),le(e.fs,a,t,n)}else!function(e,t){switch(e.t.token){case Ke.TK_FLT:ut(t,Ye.VKFLT,0),t.u.nval=e.t.seminfo.r;break;case Ke.TK_INT:ut(t,Ye.VKINT,0),t.u.ival=e.t.seminfo.i;break;case Ke.TK_STRING:ct(e,t,e.t.seminfo.ts);break;case Ke.TK_NIL:ut(t,Ye.VNIL,0);break;case Ke.TK_TRUE:ut(t,Ye.VTRUE,0);break;case Ke.TK_FALSE:ut(t,Ye.VFALSE,0);break;case Ke.TK_DOTS:{let n=e.fs;lt(e,n.f.is_vararg,r("cannot use '...' outside a vararg function",!0)),ut(t,Ye.VVARARG,C(n,Oe,0,1,0));break}case 123:return void Gt(e,t);case Ke.TK_FUNCTION:return be.luaX_next(e),void Nt(e,t,0,e.linenumber);default:return void Ht(e,t)}be.luaX_next(e)}(e,t);let P=function(e){switch(e){case 43:return i;case 45:return E;case 42:return w;case 37:return b;case 94:return y;case 47:return d;case Ke.TK_IDIV:return m;case 38:return s;case 124:return o;case 126:return u;case Ke.TK_SHL:return S;case Ke.TK_SHR:return T;case Ke.TK_CONCAT:return c;case Ke.TK_NE:return v;case Ke.TK_EQ:return h;case 60:return g;case Ke.TK_LE:return p;case 62:return _;case Ke.TK_GE:return f;case Ke.TK_AND:return l;case Ke.TK_OR:return L;default:return A}}(e.t.token);for(;P!==A&&Kt[P].left>n;){let n=new $e,a=e.linenumber;be.luaX_next(e),Z(e.fs,P,t);let r=zt(e,n,Kt[P].right);ie(e.fs,P,t,n,a),P=r}return At(e),P},Xt=function(e,t){zt(e,t,0)},qt=function(e){let t=e.fs,n=new qe;Et(t,n,0),Ut(e),kt(t)};class Yt{constructor(){this.prev=null,this.v=new $e}}const $t=function(e,t,n){let a=new $e;var i;if(lt(e,(i=t.v.k,Ye.VLOCAL<=i&&i<=Ye.VINDEXED),r("syntax error",!0)),at(e,44)){let a=new Yt;a.prev=t,Ht(e,a.v),a.v.k!==Ye.VINDEXED&&function(e,t,n){let a=e.fs,r=a.freereg,i=!1;for(;t;t=t.prev)t.v.k===Ye.VINDEXED&&(t.v.u.ind.vt===n.k&&t.v.u.ind.t===n.u.info&&(i=!0,t.v.u.ind.vt=Ye.VLOCAL,t.v.u.ind.t=r),n.k===Ye.VLOCAL&&t.v.u.ind.idx===n.u.info&&(i=!0,t.v.u.ind.idx=r));if(i){let e=n.k===Ye.VLOCAL?ke:xe;C(a,e,r,n.u.info,0),se(a,1)}}(e,t,a.v),nt(e.fs,n+e.L.nCcalls,we,r("JS levels",!0)),$t(e,a,n+1)}else{it(e,61);let r=Vt(e,a);if(r===n)return he(e.fs,a),void _e(e.fs,t.v,a);wt(e,n,r,a)}ut(a,Ye.VNONRELOC,e.fs.freereg-1),_e(e.fs,t.v,a)},Wt=function(e){let t=new $e;return Xt(e,t),t.k===Ye.VNIL&&(t.k=Ye.VFALSE),$(e.fs,t),t.f},Zt=function(e,t){let n,a=e.linenumber;at(e,Ke.TK_GOTO)?n=ot(e):(be.luaX_next(e),n=Ve(e.L,"break"));let r=St(e,e.dyd.gt,n,a,t);yt(e,r)},Jt=function(e,t,n){let a,i=e.fs,l=e.dyd.label;!function(e,t,n){for(let a=e.bl.firstlabel;a<t.n;a++)if(Xe(n,t.arr[a].name)){let i=Le.luaO_pushfstring(e.ls.L,r("label '%s' already defined on line %d",!0),n.getstr(),t.arr[a].line);et(e.ls,i)}}(i,l,t),it(e,Ke.TK_DBCOLON),a=St(e,l,t,n,q(i)),function(e){for(;59===e.t.token||e.t.token===Ke.TK_DBCOLON;)rn(e)}(e),It(e,0)&&(l.arr[a].nactvar=i.bl.nactvar),Tt(e,l.arr[a])},Qt=function(e){let t=new $e;return Xt(e,t),K(e.fs,t),Ae(t.k===Ye.VNONRELOC),t.u.info},en=function(e,t,n,a,r){let i,l=new qe,s=e.fs;mt(e,3),it(e,Ke.TK_DO);let o=r?F(s,Ee,t,P):Q(s);Et(s,l,0),mt(e,a),se(s,a),qt(e),kt(s),re(s,o),r?i=F(s,Te,t,P):(C(s,Pe,t,0,a),X(s,n),i=F(s,Re,t+2,P)),ae(s,i,o+1),X(s,n)},tn=function(e,t){let n=e.fs,a=new qe;Et(n,a,1),be.luaX_next(e);let i=ot(e);switch(e.t.token){case 61:!function(e,t,n){let a=e.fs,r=a.freereg;ft(e,"(for index)"),ft(e,"(for limit)"),ft(e,"(for step)"),ht(e,t),it(e,61),Qt(e),it(e,44),Qt(e),at(e,44)?Qt(e):(D(a,a.freereg,J(a,1)),se(a,1)),en(e,r,n,1,1)}(e,i,t);break;case 44:case Ke.TK_IN:!function(e,t){let n=e.fs,a=new $e,r=4,i=n.freereg;for(ft(e,"(for generator)"),ft(e,"(for state)"),ft(e,"(for control)"),ht(e,t);at(e,44);)ht(e,ot(e)),r++;it(e,Ke.TK_IN);let l=e.linenumber;wt(e,3,Vt(e,a),a),O(n,3),en(e,i,l,r-3,0)}(e,i);break;default:be.luaX_syntaxerror(e,r("'=' or 'in' expected",!0))}st(e,Ke.TK_END,Ke.TK_FOR,t),kt(n)},nn=function(e,t){let n,a=new qe,r=e.fs,i=new $e;if(be.luaX_next(e),Xt(e,i),it(e,Ke.TK_THEN),e.t.token===Ke.TK_GOTO||e.t.token===Ke.TK_BREAK){for(Y(e.fs,i),Et(r,a,!1),Zt(e,i.t);at(e,59););if(It(e,0))return kt(r),t;n=Q(r)}else $(e.fs,i),Et(r,a,!1),n=i.f;return Ut(e),kt(r),e.t.token!==Ke.TK_ELSE&&e.t.token!==Ke.TK_ELSEIF||(t=G(r,t,Q(r))),re(r,n),t},an=function(e,t){let n=new $e,a=new $e;be.luaX_next(e);let r=function(e,t){let n=0;for(bt(e,t);46===e.t.token;)Pt(e,t);return 58===e.t.token&&(n=1,Pt(e,t)),n}(e,n);Nt(e,a,r,t),_e(e.fs,n,a),X(e.fs,t)},rn=function(e){let t=e.linenumber;switch(vt(e),e.t.token){case 59:be.luaX_next(e);break;case Ke.TK_IF:!function(e,t){let n=e.fs,a=P;for(a=nn(e,a);e.t.token===Ke.TK_ELSEIF;)a=nn(e,a);at(e,Ke.TK_ELSE)&&qt(e),st(e,Ke.TK_END,Ke.TK_IF,t),re(n,a)}(e,t);break;case Ke.TK_WHILE:!function(e,t){let n=e.fs,a=new qe;be.luaX_next(e);let r=q(n),i=Wt(e);Et(n,a,1),it(e,Ke.TK_DO),qt(e),ee(n,r),st(e,Ke.TK_END,Ke.TK_WHILE,t),kt(n),re(n,i)}(e,t);break;case Ke.TK_DO:be.luaX_next(e),qt(e),st(e,Ke.TK_END,Ke.TK_DO,t);break;case Ke.TK_FOR:tn(e,t);break;case Ke.TK_REPEAT:!function(e,t){let n=e.fs,a=q(n),r=new qe,i=new qe;Et(n,r,1),Et(n,i,0),be.luaX_next(e),Ut(e),st(e,Ke.TK_UNTIL,Ke.TK_REPEAT,t);let l=Wt(e);i.upval&&ne(n,l,i.nactvar),kt(n),ae(n,l,a),kt(n)}(e,t);break;case Ke.TK_FUNCTION:an(e,t);break;case Ke.TK_LOCAL:be.luaX_next(e),at(e,Ke.TK_FUNCTION)?function(e){let t=new $e,n=e.fs;ht(e,ot(e)),mt(e,1),Nt(e,t,0,e.linenumber),_t(n,t.u.info).startpc=n.pc}(e):function(e){let t,n=0,a=new $e;do{ht(e,ot(e)),n++}while(at(e,44));at(e,61)?t=Vt(e,a):(a.k=Ye.VVOID,t=0),wt(e,n,t,a),mt(e,n)}(e);break;case Ke.TK_DBCOLON:be.luaX_next(e),Jt(e,ot(e),t);break;case Ke.TK_RETURN:be.luaX_next(e),function(e){let t,n,r=e.fs,i=new $e;It(e,1)||59===e.t.token?t=n=0:(n=Vt(e,i),ze(i.k)?(de(r,i),i.k===Ye.VCALL&&1===n&&(De(R(r,i),Ue),Ae(R(r,i).A===r.nactvar)),t=r.nactvar,n=a):1===n?t=j(r,i):(K(r,i),t=r.nactvar,Ae(n===r.freereg-t))),oe(r,t,n),at(e,59)}(e);break;case Ke.TK_BREAK:case Ke.TK_GOTO:Zt(e,Q(e.fs));break;default:!function(e){let t=e.fs,n=new Yt;Ht(e,n.v),61===e.t.token||44===e.t.token?(n.prev=null,$t(e,n,1)):(lt(e,n.v.k===Ye.VCALL,r("syntax error",!0)),Fe(R(t,n.v),1))}(e)}Ae(e.fs.f.maxstacksize>=e.fs.freereg&&e.fs.freereg>=e.fs.nactvar),e.fs.freereg=e.fs.nactvar,At(e)};e.exports.Dyndata=class{constructor(){this.actvar={arr:[],n:NaN,size:NaN},this.gt=new Qe,this.label=new Qe}},e.exports.expkind=Ye,e.exports.expdesc=$e,e.exports.luaY_parser=function(e,t,n,a,r,i){let l=new be.LexState,s=new We,o=ge.luaF_newLclosure(e,1);return pe.luaD_inctop(e),e.stack[e.top-1].setclLvalue(o),l.h=je.luaH_new(e),pe.luaD_inctop(e),e.stack[e.top-1].sethvalue(l.h),s.f=o.p=new He(e),s.f.source=Ne(e,r),l.buff=n,l.dyd=a,a.actvar.n=a.gt.n=a.label.n=0,be.luaX_setinput(e,l,t,s.f.source,i),function(e,t){let n=new qe,a=new $e;xt(e,t,n),t.f.is_vararg=!0,ut(a,Ye.VLOCAL,0),pt(t,e.envn,a),be.luaX_next(e),Ut(e),rt(e,Ke.TK_EOS),Mt(e)}(l,s),Ae(!s.prev&&1===s.nups&&!l.fs),Ae(0===a.actvar.n&&0===a.gt.n&&0===a.label.n),delete e.stack[--e.top],o},e.exports.vkisinreg=function(e){return e===Ye.VNONRELOC||e===Ye.VLOCAL}},function(e,t,n){"use strict";const{LUAL_BUFFERSIZE:a}=n(17),{LUA_ERRERR:r,LUA_MULTRET:i,LUA_REGISTRYINDEX:l,LUA_SIGNATURE:s,LUA_TBOOLEAN:o,LUA_TLIGHTUSERDATA:u,LUA_TNIL:c,LUA_TNONE:d,LUA_TNUMBER:h,LUA_TSTRING:f,LUA_TTABLE:_,LUA_VERSION_NUM:m,lua_Debug:p,lua_absindex:g,lua_atpanic:b,lua_call:w,lua_checkstack:v,lua_concat:A,lua_copy:L,lua_createtable:y,lua_error:S,lua_getfield:T,lua_getinfo:E,lua_getmetatable:x,lua_getstack:k,lua_gettop:M,lua_insert:I,lua_isinteger:U,lua_isnil:P,lua_isnumber:R,lua_isstring:O,lua_istable:C,lua_len:B,lua_load:F,lua_newstate:D,lua_newtable:G,lua_next:N,lua_pcall:V,lua_pop:j,lua_pushboolean:H,lua_pushcclosure:K,lua_pushcfunction:z,lua_pushfstring:X,lua_pushinteger:q,lua_pushliteral:Y,lua_pushlstring:$,lua_pushnil:W,lua_pushstring:Z,lua_pushvalue:J,lua_pushvfstring:Q,lua_rawequal:ee,lua_rawget:te,lua_rawgeti:ne,lua_rawlen:ae,lua_rawseti:re,lua_remove:ie,lua_setfield:le,lua_setglobal:se,lua_setmetatable:oe,lua_settop:ue,lua_toboolean:ce,lua_tointeger:de,lua_tointegerx:he,lua_tojsstring:fe,lua_tolstring:_e,lua_tonumber:me,lua_tonumberx:pe,lua_topointer:ge,lua_tostring:be,lua_touserdata:we,lua_type:ve,lua_typename:Ae,lua_version:Le}=n(43),{from_userstring:ye,luastring_eq:Se,to_luastring:Te,to_uristring:Ee}=n(121),xe=r+1,ke=Te("_LOADED"),Me=Te("_PRELOAD"),Ie=Te("FILE*"),Ue=Te("__name"),Pe=Te("__tostring"),Re=new Uint8Array(0);class Oe{constructor(){this.L=null,this.b=Re,this.n=0}}const Ce=function(e,t,n){if(0===n||!C(e,-1))return 0;for(W(e);N(e,-2);){if(ve(e,-2)===f){if(ee(e,t,-1))return j(e,1),1;if(Ce(e,t,n-1))return ie(e,-2),Y(e,"."),I(e,-2),A(e,3),1}j(e,1)}return 0},Be=function(e,t){let n=M(e);if(E(e,Te("f"),t),T(e,l,ke),Ce(e,n+1,2)){let t=be(e,-1);return 95===t[0]&&71===t[1]&&46===t[2]&&(Z(e,t.subarray(3)),ie(e,-2)),L(e,-1,n+1),j(e,2),1}return ue(e,n),0},Fe=function(e,t){Be(e,t)?(X(e,Te("function '%s'"),be(e,-1)),ie(e,-2)):0!==t.namewhat.length?X(e,Te("%s '%s'"),t.namewhat,t.name):t.what&&109===t.what[0]?Y(e,"main chunk"):t.what&&76===t.what[0]?X(e,Te("function <%s:%d>"),t.short_src,t.linedefined):Y(e,"?")},De=function(e){let t="PANIC: unprotected error in call to Lua API ("+fe(e,-1)+")";throw new Error(t)},Ge=function(e,t,n){let a=new p;return k(e,0,a)?(E(e,Te("n"),a),Se(a.namewhat,Te("method"))&&0===--t?je(e,Te("calling '%s' on bad self (%s)"),a.name,n):(null===a.name&&(a.name=Be(e,a)?be(e,-1):Te("?")),je(e,Te("bad argument #%d to '%s' (%s)"),t,a.name,n))):je(e,Te("bad argument #%d (%s)"),t,n)},Ne=function(e,t,n){let a;a=dt(e,t,Ue)===f?be(e,-1):ve(e,t)===u?Te("light userdata",!0):qe(e,t);let r=X(e,Te("%s expected, got %s"),n,a);return Ge(e,t,r)},Ve=function(e,t){let n=new p;k(e,t,n)&&(E(e,Te("Sl",!0),n),n.currentline>0)?X(e,Te("%s:%d: "),n.short_src,n.currentline):Z(e,Te(""))},je=function(e,t,...n){return Ve(e,1),Q(e,t,n),A(e,2),S(e)},He=function(e,t,n,a){if(t)return H(e,1),1;{let t,r;return W(e),a?(t=a.message,r=-a.errno):(t="Success",r=0),n?X(e,Te("%s: %s"),n,Te(t)):Z(e,Te(t)),q(e,r),3}},Ke=function(e,t){return T(e,l,t)},ze=function(e,t,n){let a=we(e,t);return null!==a&&x(e,t)?(Ke(e,n),ee(e,-1,-2)||(a=null),j(e,2),a):null},Xe=function(e,t,n){Ne(e,t,Ae(e,n))},qe=function(e,t){return Ae(e,ve(e,t))},Ye=function(e,t){let n=_e(e,t);return null==n&&Xe(e,t,f),n},$e=Ye,We=function(e,t,n){return ve(e,t)<=0?null===n?null:ye(n):Ye(e,t)},Ze=We,Je=function(e,t){let n=pe(e,t);return!1===n&&Xe(e,t,h),n},Qe=function(e,t){let n=he(e,t);return!1===n&&function(e,t){R(e,t)?Ge(e,t,Te("number has no integer representation",!0)):Xe(e,t,h)}(e,t),n},et=function(e,t){let n=e.n+t;if(e.b.length<n){let t=Math.max(2*e.b.length,n),a=new Uint8Array(t);a.set(e.b),e.b=a}return e.b.subarray(e.n,n)},tt=function(e,t){t.L=e,t.b=Re},nt=function(e,t,n){if(n>0){t=ye(t),et(e,n).set(t.subarray(0,n)),it(e,n)}},at=function(e,t){t=ye(t),nt(e,t,t.length)},rt=function(e){$(e.L,e.b,e.n),e.n=0,e.b=Re},it=function(e,t){e.n+=t},lt=function(e,t,n,a){return ve(e,n)<=0?a:t(e,n)},st=function(e,t){let n=t.string;return t.string=null,n},ot=function(e,t,n,a,r){return F(e,st,{string:t},a,r)},ut=function(e,t,n,a){return ot(e,t,0,a,null)},ct=function(e,t){return ut(e,t,t.length,t)},dt=function(e,t,n){if(x(e,t)){Z(e,n);let t=te(e,-2);return t===c?j(e,2):ie(e,-2),t}return c},ht=function(e,t,n){return t=g(e,t),dt(e,t,n)!==c&&(J(e,t),w(e,1,1),!0)},ft=Te("%I"),_t=Te("%f"),mt=function(e,t,n){var a=n>>>0,r=t.length,i=e.length+1-r;e:for(;a<i;a++){for(let n=0;n<r;n++)if(e[a+n]!==t[n])continue e;return a}return-1},pt=function(e,t,n){return T(e,t,n)===_||(j(e,1),t=g(e,t),G(e),J(e,-1),le(e,t,n),!1)},gt=function(e,t,n){bt(e,n,Te("too many upvalues",!0));for(let a in t){for(let t=0;t<n;t++)J(e,-n);K(e,t[a],n),le(e,-(n+2),Te(a))}j(e,n)},bt=function(e,t,n){v(e,t)||(n?je(e,Te("stack overflow (%s)"),n):je(e,Te("stack overflow",!0)))},wt=function(e,t,n,a){let r=a.message,i=be(e,n).subarray(1);return X(e,Te("cannot %s %s: %s"),Te(t),i,Te(r)),ie(e,n),xe};let vt;const At=[239,187,191],Lt=function(e){let t=function(e){let t;e.n=0;let n=0;do{if(t=vt(e),null===t||t!==At[n])return t;n++,e.buff[e.n++]=t}while(n<At.length);return e.n=0,vt(e)}(e);if(35===t){do{t=vt(e)}while(t&&10!==t);return{skipped:!0,c:vt(e)}}return{skipped:!1,c:t}};let yt;{class e{constructor(){this.n=NaN,this.f=null,this.buff=new Uint8Array(1024),this.pos=0,this.err=void 0}}const t=function(e,t){let n=t;if(null!==n.f&&n.n>0){let e=n.n;return n.n=0,n.f=n.f.subarray(n.pos),n.buff.subarray(0,e)}let a=n.f;return n.f=null,a};vt=function(e){return e.pos<e.f.length?e.f[e.pos++]:null},yt=function(n,a,r){let i=new e,l=M(n)+1;if(null===a)throw new Error("Can't read stdin in the browser");{X(n,Te("@%s"),a);let e=Ee(a),t=new XMLHttpRequest;if(t.open("GET",e,!1),"undefined"==typeof window&&(t.responseType="arraybuffer"),t.send(),!(t.status>=200&&t.status<=299))return i.err=t.status,wt(n,"open",l,{message:`${t.status}: ${t.statusText}`});"string"==typeof t.response?i.f=Te(t.response):i.f=new Uint8Array(t.response)}let o=Lt(i);o.c===s[0]&&a||o.skipped&&(i.buff[i.n++]=10),null!==o.c&&(i.buff[i.n++]=o.c);let u=F(n,t,i,be(n,-1),r),c=i.err;return c?(ue(n,l),wt(n,"read",l,c)):(ie(n,l),u)}}const St=function(e,t){return yt(e,t,null)},Tt=function(e,t,n){let a=Le(e);72!=n&&je(e,Te("core and library have incompatible numeric types")),a!=Le(null)?je(e,Te("multiple Lua VMs detected")):a!==t&&je(e,Te("version mismatch: app. needs %f, Lua core provides %f"),t,a)};e.exports.LUA_ERRFILE=xe,e.exports.LUA_FILEHANDLE=Ie,e.exports.LUA_LOADED_TABLE=ke,e.exports.LUA_NOREF=-2,e.exports.LUA_PRELOAD_TABLE=Me,e.exports.LUA_REFNIL=-1,e.exports.luaL_Buffer=Oe,e.exports.luaL_addchar=function(e,t){et(e,1),e.b[e.n++]=t},e.exports.luaL_addlstring=nt,e.exports.luaL_addsize=it,e.exports.luaL_addstring=at,e.exports.luaL_addvalue=function(e){let t=e.L,n=be(t,-1);nt(e,n,n.length),j(t,1)},e.exports.luaL_argcheck=function(e,t,n,a){t||Ge(e,n,a)},e.exports.luaL_argerror=Ge,e.exports.luaL_buffinit=tt,e.exports.luaL_buffinitsize=function(e,t,n){return tt(e,t),et(t,n)},e.exports.luaL_callmeta=ht,e.exports.luaL_checkany=function(e,t){ve(e,t)===d&&Ge(e,t,Te("value expected",!0))},e.exports.luaL_checkinteger=Qe,e.exports.luaL_checklstring=Ye,e.exports.luaL_checknumber=Je,e.exports.luaL_checkoption=function(e,t,n,a){let r=null!==n?Ze(e,t,n):$e(e,t);for(let e=0;a[e];e++)if(Se(a[e],r))return e;return Ge(e,t,X(e,Te("invalid option '%s'"),r))},e.exports.luaL_checkstack=bt,e.exports.luaL_checkstring=$e,e.exports.luaL_checktype=function(e,t,n){ve(e,t)!==n&&Xe(e,t,n)},e.exports.luaL_checkudata=function(e,t,n){let a=ze(e,t,n);return null===a&&Ne(e,t,n),a},e.exports.luaL_checkversion=function(e){Tt(e,m,72)},e.exports.luaL_checkversion_=Tt,e.exports.luaL_dofile=function(e,t){return St(e,t)||V(e,0,i,0)},e.exports.luaL_dostring=function(e,t){return ct(e,t)||V(e,0,i,0)},e.exports.luaL_error=je,e.exports.luaL_execresult=function(e,t){let n,a;if(null===t)return H(e,1),Y(e,"exit"),q(e,0),3;if(t.status)n="exit",a=t.status;else{if(!t.signal)return He(e,0,null,t);n="signal",a=t.signal}return W(e),Y(e,n),q(e,a),3},e.exports.luaL_fileresult=He,e.exports.luaL_getmetafield=dt,e.exports.luaL_getmetatable=Ke,e.exports.luaL_getsubtable=pt,e.exports.luaL_gsub=function(e,t,n,a){let r,i=new Oe;for(tt(e,i);(r=mt(t,n))>=0;)nt(i,t,r),at(i,a),t=t.subarray(r+n.length);return at(i,t),rt(i),be(e,-1)},e.exports.luaL_len=function(e,t){B(e,t);let n=he(e,-1);return!1===n&&je(e,Te("object length is not an integer",!0)),j(e,1),n},e.exports.luaL_loadbuffer=ut,e.exports.luaL_loadbufferx=ot,e.exports.luaL_loadfile=St,e.exports.luaL_loadfilex=yt,e.exports.luaL_loadstring=ct,e.exports.luaL_newlib=function(e,t){y(e),gt(e,t,0)},e.exports.luaL_newlibtable=function(e){y(e)},e.exports.luaL_newmetatable=function(e,t){return Ke(e,t)!==c?0:(j(e,1),y(e,0,2),Z(e,t),le(e,-2,Ue),J(e,-1),le(e,l,t),1)},e.exports.luaL_newstate=function(){let e=D();return e&&b(e,De),e},e.exports.luaL_opt=lt,e.exports.luaL_optinteger=function(e,t,n){return lt(e,Qe,t,n)},e.exports.luaL_optlstring=We,e.exports.luaL_optnumber=function(e,t,n){return lt(e,Je,t,n)},e.exports.luaL_optstring=Ze,e.exports.luaL_prepbuffer=function(e){return et(e,a)},e.exports.luaL_prepbuffsize=et,e.exports.luaL_pushresult=rt,e.exports.luaL_pushresultsize=function(e,t){it(e,t),rt(e)},e.exports.luaL_ref=function(e,t){let n;return P(e,-1)?(j(e,1),-1):(t=g(e,t),ne(e,t,0),n=de(e,-1),j(e,1),0!==n?(ne(e,t,n),re(e,t,0)):n=ae(e,t)+1,re(e,t,n),n)},e.exports.luaL_requiref=function(e,t,n,a){pt(e,l,ke),T(e,-1,t),ce(e,-1)||(j(e,1),z(e,n),Z(e,t),w(e,1,1),J(e,-1),le(e,-3,t)),ie(e,-2),a&&(J(e,-1),se(e,t))},e.exports.luaL_setfuncs=gt,e.exports.luaL_setmetatable=function(e,t){Ke(e,t),oe(e,-2)},e.exports.luaL_testudata=ze,e.exports.luaL_tolstring=function(e,t){if(ht(e,t,Pe))O(e,-1)||je(e,Te("'__tostring' must return a string"));else{switch(ve(e,t)){case h:U(e,t)?X(e,ft,de(e,t)):X(e,_t,me(e,t));break;case f:J(e,t);break;case o:Y(e,ce(e,t)?"true":"false");break;case c:Y(e,"nil");break;default:{let n=dt(e,t,Ue),a=n===f?be(e,-1):qe(e,t);X(e,Te("%s: %p"),a,ge(e,t)),n!==c&&ie(e,-2);break}}}return _e(e,-1)},e.exports.luaL_traceback=function(e,t,n,a){let r=new p,i=M(e),l=function(e){let t=new p,n=1,a=1;for(;k(e,a,t);)n=a,a*=2;for(;n<a;){let r=Math.floor((n+a)/2);k(e,r,t)?n=r+1:a=r}return a-1}(t),s=l-a>21?10:-1;for(n&&X(e,Te("%s\n"),n),bt(e,10,null),Y(e,"stack traceback:");k(t,a++,r);)0==s--?(Y(e,"\n\t..."),a=l-11+1):(E(t,Te("Slnt",!0),r),X(e,Te("\n\t%s:"),r.short_src),r.currentline>0&&Y(e,`${r.currentline}:`),Y(e," in "),Fe(e,r),r.istailcall&&Y(e,"\n\t(...tail calls..)"),A(e,M(e)-i));A(e,M(e)-i)},e.exports.luaL_typename=qe,e.exports.luaL_unref=function(e,t,n){n>=0&&(t=g(e,t),ne(e,t,0),re(e,t,n),q(e,n),re(e,t,0))},e.exports.luaL_where=Ve,e.exports.lua_writestringerror=function(){for(let e=0;e<arguments.length;e++){let t=arguments[e];do{let e=/([^\n]*)\n?([\d\D]*)/.exec(t);console.error(e[1]),t=e[2]}while(""!==t)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(43),r=n(124),i=n(430);function l(e,t){let n=r.luaL_checkinteger(t,1);return a.lua_pushlightuserdata(t,e.constantHandles.races[n]),1}function s(e,t){let n=r.luaL_checkinteger(t,1);return a.lua_pushlightuserdata(t,e.constantHandles.allianceTypes[n]),1}function o(e,t){let n=r.luaL_checkinteger(t,1);return a.lua_pushlightuserdata(t,e.constantHandles.racePrefs[n]),1}function u(e,t){let n=r.luaL_checkinteger(t,1);return a.lua_pushlightuserdata(t,e.constantHandles.gameStates[n]),1}function c(e,t){let n=r.luaL_checkinteger(t,1);return a.lua_pushlightuserdata(t,e.constantHandles.gameStates[n]),1}function d(e,t){let n=r.luaL_checkinteger(t,1);return a.lua_pushlightuserdata(t,e.constantHandles.playerStates[n]),1}function h(e,t){let n=r.luaL_checkinteger(t,1);return a.lua_pushlightuserdata(t,e.constantHandles.playerScores[n]),1}function f(e,t){let n=r.luaL_checkinteger(t,1);return a.lua_pushlightuserdata(t,e.constantHandles.playerGameResults[n]),1}function _(e,t){let n=r.luaL_checkinteger(t,1);return a.lua_pushlightuserdata(t,e.constantHandles.unitStates[n]),1}function m(e,t){let n=r.luaL_checkinteger(t,1);return a.lua_pushlightuserdata(t,e.constantHandles.aiDifficulties[n]),1}function p(e,t){let n=r.luaL_checkinteger(t,1);return a.lua_pushlightuserdata(t,e.constantHandles.events[n]),1}function g(e,t){let n=r.luaL_checkinteger(t,1);return a.lua_pushlightuserdata(t,e.constantHandles.events[n]),1}function b(e,t){let n=r.luaL_checkinteger(t,1);return a.lua_pushlightuserdata(t,e.constantHandles.events[n]),1}function w(e,t){let n=r.luaL_checkinteger(t,1);return a.lua_pushlightuserdata(t,e.constantHandles.events[n]),1}function v(e,t){let n=r.luaL_checkinteger(t,1);return a.lua_pushlightuserdata(t,e.constantHandles.events[n]),1}function A(e,t){let n=r.luaL_checkinteger(t,1);return a.lua_pushlightuserdata(t,e.constantHandles.events[n]),1}function L(e,t){let n=r.luaL_checkinteger(t,1);return a.lua_pushlightuserdata(t,e.constantHandles.limitOps[n]),1}function y(e,t){let n=r.luaL_checkinteger(t,1);return a.lua_pushlightuserdata(t,e.constantHandles.unitTypes[n]),1}function S(e,t){let n=r.luaL_checkinteger(t,1);return a.lua_pushlightuserdata(t,e.constantHandles.gameSpeeds[n]),1}function T(e,t){let n=r.luaL_checkinteger(t,1);return a.lua_pushlightuserdata(t,e.constantHandles.placements[n]),1}function E(e,t){let n=r.luaL_checkinteger(t,1);return a.lua_pushlightuserdata(t,e.constantHandles.startLocPrios[n]),1}function x(e,t){let n=r.luaL_checkinteger(t,1);return a.lua_pushlightuserdata(t,e.constantHandles.gameDifficulties[n]),1}function k(e,t){let n=r.luaL_checkinteger(t,1);return a.lua_pushlightuserdata(t,e.constantHandles.gameTypes[n]),1}function M(e,t){let n=r.luaL_checkinteger(t,1);return a.lua_pushlightuserdata(t,e.constantHandles.mapFlags[n]),1}function I(e,t){r.luaL_checkinteger(t,1);return console.warn("ConvertMapVisibility used, but the implementation is unknown"),a.lua_pushnil(t),1}function U(e,t){r.luaL_checkinteger(t,1);return console.warn("ConvertMapSetting used, but the implementation is unknown"),a.lua_pushnil(t),1}function P(e,t){let n=r.luaL_checkinteger(t,1);return a.lua_pushlightuserdata(t,e.constantHandles.mapDensities[n]),1}function R(e,t){let n=r.luaL_checkinteger(t,1);return a.lua_pushlightuserdata(t,e.constantHandles.mapControls[n]),1}function O(e,t){let n=r.luaL_checkinteger(t,1);return a.lua_pushlightuserdata(t,e.constantHandles.playerColors[n]),1}function C(e,t){let n=r.luaL_checkinteger(t,1);return a.lua_pushlightuserdata(t,e.constantHandles.playerSlotStates[n]),1}function B(e,t){let n=r.luaL_checkinteger(t,1);return a.lua_pushlightuserdata(t,e.constantHandles.volumeGroups[n]),1}function F(e,t){let n=r.luaL_checkinteger(t,1);return a.lua_pushlightuserdata(t,e.constantHandles.cameraFields[n]),1}function D(e,t){let n=r.luaL_checkinteger(t,1);return a.lua_pushlightuserdata(t,e.constantHandles.blendModes[n]),1}function G(e,t){let n=r.luaL_checkinteger(t,1);return a.lua_pushlightuserdata(t,e.constantHandles.rarityControls[n]),1}function N(e,t){let n=r.luaL_checkinteger(t,1);return a.lua_pushlightuserdata(t,e.constantHandles.texMapFlags[n]),1}function V(e,t){let n=r.luaL_checkinteger(t,1);return a.lua_pushlightuserdata(t,e.constantHandles.fogStates[n]),1}function j(e,t){let n=r.luaL_checkinteger(t,1);return a.lua_pushlightuserdata(t,e.constantHandles.effectTypes[n]),1}function H(e,t){let n=r.luaL_checkinteger(t,1);return a.lua_pushlightuserdata(t,e.constantHandles.versions[n]),1}function K(e,t){let n=r.luaL_checkinteger(t,1);return a.lua_pushlightuserdata(t,e.constantHandles.itemTypes[n]),1}function z(e,t){let n=r.luaL_checkinteger(t,1);return a.lua_pushlightuserdata(t,e.constantHandles.attackTypes[n]),1}function X(e,t){let n=r.luaL_checkinteger(t,1);return a.lua_pushlightuserdata(t,e.constantHandles.damageTypes[n]),1}function q(e,t){let n=r.luaL_checkinteger(t,1);return a.lua_pushlightuserdata(t,e.constantHandles.weaponTypes[n]),1}function Y(e,t){let n=r.luaL_checkinteger(t,1);return a.lua_pushlightuserdata(t,e.constantHandles.soundTypes[n]),1}function $(e,t){let n=r.luaL_checkinteger(t,1);return a.lua_pushlightuserdata(t,e.constantHandles.pathingTypes[n]),1}function W(e,t){let n=r.luaL_checkinteger(t,1);return a.lua_pushlightuserdata(t,e.constantHandles.mouseButtonTypes[n]),1}function Z(e,t){r.luaL_checkstring(t,1);return console.warn("OrderId was called but is not implemented :("),a.lua_pushinteger(t,0),1}function J(e,t){r.luaL_checkinteger(t,1);return console.warn("OrderId2String was called but is not implemented :("),a.lua_pushstring(t,""),1}function Q(e,t){r.luaL_checkstring(t,1);return console.warn("UnitId was called but is not implemented :("),a.lua_pushinteger(t,0),1}function ee(e,t){r.luaL_checkinteger(t,1);return console.warn("UnitId2String was called but is not implemented :("),a.lua_pushstring(t,""),1}function te(e,t){r.luaL_checkstring(t,1);return console.warn("AbilityId was called but is not implemented :("),a.lua_pushinteger(t,0),1}function ne(e,t){r.luaL_checkinteger(t,1);return console.warn("AbilityId2String was called but is not implemented :("),a.lua_pushstring(t,""),1}function ae(e,t){r.luaL_checkinteger(t,1);return console.warn("GetObjectName was called but is not implemented :("),a.lua_pushstring(t,""),1}function re(e,t){return a.lua_pushinteger(t,28),1}function ie(e,t){return a.lua_pushinteger(t,24),1}function le(e,t){return a.lua_pushinteger(t,25),1}function se(e,t){return a.lua_pushinteger(t,24),1}function oe(e,t){return a.lua_pushinteger(t,26),1}function ue(e,t){return a.lua_pushinteger(t,27),1}function ce(e,t){let n=r.luaL_checknumber(t,1);return a.lua_pushnumber(t,n*(Math.PI/180)),1}function de(e,t){let n=r.luaL_checknumber(t,1);return a.lua_pushnumber(t,n*(180/Math.PI)),1}function he(e,t){let n=r.luaL_checknumber(t,1);return a.lua_pushnumber(t,Math.sin(n)),1}function fe(e,t){let n=r.luaL_checknumber(t,1);return a.lua_pushnumber(t,Math.cos(n)),1}function _e(e,t){let n=r.luaL_checknumber(t,1);return a.lua_pushnumber(t,Math.tan(n)),1}function me(e,t){let n=r.luaL_checknumber(t,1);return a.lua_pushnumber(t,Math.asin(n)),1}function pe(e,t){let n=r.luaL_checknumber(t,1);return a.lua_pushnumber(t,Math.acos(n)),1}function ge(e,t){let n=r.luaL_checknumber(t,1);return a.lua_pushnumber(t,Math.atan(n)),1}function be(e,t){let n=r.luaL_checknumber(t,1),i=r.luaL_checknumber(t,2);return a.lua_pushnumber(t,Math.atan2(n,i)),1}function we(e,t){let n=r.luaL_checknumber(t,1);return a.lua_pushnumber(t,Math.sqrt(n)),1}function ve(e,t){let n=r.luaL_checknumber(t,1),i=r.luaL_checknumber(t,2);return a.lua_pushnumber(t,Math.pow(n,i)),1}function Ae(e,t){let n=r.luaL_checkinteger(t,1);return a.lua_pushnumber(t,n),1}function Le(e,t){let n=r.luaL_checknumber(t,1);return a.lua_pushinteger(t,0|n),1}function ye(e,t){r.luaL_checkinteger(t,1);return console.warn("I2S was called but is not implemented :("),a.lua_pushstring(t,""),1}function Se(e,t){r.luaL_checknumber(t,1);return console.warn("R2S was called but is not implemented :("),a.lua_pushstring(t,""),1}function Te(e,t){r.luaL_checknumber(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3);return console.warn("R2SW was called but is not implemented :("),a.lua_pushstring(t,""),1}function Ee(e,t){r.luaL_checkstring(t,1);return console.warn("S2I was called but is not implemented :("),a.lua_pushinteger(t,0),1}function xe(e,t){r.luaL_checkstring(t,1);return console.warn("S2R was called but is not implemented :("),a.lua_pushnumber(t,0),1}function ke(e,t){let n=a.lua_touserdata(t,1);return a.lua_pushinteger(t,n.handleId),1}function Me(e,t){r.luaL_checkstring(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3);return console.warn("SubString was called but is not implemented :("),a.lua_pushstring(t,""),1}function Ie(e,t){r.luaL_checkstring(t,1);return console.warn("StringLength was called but is not implemented :("),a.lua_pushinteger(t,0),1}function Ue(e,t){r.luaL_checkstring(t,1),a.lua_toboolean(t,2);return console.warn("StringCase was called but is not implemented :("),a.lua_pushstring(t,""),1}function Pe(e,t){r.luaL_checkstring(t,1);return console.warn("StringHash was called but is not implemented :("),a.lua_pushinteger(t,0),1}function Re(e,t){r.luaL_checkstring(t,1);return console.warn("GetLocalizedString was called but is not implemented :("),a.lua_pushstring(t,""),1}function Oe(e,t){r.luaL_checkstring(t,1);return console.warn("GetLocalizedHotkey was called but is not implemented :("),a.lua_pushinteger(t,0),1}function Ce(e,t){r.luaL_checkstring(t,1);return console.warn("SetMapName was called but is not implemented :("),0}function Be(e,t){r.luaL_checkstring(t,1);return console.warn("SetMapDescription was called but is not implemented :("),0}function Fe(e,t){r.luaL_checkinteger(t,1);return console.warn("SetTeams was called but is not implemented :("),0}function De(e,t){r.luaL_checkinteger(t,1);return console.warn("SetPlayers was called but is not implemented :("),0}function Ge(e,t){let n=r.luaL_checkinteger(t,1),a=r.luaL_checknumber(t,2),l=r.luaL_checknumber(t,3);return e.startLocations[n]=e.addHandle(new i.JassLocation(a,l)),0}function Ne(e,t){r.luaL_checkinteger(t,1),a.lua_touserdata(t,2);return console.warn("DefineStartLocationLoc was called but is not implemented :("),0}function Ve(e,t){r.luaL_checkinteger(t,1),r.luaL_checkinteger(t,2);return console.warn("SetStartLocPrioCount was called but is not implemented :("),0}function je(e,t){r.luaL_checkinteger(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3),a.lua_touserdata(t,4);return console.warn("SetStartLocPrio was called but is not implemented :("),0}function He(e,t){r.luaL_checkinteger(t,1),r.luaL_checkinteger(t,2);return console.warn("GetStartLocPrioSlot was called but is not implemented :("),a.lua_pushinteger(t,0),1}function Ke(e,t){r.luaL_checkinteger(t,1),r.luaL_checkinteger(t,2);return console.warn("GetStartLocPrio was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function ze(e,t){a.lua_touserdata(t,1),a.lua_toboolean(t,2);return console.warn("SetGameTypeSupported was called but is not implemented :("),0}function Xe(e,t){a.lua_touserdata(t,1),a.lua_toboolean(t,2);return console.warn("SetMapFlag was called but is not implemented :("),0}function qe(e,t){a.lua_touserdata(t,1);return console.warn("SetGamePlacement was called but is not implemented :("),0}function Ye(e,t){a.lua_touserdata(t,1);return console.warn("SetGameSpeed was called but is not implemented :("),0}function $e(e,t){a.lua_touserdata(t,1);return console.warn("SetGameDifficulty was called but is not implemented :("),0}function We(e,t){a.lua_touserdata(t,1);return console.warn("SetResourceDensity was called but is not implemented :("),0}function Ze(e,t){a.lua_touserdata(t,1);return console.warn("SetCreatureDensity was called but is not implemented :("),0}function Je(e,t){return console.warn("GetTeams was called but is not implemented :("),a.lua_pushinteger(t,0),1}function Qe(e,t){return console.warn("GetPlayers was called but is not implemented :("),a.lua_pushinteger(t,0),1}function et(e,t){a.lua_touserdata(t,1);return console.warn("IsGameTypeSupported was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function tt(e,t){return console.warn("GetGameTypeSelected was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function nt(e,t){a.lua_touserdata(t,1);return console.warn("IsMapFlagSet was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function at(e,t){return console.warn("GetGamePlacement was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function rt(e,t){return console.warn("GetGameSpeed was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function it(e,t){return console.warn("GetGameDifficulty was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function lt(e,t){return console.warn("GetResourceDensity was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function st(e,t){return console.warn("GetCreatureDensity was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function ot(e,t){r.luaL_checkinteger(t,1);return console.warn("GetStartLocationX was called but is not implemented :("),a.lua_pushnumber(t,0),1}function ut(e,t){r.luaL_checkinteger(t,1);return console.warn("GetStartLocationY was called but is not implemented :("),a.lua_pushnumber(t,0),1}function ct(e,t){r.luaL_checkinteger(t,1);return console.warn("GetStartLocationLoc was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function dt(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2);return console.warn("SetPlayerTeam was called but is not implemented :("),0}function ht(e,t){let n=a.lua_touserdata(t,1),i=r.luaL_checkinteger(t,2);return n.startLocation=i,0}function ft(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2);return console.warn("ForcePlayerStartLocation was called but is not implemented :("),0}function _t(e,t){let n=a.lua_touserdata(t,1),r=a.lua_touserdata(t,2);return n.color=r,0}function mt(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2),a.lua_touserdata(t,3),a.lua_toboolean(t,4);return console.warn("SetPlayerAlliance was called but is not implemented :("),0}function pt(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2),a.lua_touserdata(t,3),r.luaL_checkinteger(t,4);return console.warn("SetPlayerTaxRate was called but is not implemented :("),0}function gt(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2);return console.warn("SetPlayerRacePreference was called but is not implemented :("),0}function bt(e,t){let n=a.lua_touserdata(t,1),r=a.lua_toboolean(t,2);return n.raceSelectable=r,0}function wt(e,t){let n=a.lua_touserdata(t,1),r=a.lua_touserdata(t,2);return n.controller=r,0}function vt(e,t){let n=a.lua_touserdata(t,1),i=r.luaL_checkstring(t,2);return n.name=i,0}function At(e,t){a.lua_touserdata(t,1),a.lua_toboolean(t,2);return console.warn("SetPlayerOnScoreScreen was called but is not implemented :("),0}function Lt(e,t){a.lua_touserdata(t,1);return console.warn("GetPlayerTeam was called but is not implemented :("),a.lua_pushinteger(t,0),1}function yt(e,t){let n=a.lua_touserdata(t,1);return a.lua_pushinteger(t,n.startLocation),1}function St(e,t){let n=a.lua_touserdata(t,1);return a.lua_pushlightuserdata(t,n.color),1}function Tt(e,t){a.lua_touserdata(t,1);return console.warn("GetPlayerSelectable was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Et(e,t){let n=a.lua_touserdata(t,1);return a.lua_pushlightuserdata(t,n.controller),1}function xt(e,t){a.lua_touserdata(t,1);return console.warn("GetPlayerSlotState was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function kt(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2),a.lua_touserdata(t,3);return console.warn("GetPlayerTaxRate was called but is not implemented :("),a.lua_pushinteger(t,0),1}function Mt(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2);return console.warn("IsPlayerRacePrefSet was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function It(e,t){let n=a.lua_touserdata(t,1);return a.lua_pushstring(t,n.name),1}function Ut(e,t){return a.lua_pushlightuserdata(t,e.addHandle(new i.JassTimer)),1}function Pt(e,t){let n=a.lua_touserdata(t,1);return e.timers.delete(n),e.freeHandle(n),0}function Rt(e,t){let n=a.lua_touserdata(t,1),i=r.luaL_checknumber(t,2),l=a.lua_toboolean(t,3),s=r.luaL_ref(t,a.LUA_REGISTRYINDEX);return n.elapsed=0,n.timeout=i,n.periodic=l,n.handlerFunc=s,e.timers.add(n),0}function Ot(e,t){let n=a.lua_touserdata(t,1);return a.lua_pushnumber(t,n.elapsed),1}function Ct(e,t){let n=a.lua_touserdata(t,1);return a.lua_pushnumber(t,n.timeout-n.elapsed),1}function Bt(e,t){let n=a.lua_touserdata(t,1);return a.lua_pushnumber(t,n.timeout),1}function Ft(e,t){let n=a.lua_touserdata(t,1);return e.timers.delete(n),0}function Dt(e,t){let n=a.lua_touserdata(t,1);return e.timers.add(n),0}function Gt(e,t){let n=e.currentThread;return n&&n.expiredTimer?a.lua_pushlightuserdata(t,n.expiredTimer):a.lua_pushnil(t),1}function Nt(e,t){return a.lua_pushlightuserdata(t,e.addHandle(new i.JassGroup)),1}function Vt(e,t){let n=a.lua_touserdata(t,1);return e.freeHandle(n),0}function jt(e,t){let n=a.lua_touserdata(t,1),r=a.lua_touserdata(t,2);return n.units.add(r),0}function Ht(e,t){let n=a.lua_touserdata(t,1),r=a.lua_touserdata(t,2);return n.units.delete(r),0}function Kt(e,t){return a.lua_touserdata(t,1).units.clear(),0}function zt(e,t){a.lua_touserdata(t,1),r.luaL_checkstring(t,2),a.lua_touserdata(t,3);return console.warn("GroupEnumUnitsOfType was called but is not implemented :("),0}function Xt(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2),a.lua_touserdata(t,3);return console.warn("GroupEnumUnitsOfPlayer was called but is not implemented :("),0}function qt(e,t){a.lua_touserdata(t,1),r.luaL_checkstring(t,2),a.lua_touserdata(t,3),r.luaL_checkinteger(t,4);return console.warn("GroupEnumUnitsOfTypeCounted was called but is not implemented :("),0}function Yt(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2),a.lua_touserdata(t,3);return console.warn("GroupEnumUnitsInRect was called but is not implemented :("),0}function $t(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2),a.lua_touserdata(t,3),r.luaL_checkinteger(t,4);return console.warn("GroupEnumUnitsInRectCounted was called but is not implemented :("),0}function Wt(e,t){a.lua_touserdata(t,1),r.luaL_checknumber(t,2),r.luaL_checknumber(t,3),r.luaL_checknumber(t,4),a.lua_touserdata(t,5);return console.warn("GroupEnumUnitsInRange was called but is not implemented :("),0}function Zt(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2),r.luaL_checknumber(t,3),a.lua_touserdata(t,4);return console.warn("GroupEnumUnitsInRangeOfLoc was called but is not implemented :("),0}function Jt(e,t){a.lua_touserdata(t,1),r.luaL_checknumber(t,2),r.luaL_checknumber(t,3),r.luaL_checknumber(t,4),a.lua_touserdata(t,5),r.luaL_checkinteger(t,6);return console.warn("GroupEnumUnitsInRangeCounted was called but is not implemented :("),0}function Qt(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2),r.luaL_checknumber(t,3),a.lua_touserdata(t,4),r.luaL_checkinteger(t,5);return console.warn("GroupEnumUnitsInRangeOfLocCounted was called but is not implemented :("),0}function en(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2),a.lua_touserdata(t,3);return console.warn("GroupEnumUnitsSelected was called but is not implemented :("),0}function tn(e,t){a.lua_touserdata(t,1),r.luaL_checkstring(t,2);return console.warn("GroupImmediateOrder was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function nn(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2);return console.warn("GroupImmediateOrderById was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function an(e,t){a.lua_touserdata(t,1),r.luaL_checkstring(t,2),r.luaL_checknumber(t,3),r.luaL_checknumber(t,4);return console.warn("GroupPointOrder was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function rn(e,t){a.lua_touserdata(t,1),r.luaL_checkstring(t,2),a.lua_touserdata(t,3);return console.warn("GroupPointOrderLoc was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function ln(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checknumber(t,3),r.luaL_checknumber(t,4);return console.warn("GroupPointOrderById was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function sn(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),a.lua_touserdata(t,3);return console.warn("GroupPointOrderByIdLoc was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function on(e,t){a.lua_touserdata(t,1),r.luaL_checkstring(t,2),a.lua_touserdata(t,3);return console.warn("GroupTargetOrder was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function un(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),a.lua_touserdata(t,3);return console.warn("GroupTargetOrderById was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function cn(e,t){let n=a.lua_touserdata(t,1),i=r.luaL_ref(t,a.LUA_REGISTRYINDEX);for(let t of n.units)e.enumUnit=t,e.call(i);return e.enumUnit=null,r.luaL_unref(t,i),0}function dn(e,t){a.lua_touserdata(t,1);return console.warn("FirstOfGroup was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function hn(e,t){return a.lua_pushlightuserdata(t,e.addHandle(new i.JassForce)),1}function fn(e,t){let n=a.lua_touserdata(t,1);return e.freeHandle(n),0}function _n(e,t){let n=a.lua_touserdata(t,1),r=a.lua_touserdata(t,2);return n.players.add(r),0}function mn(e,t){let n=a.lua_touserdata(t,1),r=a.lua_touserdata(t,2);return n.players.delete(r),0}function pn(e,t){return a.lua_touserdata(t,1).players.clear(),0}function gn(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2);return console.warn("ForceEnumPlayers was called but is not implemented :("),0}function bn(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2),r.luaL_checkinteger(t,3);return console.warn("ForceEnumPlayersCounted was called but is not implemented :("),0}function wn(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2),a.lua_touserdata(t,3);return console.warn("ForceEnumAllies was called but is not implemented :("),0}function vn(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2),a.lua_touserdata(t,3);return console.warn("ForceEnumEnemies was called but is not implemented :("),0}function An(e,t){let n=a.lua_touserdata(t,1),i=r.luaL_ref(t,a.LUA_REGISTRYINDEX);for(let t of n.players)e.enumPlayer=t,e.call(i);return e.enumPlayer=null,r.luaL_unref(t,i),0}function Ln(e,t){r.luaL_checknumber(t,1),r.luaL_checknumber(t,2),r.luaL_checknumber(t,3),r.luaL_checknumber(t,4);return console.warn("Rect was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function yn(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2);return console.warn("RectFromLoc was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Sn(e,t){a.lua_touserdata(t,1);return console.warn("RemoveRect was called but is not implemented :("),0}function Tn(e,t){a.lua_touserdata(t,1),r.luaL_checknumber(t,2),r.luaL_checknumber(t,3),r.luaL_checknumber(t,4),r.luaL_checknumber(t,5);return console.warn("SetRect was called but is not implemented :("),0}function En(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2),a.lua_touserdata(t,3);return console.warn("SetRectFromLoc was called but is not implemented :("),0}function xn(e,t){a.lua_touserdata(t,1),r.luaL_checknumber(t,2),r.luaL_checknumber(t,3);return console.warn("MoveRectTo was called but is not implemented :("),0}function kn(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2);return console.warn("MoveRectToLoc was called but is not implemented :("),0}function Mn(e,t){a.lua_touserdata(t,1);return console.warn("GetRectCenterX was called but is not implemented :("),a.lua_pushnumber(t,0),1}function In(e,t){a.lua_touserdata(t,1);return console.warn("GetRectCenterY was called but is not implemented :("),a.lua_pushnumber(t,0),1}function Un(e,t){a.lua_touserdata(t,1);return console.warn("GetRectMinX was called but is not implemented :("),a.lua_pushnumber(t,0),1}function Pn(e,t){a.lua_touserdata(t,1);return console.warn("GetRectMinY was called but is not implemented :("),a.lua_pushnumber(t,0),1}function Rn(e,t){a.lua_touserdata(t,1);return console.warn("GetRectMaxX was called but is not implemented :("),a.lua_pushnumber(t,0),1}function On(e,t){a.lua_touserdata(t,1);return console.warn("GetRectMaxY was called but is not implemented :("),a.lua_pushnumber(t,0),1}function Cn(e,t){return console.warn("CreateRegion was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Bn(e,t){a.lua_touserdata(t,1);return console.warn("RemoveRegion was called but is not implemented :("),0}function Fn(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2);return console.warn("RegionAddRect was called but is not implemented :("),0}function Dn(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2);return console.warn("RegionClearRect was called but is not implemented :("),0}function Gn(e,t){a.lua_touserdata(t,1),r.luaL_checknumber(t,2),r.luaL_checknumber(t,3);return console.warn("RegionAddCell was called but is not implemented :("),0}function Nn(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2);return console.warn("RegionAddCellAtLoc was called but is not implemented :("),0}function Vn(e,t){a.lua_touserdata(t,1),r.luaL_checknumber(t,2),r.luaL_checknumber(t,3);return console.warn("RegionClearCell was called but is not implemented :("),0}function jn(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2);return console.warn("RegionClearCellAtLoc was called but is not implemented :("),0}function Hn(e,t){r.luaL_checknumber(t,1),r.luaL_checknumber(t,2);return console.warn("Location was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Kn(e,t){a.lua_touserdata(t,1);return console.warn("RemoveLocation was called but is not implemented :("),0}function zn(e,t){a.lua_touserdata(t,1),r.luaL_checknumber(t,2),r.luaL_checknumber(t,3);return console.warn("MoveLocation was called but is not implemented :("),0}function Xn(e,t){a.lua_touserdata(t,1);return console.warn("GetLocationX was called but is not implemented :("),a.lua_pushnumber(t,0),1}function qn(e,t){a.lua_touserdata(t,1);return console.warn("GetLocationY was called but is not implemented :("),a.lua_pushnumber(t,0),1}function Yn(e,t){a.lua_touserdata(t,1);return console.warn("GetLocationZ was called but is not implemented :("),a.lua_pushnumber(t,0),1}function $n(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2);return console.warn("IsUnitInRegion was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Wn(e,t){a.lua_touserdata(t,1),r.luaL_checknumber(t,2),r.luaL_checknumber(t,3);return console.warn("IsPointInRegion was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Zn(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2);return console.warn("IsLocationInRegion was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Jn(e,t){return console.warn("GetWorldBounds was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Qn(e,t){return a.lua_pushlightuserdata(t,e.addHandle(new i.JassTrigger)),1}function ea(e,t){let n=a.lua_touserdata(t,1);return e.triggers.delete(n),e.freeHandle(n),0}function ta(e,t){a.lua_touserdata(t,1);return console.warn("ResetTrigger was called but is not implemented :("),0}function na(e,t){a.lua_touserdata(t,1);return console.warn("EnableTrigger was called but is not implemented :("),0}function aa(e,t){a.lua_touserdata(t,1);return console.warn("DisableTrigger was called but is not implemented :("),0}function ra(e,t){a.lua_touserdata(t,1);return console.warn("IsTriggerEnabled was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function ia(e,t){a.lua_touserdata(t,1),a.lua_toboolean(t,2);return console.warn("TriggerWaitOnSleeps was called but is not implemented :("),0}function la(e,t){a.lua_touserdata(t,1);return console.warn("IsTriggerWaitOnSleeps was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function sa(e,t){return a.lua_pushlightuserdata(t,e.filterUnit),1}function oa(e,t){return a.lua_pushlightuserdata(t,e.enumUnit),1}function ua(e,t){return console.warn("GetFilterDestructable was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function ca(e,t){return console.warn("GetEnumDestructable was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function da(e,t){return console.warn("GetFilterItem was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function ha(e,t){return console.warn("GetEnumItem was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function fa(e,t){return console.warn("GetFilterPlayer was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function _a(e,t){return a.lua_pushlightuserdata(t,e.enumPlayer),1}function ma(e,t){let n=e.currentThread;return n&&n.triggeringTrigger?a.lua_pushlightuserdata(t,n.triggeringTrigger):a.lua_pushnil(t),1}function pa(e,t){return console.warn("GetTriggerEventId was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function ga(e,t){a.lua_touserdata(t,1);return console.warn("GetTriggerEvalCount was called but is not implemented :("),a.lua_pushinteger(t,0),1}function ba(e,t){a.lua_touserdata(t,1);return console.warn("GetTriggerExecCount was called but is not implemented :("),a.lua_pushinteger(t,0),1}function wa(e,t){r.luaL_checkstring(t,1);return console.warn("ExecuteFunc was called but is not implemented :("),0}function va(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2);return console.warn("And was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Aa(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2);return console.warn("Or was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function La(e,t){a.lua_touserdata(t,1);return console.warn("Not was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function ya(e,t){r.luaL_ref(t,a.LUA_REGISTRYINDEX);return console.warn("Condition was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Sa(e,t){a.lua_touserdata(t,1);return console.warn("DestroyCondition was called but is not implemented :("),0}function Ta(e,t){r.luaL_ref(t,a.LUA_REGISTRYINDEX);return console.warn("Filter was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Ea(e,t){a.lua_touserdata(t,1);return console.warn("DestroyFilter was called but is not implemented :("),0}function xa(e,t){a.lua_touserdata(t,1);return console.warn("DestroyBoolExpr was called but is not implemented :("),0}function ka(e,t){a.lua_touserdata(t,1),r.luaL_checkstring(t,2),a.lua_touserdata(t,3),r.luaL_checknumber(t,4);return console.warn("TriggerRegisterVariableEvent was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Ma(e,t){a.lua_touserdata(t,1),r.luaL_checknumber(t,2),a.lua_toboolean(t,3);return console.warn("TriggerRegisterTimerEvent was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Ia(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2);return console.warn("TriggerRegisterTimerExpireEvent was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Ua(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2),a.lua_touserdata(t,3),r.luaL_checknumber(t,4);return console.warn("TriggerRegisterGameStateEvent was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Pa(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2);return console.warn("TriggerRegisterDialogEvent was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Ra(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2);return console.warn("TriggerRegisterDialogButtonEvent was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Oa(e,t){return console.warn("GetEventGameState was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Ca(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2);return console.warn("TriggerRegisterGameEvent was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Ba(e,t){return console.warn("GetWinningPlayer was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Fa(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2),a.lua_touserdata(t,3);return console.warn("TriggerRegisterEnterRegion was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Da(e,t){return console.warn("GetTriggeringRegion was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Ga(e,t){return console.warn("GetEnteringUnit was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Na(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2),a.lua_touserdata(t,3);return console.warn("TriggerRegisterLeaveRegion was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Va(e,t){return console.warn("GetLeavingUnit was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function ja(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2);return console.warn("TriggerRegisterTrackableHitEvent was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Ha(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2);return console.warn("TriggerRegisterTrackableTrackEvent was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Ka(e,t){return console.warn("GetTriggeringTrackable was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function za(e,t){return console.warn("GetClickedButton was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Xa(e,t){return console.warn("GetClickedDialog was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function qa(e,t){return console.warn("GetTournamentFinishSoonTimeRemaining was called but is not implemented :("),a.lua_pushnumber(t,0),1}function Ya(e,t){return console.warn("GetTournamentFinishNowRule was called but is not implemented :("),a.lua_pushinteger(t,0),1}function $a(e,t){return console.warn("GetTournamentFinishNowPlayer was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Wa(e,t){a.lua_touserdata(t,1);return console.warn("GetTournamentScore was called but is not implemented :("),a.lua_pushinteger(t,0),1}function Za(e,t){return console.warn("GetSaveBasicFilename was called but is not implemented :("),a.lua_pushstring(t,""),1}function Ja(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2),a.lua_touserdata(t,3);return console.warn("TriggerRegisterPlayerEvent was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Qa(e,t){return console.warn("GetTriggerPlayer was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function er(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2),a.lua_touserdata(t,3),a.lua_touserdata(t,4);return console.warn("TriggerRegisterPlayerUnitEvent was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function tr(e,t){return console.warn("GetLevelingUnit was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function nr(e,t){return console.warn("GetLearningUnit was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function ar(e,t){return console.warn("GetLearnedSkill was called but is not implemented :("),a.lua_pushinteger(t,0),1}function rr(e,t){return console.warn("GetLearnedSkillLevel was called but is not implemented :("),a.lua_pushinteger(t,0),1}function ir(e,t){return console.warn("GetRevivableUnit was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function lr(e,t){return console.warn("GetRevivingUnit was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function sr(e,t){return console.warn("GetAttacker was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function or(e,t){return console.warn("GetRescuer was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function ur(e,t){return console.warn("GetDyingUnit was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function cr(e,t){return console.warn("GetKillingUnit was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function dr(e,t){return console.warn("GetDecayingUnit was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function hr(e,t){return console.warn("GetConstructingStructure was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function fr(e,t){return console.warn("GetCancelledStructure was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function _r(e,t){return console.warn("GetConstructedStructure was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function mr(e,t){return console.warn("GetResearchingUnit was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function pr(e,t){return console.warn("GetResearched was called but is not implemented :("),a.lua_pushinteger(t,0),1}function gr(e,t){return console.warn("GetTrainedUnitType was called but is not implemented :("),a.lua_pushinteger(t,0),1}function br(e,t){return console.warn("GetTrainedUnit was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function wr(e,t){return console.warn("GetDetectedUnit was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function vr(e,t){return console.warn("GetSummoningUnit was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Ar(e,t){return console.warn("GetSummonedUnit was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Lr(e,t){return console.warn("GetTransportUnit was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function yr(e,t){return console.warn("GetLoadedUnit was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Sr(e,t){return console.warn("GetSellingUnit was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Tr(e,t){return console.warn("GetSoldUnit was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Er(e,t){return console.warn("GetBuyingUnit was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function xr(e,t){return console.warn("GetSoldItem was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function kr(e,t){return console.warn("GetChangingUnit was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Mr(e,t){return console.warn("GetChangingUnitPrevOwner was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Ir(e,t){return console.warn("GetManipulatingUnit was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Ur(e,t){return console.warn("GetManipulatedItem was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Pr(e,t){return console.warn("GetOrderedUnit was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Rr(e,t){return console.warn("GetIssuedOrderId was called but is not implemented :("),a.lua_pushinteger(t,0),1}function Or(e,t){return console.warn("GetOrderPointX was called but is not implemented :("),a.lua_pushnumber(t,0),1}function Cr(e,t){return console.warn("GetOrderPointY was called but is not implemented :("),a.lua_pushnumber(t,0),1}function Br(e,t){return console.warn("GetOrderPointLoc was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Fr(e,t){return console.warn("GetOrderTarget was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Dr(e,t){return console.warn("GetOrderTargetDestructable was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Gr(e,t){return console.warn("GetOrderTargetItem was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Nr(e,t){return console.warn("GetOrderTargetUnit was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Vr(e,t){return console.warn("GetSpellAbilityUnit was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function jr(e,t){return console.warn("GetSpellAbilityId was called but is not implemented :("),a.lua_pushinteger(t,0),1}function Hr(e,t){return console.warn("GetSpellAbility was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Kr(e,t){return console.warn("GetSpellTargetLoc was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function zr(e,t){return console.warn("GetSpellTargetX was called but is not implemented :("),a.lua_pushnumber(t,0),1}function Xr(e,t){return console.warn("GetSpellTargetY was called but is not implemented :("),a.lua_pushnumber(t,0),1}function qr(e,t){return console.warn("GetSpellTargetDestructable was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Yr(e,t){return console.warn("GetSpellTargetItem was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function $r(e,t){return console.warn("GetSpellTargetUnit was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Wr(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2),a.lua_touserdata(t,3);return console.warn("TriggerRegisterPlayerAllianceChange was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Zr(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2),a.lua_touserdata(t,3),a.lua_touserdata(t,4),r.luaL_checknumber(t,5);return console.warn("TriggerRegisterPlayerStateEvent was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Jr(e,t){return console.warn("GetEventPlayerState was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Qr(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2),r.luaL_checkstring(t,3),a.lua_toboolean(t,4);return console.warn("TriggerRegisterPlayerChatEvent was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function ei(e,t){return console.warn("GetEventPlayerChatString was called but is not implemented :("),a.lua_pushstring(t,""),1}function ti(e,t){return console.warn("GetEventPlayerChatStringMatched was called but is not implemented :("),a.lua_pushstring(t,""),1}function ni(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2);return console.warn("TriggerRegisterDeathEvent was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function ai(e,t){let n=e.currentThread;return n&&n.triggerUnit?a.lua_pushlightuserdata(t,n.triggerUnit):a.lua_pushnil(t),1}function ri(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2),a.lua_touserdata(t,3),a.lua_touserdata(t,4),r.luaL_checknumber(t,5);return console.warn("TriggerRegisterUnitStateEvent was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function ii(e,t){return console.warn("GetEventUnitState was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function li(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2),a.lua_touserdata(t,3);return console.warn("TriggerRegisterUnitEvent was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function si(e,t){return console.warn("GetEventDamage was called but is not implemented :("),a.lua_pushnumber(t,0),1}function oi(e,t){return console.warn("GetEventDamageSource was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function ui(e,t){return console.warn("GetEventDetectingPlayer was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function ci(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2),a.lua_touserdata(t,3),a.lua_touserdata(t,4);return console.warn("TriggerRegisterFilterUnitEvent was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function di(e,t){return console.warn("GetEventTargetUnit was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function hi(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2),r.luaL_checknumber(t,3),a.lua_touserdata(t,4);return console.warn("TriggerRegisterUnitInRange was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function fi(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2);return console.warn("TriggerAddCondition was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function _i(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2);return console.warn("TriggerRemoveCondition was called but is not implemented :("),0}function mi(e,t){a.lua_touserdata(t,1);return console.warn("TriggerClearConditions was called but is not implemented :("),0}function pi(e,t){a.lua_touserdata(t,1),r.luaL_ref(t,a.LUA_REGISTRYINDEX);return console.warn("TriggerAddAction was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function gi(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2);return console.warn("TriggerRemoveAction was called but is not implemented :("),0}function bi(e,t){a.lua_touserdata(t,1);return console.warn("TriggerClearActions was called but is not implemented :("),0}function wi(e,t){let n=r.luaL_checknumber(t,1);return a.lua_pushnumber(t,n),a.lua_yield(t,1),0}function vi(e,t){a.lua_touserdata(t,1),r.luaL_checknumber(t,2);return console.warn("TriggerWaitForSound was called but is not implemented :("),0}function Ai(e,t){a.lua_touserdata(t,1);return console.warn("TriggerEvaluate was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Li(e,t){a.lua_touserdata(t,1);return console.warn("TriggerExecute was called but is not implemented :("),0}function yi(e,t){a.lua_touserdata(t,1);return console.warn("TriggerExecuteWait was called but is not implemented :("),0}function Si(e,t){return console.warn("TriggerSyncStart was called but is not implemented :("),0}function Ti(e,t){return console.warn("TriggerSyncReady was called but is not implemented :("),0}function Ei(e,t){a.lua_touserdata(t,1);return console.warn("GetWidgetLife was called but is not implemented :("),a.lua_pushnumber(t,0),1}function xi(e,t){a.lua_touserdata(t,1),r.luaL_checknumber(t,2);return console.warn("SetWidgetLife was called but is not implemented :("),0}function ki(e,t){a.lua_touserdata(t,1);return console.warn("GetWidgetX was called but is not implemented :("),a.lua_pushnumber(t,0),1}function Mi(e,t){a.lua_touserdata(t,1);return console.warn("GetWidgetY was called but is not implemented :("),a.lua_pushnumber(t,0),1}function Ii(e,t){return console.warn("GetTriggerWidget was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Ui(e,t){r.luaL_checkinteger(t,1),r.luaL_checknumber(t,2),r.luaL_checknumber(t,3),r.luaL_checknumber(t,4),r.luaL_checknumber(t,5),r.luaL_checkinteger(t,6);return console.warn("CreateDestructable was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Pi(e,t){r.luaL_checkinteger(t,1),r.luaL_checknumber(t,2),r.luaL_checknumber(t,3),r.luaL_checknumber(t,4),r.luaL_checknumber(t,5),r.luaL_checknumber(t,6),r.luaL_checkinteger(t,7);return console.warn("CreateDestructableZ was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Ri(e,t){r.luaL_checkinteger(t,1),r.luaL_checknumber(t,2),r.luaL_checknumber(t,3),r.luaL_checknumber(t,4),r.luaL_checknumber(t,5),r.luaL_checkinteger(t,6);return console.warn("CreateDeadDestructable was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Oi(e,t){r.luaL_checkinteger(t,1),r.luaL_checknumber(t,2),r.luaL_checknumber(t,3),r.luaL_checknumber(t,4),r.luaL_checknumber(t,5),r.luaL_checknumber(t,6),r.luaL_checkinteger(t,7);return console.warn("CreateDeadDestructableZ was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Ci(e,t){a.lua_touserdata(t,1);return console.warn("RemoveDestructable was called but is not implemented :("),0}function Bi(e,t){a.lua_touserdata(t,1);return console.warn("KillDestructable was called but is not implemented :("),0}function Fi(e,t){a.lua_touserdata(t,1),a.lua_toboolean(t,2);return console.warn("SetDestructableInvulnerable was called but is not implemented :("),0}function Di(e,t){a.lua_touserdata(t,1);return console.warn("IsDestructableInvulnerable was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Gi(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2),r.luaL_ref(t,a.LUA_REGISTRYINDEX);return console.warn("EnumDestructablesInRect was called but is not implemented :("),0}function Ni(e,t){a.lua_touserdata(t,1);return console.warn("GetDestructableTypeId was called but is not implemented :("),a.lua_pushinteger(t,0),1}function Vi(e,t){a.lua_touserdata(t,1);return console.warn("GetDestructableX was called but is not implemented :("),a.lua_pushnumber(t,0),1}function ji(e,t){a.lua_touserdata(t,1);return console.warn("GetDestructableY was called but is not implemented :("),a.lua_pushnumber(t,0),1}function Hi(e,t){a.lua_touserdata(t,1),r.luaL_checknumber(t,2);return console.warn("SetDestructableLife was called but is not implemented :("),0}function Ki(e,t){a.lua_touserdata(t,1);return console.warn("GetDestructableLife was called but is not implemented :("),a.lua_pushnumber(t,0),1}function zi(e,t){a.lua_touserdata(t,1),r.luaL_checknumber(t,2);return console.warn("SetDestructableMaxLife was called but is not implemented :("),0}function Xi(e,t){a.lua_touserdata(t,1);return console.warn("GetDestructableMaxLife was called but is not implemented :("),a.lua_pushnumber(t,0),1}function qi(e,t){a.lua_touserdata(t,1),r.luaL_checknumber(t,2),a.lua_toboolean(t,3);return console.warn("DestructableRestoreLife was called but is not implemented :("),0}function Yi(e,t){a.lua_touserdata(t,1),r.luaL_checkstring(t,2);return console.warn("QueueDestructableAnimation was called but is not implemented :("),0}function $i(e,t){a.lua_touserdata(t,1),r.luaL_checkstring(t,2);return console.warn("SetDestructableAnimation was called but is not implemented :("),0}function Wi(e,t){a.lua_touserdata(t,1),r.luaL_checknumber(t,2);return console.warn("SetDestructableAnimationSpeed was called but is not implemented :("),0}function Zi(e,t){a.lua_touserdata(t,1),a.lua_toboolean(t,2);return console.warn("ShowDestructable was called but is not implemented :("),0}function Ji(e,t){a.lua_touserdata(t,1);return console.warn("GetDestructableOccluderHeight was called but is not implemented :("),a.lua_pushnumber(t,0),1}function Qi(e,t){a.lua_touserdata(t,1),r.luaL_checknumber(t,2);return console.warn("SetDestructableOccluderHeight was called but is not implemented :("),0}function el(e,t){a.lua_touserdata(t,1);return console.warn("GetDestructableName was called but is not implemented :("),a.lua_pushstring(t,""),1}function tl(e,t){return console.warn("GetTriggerDestructable was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function nl(e,t){r.luaL_checkinteger(t,1),r.luaL_checknumber(t,2),r.luaL_checknumber(t,3);return console.warn("CreateItem was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function al(e,t){a.lua_touserdata(t,1);return console.warn("RemoveItem was called but is not implemented :("),0}function rl(e,t){a.lua_touserdata(t,1);return console.warn("GetItemPlayer was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function il(e,t){a.lua_touserdata(t,1);return console.warn("GetItemTypeId was called but is not implemented :("),a.lua_pushinteger(t,0),1}function ll(e,t){a.lua_touserdata(t,1);return console.warn("GetItemX was called but is not implemented :("),a.lua_pushnumber(t,0),1}function sl(e,t){a.lua_touserdata(t,1);return console.warn("GetItemY was called but is not implemented :("),a.lua_pushnumber(t,0),1}function ol(e,t){a.lua_touserdata(t,1),r.luaL_checknumber(t,2),r.luaL_checknumber(t,3);return console.warn("SetItemPosition was called but is not implemented :("),0}function ul(e,t){a.lua_touserdata(t,1),a.lua_toboolean(t,2);return console.warn("SetItemDropOnDeath was called but is not implemented :("),0}function cl(e,t){a.lua_touserdata(t,1),a.lua_toboolean(t,2);return console.warn("SetItemDroppable was called but is not implemented :("),0}function dl(e,t){a.lua_touserdata(t,1),a.lua_toboolean(t,2);return console.warn("SetItemPawnable was called but is not implemented :("),0}function hl(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2),a.lua_toboolean(t,3);return console.warn("SetItemPlayer was called but is not implemented :("),0}function fl(e,t){a.lua_touserdata(t,1),a.lua_toboolean(t,2);return console.warn("SetItemInvulnerable was called but is not implemented :("),0}function _l(e,t){a.lua_touserdata(t,1);return console.warn("IsItemInvulnerable was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function ml(e,t){a.lua_touserdata(t,1),a.lua_toboolean(t,2);return console.warn("SetItemVisible was called but is not implemented :("),0}function pl(e,t){a.lua_touserdata(t,1);return console.warn("IsItemVisible was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function gl(e,t){a.lua_touserdata(t,1);return console.warn("IsItemOwned was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function bl(e,t){a.lua_touserdata(t,1);return console.warn("IsItemPowerup was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function wl(e,t){a.lua_touserdata(t,1);return console.warn("IsItemSellable was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function vl(e,t){a.lua_touserdata(t,1);return console.warn("IsItemPawnable was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Al(e,t){r.luaL_checkinteger(t,1);return console.warn("IsItemIdPowerup was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Ll(e,t){r.luaL_checkinteger(t,1);return console.warn("IsItemIdSellable was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function yl(e,t){r.luaL_checkinteger(t,1);return console.warn("IsItemIdPawnable was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Sl(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2),r.luaL_ref(t,a.LUA_REGISTRYINDEX);return console.warn("EnumItemsInRect was called but is not implemented :("),0}function Tl(e,t){a.lua_touserdata(t,1);return console.warn("GetItemLevel was called but is not implemented :("),a.lua_pushinteger(t,0),1}function El(e,t){a.lua_touserdata(t,1);return console.warn("GetItemType was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function xl(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2);return console.warn("SetItemDropID was called but is not implemented :("),0}function kl(e,t){a.lua_touserdata(t,1);return console.warn("GetItemName was called but is not implemented :("),a.lua_pushstring(t,""),1}function Ml(e,t){a.lua_touserdata(t,1);return console.warn("GetItemCharges was called but is not implemented :("),a.lua_pushinteger(t,0),1}function Il(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2);return console.warn("SetItemCharges was called but is not implemented :("),0}function Ul(e,t){a.lua_touserdata(t,1);return console.warn("GetItemUserData was called but is not implemented :("),a.lua_pushinteger(t,0),1}function Pl(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2);return console.warn("SetItemUserData was called but is not implemented :("),0}function Rl(e,t){let n=a.lua_touserdata(t,1),l=r.luaL_checkinteger(t,2),s=r.luaL_checknumber(t,3),o=r.luaL_checknumber(t,4),u=r.luaL_checknumber(t,5);return a.lua_pushlightuserdata(t,e.addHandle(new i.JassUnit(n,l,s,o,u))),1}function Ol(e,t){a.lua_touserdata(t,1),r.luaL_checkstring(t,2),r.luaL_checknumber(t,3),r.luaL_checknumber(t,4),r.luaL_checknumber(t,5);return console.warn("CreateUnitByName was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Cl(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),a.lua_touserdata(t,3),r.luaL_checknumber(t,4);return console.warn("CreateUnitAtLoc was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Bl(e,t){a.lua_touserdata(t,1),r.luaL_checkstring(t,2),a.lua_touserdata(t,3),r.luaL_checknumber(t,4);return console.warn("CreateUnitAtLocByName was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Fl(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checknumber(t,3),r.luaL_checknumber(t,4),r.luaL_checknumber(t,5);return console.warn("CreateCorpse was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Dl(e,t){a.lua_touserdata(t,1);return console.warn("KillUnit was called but is not implemented :("),0}function Gl(e,t){a.lua_touserdata(t,1);return console.warn("RemoveUnit was called but is not implemented :("),0}function Nl(e,t){a.lua_touserdata(t,1),a.lua_toboolean(t,2);return console.warn("ShowUnit was called but is not implemented :("),0}function Vl(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2),r.luaL_checknumber(t,3);return console.warn("SetUnitState was called but is not implemented :("),0}function jl(e,t){a.lua_touserdata(t,1),r.luaL_checknumber(t,2);return console.warn("SetUnitX was called but is not implemented :("),0}function Hl(e,t){a.lua_touserdata(t,1),r.luaL_checknumber(t,2);return console.warn("SetUnitY was called but is not implemented :("),0}function Kl(e,t){a.lua_touserdata(t,1),r.luaL_checknumber(t,2),r.luaL_checknumber(t,3);return console.warn("SetUnitPosition was called but is not implemented :("),0}function zl(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2);return console.warn("SetUnitPositionLoc was called but is not implemented :("),0}function Xl(e,t){a.lua_touserdata(t,1),r.luaL_checknumber(t,2);return console.warn("SetUnitFacing was called but is not implemented :("),0}function ql(e,t){a.lua_touserdata(t,1),r.luaL_checknumber(t,2),r.luaL_checknumber(t,3);return console.warn("SetUnitFacingTimed was called but is not implemented :("),0}function Yl(e,t){a.lua_touserdata(t,1),r.luaL_checknumber(t,2);return console.warn("SetUnitMoveSpeed was called but is not implemented :("),0}function $l(e,t){a.lua_touserdata(t,1),r.luaL_checknumber(t,2),r.luaL_checknumber(t,3);return console.warn("SetUnitFlyHeight was called but is not implemented :("),0}function Wl(e,t){a.lua_touserdata(t,1),r.luaL_checknumber(t,2);return console.warn("SetUnitTurnSpeed was called but is not implemented :("),0}function Zl(e,t){a.lua_touserdata(t,1),r.luaL_checknumber(t,2);return console.warn("SetUnitPropWindow was called but is not implemented :("),0}function Jl(e,t){a.lua_touserdata(t,1),r.luaL_checknumber(t,2);return console.warn("SetUnitAcquireRange was called but is not implemented :("),0}function Ql(e,t){a.lua_touserdata(t,1),a.lua_toboolean(t,2);return console.warn("SetUnitCreepGuard was called but is not implemented :("),0}function es(e,t){a.lua_touserdata(t,1);return console.warn("GetUnitAcquireRange was called but is not implemented :("),a.lua_pushnumber(t,0),1}function ts(e,t){a.lua_touserdata(t,1);return console.warn("GetUnitTurnSpeed was called but is not implemented :("),a.lua_pushnumber(t,0),1}function ns(e,t){a.lua_touserdata(t,1);return console.warn("GetUnitPropWindow was called but is not implemented :("),a.lua_pushnumber(t,0),1}function as(e,t){a.lua_touserdata(t,1);return console.warn("GetUnitFlyHeight was called but is not implemented :("),a.lua_pushnumber(t,0),1}function rs(e,t){a.lua_touserdata(t,1);return console.warn("GetUnitDefaultAcquireRange was called but is not implemented :("),a.lua_pushnumber(t,0),1}function is(e,t){a.lua_touserdata(t,1);return console.warn("GetUnitDefaultTurnSpeed was called but is not implemented :("),a.lua_pushnumber(t,0),1}function ls(e,t){a.lua_touserdata(t,1);return console.warn("GetUnitDefaultPropWindow was called but is not implemented :("),a.lua_pushnumber(t,0),1}function ss(e,t){a.lua_touserdata(t,1);return console.warn("GetUnitDefaultFlyHeight was called but is not implemented :("),a.lua_pushnumber(t,0),1}function os(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2),a.lua_toboolean(t,3);return console.warn("SetUnitOwner was called but is not implemented :("),0}function us(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2);return console.warn("SetUnitColor was called but is not implemented :("),0}function cs(e,t){a.lua_touserdata(t,1),r.luaL_checknumber(t,2),r.luaL_checknumber(t,3),r.luaL_checknumber(t,4);return console.warn("SetUnitScale was called but is not implemented :("),0}function ds(e,t){a.lua_touserdata(t,1),r.luaL_checknumber(t,2);return console.warn("SetUnitTimeScale was called but is not implemented :("),0}function hs(e,t){a.lua_touserdata(t,1),r.luaL_checknumber(t,2);return console.warn("SetUnitBlendTime was called but is not implemented :("),0}function fs(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3),r.luaL_checkinteger(t,4),r.luaL_checkinteger(t,5);return console.warn("SetUnitVertexColor was called but is not implemented :("),0}function _s(e,t){a.lua_touserdata(t,1),r.luaL_checkstring(t,2);return console.warn("QueueUnitAnimation was called but is not implemented :("),0}function ms(e,t){a.lua_touserdata(t,1),r.luaL_checkstring(t,2);return console.warn("SetUnitAnimation was called but is not implemented :("),0}function ps(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2);return console.warn("SetUnitAnimationByIndex was called but is not implemented :("),0}function gs(e,t){a.lua_touserdata(t,1),r.luaL_checkstring(t,2),a.lua_touserdata(t,3);return console.warn("SetUnitAnimationWithRarity was called but is not implemented :("),0}function bs(e,t){a.lua_touserdata(t,1),r.luaL_checkstring(t,2),a.lua_toboolean(t,3);return console.warn("AddUnitAnimationProperties was called but is not implemented :("),0}function ws(e,t){a.lua_touserdata(t,1),r.luaL_checkstring(t,2),a.lua_touserdata(t,3),r.luaL_checknumber(t,4),r.luaL_checknumber(t,5),r.luaL_checknumber(t,6);return console.warn("SetUnitLookAt was called but is not implemented :("),0}function vs(e,t){a.lua_touserdata(t,1);return console.warn("ResetUnitLookAt was called but is not implemented :("),0}function As(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2),a.lua_toboolean(t,3);return console.warn("SetUnitRescuable was called but is not implemented :("),0}function Ls(e,t){a.lua_touserdata(t,1),r.luaL_checknumber(t,2);return console.warn("SetUnitRescueRange was called but is not implemented :("),0}function ys(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),a.lua_toboolean(t,3);return console.warn("SetHeroStr was called but is not implemented :("),0}function Ss(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),a.lua_toboolean(t,3);return console.warn("SetHeroAgi was called but is not implemented :("),0}function Ts(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),a.lua_toboolean(t,3);return console.warn("SetHeroInt was called but is not implemented :("),0}function Es(e,t){a.lua_touserdata(t,1),a.lua_toboolean(t,2);return console.warn("GetHeroStr was called but is not implemented :("),a.lua_pushinteger(t,0),1}function xs(e,t){a.lua_touserdata(t,1),a.lua_toboolean(t,2);return console.warn("GetHeroAgi was called but is not implemented :("),a.lua_pushinteger(t,0),1}function ks(e,t){a.lua_touserdata(t,1),a.lua_toboolean(t,2);return console.warn("GetHeroInt was called but is not implemented :("),a.lua_pushinteger(t,0),1}function Ms(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2);return console.warn("UnitStripHeroLevel was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Is(e,t){a.lua_touserdata(t,1);return console.warn("GetHeroXP was called but is not implemented :("),a.lua_pushinteger(t,0),1}function Us(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),a.lua_toboolean(t,3);return console.warn("SetHeroXP was called but is not implemented :("),0}function Ps(e,t){a.lua_touserdata(t,1);return console.warn("GetHeroSkillPoints was called but is not implemented :("),a.lua_pushinteger(t,0),1}function Rs(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2);return console.warn("UnitModifySkillPoints was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Os(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),a.lua_toboolean(t,3);return console.warn("AddHeroXP was called but is not implemented :("),0}function Cs(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),a.lua_toboolean(t,3);return console.warn("SetHeroLevel was called but is not implemented :("),0}function Bs(e,t){a.lua_touserdata(t,1);return console.warn("GetHeroLevel was called but is not implemented :("),a.lua_pushinteger(t,0),1}function Fs(e,t){a.lua_touserdata(t,1);return console.warn("GetUnitLevel was called but is not implemented :("),a.lua_pushinteger(t,0),1}function Ds(e,t){a.lua_touserdata(t,1);return console.warn("GetHeroProperName was called but is not implemented :("),a.lua_pushstring(t,""),1}function Gs(e,t){a.lua_touserdata(t,1),a.lua_toboolean(t,2);return console.warn("SuspendHeroXP was called but is not implemented :("),0}function Ns(e,t){a.lua_touserdata(t,1);return console.warn("IsSuspendedXP was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Vs(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2);return console.warn("SelectHeroSkill was called but is not implemented :("),0}function js(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2);return console.warn("GetUnitAbilityLevel was called but is not implemented :("),a.lua_pushinteger(t,0),1}function Hs(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2);return console.warn("DecUnitAbilityLevel was called but is not implemented :("),a.lua_pushinteger(t,0),1}function Ks(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2);return console.warn("IncUnitAbilityLevel was called but is not implemented :("),a.lua_pushinteger(t,0),1}function zs(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3);return console.warn("SetUnitAbilityLevel was called but is not implemented :("),a.lua_pushinteger(t,0),1}function Xs(e,t){a.lua_touserdata(t,1),r.luaL_checknumber(t,2),r.luaL_checknumber(t,3),a.lua_toboolean(t,4);return console.warn("ReviveHero was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function qs(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2),a.lua_toboolean(t,3);return console.warn("ReviveHeroLoc was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Ys(e,t){a.lua_touserdata(t,1),a.lua_toboolean(t,2);return console.warn("SetUnitExploded was called but is not implemented :("),0}function $s(e,t){a.lua_touserdata(t,1),a.lua_toboolean(t,2);return console.warn("SetUnitInvulnerable was called but is not implemented :("),0}function Ws(e,t){a.lua_touserdata(t,1),a.lua_toboolean(t,2);return console.warn("PauseUnit was called but is not implemented :("),0}function Zs(e,t){a.lua_touserdata(t,1);return console.warn("IsUnitPaused was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Js(e,t){a.lua_touserdata(t,1),a.lua_toboolean(t,2);return console.warn("SetUnitPathing was called but is not implemented :("),0}function Qs(e,t){return console.warn("ClearSelection was called but is not implemented :("),0}function eo(e,t){a.lua_touserdata(t,1),a.lua_toboolean(t,2);return console.warn("SelectUnit was called but is not implemented :("),0}function to(e,t){a.lua_touserdata(t,1);return console.warn("GetUnitPointValue was called but is not implemented :("),a.lua_pushinteger(t,0),1}function no(e,t){r.luaL_checkinteger(t,1);return console.warn("GetUnitPointValueByType was called but is not implemented :("),a.lua_pushinteger(t,0),1}function ao(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2);return console.warn("UnitAddItem was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function ro(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2);return console.warn("UnitAddItemById was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function io(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3);return console.warn("UnitAddItemToSlotById was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function lo(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2);return console.warn("UnitRemoveItem was called but is not implemented :("),0}function so(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2);return console.warn("UnitRemoveItemFromSlot was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function oo(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2);return console.warn("UnitHasItem was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function uo(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2);return console.warn("UnitItemInSlot was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function co(e,t){a.lua_touserdata(t,1);return console.warn("UnitInventorySize was called but is not implemented :("),a.lua_pushinteger(t,0),1}function ho(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2),r.luaL_checknumber(t,3),r.luaL_checknumber(t,4);return console.warn("UnitDropItemPoint was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function fo(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2),r.luaL_checkinteger(t,3);return console.warn("UnitDropItemSlot was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function _o(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2),a.lua_touserdata(t,3);return console.warn("UnitDropItemTarget was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function mo(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2);return console.warn("UnitUseItem was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function po(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2),r.luaL_checknumber(t,3),r.luaL_checknumber(t,4);return console.warn("UnitUseItemPoint was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function go(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2),a.lua_touserdata(t,3);return console.warn("UnitUseItemTarget was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function bo(e,t){a.lua_touserdata(t,1);return console.warn("GetUnitX was called but is not implemented :("),a.lua_pushnumber(t,0),1}function wo(e,t){a.lua_touserdata(t,1);return console.warn("GetUnitY was called but is not implemented :("),a.lua_pushnumber(t,0),1}function vo(e,t){a.lua_touserdata(t,1);return console.warn("GetUnitLoc was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Ao(e,t){a.lua_touserdata(t,1);return console.warn("GetUnitFacing was called but is not implemented :("),a.lua_pushnumber(t,0),1}function Lo(e,t){a.lua_touserdata(t,1);return console.warn("GetUnitMoveSpeed was called but is not implemented :("),a.lua_pushnumber(t,0),1}function yo(e,t){a.lua_touserdata(t,1);return console.warn("GetUnitDefaultMoveSpeed was called but is not implemented :("),a.lua_pushnumber(t,0),1}function So(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2);return console.warn("GetUnitState was called but is not implemented :("),a.lua_pushnumber(t,0),1}function To(e,t){let n=a.lua_touserdata(t,1);return a.lua_pushlightuserdata(t,n.player),1}function Eo(e,t){a.lua_touserdata(t,1);return console.warn("GetUnitTypeId was called but is not implemented :("),a.lua_pushinteger(t,0),1}function xo(e,t){a.lua_touserdata(t,1);return console.warn("GetUnitRace was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function ko(e,t){a.lua_touserdata(t,1);return console.warn("GetUnitName was called but is not implemented :("),a.lua_pushstring(t,""),1}function Mo(e,t){a.lua_touserdata(t,1);return console.warn("GetUnitFoodUsed was called but is not implemented :("),a.lua_pushinteger(t,0),1}function Io(e,t){a.lua_touserdata(t,1);return console.warn("GetUnitFoodMade was called but is not implemented :("),a.lua_pushinteger(t,0),1}function Uo(e,t){r.luaL_checkinteger(t,1);return console.warn("GetFoodMade was called but is not implemented :("),a.lua_pushinteger(t,0),1}function Po(e,t){r.luaL_checkinteger(t,1);return console.warn("GetFoodUsed was called but is not implemented :("),a.lua_pushinteger(t,0),1}function Ro(e,t){a.lua_touserdata(t,1),a.lua_toboolean(t,2);return console.warn("SetUnitUseFood was called but is not implemented :("),0}function Oo(e,t){a.lua_touserdata(t,1);return console.warn("GetUnitRallyPoint was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Co(e,t){a.lua_touserdata(t,1);return console.warn("GetUnitRallyUnit was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Bo(e,t){a.lua_touserdata(t,1);return console.warn("GetUnitRallyDestructable was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Fo(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2);return console.warn("IsUnitInGroup was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Do(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2);return console.warn("IsUnitInForce was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Go(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2);return console.warn("IsUnitOwnedByPlayer was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function No(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2);return console.warn("IsUnitAlly was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Vo(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2);return console.warn("IsUnitEnemy was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function jo(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2);return console.warn("IsUnitVisible was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Ho(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2);return console.warn("IsUnitDetected was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Ko(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2);return console.warn("IsUnitInvisible was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function zo(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2);return console.warn("IsUnitFogged was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Xo(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2);return console.warn("IsUnitMasked was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function qo(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2);return console.warn("IsUnitSelected was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Yo(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2);return console.warn("IsUnitRace was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function $o(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2);return console.warn("IsUnitType was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Wo(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2);return console.warn("IsUnit was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Zo(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2),r.luaL_checknumber(t,3);return console.warn("IsUnitInRange was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Jo(e,t){a.lua_touserdata(t,1),r.luaL_checknumber(t,2),r.luaL_checknumber(t,3),r.luaL_checknumber(t,4);return console.warn("IsUnitInRangeXY was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Qo(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2),r.luaL_checknumber(t,3);return console.warn("IsUnitInRangeLoc was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function eu(e,t){a.lua_touserdata(t,1);return console.warn("IsUnitHidden was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function tu(e,t){a.lua_touserdata(t,1);return console.warn("IsUnitIllusion was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function nu(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2);return console.warn("IsUnitInTransport was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function au(e,t){a.lua_touserdata(t,1);return console.warn("IsUnitLoaded was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function ru(e,t){r.luaL_checkinteger(t,1);return console.warn("IsHeroUnitId was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function iu(e,t){r.luaL_checkinteger(t,1),a.lua_touserdata(t,2);return console.warn("IsUnitIdType was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function lu(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2),a.lua_toboolean(t,3);return console.warn("UnitShareVision was called but is not implemented :("),0}function su(e,t){a.lua_touserdata(t,1),a.lua_toboolean(t,2);return console.warn("UnitSuspendDecay was called but is not implemented :("),0}function ou(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2);return console.warn("UnitAddType was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function uu(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2);return console.warn("UnitRemoveType was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function cu(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2);return console.warn("UnitAddAbility was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function du(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2);return console.warn("UnitRemoveAbility was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function hu(e,t){a.lua_touserdata(t,1),a.lua_toboolean(t,2),r.luaL_checkinteger(t,3);return console.warn("UnitMakeAbilityPermanent was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function fu(e,t){a.lua_touserdata(t,1),a.lua_toboolean(t,2),a.lua_toboolean(t,3);return console.warn("UnitRemoveBuffs was called but is not implemented :("),0}function _u(e,t){a.lua_touserdata(t,1),a.lua_toboolean(t,2),a.lua_toboolean(t,3),a.lua_toboolean(t,4),a.lua_toboolean(t,5),a.lua_toboolean(t,6),a.lua_toboolean(t,7),a.lua_toboolean(t,8);return console.warn("UnitRemoveBuffsEx was called but is not implemented :("),0}function mu(e,t){a.lua_touserdata(t,1),a.lua_toboolean(t,2),a.lua_toboolean(t,3),a.lua_toboolean(t,4),a.lua_toboolean(t,5),a.lua_toboolean(t,6),a.lua_toboolean(t,7),a.lua_toboolean(t,8);return console.warn("UnitHasBuffsEx was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function pu(e,t){a.lua_touserdata(t,1),a.lua_toboolean(t,2),a.lua_toboolean(t,3),a.lua_toboolean(t,4),a.lua_toboolean(t,5),a.lua_toboolean(t,6),a.lua_toboolean(t,7),a.lua_toboolean(t,8);return console.warn("UnitCountBuffsEx was called but is not implemented :("),a.lua_pushinteger(t,0),1}function gu(e,t){a.lua_touserdata(t,1),a.lua_toboolean(t,2);return console.warn("UnitAddSleep was called but is not implemented :("),0}function bu(e,t){a.lua_touserdata(t,1);return console.warn("UnitCanSleep was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function wu(e,t){a.lua_touserdata(t,1),a.lua_toboolean(t,2);return console.warn("UnitAddSleepPerm was called but is not implemented :("),0}function vu(e,t){a.lua_touserdata(t,1);return console.warn("UnitCanSleepPerm was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Au(e,t){a.lua_touserdata(t,1);return console.warn("UnitIsSleeping was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Lu(e,t){a.lua_touserdata(t,1);return console.warn("UnitWakeUp was called but is not implemented :("),0}function yu(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checknumber(t,3);return console.warn("UnitApplyTimedLife was called but is not implemented :("),0}function Su(e,t){a.lua_touserdata(t,1),a.lua_toboolean(t,2);return console.warn("UnitIgnoreAlarm was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Tu(e,t){a.lua_touserdata(t,1);return console.warn("UnitIgnoreAlarmToggled was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Eu(e,t){a.lua_touserdata(t,1);return console.warn("UnitResetCooldown was called but is not implemented :("),0}function xu(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2);return console.warn("UnitSetConstructionProgress was called but is not implemented :("),0}function ku(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2);return console.warn("UnitSetUpgradeProgress was called but is not implemented :("),0}function Mu(e,t){a.lua_touserdata(t,1),a.lua_toboolean(t,2);return console.warn("UnitPauseTimedLife was called but is not implemented :("),0}function Iu(e,t){a.lua_touserdata(t,1),a.lua_toboolean(t,2);return console.warn("UnitSetUsesAltIcon was called but is not implemented :("),0}function Uu(e,t){a.lua_touserdata(t,1),r.luaL_checknumber(t,2),r.luaL_checknumber(t,3),r.luaL_checknumber(t,4),r.luaL_checknumber(t,5),r.luaL_checknumber(t,6),a.lua_toboolean(t,7),a.lua_toboolean(t,8),a.lua_touserdata(t,9),a.lua_touserdata(t,10),a.lua_touserdata(t,11);return console.warn("UnitDamagePoint was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Pu(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2),r.luaL_checknumber(t,3),a.lua_toboolean(t,4),a.lua_toboolean(t,5),a.lua_touserdata(t,6),a.lua_touserdata(t,7),a.lua_touserdata(t,8);return console.warn("UnitDamageTarget was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Ru(e,t){a.lua_touserdata(t,1),r.luaL_checkstring(t,2);return console.warn("IssueImmediateOrder was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Ou(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2);return console.warn("IssueImmediateOrderById was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Cu(e,t){a.lua_touserdata(t,1),r.luaL_checkstring(t,2),r.luaL_checknumber(t,3),r.luaL_checknumber(t,4);return console.warn("IssuePointOrder was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Bu(e,t){a.lua_touserdata(t,1),r.luaL_checkstring(t,2),a.lua_touserdata(t,3);return console.warn("IssuePointOrderLoc was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Fu(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checknumber(t,3),r.luaL_checknumber(t,4);return console.warn("IssuePointOrderById was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Du(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),a.lua_touserdata(t,3);return console.warn("IssuePointOrderByIdLoc was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Gu(e,t){a.lua_touserdata(t,1),r.luaL_checkstring(t,2),a.lua_touserdata(t,3);return console.warn("IssueTargetOrder was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Nu(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),a.lua_touserdata(t,3);return console.warn("IssueTargetOrderById was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Vu(e,t){a.lua_touserdata(t,1),r.luaL_checkstring(t,2),r.luaL_checknumber(t,3),r.luaL_checknumber(t,4),a.lua_touserdata(t,5);return console.warn("IssueInstantPointOrder was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function ju(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checknumber(t,3),r.luaL_checknumber(t,4),a.lua_touserdata(t,5);return console.warn("IssueInstantPointOrderById was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Hu(e,t){a.lua_touserdata(t,1),r.luaL_checkstring(t,2),a.lua_touserdata(t,3),a.lua_touserdata(t,4);return console.warn("IssueInstantTargetOrder was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Ku(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),a.lua_touserdata(t,3),a.lua_touserdata(t,4);return console.warn("IssueInstantTargetOrderById was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function zu(e,t){a.lua_touserdata(t,1),r.luaL_checkstring(t,2),r.luaL_checknumber(t,3),r.luaL_checknumber(t,4);return console.warn("IssueBuildOrder was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Xu(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checknumber(t,3),r.luaL_checknumber(t,4);return console.warn("IssueBuildOrderById was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function qu(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2),r.luaL_checkstring(t,3);return console.warn("IssueNeutralImmediateOrder was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Yu(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2),r.luaL_checkinteger(t,3);return console.warn("IssueNeutralImmediateOrderById was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function $u(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2),r.luaL_checkstring(t,3),r.luaL_checknumber(t,4),r.luaL_checknumber(t,5);return console.warn("IssueNeutralPointOrder was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Wu(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2),r.luaL_checkinteger(t,3),r.luaL_checknumber(t,4),r.luaL_checknumber(t,5);return console.warn("IssueNeutralPointOrderById was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Zu(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2),r.luaL_checkstring(t,3),a.lua_touserdata(t,4);return console.warn("IssueNeutralTargetOrder was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Ju(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2),r.luaL_checkinteger(t,3),a.lua_touserdata(t,4);return console.warn("IssueNeutralTargetOrderById was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Qu(e,t){a.lua_touserdata(t,1);return console.warn("GetUnitCurrentOrder was called but is not implemented :("),a.lua_pushinteger(t,0),1}function ec(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2);return console.warn("SetResourceAmount was called but is not implemented :("),0}function tc(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2);return console.warn("AddResourceAmount was called but is not implemented :("),0}function nc(e,t){a.lua_touserdata(t,1);return console.warn("GetResourceAmount was called but is not implemented :("),a.lua_pushinteger(t,0),1}function ac(e,t){a.lua_touserdata(t,1);return console.warn("WaygateGetDestinationX was called but is not implemented :("),a.lua_pushnumber(t,0),1}function rc(e,t){a.lua_touserdata(t,1);return console.warn("WaygateGetDestinationY was called but is not implemented :("),a.lua_pushnumber(t,0),1}function ic(e,t){a.lua_touserdata(t,1),r.luaL_checknumber(t,2),r.luaL_checknumber(t,3);return console.warn("WaygateSetDestination was called but is not implemented :("),0}function lc(e,t){a.lua_touserdata(t,1),a.lua_toboolean(t,2);return console.warn("WaygateActivate was called but is not implemented :("),0}function sc(e,t){a.lua_touserdata(t,1);return console.warn("WaygateIsActive was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function oc(e,t){r.luaL_checkinteger(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3);return console.warn("AddItemToAllStock was called but is not implemented :("),0}function uc(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3),r.luaL_checkinteger(t,4);return console.warn("AddItemToStock was called but is not implemented :("),0}function cc(e,t){r.luaL_checkinteger(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3);return console.warn("AddUnitToAllStock was called but is not implemented :("),0}function dc(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3),r.luaL_checkinteger(t,4);return console.warn("AddUnitToStock was called but is not implemented :("),0}function hc(e,t){r.luaL_checkinteger(t,1);return console.warn("RemoveItemFromAllStock was called but is not implemented :("),0}function fc(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2);return console.warn("RemoveItemFromStock was called but is not implemented :("),0}function _c(e,t){r.luaL_checkinteger(t,1);return console.warn("RemoveUnitFromAllStock was called but is not implemented :("),0}function mc(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2);return console.warn("RemoveUnitFromStock was called but is not implemented :("),0}function pc(e,t){r.luaL_checkinteger(t,1);return console.warn("SetAllItemTypeSlots was called but is not implemented :("),0}function gc(e,t){r.luaL_checkinteger(t,1);return console.warn("SetAllUnitTypeSlots was called but is not implemented :("),0}function bc(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2);return console.warn("SetItemTypeSlots was called but is not implemented :("),0}function wc(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2);return console.warn("SetUnitTypeSlots was called but is not implemented :("),0}function vc(e,t){a.lua_touserdata(t,1);return console.warn("GetUnitUserData was called but is not implemented :("),a.lua_pushinteger(t,0),1}function Ac(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2);return console.warn("SetUnitUserData was called but is not implemented :("),0}function Lc(e,t){let n=r.luaL_checkinteger(t,1);return a.lua_pushlightuserdata(t,e.players[n]),1}function yc(e,t){return console.warn("GetLocalPlayer was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Sc(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2);return console.warn("IsPlayerAlly was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Tc(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2);return console.warn("IsPlayerEnemy was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Ec(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2);return console.warn("IsPlayerInForce was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function xc(e,t){a.lua_touserdata(t,1);return console.warn("IsPlayerObserver was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function kc(e,t){r.luaL_checknumber(t,1),r.luaL_checknumber(t,2),a.lua_touserdata(t,3);return console.warn("IsVisibleToPlayer was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Mc(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2);return console.warn("IsLocationVisibleToPlayer was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Ic(e,t){r.luaL_checknumber(t,1),r.luaL_checknumber(t,2),a.lua_touserdata(t,3);return console.warn("IsFoggedToPlayer was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Uc(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2);return console.warn("IsLocationFoggedToPlayer was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Pc(e,t){r.luaL_checknumber(t,1),r.luaL_checknumber(t,2),a.lua_touserdata(t,3);return console.warn("IsMaskedToPlayer was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Rc(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2);return console.warn("IsLocationMaskedToPlayer was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Oc(e,t){let n=a.lua_touserdata(t,1);return a.lua_pushlightuserdata(t,n.race),1}function Cc(e,t){let n=a.lua_touserdata(t,1);return a.lua_pushinteger(t,n.index),1}function Bc(e,t){a.lua_touserdata(t,1),a.lua_toboolean(t,2);return console.warn("GetPlayerUnitCount was called but is not implemented :("),a.lua_pushinteger(t,0),1}function Fc(e,t){a.lua_touserdata(t,1),r.luaL_checkstring(t,2),a.lua_toboolean(t,3),a.lua_toboolean(t,4);return console.warn("GetPlayerTypedUnitCount was called but is not implemented :("),a.lua_pushinteger(t,0),1}function Dc(e,t){a.lua_touserdata(t,1),a.lua_toboolean(t,2);return console.warn("GetPlayerStructureCount was called but is not implemented :("),a.lua_pushinteger(t,0),1}function Gc(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2);return console.warn("GetPlayerState was called but is not implemented :("),a.lua_pushinteger(t,0),1}function Nc(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2);return console.warn("GetPlayerScore was called but is not implemented :("),a.lua_pushinteger(t,0),1}function Vc(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2),a.lua_touserdata(t,3);return console.warn("GetPlayerAlliance was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function jc(e,t){a.lua_touserdata(t,1);return console.warn("GetPlayerHandicap was called but is not implemented :("),a.lua_pushnumber(t,0),1}function Hc(e,t){a.lua_touserdata(t,1);return console.warn("GetPlayerHandicapXP was called but is not implemented :("),a.lua_pushnumber(t,0),1}function Kc(e,t){a.lua_touserdata(t,1),r.luaL_checknumber(t,2);return console.warn("SetPlayerHandicap was called but is not implemented :("),0}function zc(e,t){a.lua_touserdata(t,1),r.luaL_checknumber(t,2);return console.warn("SetPlayerHandicapXP was called but is not implemented :("),0}function Xc(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3);return console.warn("SetPlayerTechMaxAllowed was called but is not implemented :("),0}function qc(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2);return console.warn("GetPlayerTechMaxAllowed was called but is not implemented :("),a.lua_pushinteger(t,0),1}function Yc(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3);return console.warn("AddPlayerTechResearched was called but is not implemented :("),0}function $c(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3);return console.warn("SetPlayerTechResearched was called but is not implemented :("),0}function Wc(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),a.lua_toboolean(t,3);return console.warn("GetPlayerTechResearched was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Zc(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),a.lua_toboolean(t,3);return console.warn("GetPlayerTechCount was called but is not implemented :("),a.lua_pushinteger(t,0),1}function Jc(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2);return console.warn("SetPlayerUnitsOwner was called but is not implemented :("),0}function Qc(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2),a.lua_toboolean(t,3);return console.warn("CripplePlayer was called but is not implemented :("),0}function ed(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),a.lua_toboolean(t,3);return console.warn("SetPlayerAbilityAvailable was called but is not implemented :("),0}function td(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2),r.luaL_checkinteger(t,3);return console.warn("SetPlayerState was called but is not implemented :("),0}function nd(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2);return console.warn("RemovePlayer was called but is not implemented :("),0}function ad(e,t){a.lua_touserdata(t,1);return console.warn("CachePlayerHeroData was called but is not implemented :("),0}function rd(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2),a.lua_touserdata(t,3),a.lua_toboolean(t,4);return console.warn("SetFogStateRect was called but is not implemented :("),0}function id(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2),r.luaL_checknumber(t,3),r.luaL_checknumber(t,4),r.luaL_checknumber(t,5),a.lua_toboolean(t,6);return console.warn("SetFogStateRadius was called but is not implemented :("),0}function ld(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2),a.lua_touserdata(t,3),r.luaL_checknumber(t,4),a.lua_toboolean(t,5);return console.warn("SetFogStateRadiusLoc was called but is not implemented :("),0}function sd(e,t){a.lua_toboolean(t,1);return console.warn("FogMaskEnable was called but is not implemented :("),0}function od(e,t){return console.warn("IsFogMaskEnabled was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function ud(e,t){a.lua_toboolean(t,1);return console.warn("FogEnable was called but is not implemented :("),0}function cd(e,t){return console.warn("IsFogEnabled was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function dd(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2),a.lua_touserdata(t,3),a.lua_toboolean(t,4),a.lua_toboolean(t,5);return console.warn("CreateFogModifierRect was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function hd(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2),r.luaL_checknumber(t,3),r.luaL_checknumber(t,4),r.luaL_checknumber(t,5),a.lua_toboolean(t,6),a.lua_toboolean(t,7);return console.warn("CreateFogModifierRadius was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function fd(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2),a.lua_touserdata(t,3),r.luaL_checknumber(t,4),a.lua_toboolean(t,5),a.lua_toboolean(t,6);return console.warn("CreateFogModifierRadiusLoc was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function _d(e,t){a.lua_touserdata(t,1);return console.warn("DestroyFogModifier was called but is not implemented :("),0}function md(e,t){a.lua_touserdata(t,1);return console.warn("FogModifierStart was called but is not implemented :("),0}function pd(e,t){a.lua_touserdata(t,1);return console.warn("FogModifierStop was called but is not implemented :("),0}function gd(e,t){return console.warn("VersionGet was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function bd(e,t){a.lua_touserdata(t,1);return console.warn("VersionCompatible was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function wd(e,t){a.lua_touserdata(t,1);return console.warn("VersionSupported was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function vd(e,t){a.lua_toboolean(t,1);return console.warn("EndGame was called but is not implemented :("),0}function Ad(e,t){r.luaL_checkstring(t,1),a.lua_toboolean(t,2);return console.warn("ChangeLevel was called but is not implemented :("),0}function Ld(e,t){a.lua_toboolean(t,1);return console.warn("RestartGame was called but is not implemented :("),0}function yd(e,t){return console.warn("ReloadGame was called but is not implemented :("),0}function Sd(e,t){a.lua_touserdata(t,1);return console.warn("SetCampaignMenuRace was called but is not implemented :("),0}function Td(e,t){r.luaL_checkinteger(t,1);return console.warn("SetCampaignMenuRaceEx was called but is not implemented :("),0}function Ed(e,t){return console.warn("ForceCampaignSelectScreen was called but is not implemented :("),0}function xd(e,t){r.luaL_checkstring(t,1),a.lua_toboolean(t,2);return console.warn("LoadGame was called but is not implemented :("),0}function kd(e,t){r.luaL_checkstring(t,1);return console.warn("SaveGame was called but is not implemented :("),0}function Md(e,t){r.luaL_checkstring(t,1),r.luaL_checkstring(t,2);return console.warn("RenameSaveDirectory was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Id(e,t){r.luaL_checkstring(t,1);return console.warn("RemoveSaveDirectory was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Ud(e,t){r.luaL_checkstring(t,1),r.luaL_checkstring(t,2);return console.warn("CopySaveGame was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Pd(e,t){r.luaL_checkstring(t,1);return console.warn("SaveGameExists was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Rd(e,t){return console.warn("SyncSelections was called but is not implemented :("),0}function Od(e,t){a.lua_touserdata(t,1),r.luaL_checknumber(t,2);return console.warn("SetFloatGameState was called but is not implemented :("),0}function Cd(e,t){a.lua_touserdata(t,1);return console.warn("GetFloatGameState was called but is not implemented :("),a.lua_pushnumber(t,0),1}function Bd(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2);return console.warn("SetIntegerGameState was called but is not implemented :("),0}function Fd(e,t){a.lua_touserdata(t,1);return console.warn("GetIntegerGameState was called but is not implemented :("),a.lua_pushinteger(t,0),1}function Dd(e,t){a.lua_toboolean(t,1);return console.warn("SetTutorialCleared was called but is not implemented :("),0}function Gd(e,t){r.luaL_checkinteger(t,1),r.luaL_checkinteger(t,2),a.lua_toboolean(t,3);return console.warn("SetMissionAvailable was called but is not implemented :("),0}function Nd(e,t){r.luaL_checkinteger(t,1),a.lua_toboolean(t,2);return console.warn("SetCampaignAvailable was called but is not implemented :("),0}function Vd(e,t){r.luaL_checkinteger(t,1),a.lua_toboolean(t,2);return console.warn("SetOpCinematicAvailable was called but is not implemented :("),0}function jd(e,t){r.luaL_checkinteger(t,1),a.lua_toboolean(t,2);return console.warn("SetEdCinematicAvailable was called but is not implemented :("),0}function Hd(e,t){return console.warn("GetDefaultDifficulty was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Kd(e,t){a.lua_touserdata(t,1);return console.warn("SetDefaultDifficulty was called but is not implemented :("),0}function zd(e,t){r.luaL_checkinteger(t,1),a.lua_toboolean(t,2);return console.warn("SetCustomCampaignButtonVisible was called but is not implemented :("),0}function Xd(e,t){r.luaL_checkinteger(t,1);return console.warn("GetCustomCampaignButtonVisible was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function qd(e,t){return console.warn("DoNotSaveReplay was called but is not implemented :("),0}function Yd(e,t){return console.warn("DialogCreate was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function $d(e,t){a.lua_touserdata(t,1);return console.warn("DialogDestroy was called but is not implemented :("),0}function Wd(e,t){a.lua_touserdata(t,1);return console.warn("DialogClear was called but is not implemented :("),0}function Zd(e,t){a.lua_touserdata(t,1),r.luaL_checkstring(t,2);return console.warn("DialogSetMessage was called but is not implemented :("),0}function Jd(e,t){a.lua_touserdata(t,1),r.luaL_checkstring(t,2),r.luaL_checkinteger(t,3);return console.warn("DialogAddButton was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Qd(e,t){a.lua_touserdata(t,1),a.lua_toboolean(t,2),r.luaL_checkstring(t,3),r.luaL_checkinteger(t,4);return console.warn("DialogAddQuitButton was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function eh(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2),a.lua_toboolean(t,3);return console.warn("DialogDisplay was called but is not implemented :("),0}function th(e,t){return console.warn("ReloadGameCachesFromDisk was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function nh(e,t){r.luaL_checkstring(t,1);return console.warn("InitGameCache was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function ah(e,t){a.lua_touserdata(t,1);return console.warn("SaveGameCache was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function rh(e,t){a.lua_touserdata(t,1),r.luaL_checkstring(t,2),r.luaL_checkstring(t,3),r.luaL_checkinteger(t,4);return console.warn("StoreInteger was called but is not implemented :("),0}function ih(e,t){a.lua_touserdata(t,1),r.luaL_checkstring(t,2),r.luaL_checkstring(t,3),r.luaL_checknumber(t,4);return console.warn("StoreReal was called but is not implemented :("),0}function lh(e,t){a.lua_touserdata(t,1),r.luaL_checkstring(t,2),r.luaL_checkstring(t,3),a.lua_toboolean(t,4);return console.warn("StoreBoolean was called but is not implemented :("),0}function sh(e,t){a.lua_touserdata(t,1),r.luaL_checkstring(t,2),r.luaL_checkstring(t,3),a.lua_touserdata(t,4);return console.warn("StoreUnit was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function oh(e,t){a.lua_touserdata(t,1),r.luaL_checkstring(t,2),r.luaL_checkstring(t,3),r.luaL_checkstring(t,4);return console.warn("StoreString was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function uh(e,t){a.lua_touserdata(t,1),r.luaL_checkstring(t,2),r.luaL_checkstring(t,3);return console.warn("SyncStoredInteger was called but is not implemented :("),0}function ch(e,t){a.lua_touserdata(t,1),r.luaL_checkstring(t,2),r.luaL_checkstring(t,3);return console.warn("SyncStoredReal was called but is not implemented :("),0}function dh(e,t){a.lua_touserdata(t,1),r.luaL_checkstring(t,2),r.luaL_checkstring(t,3);return console.warn("SyncStoredBoolean was called but is not implemented :("),0}function hh(e,t){a.lua_touserdata(t,1),r.luaL_checkstring(t,2),r.luaL_checkstring(t,3);return console.warn("SyncStoredUnit was called but is not implemented :("),0}function fh(e,t){a.lua_touserdata(t,1),r.luaL_checkstring(t,2),r.luaL_checkstring(t,3);return console.warn("SyncStoredString was called but is not implemented :("),0}function _h(e,t){a.lua_touserdata(t,1),r.luaL_checkstring(t,2),r.luaL_checkstring(t,3);return console.warn("HaveStoredInteger was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function mh(e,t){a.lua_touserdata(t,1),r.luaL_checkstring(t,2),r.luaL_checkstring(t,3);return console.warn("HaveStoredReal was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function ph(e,t){a.lua_touserdata(t,1),r.luaL_checkstring(t,2),r.luaL_checkstring(t,3);return console.warn("HaveStoredBoolean was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function gh(e,t){a.lua_touserdata(t,1),r.luaL_checkstring(t,2),r.luaL_checkstring(t,3);return console.warn("HaveStoredUnit was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function bh(e,t){a.lua_touserdata(t,1),r.luaL_checkstring(t,2),r.luaL_checkstring(t,3);return console.warn("HaveStoredString was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function wh(e,t){a.lua_touserdata(t,1);return console.warn("FlushGameCache was called but is not implemented :("),0}function vh(e,t){a.lua_touserdata(t,1),r.luaL_checkstring(t,2);return console.warn("FlushStoredMission was called but is not implemented :("),0}function Ah(e,t){a.lua_touserdata(t,1),r.luaL_checkstring(t,2),r.luaL_checkstring(t,3);return console.warn("FlushStoredInteger was called but is not implemented :("),0}function Lh(e,t){a.lua_touserdata(t,1),r.luaL_checkstring(t,2),r.luaL_checkstring(t,3);return console.warn("FlushStoredReal was called but is not implemented :("),0}function yh(e,t){a.lua_touserdata(t,1),r.luaL_checkstring(t,2),r.luaL_checkstring(t,3);return console.warn("FlushStoredBoolean was called but is not implemented :("),0}function Sh(e,t){a.lua_touserdata(t,1),r.luaL_checkstring(t,2),r.luaL_checkstring(t,3);return console.warn("FlushStoredUnit was called but is not implemented :("),0}function Th(e,t){a.lua_touserdata(t,1),r.luaL_checkstring(t,2),r.luaL_checkstring(t,3);return console.warn("FlushStoredString was called but is not implemented :("),0}function Eh(e,t){a.lua_touserdata(t,1),r.luaL_checkstring(t,2),r.luaL_checkstring(t,3);return console.warn("GetStoredInteger was called but is not implemented :("),a.lua_pushinteger(t,0),1}function xh(e,t){a.lua_touserdata(t,1),r.luaL_checkstring(t,2),r.luaL_checkstring(t,3);return console.warn("GetStoredReal was called but is not implemented :("),a.lua_pushnumber(t,0),1}function kh(e,t){a.lua_touserdata(t,1),r.luaL_checkstring(t,2),r.luaL_checkstring(t,3);return console.warn("GetStoredBoolean was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Mh(e,t){a.lua_touserdata(t,1),r.luaL_checkstring(t,2),r.luaL_checkstring(t,3);return console.warn("GetStoredString was called but is not implemented :("),a.lua_pushstring(t,""),1}function Ih(e,t){a.lua_touserdata(t,1),r.luaL_checkstring(t,2),r.luaL_checkstring(t,3),a.lua_touserdata(t,4),r.luaL_checknumber(t,5),r.luaL_checknumber(t,6),r.luaL_checknumber(t,7);return console.warn("RestoreUnit was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Uh(e,t){return console.warn("InitHashtable was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Ph(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3),r.luaL_checkinteger(t,4);return console.warn("SaveInteger was called but is not implemented :("),0}function Rh(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3),r.luaL_checknumber(t,4);return console.warn("SaveReal was called but is not implemented :("),0}function Oh(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3),a.lua_toboolean(t,4);return console.warn("SaveBoolean was called but is not implemented :("),0}function Ch(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3),r.luaL_checkstring(t,4);return console.warn("SaveStr was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Bh(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3),a.lua_touserdata(t,4);return console.warn("SavePlayerHandle was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Fh(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3),a.lua_touserdata(t,4);return console.warn("SaveWidgetHandle was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Dh(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3),a.lua_touserdata(t,4);return console.warn("SaveDestructableHandle was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Gh(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3),a.lua_touserdata(t,4);return console.warn("SaveItemHandle was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Nh(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3),a.lua_touserdata(t,4);return console.warn("SaveUnitHandle was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Vh(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3),a.lua_touserdata(t,4);return console.warn("SaveAbilityHandle was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function jh(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3),a.lua_touserdata(t,4);return console.warn("SaveTimerHandle was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Hh(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3),a.lua_touserdata(t,4);return console.warn("SaveTriggerHandle was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Kh(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3),a.lua_touserdata(t,4);return console.warn("SaveTriggerConditionHandle was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function zh(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3),a.lua_touserdata(t,4);return console.warn("SaveTriggerActionHandle was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Xh(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3),a.lua_touserdata(t,4);return console.warn("SaveTriggerEventHandle was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function qh(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3),a.lua_touserdata(t,4);return console.warn("SaveForceHandle was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Yh(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3),a.lua_touserdata(t,4);return console.warn("SaveGroupHandle was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function $h(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3),a.lua_touserdata(t,4);return console.warn("SaveLocationHandle was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Wh(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3),a.lua_touserdata(t,4);return console.warn("SaveRectHandle was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Zh(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3),a.lua_touserdata(t,4);return console.warn("SaveBooleanExprHandle was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Jh(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3),a.lua_touserdata(t,4);return console.warn("SaveSoundHandle was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Qh(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3),a.lua_touserdata(t,4);return console.warn("SaveEffectHandle was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function ef(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3),a.lua_touserdata(t,4);return console.warn("SaveUnitPoolHandle was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function tf(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3),a.lua_touserdata(t,4);return console.warn("SaveItemPoolHandle was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function nf(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3),a.lua_touserdata(t,4);return console.warn("SaveQuestHandle was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function af(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3),a.lua_touserdata(t,4);return console.warn("SaveQuestItemHandle was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function rf(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3),a.lua_touserdata(t,4);return console.warn("SaveDefeatConditionHandle was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function lf(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3),a.lua_touserdata(t,4);return console.warn("SaveTimerDialogHandle was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function sf(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3),a.lua_touserdata(t,4);return console.warn("SaveLeaderboardHandle was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function of(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3),a.lua_touserdata(t,4);return console.warn("SaveMultiboardHandle was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function uf(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3),a.lua_touserdata(t,4);return console.warn("SaveMultiboardItemHandle was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function cf(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3),a.lua_touserdata(t,4);return console.warn("SaveTrackableHandle was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function df(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3),a.lua_touserdata(t,4);return console.warn("SaveDialogHandle was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function hf(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3),a.lua_touserdata(t,4);return console.warn("SaveButtonHandle was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function ff(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3),a.lua_touserdata(t,4);return console.warn("SaveTextTagHandle was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function _f(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3),a.lua_touserdata(t,4);return console.warn("SaveLightningHandle was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function mf(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3),a.lua_touserdata(t,4);return console.warn("SaveImageHandle was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function pf(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3),a.lua_touserdata(t,4);return console.warn("SaveUbersplatHandle was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function gf(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3),a.lua_touserdata(t,4);return console.warn("SaveRegionHandle was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function bf(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3),a.lua_touserdata(t,4);return console.warn("SaveFogStateHandle was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function wf(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3),a.lua_touserdata(t,4);return console.warn("SaveFogModifierHandle was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function vf(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3),a.lua_touserdata(t,4);return console.warn("SaveAgentHandle was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Af(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3),a.lua_touserdata(t,4);return console.warn("SaveHashtableHandle was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Lf(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3);return console.warn("LoadInteger was called but is not implemented :("),a.lua_pushinteger(t,0),1}function yf(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3);return console.warn("LoadReal was called but is not implemented :("),a.lua_pushnumber(t,0),1}function Sf(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3);return console.warn("LoadBoolean was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Tf(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3);return console.warn("LoadStr was called but is not implemented :("),a.lua_pushstring(t,""),1}function Ef(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3);return console.warn("LoadPlayerHandle was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function xf(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3);return console.warn("LoadWidgetHandle was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function kf(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3);return console.warn("LoadDestructableHandle was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Mf(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3);return console.warn("LoadItemHandle was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function If(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3);return console.warn("LoadUnitHandle was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Uf(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3);return console.warn("LoadAbilityHandle was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Pf(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3);return console.warn("LoadTimerHandle was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Rf(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3);return console.warn("LoadTriggerHandle was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Of(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3);return console.warn("LoadTriggerConditionHandle was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Cf(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3);return console.warn("LoadTriggerActionHandle was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Bf(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3);return console.warn("LoadTriggerEventHandle was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Ff(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3);return console.warn("LoadForceHandle was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Df(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3);return console.warn("LoadGroupHandle was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Gf(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3);return console.warn("LoadLocationHandle was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Nf(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3);return console.warn("LoadRectHandle was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Vf(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3);return console.warn("LoadBooleanExprHandle was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function jf(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3);return console.warn("LoadSoundHandle was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Hf(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3);return console.warn("LoadEffectHandle was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Kf(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3);return console.warn("LoadUnitPoolHandle was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function zf(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3);return console.warn("LoadItemPoolHandle was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Xf(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3);return console.warn("LoadQuestHandle was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function qf(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3);return console.warn("LoadQuestItemHandle was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Yf(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3);return console.warn("LoadDefeatConditionHandle was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function $f(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3);return console.warn("LoadTimerDialogHandle was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Wf(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3);return console.warn("LoadLeaderboardHandle was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Zf(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3);return console.warn("LoadMultiboardHandle was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Jf(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3);return console.warn("LoadMultiboardItemHandle was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Qf(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3);return console.warn("LoadTrackableHandle was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function e_(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3);return console.warn("LoadDialogHandle was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function t_(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3);return console.warn("LoadButtonHandle was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function n_(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3);return console.warn("LoadTextTagHandle was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function a_(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3);return console.warn("LoadLightningHandle was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function r_(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3);return console.warn("LoadImageHandle was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function i_(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3);return console.warn("LoadUbersplatHandle was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function l_(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3);return console.warn("LoadRegionHandle was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function s_(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3);return console.warn("LoadFogStateHandle was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function o_(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3);return console.warn("LoadFogModifierHandle was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function u_(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3);return console.warn("LoadHashtableHandle was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function c_(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3);return console.warn("HaveSavedInteger was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function d_(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3);return console.warn("HaveSavedReal was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function h_(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3);return console.warn("HaveSavedBoolean was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function f_(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3);return console.warn("HaveSavedString was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function __(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3);return console.warn("HaveSavedHandle was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function m_(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3);return console.warn("RemoveSavedInteger was called but is not implemented :("),0}function p_(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3);return console.warn("RemoveSavedReal was called but is not implemented :("),0}function g_(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3);return console.warn("RemoveSavedBoolean was called but is not implemented :("),0}function b_(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3);return console.warn("RemoveSavedString was called but is not implemented :("),0}function w_(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3);return console.warn("RemoveSavedHandle was called but is not implemented :("),0}function v_(e,t){a.lua_touserdata(t,1);return console.warn("FlushParentHashtable was called but is not implemented :("),0}function A_(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2);return console.warn("FlushChildHashtable was called but is not implemented :("),0}function L_(e,t){r.luaL_checkinteger(t,1),r.luaL_checkinteger(t,2);return console.warn("GetRandomInt was called but is not implemented :("),a.lua_pushinteger(t,0),1}function y_(e,t){r.luaL_checknumber(t,1),r.luaL_checknumber(t,2);return console.warn("GetRandomReal was called but is not implemented :("),a.lua_pushnumber(t,0),1}function S_(e,t){return console.warn("CreateUnitPool was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function T_(e,t){a.lua_touserdata(t,1);return console.warn("DestroyUnitPool was called but is not implemented :("),0}function E_(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checknumber(t,3);return console.warn("UnitPoolAddUnitType was called but is not implemented :("),0}function x_(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2);return console.warn("UnitPoolRemoveUnitType was called but is not implemented :("),0}function k_(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2),r.luaL_checknumber(t,3),r.luaL_checknumber(t,4),r.luaL_checknumber(t,5);return console.warn("PlaceRandomUnit was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function M_(e,t){return console.warn("CreateItemPool was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function I_(e,t){a.lua_touserdata(t,1);return console.warn("DestroyItemPool was called but is not implemented :("),0}function U_(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checknumber(t,3);return console.warn("ItemPoolAddItemType was called but is not implemented :("),0}function P_(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2);return console.warn("ItemPoolRemoveItemType was called but is not implemented :("),0}function R_(e,t){a.lua_touserdata(t,1),r.luaL_checknumber(t,2),r.luaL_checknumber(t,3);return console.warn("PlaceRandomItem was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function O_(e,t){r.luaL_checkinteger(t,1);return console.warn("ChooseRandomCreep was called but is not implemented :("),a.lua_pushinteger(t,0),1}function C_(e,t){return console.warn("ChooseRandomNPBuilding was called but is not implemented :("),a.lua_pushinteger(t,0),1}function B_(e,t){r.luaL_checkinteger(t,1);return console.warn("ChooseRandomItem was called but is not implemented :("),a.lua_pushinteger(t,0),1}function F_(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2);return console.warn("ChooseRandomItemEx was called but is not implemented :("),a.lua_pushinteger(t,0),1}function D_(e,t){r.luaL_checkinteger(t,1);return console.warn("SetRandomSeed was called but is not implemented :("),0}function G_(e,t){r.luaL_checknumber(t,1),r.luaL_checknumber(t,2),r.luaL_checknumber(t,3),r.luaL_checknumber(t,4),r.luaL_checknumber(t,5);return console.warn("SetTerrainFog was called but is not implemented :("),0}function N_(e,t){return console.warn("ResetTerrainFog was called but is not implemented :("),0}function V_(e,t){r.luaL_checknumber(t,1),r.luaL_checknumber(t,2),r.luaL_checknumber(t,3),r.luaL_checknumber(t,4),r.luaL_checknumber(t,5);return console.warn("SetUnitFog was called but is not implemented :("),0}function j_(e,t){r.luaL_checkinteger(t,1),r.luaL_checknumber(t,2),r.luaL_checknumber(t,3),r.luaL_checknumber(t,4),r.luaL_checknumber(t,5),r.luaL_checknumber(t,6),r.luaL_checknumber(t,7);return console.warn("SetTerrainFogEx was called but is not implemented :("),0}function H_(e,t){a.lua_touserdata(t,1),r.luaL_checknumber(t,2),r.luaL_checknumber(t,3),r.luaL_checkstring(t,4);return console.warn("DisplayTextToPlayer was called but is not implemented :("),0}function K_(e,t){a.lua_touserdata(t,1),r.luaL_checknumber(t,2),r.luaL_checknumber(t,3),r.luaL_checknumber(t,4),r.luaL_checkstring(t,5);return console.warn("DisplayTimedTextToPlayer was called but is not implemented :("),0}function z_(e,t){a.lua_touserdata(t,1),r.luaL_checknumber(t,2),r.luaL_checknumber(t,3),r.luaL_checknumber(t,4),r.luaL_checkstring(t,5);return console.warn("DisplayTimedTextFromPlayer was called but is not implemented :("),0}function X_(e,t){return console.warn("ClearTextMessages was called but is not implemented :("),0}function q_(e,t){r.luaL_checkstring(t,1),r.luaL_checkstring(t,2);return console.warn("SetDayNightModels was called but is not implemented :("),0}function Y_(e,t){r.luaL_checkstring(t,1);return console.warn("SetSkyModel was called but is not implemented :("),0}function $_(e,t){a.lua_toboolean(t,1);return console.warn("EnableUserControl was called but is not implemented :("),0}function W_(e,t){a.lua_toboolean(t,1);return console.warn("EnableUserUI was called but is not implemented :("),0}function Z_(e,t){a.lua_toboolean(t,1);return console.warn("SuspendTimeOfDay was called but is not implemented :("),0}function J_(e,t){r.luaL_checknumber(t,1);return console.warn("SetTimeOfDayScale was called but is not implemented :("),0}function Q_(e,t){return console.warn("GetTimeOfDayScale was called but is not implemented :("),a.lua_pushnumber(t,0),1}function em(e,t){a.lua_toboolean(t,1),r.luaL_checknumber(t,2);return console.warn("ShowInterface was called but is not implemented :("),0}function tm(e,t){a.lua_toboolean(t,1);return console.warn("PauseGame was called but is not implemented :("),0}function nm(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3),r.luaL_checkinteger(t,4),r.luaL_checkinteger(t,5);return console.warn("UnitAddIndicator was called but is not implemented :("),0}function am(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3),r.luaL_checkinteger(t,4),r.luaL_checkinteger(t,5);return console.warn("AddIndicator was called but is not implemented :("),0}function rm(e,t){r.luaL_checknumber(t,1),r.luaL_checknumber(t,2),r.luaL_checknumber(t,3);return console.warn("PingMinimap was called but is not implemented :("),0}function im(e,t){r.luaL_checknumber(t,1),r.luaL_checknumber(t,2),r.luaL_checknumber(t,3),r.luaL_checkinteger(t,4),r.luaL_checkinteger(t,5),r.luaL_checkinteger(t,6),a.lua_toboolean(t,7);return console.warn("PingMinimapEx was called but is not implemented :("),0}function lm(e,t){a.lua_toboolean(t,1);return console.warn("EnableOcclusion was called but is not implemented :("),0}function sm(e,t){r.luaL_checkstring(t,1);return console.warn("SetIntroShotText was called but is not implemented :("),0}function om(e,t){r.luaL_checkstring(t,1);return console.warn("SetIntroShotModel was called but is not implemented :("),0}function um(e,t){a.lua_toboolean(t,1);return console.warn("EnableWorldFogBoundary was called but is not implemented :("),0}function cm(e,t){r.luaL_checkstring(t,1);return console.warn("PlayModelCinematic was called but is not implemented :("),0}function dm(e,t){r.luaL_checkstring(t,1);return console.warn("PlayCinematic was called but is not implemented :("),0}function hm(e,t){r.luaL_checkstring(t,1);return console.warn("ForceUIKey was called but is not implemented :("),0}function fm(e,t){return console.warn("ForceUICancel was called but is not implemented :("),0}function _m(e,t){return console.warn("DisplayLoadDialog was called but is not implemented :("),0}function mm(e,t){r.luaL_checkstring(t,1);return console.warn("SetAltMinimapIcon was called but is not implemented :("),0}function pm(e,t){a.lua_toboolean(t,1);return console.warn("DisableRestartMission was called but is not implemented :("),0}function gm(e,t){return console.warn("CreateTextTag was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function bm(e,t){a.lua_touserdata(t,1);return console.warn("DestroyTextTag was called but is not implemented :("),0}function wm(e,t){a.lua_touserdata(t,1),r.luaL_checkstring(t,2),r.luaL_checknumber(t,3);return console.warn("SetTextTagText was called but is not implemented :("),0}function vm(e,t){a.lua_touserdata(t,1),r.luaL_checknumber(t,2),r.luaL_checknumber(t,3),r.luaL_checknumber(t,4);return console.warn("SetTextTagPos was called but is not implemented :("),0}function Am(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2),r.luaL_checknumber(t,3);return console.warn("SetTextTagPosUnit was called but is not implemented :("),0}function Lm(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3),r.luaL_checkinteger(t,4),r.luaL_checkinteger(t,5);return console.warn("SetTextTagColor was called but is not implemented :("),0}function ym(e,t){a.lua_touserdata(t,1),r.luaL_checknumber(t,2),r.luaL_checknumber(t,3);return console.warn("SetTextTagVelocity was called but is not implemented :("),0}function Sm(e,t){a.lua_touserdata(t,1),a.lua_toboolean(t,2);return console.warn("SetTextTagVisibility was called but is not implemented :("),0}function Tm(e,t){a.lua_touserdata(t,1),a.lua_toboolean(t,2);return console.warn("SetTextTagSuspended was called but is not implemented :("),0}function Em(e,t){a.lua_touserdata(t,1),a.lua_toboolean(t,2);return console.warn("SetTextTagPermanent was called but is not implemented :("),0}function xm(e,t){a.lua_touserdata(t,1),r.luaL_checknumber(t,2);return console.warn("SetTextTagAge was called but is not implemented :("),0}function km(e,t){a.lua_touserdata(t,1),r.luaL_checknumber(t,2);return console.warn("SetTextTagLifespan was called but is not implemented :("),0}function Mm(e,t){a.lua_touserdata(t,1),r.luaL_checknumber(t,2);return console.warn("SetTextTagFadepoint was called but is not implemented :("),0}function Im(e,t){r.luaL_checkinteger(t,1);return console.warn("SetReservedLocalHeroButtons was called but is not implemented :("),0}function Um(e,t){return console.warn("GetAllyColorFilterState was called but is not implemented :("),a.lua_pushinteger(t,0),1}function Pm(e,t){r.luaL_checkinteger(t,1);return console.warn("SetAllyColorFilterState was called but is not implemented :("),0}function Rm(e,t){return console.warn("GetCreepCampFilterState was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Om(e,t){a.lua_toboolean(t,1);return console.warn("SetCreepCampFilterState was called but is not implemented :("),0}function Cm(e,t){a.lua_toboolean(t,1),a.lua_toboolean(t,2);return console.warn("EnableMinimapFilterButtons was called but is not implemented :("),0}function Bm(e,t){a.lua_toboolean(t,1),a.lua_toboolean(t,2);return console.warn("EnableDragSelect was called but is not implemented :("),0}function Fm(e,t){a.lua_toboolean(t,1),a.lua_toboolean(t,2);return console.warn("EnablePreSelect was called but is not implemented :("),0}function Dm(e,t){a.lua_toboolean(t,1),a.lua_toboolean(t,2);return console.warn("EnableSelect was called but is not implemented :("),0}function Gm(e,t){r.luaL_checkstring(t,1),r.luaL_checknumber(t,2),r.luaL_checknumber(t,3),r.luaL_checknumber(t,4);return console.warn("CreateTrackable was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Nm(e,t){return console.warn("CreateQuest was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Vm(e,t){a.lua_touserdata(t,1);return console.warn("DestroyQuest was called but is not implemented :("),0}function jm(e,t){a.lua_touserdata(t,1),r.luaL_checkstring(t,2);return console.warn("QuestSetTitle was called but is not implemented :("),0}function Hm(e,t){a.lua_touserdata(t,1),r.luaL_checkstring(t,2);return console.warn("QuestSetDescription was called but is not implemented :("),0}function Km(e,t){a.lua_touserdata(t,1),r.luaL_checkstring(t,2);return console.warn("QuestSetIconPath was called but is not implemented :("),0}function zm(e,t){a.lua_touserdata(t,1),a.lua_toboolean(t,2);return console.warn("QuestSetRequired was called but is not implemented :("),0}function Xm(e,t){a.lua_touserdata(t,1),a.lua_toboolean(t,2);return console.warn("QuestSetCompleted was called but is not implemented :("),0}function qm(e,t){a.lua_touserdata(t,1),a.lua_toboolean(t,2);return console.warn("QuestSetDiscovered was called but is not implemented :("),0}function Ym(e,t){a.lua_touserdata(t,1),a.lua_toboolean(t,2);return console.warn("QuestSetFailed was called but is not implemented :("),0}function $m(e,t){a.lua_touserdata(t,1),a.lua_toboolean(t,2);return console.warn("QuestSetEnabled was called but is not implemented :("),0}function Wm(e,t){a.lua_touserdata(t,1);return console.warn("IsQuestRequired was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Zm(e,t){a.lua_touserdata(t,1);return console.warn("IsQuestCompleted was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Jm(e,t){a.lua_touserdata(t,1);return console.warn("IsQuestDiscovered was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Qm(e,t){a.lua_touserdata(t,1);return console.warn("IsQuestFailed was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function ep(e,t){a.lua_touserdata(t,1);return console.warn("IsQuestEnabled was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function tp(e,t){a.lua_touserdata(t,1);return console.warn("QuestCreateItem was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function np(e,t){a.lua_touserdata(t,1),r.luaL_checkstring(t,2);return console.warn("QuestItemSetDescription was called but is not implemented :("),0}function ap(e,t){a.lua_touserdata(t,1),a.lua_toboolean(t,2);return console.warn("QuestItemSetCompleted was called but is not implemented :("),0}function rp(e,t){a.lua_touserdata(t,1);return console.warn("IsQuestItemCompleted was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function ip(e,t){return console.warn("CreateDefeatCondition was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function lp(e,t){a.lua_touserdata(t,1);return console.warn("DestroyDefeatCondition was called but is not implemented :("),0}function sp(e,t){a.lua_touserdata(t,1),r.luaL_checkstring(t,2);return console.warn("DefeatConditionSetDescription was called but is not implemented :("),0}function op(e,t){return console.warn("FlashQuestDialogButton was called but is not implemented :("),0}function up(e,t){return console.warn("ForceQuestDialogUpdate was called but is not implemented :("),0}function cp(e,t){a.lua_touserdata(t,1);return console.warn("CreateTimerDialog was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function dp(e,t){a.lua_touserdata(t,1);return console.warn("DestroyTimerDialog was called but is not implemented :("),0}function hp(e,t){a.lua_touserdata(t,1),r.luaL_checkstring(t,2);return console.warn("TimerDialogSetTitle was called but is not implemented :("),0}function fp(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3),r.luaL_checkinteger(t,4),r.luaL_checkinteger(t,5);return console.warn("TimerDialogSetTitleColor was called but is not implemented :("),0}function _p(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3),r.luaL_checkinteger(t,4),r.luaL_checkinteger(t,5);return console.warn("TimerDialogSetTimeColor was called but is not implemented :("),0}function mp(e,t){a.lua_touserdata(t,1),r.luaL_checknumber(t,2);return console.warn("TimerDialogSetSpeed was called but is not implemented :("),0}function pp(e,t){a.lua_touserdata(t,1),a.lua_toboolean(t,2);return console.warn("TimerDialogDisplay was called but is not implemented :("),0}function gp(e,t){a.lua_touserdata(t,1);return console.warn("IsTimerDialogDisplayed was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function bp(e,t){a.lua_touserdata(t,1),r.luaL_checknumber(t,2);return console.warn("TimerDialogSetRealTimeRemaining was called but is not implemented :("),0}function wp(e,t){return console.warn("CreateLeaderboard was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function vp(e,t){a.lua_touserdata(t,1);return console.warn("DestroyLeaderboard was called but is not implemented :("),0}function Ap(e,t){a.lua_touserdata(t,1),a.lua_toboolean(t,2);return console.warn("LeaderboardDisplay was called but is not implemented :("),0}function Lp(e,t){a.lua_touserdata(t,1);return console.warn("IsLeaderboardDisplayed was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function yp(e,t){a.lua_touserdata(t,1);return console.warn("LeaderboardGetItemCount was called but is not implemented :("),a.lua_pushinteger(t,0),1}function Sp(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2);return console.warn("LeaderboardSetSizeByItemCount was called but is not implemented :("),0}function Tp(e,t){a.lua_touserdata(t,1),r.luaL_checkstring(t,2),r.luaL_checkinteger(t,3),a.lua_touserdata(t,4);return console.warn("LeaderboardAddItem was called but is not implemented :("),0}function Ep(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2);return console.warn("LeaderboardRemoveItem was called but is not implemented :("),0}function xp(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2);return console.warn("LeaderboardRemovePlayerItem was called but is not implemented :("),0}function kp(e,t){a.lua_touserdata(t,1);return console.warn("LeaderboardClear was called but is not implemented :("),0}function Mp(e,t){a.lua_touserdata(t,1),a.lua_toboolean(t,2);return console.warn("LeaderboardSortItemsByValue was called but is not implemented :("),0}function Ip(e,t){a.lua_touserdata(t,1),a.lua_toboolean(t,2);return console.warn("LeaderboardSortItemsByPlayer was called but is not implemented :("),0}function Up(e,t){a.lua_touserdata(t,1),a.lua_toboolean(t,2);return console.warn("LeaderboardSortItemsByLabel was called but is not implemented :("),0}function Pp(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2);return console.warn("LeaderboardHasPlayerItem was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Rp(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2);return console.warn("LeaderboardGetPlayerIndex was called but is not implemented :("),a.lua_pushinteger(t,0),1}function Op(e,t){a.lua_touserdata(t,1),r.luaL_checkstring(t,2);return console.warn("LeaderboardSetLabel was called but is not implemented :("),0}function Cp(e,t){a.lua_touserdata(t,1);return console.warn("LeaderboardGetLabelText was called but is not implemented :("),a.lua_pushstring(t,""),1}function Bp(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2);return console.warn("PlayerSetLeaderboard was called but is not implemented :("),0}function Fp(e,t){a.lua_touserdata(t,1);return console.warn("PlayerGetLeaderboard was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Dp(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3),r.luaL_checkinteger(t,4),r.luaL_checkinteger(t,5);return console.warn("LeaderboardSetLabelColor was called but is not implemented :("),0}function Gp(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3),r.luaL_checkinteger(t,4),r.luaL_checkinteger(t,5);return console.warn("LeaderboardSetValueColor was called but is not implemented :("),0}function Np(e,t){a.lua_touserdata(t,1),a.lua_toboolean(t,2),a.lua_toboolean(t,3),a.lua_toboolean(t,4),a.lua_toboolean(t,5);return console.warn("LeaderboardSetStyle was called but is not implemented :("),0}function Vp(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3);return console.warn("LeaderboardSetItemValue was called but is not implemented :("),0}function jp(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkstring(t,3);return console.warn("LeaderboardSetItemLabel was called but is not implemented :("),0}function Hp(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),a.lua_toboolean(t,3),a.lua_toboolean(t,4),a.lua_toboolean(t,5);return console.warn("LeaderboardSetItemStyle was called but is not implemented :("),0}function Kp(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3),r.luaL_checkinteger(t,4),r.luaL_checkinteger(t,5),r.luaL_checkinteger(t,6);return console.warn("LeaderboardSetItemLabelColor was called but is not implemented :("),0}function zp(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3),r.luaL_checkinteger(t,4),r.luaL_checkinteger(t,5),r.luaL_checkinteger(t,6);return console.warn("LeaderboardSetItemValueColor was called but is not implemented :("),0}function Xp(e,t){return console.warn("CreateMultiboard was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function qp(e,t){a.lua_touserdata(t,1);return console.warn("DestroyMultiboard was called but is not implemented :("),0}function Yp(e,t){a.lua_touserdata(t,1),a.lua_toboolean(t,2);return console.warn("MultiboardDisplay was called but is not implemented :("),0}function $p(e,t){a.lua_touserdata(t,1);return console.warn("IsMultiboardDisplayed was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Wp(e,t){a.lua_touserdata(t,1),a.lua_toboolean(t,2);return console.warn("MultiboardMinimize was called but is not implemented :("),0}function Zp(e,t){a.lua_touserdata(t,1);return console.warn("IsMultiboardMinimized was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Jp(e,t){a.lua_touserdata(t,1);return console.warn("MultiboardClear was called but is not implemented :("),0}function Qp(e,t){a.lua_touserdata(t,1),r.luaL_checkstring(t,2);return console.warn("MultiboardSetTitleText was called but is not implemented :("),0}function eg(e,t){a.lua_touserdata(t,1);return console.warn("MultiboardGetTitleText was called but is not implemented :("),a.lua_pushstring(t,""),1}function tg(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3),r.luaL_checkinteger(t,4),r.luaL_checkinteger(t,5);return console.warn("MultiboardSetTitleTextColor was called but is not implemented :("),0}function ng(e,t){a.lua_touserdata(t,1);return console.warn("MultiboardGetRowCount was called but is not implemented :("),a.lua_pushinteger(t,0),1}function ag(e,t){a.lua_touserdata(t,1);return console.warn("MultiboardGetColumnCount was called but is not implemented :("),a.lua_pushinteger(t,0),1}function rg(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2);return console.warn("MultiboardSetColumnCount was called but is not implemented :("),0}function ig(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2);return console.warn("MultiboardSetRowCount was called but is not implemented :("),0}function lg(e,t){a.lua_touserdata(t,1),a.lua_toboolean(t,2),a.lua_toboolean(t,3);return console.warn("MultiboardSetItemsStyle was called but is not implemented :("),0}function sg(e,t){a.lua_touserdata(t,1),r.luaL_checkstring(t,2);return console.warn("MultiboardSetItemsValue was called but is not implemented :("),0}function og(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3),r.luaL_checkinteger(t,4),r.luaL_checkinteger(t,5);return console.warn("MultiboardSetItemsValueColor was called but is not implemented :("),0}function ug(e,t){a.lua_touserdata(t,1),r.luaL_checknumber(t,2);return console.warn("MultiboardSetItemsWidth was called but is not implemented :("),0}function cg(e,t){a.lua_touserdata(t,1),r.luaL_checkstring(t,2);return console.warn("MultiboardSetItemsIcon was called but is not implemented :("),0}function dg(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3);return console.warn("MultiboardGetItem was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function hg(e,t){a.lua_touserdata(t,1);return console.warn("MultiboardReleaseItem was called but is not implemented :("),0}function fg(e,t){a.lua_touserdata(t,1),a.lua_toboolean(t,2),a.lua_toboolean(t,3);return console.warn("MultiboardSetItemStyle was called but is not implemented :("),0}function _g(e,t){a.lua_touserdata(t,1),r.luaL_checkstring(t,2);return console.warn("MultiboardSetItemValue was called but is not implemented :("),0}function mg(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3),r.luaL_checkinteger(t,4),r.luaL_checkinteger(t,5);return console.warn("MultiboardSetItemValueColor was called but is not implemented :("),0}function pg(e,t){a.lua_touserdata(t,1),r.luaL_checknumber(t,2);return console.warn("MultiboardSetItemWidth was called but is not implemented :("),0}function gg(e,t){a.lua_touserdata(t,1),r.luaL_checkstring(t,2);return console.warn("MultiboardSetItemIcon was called but is not implemented :("),0}function bg(e,t){a.lua_toboolean(t,1);return console.warn("MultiboardSuppressDisplay was called but is not implemented :("),0}function wg(e,t){r.luaL_checknumber(t,1),r.luaL_checknumber(t,2);return console.warn("SetCameraPosition was called but is not implemented :("),0}function vg(e,t){r.luaL_checknumber(t,1),r.luaL_checknumber(t,2);return console.warn("SetCameraQuickPosition was called but is not implemented :("),0}function Ag(e,t){r.luaL_checknumber(t,1),r.luaL_checknumber(t,2),r.luaL_checknumber(t,3),r.luaL_checknumber(t,4),r.luaL_checknumber(t,5),r.luaL_checknumber(t,6),r.luaL_checknumber(t,7),r.luaL_checknumber(t,8);return console.warn("SetCameraBounds was called but is not implemented :("),0}function Lg(e,t){return console.warn("StopCamera was called but is not implemented :("),0}function yg(e,t){r.luaL_checknumber(t,1);return console.warn("ResetToGameCamera was called but is not implemented :("),0}function Sg(e,t){r.luaL_checknumber(t,1),r.luaL_checknumber(t,2);return console.warn("PanCameraTo was called but is not implemented :("),0}function Tg(e,t){r.luaL_checknumber(t,1),r.luaL_checknumber(t,2),r.luaL_checknumber(t,3);return console.warn("PanCameraToTimed was called but is not implemented :("),0}function Eg(e,t){r.luaL_checknumber(t,1),r.luaL_checknumber(t,2),r.luaL_checknumber(t,3);return console.warn("PanCameraToWithZ was called but is not implemented :("),0}function xg(e,t){r.luaL_checknumber(t,1),r.luaL_checknumber(t,2),r.luaL_checknumber(t,3),r.luaL_checknumber(t,4);return console.warn("PanCameraToTimedWithZ was called but is not implemented :("),0}function kg(e,t){r.luaL_checkstring(t,1);return console.warn("SetCinematicCamera was called but is not implemented :("),0}function Mg(e,t){r.luaL_checknumber(t,1),r.luaL_checknumber(t,2),r.luaL_checknumber(t,3),r.luaL_checknumber(t,4);return console.warn("SetCameraRotateMode was called but is not implemented :("),0}function Ig(e,t){a.lua_touserdata(t,1),r.luaL_checknumber(t,2),r.luaL_checknumber(t,3);return console.warn("SetCameraField was called but is not implemented :("),0}function Ug(e,t){a.lua_touserdata(t,1),r.luaL_checknumber(t,2),r.luaL_checknumber(t,3);return console.warn("AdjustCameraField was called but is not implemented :("),0}function Pg(e,t){a.lua_touserdata(t,1),r.luaL_checknumber(t,2),r.luaL_checknumber(t,3),a.lua_toboolean(t,4);return console.warn("SetCameraTargetController was called but is not implemented :("),0}function Rg(e,t){a.lua_touserdata(t,1),r.luaL_checknumber(t,2),r.luaL_checknumber(t,3);return console.warn("SetCameraOrientController was called but is not implemented :("),0}function Og(e,t){return console.warn("CreateCameraSetup was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Cg(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2),r.luaL_checknumber(t,3),r.luaL_checknumber(t,4);return console.warn("CameraSetupSetField was called but is not implemented :("),0}function Bg(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2);return console.warn("CameraSetupGetField was called but is not implemented :("),a.lua_pushnumber(t,0),1}function Fg(e,t){a.lua_touserdata(t,1),r.luaL_checknumber(t,2),r.luaL_checknumber(t,3),r.luaL_checknumber(t,4);return console.warn("CameraSetupSetDestPosition was called but is not implemented :("),0}function Dg(e,t){a.lua_touserdata(t,1);return console.warn("CameraSetupGetDestPositionLoc was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Gg(e,t){a.lua_touserdata(t,1);return console.warn("CameraSetupGetDestPositionX was called but is not implemented :("),a.lua_pushnumber(t,0),1}function Ng(e,t){a.lua_touserdata(t,1);return console.warn("CameraSetupGetDestPositionY was called but is not implemented :("),a.lua_pushnumber(t,0),1}function Vg(e,t){a.lua_touserdata(t,1),a.lua_toboolean(t,2),a.lua_toboolean(t,3);return console.warn("CameraSetupApply was called but is not implemented :("),0}function jg(e,t){a.lua_touserdata(t,1),r.luaL_checknumber(t,2);return console.warn("CameraSetupApplyWithZ was called but is not implemented :("),0}function Hg(e,t){a.lua_touserdata(t,1),a.lua_toboolean(t,2),r.luaL_checknumber(t,3);return console.warn("CameraSetupApplyForceDuration was called but is not implemented :("),0}function Kg(e,t){a.lua_touserdata(t,1),r.luaL_checknumber(t,2),r.luaL_checknumber(t,3);return console.warn("CameraSetupApplyForceDurationWithZ was called but is not implemented :("),0}function zg(e,t){r.luaL_checknumber(t,1),r.luaL_checknumber(t,2);return console.warn("CameraSetTargetNoise was called but is not implemented :("),0}function Xg(e,t){r.luaL_checknumber(t,1),r.luaL_checknumber(t,2);return console.warn("CameraSetSourceNoise was called but is not implemented :("),0}function qg(e,t){r.luaL_checknumber(t,1),r.luaL_checknumber(t,2),a.lua_toboolean(t,3);return console.warn("CameraSetTargetNoiseEx was called but is not implemented :("),0}function Yg(e,t){r.luaL_checknumber(t,1),r.luaL_checknumber(t,2),a.lua_toboolean(t,3);return console.warn("CameraSetSourceNoiseEx was called but is not implemented :("),0}function $g(e,t){r.luaL_checknumber(t,1);return console.warn("CameraSetSmoothingFactor was called but is not implemented :("),0}function Wg(e,t){r.luaL_checkstring(t,1);return console.warn("SetCineFilterTexture was called but is not implemented :("),0}function Zg(e,t){a.lua_touserdata(t,1);return console.warn("SetCineFilterBlendMode was called but is not implemented :("),0}function Jg(e,t){a.lua_touserdata(t,1);return console.warn("SetCineFilterTexMapFlags was called but is not implemented :("),0}function Qg(e,t){r.luaL_checknumber(t,1),r.luaL_checknumber(t,2),r.luaL_checknumber(t,3),r.luaL_checknumber(t,4);return console.warn("SetCineFilterStartUV was called but is not implemented :("),0}function eb(e,t){r.luaL_checknumber(t,1),r.luaL_checknumber(t,2),r.luaL_checknumber(t,3),r.luaL_checknumber(t,4);return console.warn("SetCineFilterEndUV was called but is not implemented :("),0}function tb(e,t){r.luaL_checkinteger(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3),r.luaL_checkinteger(t,4);return console.warn("SetCineFilterStartColor was called but is not implemented :("),0}function nb(e,t){r.luaL_checkinteger(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3),r.luaL_checkinteger(t,4);return console.warn("SetCineFilterEndColor was called but is not implemented :("),0}function ab(e,t){r.luaL_checknumber(t,1);return console.warn("SetCineFilterDuration was called but is not implemented :("),0}function rb(e,t){a.lua_toboolean(t,1);return console.warn("DisplayCineFilter was called but is not implemented :("),0}function ib(e,t){return console.warn("IsCineFilterDisplayed was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function lb(e,t){r.luaL_checkinteger(t,1),a.lua_touserdata(t,2),r.luaL_checkstring(t,3),r.luaL_checkstring(t,4),r.luaL_checknumber(t,5),r.luaL_checknumber(t,6);return console.warn("SetCinematicScene was called but is not implemented :("),0}function sb(e,t){return console.warn("EndCinematicScene was called but is not implemented :("),0}function ob(e,t){a.lua_toboolean(t,1);return console.warn("ForceCinematicSubtitles was called but is not implemented :("),0}function ub(e,t){r.luaL_checkinteger(t,1);return console.warn("GetCameraMargin was called but is not implemented :("),a.lua_pushnumber(t,0),1}function cb(e,t){return console.warn("GetCameraBoundMinX was called but is not implemented :("),a.lua_pushnumber(t,0),1}function db(e,t){return console.warn("GetCameraBoundMinY was called but is not implemented :("),a.lua_pushnumber(t,0),1}function hb(e,t){return console.warn("GetCameraBoundMaxX was called but is not implemented :("),a.lua_pushnumber(t,0),1}function fb(e,t){return console.warn("GetCameraBoundMaxY was called but is not implemented :("),a.lua_pushnumber(t,0),1}function _b(e,t){a.lua_touserdata(t,1);return console.warn("GetCameraField was called but is not implemented :("),a.lua_pushnumber(t,0),1}function mb(e,t){return console.warn("GetCameraTargetPositionX was called but is not implemented :("),a.lua_pushnumber(t,0),1}function pb(e,t){return console.warn("GetCameraTargetPositionY was called but is not implemented :("),a.lua_pushnumber(t,0),1}function gb(e,t){return console.warn("GetCameraTargetPositionZ was called but is not implemented :("),a.lua_pushnumber(t,0),1}function bb(e,t){return console.warn("GetCameraTargetPositionLoc was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function wb(e,t){return console.warn("GetCameraEyePositionX was called but is not implemented :("),a.lua_pushnumber(t,0),1}function vb(e,t){return console.warn("GetCameraEyePositionY was called but is not implemented :("),a.lua_pushnumber(t,0),1}function Ab(e,t){return console.warn("GetCameraEyePositionZ was called but is not implemented :("),a.lua_pushnumber(t,0),1}function Lb(e,t){return console.warn("GetCameraEyePositionLoc was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function yb(e,t){r.luaL_checkstring(t,1);return console.warn("NewSoundEnvironment was called but is not implemented :("),0}function Sb(e,t){r.luaL_checkstring(t,1),a.lua_toboolean(t,2),a.lua_toboolean(t,3),a.lua_toboolean(t,4),r.luaL_checkinteger(t,5),r.luaL_checkinteger(t,6),r.luaL_checkstring(t,7);return console.warn("CreateSound was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Tb(e,t){r.luaL_checkstring(t,1),a.lua_toboolean(t,2),a.lua_toboolean(t,3),a.lua_toboolean(t,4),r.luaL_checkinteger(t,5),r.luaL_checkinteger(t,6),r.luaL_checkstring(t,7);return console.warn("CreateSoundFilenameWithLabel was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Eb(e,t){r.luaL_checkstring(t,1),a.lua_toboolean(t,2),a.lua_toboolean(t,3),a.lua_toboolean(t,4),r.luaL_checkinteger(t,5),r.luaL_checkinteger(t,6);return console.warn("CreateSoundFromLabel was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function xb(e,t){r.luaL_checkstring(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3);return console.warn("CreateMIDISound was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function kb(e,t){a.lua_touserdata(t,1),r.luaL_checkstring(t,2);return console.warn("SetSoundParamsFromLabel was called but is not implemented :("),0}function Mb(e,t){a.lua_touserdata(t,1),r.luaL_checknumber(t,2);return console.warn("SetSoundDistanceCutoff was called but is not implemented :("),0}function Ib(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2);return console.warn("SetSoundChannel was called but is not implemented :("),0}function Ub(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2);return console.warn("SetSoundVolume was called but is not implemented :("),0}function Pb(e,t){a.lua_touserdata(t,1),r.luaL_checknumber(t,2);return console.warn("SetSoundPitch was called but is not implemented :("),0}function Rb(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2);return console.warn("SetSoundPlayPosition was called but is not implemented :("),0}function Ob(e,t){a.lua_touserdata(t,1),r.luaL_checknumber(t,2),r.luaL_checknumber(t,3);return console.warn("SetSoundDistances was called but is not implemented :("),0}function Cb(e,t){a.lua_touserdata(t,1),r.luaL_checknumber(t,2),r.luaL_checknumber(t,3),r.luaL_checkinteger(t,4);return console.warn("SetSoundConeAngles was called but is not implemented :("),0}function Bb(e,t){a.lua_touserdata(t,1),r.luaL_checknumber(t,2),r.luaL_checknumber(t,3),r.luaL_checknumber(t,4);return console.warn("SetSoundConeOrientation was called but is not implemented :("),0}function Fb(e,t){a.lua_touserdata(t,1),r.luaL_checknumber(t,2),r.luaL_checknumber(t,3),r.luaL_checknumber(t,4);return console.warn("SetSoundPosition was called but is not implemented :("),0}function Db(e,t){a.lua_touserdata(t,1),r.luaL_checknumber(t,2),r.luaL_checknumber(t,3),r.luaL_checknumber(t,4);return console.warn("SetSoundVelocity was called but is not implemented :("),0}function Gb(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2);return console.warn("AttachSoundToUnit was called but is not implemented :("),0}function Nb(e,t){a.lua_touserdata(t,1);return console.warn("StartSound was called but is not implemented :("),0}function Vb(e,t){a.lua_touserdata(t,1),a.lua_toboolean(t,2),a.lua_toboolean(t,3);return console.warn("StopSound was called but is not implemented :("),0}function jb(e,t){a.lua_touserdata(t,1);return console.warn("KillSoundWhenDone was called but is not implemented :("),0}function Hb(e,t){r.luaL_checkstring(t,1),a.lua_toboolean(t,2),r.luaL_checkinteger(t,3);return console.warn("SetMapMusic was called but is not implemented :("),0}function Kb(e,t){return console.warn("ClearMapMusic was called but is not implemented :("),0}function zb(e,t){r.luaL_checkstring(t,1);return console.warn("PlayMusic was called but is not implemented :("),0}function Xb(e,t){r.luaL_checkstring(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3);return console.warn("PlayMusicEx was called but is not implemented :("),0}function qb(e,t){a.lua_toboolean(t,1);return console.warn("StopMusic was called but is not implemented :("),0}function Yb(e,t){return console.warn("ResumeMusic was called but is not implemented :("),0}function $b(e,t){r.luaL_checkstring(t,1);return console.warn("PlayThematicMusic was called but is not implemented :("),0}function Wb(e,t){r.luaL_checkstring(t,1),r.luaL_checkinteger(t,2);return console.warn("PlayThematicMusicEx was called but is not implemented :("),0}function Zb(e,t){return console.warn("EndThematicMusic was called but is not implemented :("),0}function Jb(e,t){r.luaL_checkinteger(t,1);return console.warn("SetMusicVolume was called but is not implemented :("),0}function Qb(e,t){r.luaL_checkinteger(t,1);return console.warn("SetMusicPlayPosition was called but is not implemented :("),0}function ew(e,t){r.luaL_checkinteger(t,1);return console.warn("SetThematicMusicPlayPosition was called but is not implemented :("),0}function tw(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2);return console.warn("SetSoundDuration was called but is not implemented :("),0}function nw(e,t){a.lua_touserdata(t,1);return console.warn("GetSoundDuration was called but is not implemented :("),a.lua_pushinteger(t,0),1}function aw(e,t){r.luaL_checkstring(t,1);return console.warn("GetSoundFileDuration was called but is not implemented :("),a.lua_pushinteger(t,0),1}function rw(e,t){a.lua_touserdata(t,1),r.luaL_checknumber(t,2);return console.warn("VolumeGroupSetVolume was called but is not implemented :("),0}function iw(e,t){return console.warn("VolumeGroupReset was called but is not implemented :("),0}function lw(e,t){a.lua_touserdata(t,1);return console.warn("GetSoundIsPlaying was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function sw(e,t){a.lua_touserdata(t,1);return console.warn("GetSoundIsLoading was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function ow(e,t){a.lua_touserdata(t,1),a.lua_toboolean(t,2),r.luaL_checknumber(t,3),r.luaL_checknumber(t,4);return console.warn("RegisterStackedSound was called but is not implemented :("),0}function uw(e,t){a.lua_touserdata(t,1),a.lua_toboolean(t,2),r.luaL_checknumber(t,3),r.luaL_checknumber(t,4);return console.warn("UnregisterStackedSound was called but is not implemented :("),0}function cw(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2);return console.warn("AddWeatherEffect was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function dw(e,t){a.lua_touserdata(t,1);return console.warn("RemoveWeatherEffect was called but is not implemented :("),0}function hw(e,t){a.lua_touserdata(t,1),a.lua_toboolean(t,2);return console.warn("EnableWeatherEffect was called but is not implemented :("),0}function fw(e,t){r.luaL_checknumber(t,1),r.luaL_checknumber(t,2),r.luaL_checknumber(t,3),r.luaL_checknumber(t,4),r.luaL_checkinteger(t,5),a.lua_toboolean(t,6);return console.warn("TerrainDeformCrater was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function _w(e,t){r.luaL_checknumber(t,1),r.luaL_checknumber(t,2),r.luaL_checknumber(t,3),r.luaL_checknumber(t,4),r.luaL_checkinteger(t,5),r.luaL_checkinteger(t,6),r.luaL_checknumber(t,7),r.luaL_checknumber(t,8),r.luaL_checknumber(t,9),a.lua_toboolean(t,10);return console.warn("TerrainDeformRipple was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function mw(e,t){r.luaL_checknumber(t,1),r.luaL_checknumber(t,2),r.luaL_checknumber(t,3),r.luaL_checknumber(t,4),r.luaL_checknumber(t,5),r.luaL_checknumber(t,6),r.luaL_checknumber(t,7),r.luaL_checknumber(t,8),r.luaL_checkinteger(t,9),r.luaL_checkinteger(t,10);return console.warn("TerrainDeformWave was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function pw(e,t){r.luaL_checknumber(t,1),r.luaL_checknumber(t,2),r.luaL_checknumber(t,3),r.luaL_checknumber(t,4),r.luaL_checknumber(t,5),r.luaL_checkinteger(t,6),r.luaL_checkinteger(t,7);return console.warn("TerrainDeformRandom was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function gw(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2);return console.warn("TerrainDeformStop was called but is not implemented :("),0}function bw(e,t){return console.warn("TerrainDeformStopAll was called but is not implemented :("),0}function ww(e,t){r.luaL_checkstring(t,1),r.luaL_checknumber(t,2),r.luaL_checknumber(t,3);return console.warn("AddSpecialEffect was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function vw(e,t){r.luaL_checkstring(t,1),a.lua_touserdata(t,2);return console.warn("AddSpecialEffectLoc was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Aw(e,t){r.luaL_checkstring(t,1),a.lua_touserdata(t,2),r.luaL_checkstring(t,3);return console.warn("AddSpecialEffectTarget was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Lw(e,t){a.lua_touserdata(t,1);return console.warn("DestroyEffect was called but is not implemented :("),0}function yw(e,t){r.luaL_checkstring(t,1),a.lua_touserdata(t,2),r.luaL_checknumber(t,3),r.luaL_checknumber(t,4);return console.warn("AddSpellEffect was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Sw(e,t){r.luaL_checkstring(t,1),a.lua_touserdata(t,2),a.lua_touserdata(t,3);return console.warn("AddSpellEffectLoc was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Tw(e,t){r.luaL_checkinteger(t,1),a.lua_touserdata(t,2),r.luaL_checknumber(t,3),r.luaL_checknumber(t,4);return console.warn("AddSpellEffectById was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Ew(e,t){r.luaL_checkinteger(t,1),a.lua_touserdata(t,2),a.lua_touserdata(t,3);return console.warn("AddSpellEffectByIdLoc was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function xw(e,t){r.luaL_checkstring(t,1),a.lua_touserdata(t,2),a.lua_touserdata(t,3),r.luaL_checkstring(t,4);return console.warn("AddSpellEffectTarget was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function kw(e,t){r.luaL_checkinteger(t,1),a.lua_touserdata(t,2),a.lua_touserdata(t,3),r.luaL_checkstring(t,4);return console.warn("AddSpellEffectTargetById was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Mw(e,t){r.luaL_checkstring(t,1),a.lua_toboolean(t,2),r.luaL_checknumber(t,3),r.luaL_checknumber(t,4),r.luaL_checknumber(t,5),r.luaL_checknumber(t,6);return console.warn("AddLightning was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Iw(e,t){r.luaL_checkstring(t,1),a.lua_toboolean(t,2),r.luaL_checknumber(t,3),r.luaL_checknumber(t,4),r.luaL_checknumber(t,5),r.luaL_checknumber(t,6),r.luaL_checknumber(t,7),r.luaL_checknumber(t,8);return console.warn("AddLightningEx was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Uw(e,t){a.lua_touserdata(t,1);return console.warn("DestroyLightning was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Pw(e,t){a.lua_touserdata(t,1),a.lua_toboolean(t,2),r.luaL_checknumber(t,3),r.luaL_checknumber(t,4),r.luaL_checknumber(t,5),r.luaL_checknumber(t,6);return console.warn("MoveLightning was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Rw(e,t){a.lua_touserdata(t,1),a.lua_toboolean(t,2),r.luaL_checknumber(t,3),r.luaL_checknumber(t,4),r.luaL_checknumber(t,5),r.luaL_checknumber(t,6),r.luaL_checknumber(t,7),r.luaL_checknumber(t,8);return console.warn("MoveLightningEx was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Ow(e,t){a.lua_touserdata(t,1);return console.warn("GetLightningColorA was called but is not implemented :("),a.lua_pushnumber(t,0),1}function Cw(e,t){a.lua_touserdata(t,1);return console.warn("GetLightningColorR was called but is not implemented :("),a.lua_pushnumber(t,0),1}function Bw(e,t){a.lua_touserdata(t,1);return console.warn("GetLightningColorG was called but is not implemented :("),a.lua_pushnumber(t,0),1}function Fw(e,t){a.lua_touserdata(t,1);return console.warn("GetLightningColorB was called but is not implemented :("),a.lua_pushnumber(t,0),1}function Dw(e,t){a.lua_touserdata(t,1),r.luaL_checknumber(t,2),r.luaL_checknumber(t,3),r.luaL_checknumber(t,4),r.luaL_checknumber(t,5);return console.warn("SetLightningColor was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Gw(e,t){r.luaL_checkstring(t,1),a.lua_touserdata(t,2),r.luaL_checkinteger(t,3);return console.warn("GetAbilityEffect was called but is not implemented :("),a.lua_pushstring(t,""),1}function Nw(e,t){r.luaL_checkinteger(t,1),a.lua_touserdata(t,2),r.luaL_checkinteger(t,3);return console.warn("GetAbilityEffectById was called but is not implemented :("),a.lua_pushstring(t,""),1}function Vw(e,t){r.luaL_checkstring(t,1),a.lua_touserdata(t,2);return console.warn("GetAbilitySound was called but is not implemented :("),a.lua_pushstring(t,""),1}function jw(e,t){r.luaL_checkinteger(t,1),a.lua_touserdata(t,2);return console.warn("GetAbilitySoundById was called but is not implemented :("),a.lua_pushstring(t,""),1}function Hw(e,t){r.luaL_checknumber(t,1),r.luaL_checknumber(t,2);return console.warn("GetTerrainCliffLevel was called but is not implemented :("),a.lua_pushinteger(t,0),1}function Kw(e,t){r.luaL_checkinteger(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3),r.luaL_checkinteger(t,4);return console.warn("SetWaterBaseColor was called but is not implemented :("),0}function zw(e,t){a.lua_toboolean(t,1);return console.warn("SetWaterDeforms was called but is not implemented :("),0}function Xw(e,t){r.luaL_checknumber(t,1),r.luaL_checknumber(t,2);return console.warn("GetTerrainType was called but is not implemented :("),a.lua_pushinteger(t,0),1}function qw(e,t){r.luaL_checknumber(t,1),r.luaL_checknumber(t,2);return console.warn("GetTerrainVariance was called but is not implemented :("),a.lua_pushinteger(t,0),1}function Yw(e,t){r.luaL_checknumber(t,1),r.luaL_checknumber(t,2),r.luaL_checkinteger(t,3),r.luaL_checkinteger(t,4),r.luaL_checkinteger(t,5),r.luaL_checkinteger(t,6);return console.warn("SetTerrainType was called but is not implemented :("),0}function $w(e,t){r.luaL_checknumber(t,1),r.luaL_checknumber(t,2),a.lua_touserdata(t,3);return console.warn("IsTerrainPathable was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Ww(e,t){r.luaL_checknumber(t,1),r.luaL_checknumber(t,2),a.lua_touserdata(t,3),a.lua_toboolean(t,4);return console.warn("SetTerrainPathable was called but is not implemented :("),0}function Zw(e,t){r.luaL_checkstring(t,1),r.luaL_checknumber(t,2),r.luaL_checknumber(t,3),r.luaL_checknumber(t,4),r.luaL_checknumber(t,5),r.luaL_checknumber(t,6),r.luaL_checknumber(t,7),r.luaL_checknumber(t,8),r.luaL_checknumber(t,9),r.luaL_checknumber(t,10),r.luaL_checkinteger(t,11);return console.warn("CreateImage was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Jw(e,t){a.lua_touserdata(t,1);return console.warn("DestroyImage was called but is not implemented :("),0}function Qw(e,t){a.lua_touserdata(t,1),a.lua_toboolean(t,2);return console.warn("ShowImage was called but is not implemented :("),0}function ev(e,t){a.lua_touserdata(t,1),a.lua_toboolean(t,2),r.luaL_checknumber(t,3);return console.warn("SetImageConstantHeight was called but is not implemented :("),0}function tv(e,t){a.lua_touserdata(t,1),r.luaL_checknumber(t,2),r.luaL_checknumber(t,3),r.luaL_checknumber(t,4);return console.warn("SetImagePosition was called but is not implemented :("),0}function nv(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3),r.luaL_checkinteger(t,4),r.luaL_checkinteger(t,5);return console.warn("SetImageColor was called but is not implemented :("),0}function av(e,t){a.lua_touserdata(t,1),a.lua_toboolean(t,2);return console.warn("SetImageRender was called but is not implemented :("),0}function rv(e,t){a.lua_touserdata(t,1),a.lua_toboolean(t,2);return console.warn("SetImageRenderAlways was called but is not implemented :("),0}function iv(e,t){a.lua_touserdata(t,1),a.lua_toboolean(t,2),a.lua_toboolean(t,3);return console.warn("SetImageAboveWater was called but is not implemented :("),0}function lv(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2);return console.warn("SetImageType was called but is not implemented :("),0}function sv(e,t){r.luaL_checknumber(t,1),r.luaL_checknumber(t,2),r.luaL_checkstring(t,3),r.luaL_checkinteger(t,4),r.luaL_checkinteger(t,5),r.luaL_checkinteger(t,6),r.luaL_checkinteger(t,7),a.lua_toboolean(t,8),a.lua_toboolean(t,9);return console.warn("CreateUbersplat was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function ov(e,t){a.lua_touserdata(t,1);return console.warn("DestroyUbersplat was called but is not implemented :("),0}function uv(e,t){a.lua_touserdata(t,1);return console.warn("ResetUbersplat was called but is not implemented :("),0}function cv(e,t){a.lua_touserdata(t,1);return console.warn("FinishUbersplat was called but is not implemented :("),0}function dv(e,t){a.lua_touserdata(t,1),a.lua_toboolean(t,2);return console.warn("ShowUbersplat was called but is not implemented :("),0}function hv(e,t){a.lua_touserdata(t,1),a.lua_toboolean(t,2);return console.warn("SetUbersplatRender was called but is not implemented :("),0}function fv(e,t){a.lua_touserdata(t,1),a.lua_toboolean(t,2);return console.warn("SetUbersplatRenderAlways was called but is not implemented :("),0}function _v(e,t){a.lua_touserdata(t,1),r.luaL_checknumber(t,2),r.luaL_checknumber(t,3),r.luaL_checknumber(t,4),a.lua_toboolean(t,5);return console.warn("SetBlight was called but is not implemented :("),0}function mv(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2),a.lua_toboolean(t,3);return console.warn("SetBlightRect was called but is not implemented :("),0}function pv(e,t){a.lua_touserdata(t,1),r.luaL_checknumber(t,2),r.luaL_checknumber(t,3),a.lua_toboolean(t,4);return console.warn("SetBlightPoint was called but is not implemented :("),0}function gv(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2),r.luaL_checknumber(t,3),a.lua_toboolean(t,4);return console.warn("SetBlightLoc was called but is not implemented :("),0}function bv(e,t){a.lua_touserdata(t,1),r.luaL_checknumber(t,2),r.luaL_checknumber(t,3),r.luaL_checknumber(t,4);return console.warn("CreateBlightedGoldmine was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function wv(e,t){r.luaL_checknumber(t,1),r.luaL_checknumber(t,2);return console.warn("IsPointBlighted was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function vv(e,t){r.luaL_checknumber(t,1),r.luaL_checknumber(t,2),r.luaL_checknumber(t,3),r.luaL_checkinteger(t,4),a.lua_toboolean(t,5),r.luaL_checkstring(t,6),a.lua_toboolean(t,7);return console.warn("SetDoodadAnimation was called but is not implemented :("),0}function Av(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkstring(t,3),a.lua_toboolean(t,4);return console.warn("SetDoodadAnimationRect was called but is not implemented :("),0}function Lv(e,t){a.lua_touserdata(t,1),r.luaL_checkstring(t,2);return console.warn("StartMeleeAI was called but is not implemented :("),0}function yv(e,t){a.lua_touserdata(t,1),r.luaL_checkstring(t,2);return console.warn("StartCampaignAI was called but is not implemented :("),0}function Sv(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3);return console.warn("CommandAI was called but is not implemented :("),0}function Tv(e,t){a.lua_touserdata(t,1),a.lua_toboolean(t,2);return console.warn("PauseCompAI was called but is not implemented :("),0}function Ev(e,t){a.lua_touserdata(t,1);return console.warn("GetAIDifficulty was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function xv(e,t){a.lua_touserdata(t,1);return console.warn("RemoveGuardPosition was called but is not implemented :("),0}function kv(e,t){a.lua_touserdata(t,1);return console.warn("RecycleGuardPosition was called but is not implemented :("),0}function Mv(e,t){a.lua_touserdata(t,1);return console.warn("RemoveAllGuardPositions was called but is not implemented :("),0}function Iv(e,t){r.luaL_checkstring(t,1);return console.warn("Cheat was called but is not implemented :("),0}function Uv(e,t){return console.warn("IsNoVictoryCheat was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Pv(e,t){return console.warn("IsNoDefeatCheat was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function Rv(e,t){r.luaL_checkstring(t,1);return console.warn("Preload was called but is not implemented :("),0}function Ov(e,t){r.luaL_checknumber(t,1);return console.warn("PreloadEnd was called but is not implemented :("),0}function Cv(e,t){return console.warn("PreloadStart was called but is not implemented :("),0}function Bv(e,t){return console.warn("PreloadRefresh was called but is not implemented :("),0}function Fv(e,t){return console.warn("PreloadEndEx was called but is not implemented :("),0}function Dv(e,t){return console.warn("PreloadGenClear was called but is not implemented :("),0}function Gv(e,t){return console.warn("PreloadGenStart was called but is not implemented :("),0}function Nv(e,t){r.luaL_checkstring(t,1);return console.warn("PreloadGenEnd was called but is not implemented :("),0}function Vv(e,t){r.luaL_checkstring(t,1);return console.warn("Preloader was called but is not implemented :("),0}function jv(e,t){r.luaL_checkstring(t,1);return console.warn("AutomationTestStart was called but is not implemented :("),0}function Hv(e,t){r.luaL_checkstring(t,1);return console.warn("AutomationTestEnd was called but is not implemented :("),0}function Kv(e,t){return console.warn("BlzGetTriggerPlayerMouseX was called but is not implemented :("),a.lua_pushnumber(t,0),1}function zv(e,t){return console.warn("BlzGetTriggerPlayerMouseY was called but is not implemented :("),a.lua_pushnumber(t,0),1}function Xv(e,t){return console.warn("BlzGetTriggerPlayerMousePosition was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function qv(e,t){return console.warn("BlzGetTriggerPlayerMouseButton was called but is not implemented :("),a.lua_pushlightuserdata(t,{name:"FAKE"}),1}function Yv(e,t){r.luaL_checkinteger(t,1),r.luaL_checkstring(t,2),r.luaL_checkinteger(t,3);return console.warn("BlzSetAbilityTooltip was called but is not implemented :("),0}function $v(e,t){r.luaL_checkinteger(t,1),r.luaL_checkstring(t,2),r.luaL_checkinteger(t,3);return console.warn("BlzSetAbilityActivatedTooltip was called but is not implemented :("),0}function Wv(e,t){r.luaL_checkinteger(t,1),r.luaL_checkstring(t,2),r.luaL_checkinteger(t,3);return console.warn("BlzSetAbilityExtendedTooltip was called but is not implemented :("),0}function Zv(e,t){r.luaL_checkinteger(t,1),r.luaL_checkstring(t,2),r.luaL_checkinteger(t,3);return console.warn("BlzSetAbilityActivatedExtendedTooltip was called but is not implemented :("),0}function Jv(e,t){r.luaL_checkinteger(t,1),r.luaL_checkstring(t,2),r.luaL_checkinteger(t,3);return console.warn("BlzSetAbilityResearchTooltip was called but is not implemented :("),0}function Qv(e,t){r.luaL_checkinteger(t,1),r.luaL_checkstring(t,2),r.luaL_checkinteger(t,3);return console.warn("BlzSetAbilityResearchExtendedTooltip was called but is not implemented :("),0}function eA(e,t){r.luaL_checkinteger(t,1),r.luaL_checkinteger(t,2);return console.warn("BlzGetAbilityTooltip was called but is not implemented :("),a.lua_pushstring(t,""),1}function tA(e,t){r.luaL_checkinteger(t,1),r.luaL_checkinteger(t,2);return console.warn("BlzGetAbilityActivatedTooltip was called but is not implemented :("),a.lua_pushstring(t,""),1}function nA(e,t){r.luaL_checkinteger(t,1),r.luaL_checkinteger(t,2);return console.warn("BlzGetAbilityExtendedTooltip was called but is not implemented :("),a.lua_pushstring(t,""),1}function aA(e,t){r.luaL_checkinteger(t,1),r.luaL_checkinteger(t,2);return console.warn("BlzGetAbilityActivatedExtendedTooltip was called but is not implemented :("),a.lua_pushstring(t,""),1}function rA(e,t){r.luaL_checkinteger(t,1),r.luaL_checkinteger(t,2);return console.warn("BlzGetAbilityResearchTooltip was called but is not implemented :("),a.lua_pushstring(t,""),1}function iA(e,t){r.luaL_checkinteger(t,1),r.luaL_checkinteger(t,2);return console.warn("BlzGetAbilityResearchExtendedTooltip was called but is not implemented :("),a.lua_pushstring(t,""),1}function lA(e,t){r.luaL_checkinteger(t,1),r.luaL_checkstring(t,2);return console.warn("BlzSetAbilityIcon was called but is not implemented :("),0}function sA(e,t){r.luaL_checkinteger(t,1);return console.warn("BlzGetAbilityIcon was called but is not implemented :("),a.lua_pushstring(t,""),1}function oA(e,t){r.luaL_checkinteger(t,1),r.luaL_checkstring(t,2);return console.warn("BlzSetAbilityActivatedIcon was called but is not implemented :("),0}function uA(e,t){r.luaL_checkinteger(t,1);return console.warn("BlzGetAbilityActivatedIcon was called but is not implemented :("),a.lua_pushstring(t,""),1}function cA(e,t){r.luaL_checkinteger(t,1);return console.warn("BlzGetAbilityPosX was called but is not implemented :("),a.lua_pushinteger(t,0),1}function dA(e,t){r.luaL_checkinteger(t,1);return console.warn("BlzGetAbilityPosY was called but is not implemented :("),a.lua_pushinteger(t,0),1}function hA(e,t){r.luaL_checkinteger(t,1),r.luaL_checkinteger(t,2);return console.warn("BlzSetAbilityPosX was called but is not implemented :("),0}function fA(e,t){r.luaL_checkinteger(t,1),r.luaL_checkinteger(t,2);return console.warn("BlzSetAbilityPosY was called but is not implemented :("),0}function _A(e,t){r.luaL_checkinteger(t,1);return console.warn("BlzGetAbilityActivatedPosX was called but is not implemented :("),a.lua_pushinteger(t,0),1}function mA(e,t){r.luaL_checkinteger(t,1);return console.warn("BlzGetAbilityActivatedPosY was called but is not implemented :("),a.lua_pushinteger(t,0),1}function pA(e,t){r.luaL_checkinteger(t,1),r.luaL_checkinteger(t,2);return console.warn("BlzSetAbilityActivatedPosX was called but is not implemented :("),0}function gA(e,t){r.luaL_checkinteger(t,1),r.luaL_checkinteger(t,2);return console.warn("BlzSetAbilityActivatedPosY was called but is not implemented :("),0}function bA(e,t){a.lua_touserdata(t,1);return console.warn("BlzGetUnitMaxHP was called but is not implemented :("),a.lua_pushinteger(t,0),1}function wA(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2);return console.warn("BlzSetUnitMaxHP was called but is not implemented :("),0}function vA(e,t){a.lua_touserdata(t,1);return console.warn("BlzGetUnitMaxMana was called but is not implemented :("),a.lua_pushinteger(t,0),1}function AA(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2);return console.warn("BlzSetUnitMaxMana was called but is not implemented :("),0}function LA(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2);return console.warn("BlzDeleteHeroAbility was called but is not implemented :("),0}function yA(e,t){a.lua_touserdata(t,1),r.luaL_checkstring(t,2);return console.warn("BlzSetItemName was called but is not implemented :("),0}function SA(e,t){a.lua_touserdata(t,1),r.luaL_checkstring(t,2);return console.warn("BlzSetItemDescription was called but is not implemented :("),0}function TA(e,t){a.lua_touserdata(t,1);return console.warn("BlzGetItemDescription was called but is not implemented :("),a.lua_pushstring(t,""),1}function EA(e,t){a.lua_touserdata(t,1),r.luaL_checkstring(t,2);return console.warn("BlzSetItemTooltip was called but is not implemented :("),0}function xA(e,t){a.lua_touserdata(t,1);return console.warn("BlzGetItemTooltip was called but is not implemented :("),a.lua_pushstring(t,""),1}function kA(e,t){a.lua_touserdata(t,1),r.luaL_checkstring(t,2);return console.warn("BlzSetItemExtendedTooltip was called but is not implemented :("),0}function MA(e,t){a.lua_touserdata(t,1);return console.warn("BlzGetItemExtendedTooltip was called but is not implemented :("),a.lua_pushstring(t,""),1}function IA(e,t){a.lua_touserdata(t,1),r.luaL_checkstring(t,2);return console.warn("BlzSetItemIconPath was called but is not implemented :("),0}function UA(e,t){a.lua_touserdata(t,1);return console.warn("BlzGetItemIconPath was called but is not implemented :("),a.lua_pushstring(t,""),1}function PA(e,t){a.lua_touserdata(t,1),r.luaL_checkstring(t,2);return console.warn("BlzSetUnitName was called but is not implemented :("),0}function RA(e,t){a.lua_touserdata(t,1),r.luaL_checkstring(t,2);return console.warn("BlzSetHeroProperName was called but is not implemented :("),0}function OA(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2);return console.warn("BlzGetUnitBaseDamage was called but is not implemented :("),a.lua_pushinteger(t,0),1}function CA(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3);return console.warn("BlzSetUnitBaseDamage was called but is not implemented :("),0}function BA(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2);return console.warn("BlzGetUnitDiceNumber was called but is not implemented :("),a.lua_pushinteger(t,0),1}function FA(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3);return console.warn("BlzSetUnitDiceNumber was called but is not implemented :("),0}function DA(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2);return console.warn("BlzGetUnitDiceSides was called but is not implemented :("),a.lua_pushinteger(t,0),1}function GA(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3);return console.warn("BlzSetUnitDiceSides was called but is not implemented :("),0}function NA(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2);return console.warn("BlzGetUnitAttackCooldown was called but is not implemented :("),a.lua_pushnumber(t,0),1}function VA(e,t){a.lua_touserdata(t,1),r.luaL_checknumber(t,2),r.luaL_checkinteger(t,3);return console.warn("BlzSetUnitAttackCooldown was called but is not implemented :("),0}function jA(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2);return console.warn("BlzSetSpecialEffectColorByPlayer was called but is not implemented :("),0}function HA(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3),r.luaL_checkinteger(t,4);return console.warn("BlzSetSpecialEffectColor was called but is not implemented :("),0}function KA(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2);return console.warn("BlzSetSpecialEffectAlpha was called but is not implemented :("),0}function zA(e,t){a.lua_touserdata(t,1),r.luaL_checknumber(t,2);return console.warn("BlzSetSpecialEffectScale was called but is not implemented :("),0}function XA(e,t){a.lua_touserdata(t,1),r.luaL_checknumber(t,2),r.luaL_checknumber(t,3),r.luaL_checknumber(t,4);return console.warn("BlzSetSpecialEffectPosition was called but is not implemented :("),0}function qA(e,t){a.lua_touserdata(t,1),r.luaL_checknumber(t,2);return console.warn("BlzSetSpecialEffectHeight was called but is not implemented :("),0}function YA(e,t){a.lua_touserdata(t,1),r.luaL_checknumber(t,2);return console.warn("BlzSetSpecialEffectTimeScale was called but is not implemented :("),0}function $A(e,t){a.lua_touserdata(t,1),r.luaL_checknumber(t,2);return console.warn("BlzSetSpecialEffectTime was called but is not implemented :("),0}function WA(e,t){a.lua_touserdata(t,1),r.luaL_checknumber(t,2),r.luaL_checknumber(t,3),r.luaL_checknumber(t,4);return console.warn("BlzSetSpecialEffectOrientation was called but is not implemented :("),0}function ZA(e,t){a.lua_touserdata(t,1),r.luaL_checknumber(t,2);return console.warn("BlzSetSpecialEffectYaw was called but is not implemented :("),0}function JA(e,t){a.lua_touserdata(t,1),r.luaL_checknumber(t,2);return console.warn("BlzSetSpecialEffectPitch was called but is not implemented :("),0}function QA(e,t){a.lua_touserdata(t,1),r.luaL_checknumber(t,2);return console.warn("BlzSetSpecialEffectRoll was called but is not implemented :("),0}function eL(e,t){a.lua_touserdata(t,1),r.luaL_checknumber(t,2);return console.warn("BlzSetSpecialEffectX was called but is not implemented :("),0}function tL(e,t){a.lua_touserdata(t,1),r.luaL_checknumber(t,2);return console.warn("BlzSetSpecialEffectY was called but is not implemented :("),0}function nL(e,t){a.lua_touserdata(t,1),r.luaL_checknumber(t,2);return console.warn("BlzSetSpecialEffectZ was called but is not implemented :("),0}function aL(e,t){a.lua_touserdata(t,1),a.lua_touserdata(t,2);return console.warn("BlzSetSpecialEffectPositionLoc was called but is not implemented :("),0}function rL(e,t){a.lua_touserdata(t,1);return console.warn("BlzGetLocalSpecialEffectX was called but is not implemented :("),a.lua_pushnumber(t,0),1}function iL(e,t){a.lua_touserdata(t,1);return console.warn("BlzGetLocalSpecialEffectY was called but is not implemented :("),a.lua_pushnumber(t,0),1}function lL(e,t){a.lua_touserdata(t,1);return console.warn("BlzGetLocalSpecialEffectZ was called but is not implemented :("),a.lua_pushnumber(t,0),1}function sL(e,t){a.lua_touserdata(t,1);return console.warn("BlzGetUnitArmor was called but is not implemented :("),a.lua_pushnumber(t,0),1}function oL(e,t){a.lua_touserdata(t,1),r.luaL_checknumber(t,2);return console.warn("BlzSetUnitArmor was called but is not implemented :("),0}function uL(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),a.lua_toboolean(t,3);return console.warn("BlzUnitHideAbility was called but is not implemented :("),0}function cL(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),a.lua_toboolean(t,3),a.lua_toboolean(t,4);return console.warn("BlzUnitDisableAbility was called but is not implemented :("),0}function dL(e,t){a.lua_touserdata(t,1);return console.warn("BlzUnitCancelTimedLife was called but is not implemented :("),0}function hL(e,t){a.lua_touserdata(t,1);return console.warn("BlzIsUnitSelectable was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function fL(e,t){a.lua_touserdata(t,1);return console.warn("BlzIsUnitInvulnerable was called but is not implemented :("),a.lua_pushboolean(t,!1),1}function _L(e,t){a.lua_touserdata(t,1);return console.warn("BlzUnitInterruptAttack was called but is not implemented :("),0}function mL(e,t){a.lua_touserdata(t,1);return console.warn("BlzGetUnitCollisionSize was called but is not implemented :("),a.lua_pushnumber(t,0),1}function pL(e,t){r.luaL_checkinteger(t,1),r.luaL_checkinteger(t,2);return console.warn("BlzGetAbilityManaCost was called but is not implemented :("),a.lua_pushinteger(t,0),1}function gL(e,t){r.luaL_checkinteger(t,1),r.luaL_checkinteger(t,2);return console.warn("BlzGetAbilityCooldown was called but is not implemented :("),a.lua_pushnumber(t,0),1}function bL(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3),r.luaL_checknumber(t,4);return console.warn("BlzSetUnitAbilityCooldown was called but is not implemented :("),0}function wL(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3);return console.warn("BlzGetUnitAbilityCooldown was called but is not implemented :("),a.lua_pushnumber(t,0),1}function vL(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2);return console.warn("BlzGetUnitAbilityCooldownRemaining was called but is not implemented :("),a.lua_pushnumber(t,0),1}function AL(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2);return console.warn("BlzEndUnitAbilityCooldown was called but is not implemented :("),0}function LL(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3);return console.warn("BlzGetUnitAbilityManaCost was called but is not implemented :("),a.lua_pushinteger(t,0),1}function yL(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3),r.luaL_checkinteger(t,4);return console.warn("BlzSetUnitAbilityManaCost was called but is not implemented :("),0}function SL(e,t){a.lua_touserdata(t,1);return console.warn("BlzGetLocalUnitZ was called but is not implemented :("),a.lua_pushnumber(t,0),1}function TL(e,t){a.lua_touserdata(t,1),r.luaL_checkinteger(t,2),r.luaL_checkinteger(t,3);return console.warn("BlzDecPlayerTechResearched was called but is not implemented :("),0}function EL(e,t){r.luaL_checknumber(t,1);return console.warn("BlzSetEventDamage was called but is not implemented :("),0}t.default=function(e){let t=e.L;a.lua_register(t,"ConvertRace",l.bind(null,e)),a.lua_register(t,"ConvertAllianceType",s.bind(null,e)),a.lua_register(t,"ConvertRacePref",o.bind(null,e)),a.lua_register(t,"ConvertIGameState",u.bind(null,e)),a.lua_register(t,"ConvertFGameState",c.bind(null,e)),a.lua_register(t,"ConvertPlayerState",d.bind(null,e)),a.lua_register(t,"ConvertPlayerScore",h.bind(null,e)),a.lua_register(t,"ConvertPlayerGameResult",f.bind(null,e)),a.lua_register(t,"ConvertUnitState",_.bind(null,e)),a.lua_register(t,"ConvertAIDifficulty",m.bind(null,e)),a.lua_register(t,"ConvertGameEvent",p.bind(null,e)),a.lua_register(t,"ConvertPlayerEvent",g.bind(null,e)),a.lua_register(t,"ConvertPlayerUnitEvent",b.bind(null,e)),a.lua_register(t,"ConvertWidgetEvent",w.bind(null,e)),a.lua_register(t,"ConvertDialogEvent",v.bind(null,e)),a.lua_register(t,"ConvertUnitEvent",A.bind(null,e)),a.lua_register(t,"ConvertLimitOp",L.bind(null,e)),a.lua_register(t,"ConvertUnitType",y.bind(null,e)),a.lua_register(t,"ConvertGameSpeed",S.bind(null,e)),a.lua_register(t,"ConvertPlacement",T.bind(null,e)),a.lua_register(t,"ConvertStartLocPrio",E.bind(null,e)),a.lua_register(t,"ConvertGameDifficulty",x.bind(null,e)),a.lua_register(t,"ConvertGameType",k.bind(null,e)),a.lua_register(t,"ConvertMapFlag",M.bind(null,e)),a.lua_register(t,"ConvertMapVisibility",I.bind(null,e)),a.lua_register(t,"ConvertMapSetting",U.bind(null,e)),a.lua_register(t,"ConvertMapDensity",P.bind(null,e)),a.lua_register(t,"ConvertMapControl",R.bind(null,e)),a.lua_register(t,"ConvertPlayerColor",O.bind(null,e)),a.lua_register(t,"ConvertPlayerSlotState",C.bind(null,e)),a.lua_register(t,"ConvertVolumeGroup",B.bind(null,e)),a.lua_register(t,"ConvertCameraField",F.bind(null,e)),a.lua_register(t,"ConvertBlendMode",D.bind(null,e)),a.lua_register(t,"ConvertRarityControl",G.bind(null,e)),a.lua_register(t,"ConvertTexMapFlags",N.bind(null,e)),a.lua_register(t,"ConvertFogState",V.bind(null,e)),a.lua_register(t,"ConvertEffectType",j.bind(null,e)),a.lua_register(t,"ConvertVersion",H.bind(null,e)),a.lua_register(t,"ConvertItemType",K.bind(null,e)),a.lua_register(t,"ConvertAttackType",z.bind(null,e)),a.lua_register(t,"ConvertDamageType",X.bind(null,e)),a.lua_register(t,"ConvertWeaponType",q.bind(null,e)),a.lua_register(t,"ConvertSoundType",Y.bind(null,e)),a.lua_register(t,"ConvertPathingType",$.bind(null,e)),a.lua_register(t,"ConvertMouseButtonType",W.bind(null,e)),a.lua_register(t,"OrderId",Z.bind(null,e)),a.lua_register(t,"OrderId2String",J.bind(null,e)),a.lua_register(t,"UnitId",Q.bind(null,e)),a.lua_register(t,"UnitId2String",ee.bind(null,e)),a.lua_register(t,"AbilityId",te.bind(null,e)),a.lua_register(t,"AbilityId2String",ne.bind(null,e)),a.lua_register(t,"GetObjectName",ae.bind(null,e)),a.lua_register(t,"GetBJMaxPlayers",re.bind(null,e)),a.lua_register(t,"GetBJPlayerNeutralVictim",ie.bind(null,e)),a.lua_register(t,"GetBJPlayerNeutralExtra",le.bind(null,e)),a.lua_register(t,"GetBJMaxPlayerSlots",se.bind(null,e)),a.lua_register(t,"GetPlayerNeutralPassive",oe.bind(null,e)),a.lua_register(t,"GetPlayerNeutralAggressive",ue.bind(null,e)),a.lua_register(t,"Deg2Rad",ce.bind(null,e)),a.lua_register(t,"Rad2Deg",de.bind(null,e)),a.lua_register(t,"Sin",he.bind(null,e)),a.lua_register(t,"Cos",fe.bind(null,e)),a.lua_register(t,"Tan",_e.bind(null,e)),a.lua_register(t,"Asin",me.bind(null,e)),a.lua_register(t,"Acos",pe.bind(null,e)),a.lua_register(t,"Atan",ge.bind(null,e)),a.lua_register(t,"Atan2",be.bind(null,e)),a.lua_register(t,"SquareRoot",we.bind(null,e)),a.lua_register(t,"Pow",ve.bind(null,e)),a.lua_register(t,"I2R",Ae.bind(null,e)),a.lua_register(t,"R2I",Le.bind(null,e)),a.lua_register(t,"I2S",ye.bind(null,e)),a.lua_register(t,"R2S",Se.bind(null,e)),a.lua_register(t,"R2SW",Te.bind(null,e)),a.lua_register(t,"S2I",Ee.bind(null,e)),a.lua_register(t,"S2R",xe.bind(null,e)),a.lua_register(t,"GetHandleId",ke.bind(null,e)),a.lua_register(t,"SubString",Me.bind(null,e)),a.lua_register(t,"StringLength",Ie.bind(null,e)),a.lua_register(t,"StringCase",Ue.bind(null,e)),a.lua_register(t,"StringHash",Pe.bind(null,e)),a.lua_register(t,"GetLocalizedString",Re.bind(null,e)),a.lua_register(t,"GetLocalizedHotkey",Oe.bind(null,e)),a.lua_register(t,"SetMapName",Ce.bind(null,e)),a.lua_register(t,"SetMapDescription",Be.bind(null,e)),a.lua_register(t,"SetTeams",Fe.bind(null,e)),a.lua_register(t,"SetPlayers",De.bind(null,e)),a.lua_register(t,"DefineStartLocation",Ge.bind(null,e)),a.lua_register(t,"DefineStartLocationLoc",Ne.bind(null,e)),a.lua_register(t,"SetStartLocPrioCount",Ve.bind(null,e)),a.lua_register(t,"SetStartLocPrio",je.bind(null,e)),a.lua_register(t,"GetStartLocPrioSlot",He.bind(null,e)),a.lua_register(t,"GetStartLocPrio",Ke.bind(null,e)),a.lua_register(t,"SetGameTypeSupported",ze.bind(null,e)),a.lua_register(t,"SetMapFlag",Xe.bind(null,e)),a.lua_register(t,"SetGamePlacement",qe.bind(null,e)),a.lua_register(t,"SetGameSpeed",Ye.bind(null,e)),a.lua_register(t,"SetGameDifficulty",$e.bind(null,e)),a.lua_register(t,"SetResourceDensity",We.bind(null,e)),a.lua_register(t,"SetCreatureDensity",Ze.bind(null,e)),a.lua_register(t,"GetTeams",Je.bind(null,e)),a.lua_register(t,"GetPlayers",Qe.bind(null,e)),a.lua_register(t,"IsGameTypeSupported",et.bind(null,e)),a.lua_register(t,"GetGameTypeSelected",tt.bind(null,e)),a.lua_register(t,"IsMapFlagSet",nt.bind(null,e)),a.lua_register(t,"GetGamePlacement",at.bind(null,e)),a.lua_register(t,"GetGameSpeed",rt.bind(null,e)),a.lua_register(t,"GetGameDifficulty",it.bind(null,e)),a.lua_register(t,"GetResourceDensity",lt.bind(null,e)),a.lua_register(t,"GetCreatureDensity",st.bind(null,e)),a.lua_register(t,"GetStartLocationX",ot.bind(null,e)),a.lua_register(t,"GetStartLocationY",ut.bind(null,e)),a.lua_register(t,"GetStartLocationLoc",ct.bind(null,e)),a.lua_register(t,"SetPlayerTeam",dt.bind(null,e)),a.lua_register(t,"SetPlayerStartLocation",ht.bind(null,e)),a.lua_register(t,"ForcePlayerStartLocation",ft.bind(null,e)),a.lua_register(t,"SetPlayerColor",_t.bind(null,e)),a.lua_register(t,"SetPlayerAlliance",mt.bind(null,e)),a.lua_register(t,"SetPlayerTaxRate",pt.bind(null,e)),a.lua_register(t,"SetPlayerRacePreference",gt.bind(null,e)),a.lua_register(t,"SetPlayerRaceSelectable",bt.bind(null,e)),a.lua_register(t,"SetPlayerController",wt.bind(null,e)),a.lua_register(t,"SetPlayerName",vt.bind(null,e)),a.lua_register(t,"SetPlayerOnScoreScreen",At.bind(null,e)),a.lua_register(t,"GetPlayerTeam",Lt.bind(null,e)),a.lua_register(t,"GetPlayerStartLocation",yt.bind(null,e)),a.lua_register(t,"GetPlayerColor",St.bind(null,e)),a.lua_register(t,"GetPlayerSelectable",Tt.bind(null,e)),a.lua_register(t,"GetPlayerController",Et.bind(null,e)),a.lua_register(t,"GetPlayerSlotState",xt.bind(null,e)),a.lua_register(t,"GetPlayerTaxRate",kt.bind(null,e)),a.lua_register(t,"IsPlayerRacePrefSet",Mt.bind(null,e)),a.lua_register(t,"GetPlayerName",It.bind(null,e)),a.lua_register(t,"CreateTimer",Ut.bind(null,e)),a.lua_register(t,"DestroyTimer",Pt.bind(null,e)),a.lua_register(t,"TimerStart",Rt.bind(null,e)),a.lua_register(t,"TimerGetElapsed",Ot.bind(null,e)),a.lua_register(t,"TimerGetRemaining",Ct.bind(null,e)),a.lua_register(t,"TimerGetTimeout",Bt.bind(null,e)),a.lua_register(t,"PauseTimer",Ft.bind(null,e)),a.lua_register(t,"ResumeTimer",Dt.bind(null,e)),a.lua_register(t,"GetExpiredTimer",Gt.bind(null,e)),a.lua_register(t,"CreateGroup",Nt.bind(null,e)),a.lua_register(t,"DestroyGroup",Vt.bind(null,e)),a.lua_register(t,"GroupAddUnit",jt.bind(null,e)),a.lua_register(t,"GroupRemoveUnit",Ht.bind(null,e)),a.lua_register(t,"GroupClear",Kt.bind(null,e)),a.lua_register(t,"GroupEnumUnitsOfType",zt.bind(null,e)),a.lua_register(t,"GroupEnumUnitsOfPlayer",Xt.bind(null,e)),a.lua_register(t,"GroupEnumUnitsOfTypeCounted",qt.bind(null,e)),a.lua_register(t,"GroupEnumUnitsInRect",Yt.bind(null,e)),a.lua_register(t,"GroupEnumUnitsInRectCounted",$t.bind(null,e)),a.lua_register(t,"GroupEnumUnitsInRange",Wt.bind(null,e)),a.lua_register(t,"GroupEnumUnitsInRangeOfLoc",Zt.bind(null,e)),a.lua_register(t,"GroupEnumUnitsInRangeCounted",Jt.bind(null,e)),a.lua_register(t,"GroupEnumUnitsInRangeOfLocCounted",Qt.bind(null,e)),a.lua_register(t,"GroupEnumUnitsSelected",en.bind(null,e)),a.lua_register(t,"GroupImmediateOrder",tn.bind(null,e)),a.lua_register(t,"GroupImmediateOrderById",nn.bind(null,e)),a.lua_register(t,"GroupPointOrder",an.bind(null,e)),a.lua_register(t,"GroupPointOrderLoc",rn.bind(null,e)),a.lua_register(t,"GroupPointOrderById",ln.bind(null,e)),a.lua_register(t,"GroupPointOrderByIdLoc",sn.bind(null,e)),a.lua_register(t,"GroupTargetOrder",on.bind(null,e)),a.lua_register(t,"GroupTargetOrderById",un.bind(null,e)),a.lua_register(t,"ForGroup",cn.bind(null,e)),a.lua_register(t,"FirstOfGroup",dn.bind(null,e)),a.lua_register(t,"CreateForce",hn.bind(null,e)),a.lua_register(t,"DestroyForce",fn.bind(null,e)),a.lua_register(t,"ForceAddPlayer",_n.bind(null,e)),a.lua_register(t,"ForceRemovePlayer",mn.bind(null,e)),a.lua_register(t,"ForceClear",pn.bind(null,e)),a.lua_register(t,"ForceEnumPlayers",gn.bind(null,e)),a.lua_register(t,"ForceEnumPlayersCounted",bn.bind(null,e)),a.lua_register(t,"ForceEnumAllies",wn.bind(null,e)),a.lua_register(t,"ForceEnumEnemies",vn.bind(null,e)),a.lua_register(t,"ForForce",An.bind(null,e)),a.lua_register(t,"Rect",Ln.bind(null,e)),a.lua_register(t,"RectFromLoc",yn.bind(null,e)),a.lua_register(t,"RemoveRect",Sn.bind(null,e)),a.lua_register(t,"SetRect",Tn.bind(null,e)),a.lua_register(t,"SetRectFromLoc",En.bind(null,e)),a.lua_register(t,"MoveRectTo",xn.bind(null,e)),a.lua_register(t,"MoveRectToLoc",kn.bind(null,e)),a.lua_register(t,"GetRectCenterX",Mn.bind(null,e)),a.lua_register(t,"GetRectCenterY",In.bind(null,e)),a.lua_register(t,"GetRectMinX",Un.bind(null,e)),a.lua_register(t,"GetRectMinY",Pn.bind(null,e)),a.lua_register(t,"GetRectMaxX",Rn.bind(null,e)),a.lua_register(t,"GetRectMaxY",On.bind(null,e)),a.lua_register(t,"CreateRegion",Cn.bind(null,e)),a.lua_register(t,"RemoveRegion",Bn.bind(null,e)),a.lua_register(t,"RegionAddRect",Fn.bind(null,e)),a.lua_register(t,"RegionClearRect",Dn.bind(null,e)),a.lua_register(t,"RegionAddCell",Gn.bind(null,e)),a.lua_register(t,"RegionAddCellAtLoc",Nn.bind(null,e)),a.lua_register(t,"RegionClearCell",Vn.bind(null,e)),a.lua_register(t,"RegionClearCellAtLoc",jn.bind(null,e)),a.lua_register(t,"Location",Hn.bind(null,e)),a.lua_register(t,"RemoveLocation",Kn.bind(null,e)),a.lua_register(t,"MoveLocation",zn.bind(null,e)),a.lua_register(t,"GetLocationX",Xn.bind(null,e)),a.lua_register(t,"GetLocationY",qn.bind(null,e)),a.lua_register(t,"GetLocationZ",Yn.bind(null,e)),a.lua_register(t,"IsUnitInRegion",$n.bind(null,e)),a.lua_register(t,"IsPointInRegion",Wn.bind(null,e)),a.lua_register(t,"IsLocationInRegion",Zn.bind(null,e)),a.lua_register(t,"GetWorldBounds",Jn.bind(null,e)),a.lua_register(t,"CreateTrigger",Qn.bind(null,e)),a.lua_register(t,"DestroyTrigger",ea.bind(null,e)),a.lua_register(t,"ResetTrigger",ta.bind(null,e)),a.lua_register(t,"EnableTrigger",na.bind(null,e)),a.lua_register(t,"DisableTrigger",aa.bind(null,e)),a.lua_register(t,"IsTriggerEnabled",ra.bind(null,e)),a.lua_register(t,"TriggerWaitOnSleeps",ia.bind(null,e)),a.lua_register(t,"IsTriggerWaitOnSleeps",la.bind(null,e)),a.lua_register(t,"GetFilterUnit",sa.bind(null,e)),a.lua_register(t,"GetEnumUnit",oa.bind(null,e)),a.lua_register(t,"GetFilterDestructable",ua.bind(null,e)),a.lua_register(t,"GetEnumDestructable",ca.bind(null,e)),a.lua_register(t,"GetFilterItem",da.bind(null,e)),a.lua_register(t,"GetEnumItem",ha.bind(null,e)),a.lua_register(t,"GetFilterPlayer",fa.bind(null,e)),a.lua_register(t,"GetEnumPlayer",_a.bind(null,e)),a.lua_register(t,"GetTriggeringTrigger",ma.bind(null,e)),a.lua_register(t,"GetTriggerEventId",pa.bind(null,e)),a.lua_register(t,"GetTriggerEvalCount",ga.bind(null,e)),a.lua_register(t,"GetTriggerExecCount",ba.bind(null,e)),a.lua_register(t,"ExecuteFunc",wa.bind(null,e)),a.lua_register(t,"And",va.bind(null,e)),a.lua_register(t,"Or",Aa.bind(null,e)),a.lua_register(t,"Not",La.bind(null,e)),a.lua_register(t,"Condition",ya.bind(null,e)),a.lua_register(t,"DestroyCondition",Sa.bind(null,e)),a.lua_register(t,"Filter",Ta.bind(null,e)),a.lua_register(t,"DestroyFilter",Ea.bind(null,e)),a.lua_register(t,"DestroyBoolExpr",xa.bind(null,e)),a.lua_register(t,"TriggerRegisterVariableEvent",ka.bind(null,e)),a.lua_register(t,"TriggerRegisterTimerEvent",Ma.bind(null,e)),a.lua_register(t,"TriggerRegisterTimerExpireEvent",Ia.bind(null,e)),a.lua_register(t,"TriggerRegisterGameStateEvent",Ua.bind(null,e)),a.lua_register(t,"TriggerRegisterDialogEvent",Pa.bind(null,e)),a.lua_register(t,"TriggerRegisterDialogButtonEvent",Ra.bind(null,e)),a.lua_register(t,"GetEventGameState",Oa.bind(null,e)),a.lua_register(t,"TriggerRegisterGameEvent",Ca.bind(null,e)),a.lua_register(t,"GetWinningPlayer",Ba.bind(null,e)),a.lua_register(t,"TriggerRegisterEnterRegion",Fa.bind(null,e)),a.lua_register(t,"GetTriggeringRegion",Da.bind(null,e)),a.lua_register(t,"GetEnteringUnit",Ga.bind(null,e)),a.lua_register(t,"TriggerRegisterLeaveRegion",Na.bind(null,e)),a.lua_register(t,"GetLeavingUnit",Va.bind(null,e)),a.lua_register(t,"TriggerRegisterTrackableHitEvent",ja.bind(null,e)),a.lua_register(t,"TriggerRegisterTrackableTrackEvent",Ha.bind(null,e)),a.lua_register(t,"GetTriggeringTrackable",Ka.bind(null,e)),a.lua_register(t,"GetClickedButton",za.bind(null,e)),a.lua_register(t,"GetClickedDialog",Xa.bind(null,e)),a.lua_register(t,"GetTournamentFinishSoonTimeRemaining",qa.bind(null,e)),a.lua_register(t,"GetTournamentFinishNowRule",Ya.bind(null,e)),a.lua_register(t,"GetTournamentFinishNowPlayer",$a.bind(null,e)),a.lua_register(t,"GetTournamentScore",Wa.bind(null,e)),a.lua_register(t,"GetSaveBasicFilename",Za.bind(null,e)),a.lua_register(t,"TriggerRegisterPlayerEvent",Ja.bind(null,e)),a.lua_register(t,"GetTriggerPlayer",Qa.bind(null,e)),a.lua_register(t,"TriggerRegisterPlayerUnitEvent",er.bind(null,e)),a.lua_register(t,"GetLevelingUnit",tr.bind(null,e)),a.lua_register(t,"GetLearningUnit",nr.bind(null,e)),a.lua_register(t,"GetLearnedSkill",ar.bind(null,e)),a.lua_register(t,"GetLearnedSkillLevel",rr.bind(null,e)),a.lua_register(t,"GetRevivableUnit",ir.bind(null,e)),a.lua_register(t,"GetRevivingUnit",lr.bind(null,e)),a.lua_register(t,"GetAttacker",sr.bind(null,e)),a.lua_register(t,"GetRescuer",or.bind(null,e)),a.lua_register(t,"GetDyingUnit",ur.bind(null,e)),a.lua_register(t,"GetKillingUnit",cr.bind(null,e)),a.lua_register(t,"GetDecayingUnit",dr.bind(null,e)),a.lua_register(t,"GetConstructingStructure",hr.bind(null,e)),a.lua_register(t,"GetCancelledStructure",fr.bind(null,e)),a.lua_register(t,"GetConstructedStructure",_r.bind(null,e)),a.lua_register(t,"GetResearchingUnit",mr.bind(null,e)),a.lua_register(t,"GetResearched",pr.bind(null,e)),a.lua_register(t,"GetTrainedUnitType",gr.bind(null,e)),a.lua_register(t,"GetTrainedUnit",br.bind(null,e)),a.lua_register(t,"GetDetectedUnit",wr.bind(null,e)),a.lua_register(t,"GetSummoningUnit",vr.bind(null,e)),a.lua_register(t,"GetSummonedUnit",Ar.bind(null,e)),a.lua_register(t,"GetTransportUnit",Lr.bind(null,e)),a.lua_register(t,"GetLoadedUnit",yr.bind(null,e)),a.lua_register(t,"GetSellingUnit",Sr.bind(null,e)),a.lua_register(t,"GetSoldUnit",Tr.bind(null,e)),a.lua_register(t,"GetBuyingUnit",Er.bind(null,e)),a.lua_register(t,"GetSoldItem",xr.bind(null,e)),a.lua_register(t,"GetChangingUnit",kr.bind(null,e)),a.lua_register(t,"GetChangingUnitPrevOwner",Mr.bind(null,e)),a.lua_register(t,"GetManipulatingUnit",Ir.bind(null,e)),a.lua_register(t,"GetManipulatedItem",Ur.bind(null,e)),a.lua_register(t,"GetOrderedUnit",Pr.bind(null,e)),a.lua_register(t,"GetIssuedOrderId",Rr.bind(null,e)),a.lua_register(t,"GetOrderPointX",Or.bind(null,e)),a.lua_register(t,"GetOrderPointY",Cr.bind(null,e)),a.lua_register(t,"GetOrderPointLoc",Br.bind(null,e)),a.lua_register(t,"GetOrderTarget",Fr.bind(null,e)),a.lua_register(t,"GetOrderTargetDestructable",Dr.bind(null,e)),a.lua_register(t,"GetOrderTargetItem",Gr.bind(null,e)),a.lua_register(t,"GetOrderTargetUnit",Nr.bind(null,e)),a.lua_register(t,"GetSpellAbilityUnit",Vr.bind(null,e)),a.lua_register(t,"GetSpellAbilityId",jr.bind(null,e)),a.lua_register(t,"GetSpellAbility",Hr.bind(null,e)),a.lua_register(t,"GetSpellTargetLoc",Kr.bind(null,e)),a.lua_register(t,"GetSpellTargetX",zr.bind(null,e)),a.lua_register(t,"GetSpellTargetY",Xr.bind(null,e)),a.lua_register(t,"GetSpellTargetDestructable",qr.bind(null,e)),a.lua_register(t,"GetSpellTargetItem",Yr.bind(null,e)),a.lua_register(t,"GetSpellTargetUnit",$r.bind(null,e)),a.lua_register(t,"TriggerRegisterPlayerAllianceChange",Wr.bind(null,e)),a.lua_register(t,"TriggerRegisterPlayerStateEvent",Zr.bind(null,e)),a.lua_register(t,"GetEventPlayerState",Jr.bind(null,e)),a.lua_register(t,"TriggerRegisterPlayerChatEvent",Qr.bind(null,e)),a.lua_register(t,"GetEventPlayerChatString",ei.bind(null,e)),a.lua_register(t,"GetEventPlayerChatStringMatched",ti.bind(null,e)),a.lua_register(t,"TriggerRegisterDeathEvent",ni.bind(null,e)),a.lua_register(t,"GetTriggerUnit",ai.bind(null,e)),a.lua_register(t,"TriggerRegisterUnitStateEvent",ri.bind(null,e)),a.lua_register(t,"GetEventUnitState",ii.bind(null,e)),a.lua_register(t,"TriggerRegisterUnitEvent",li.bind(null,e)),a.lua_register(t,"GetEventDamage",si.bind(null,e)),a.lua_register(t,"GetEventDamageSource",oi.bind(null,e)),a.lua_register(t,"GetEventDetectingPlayer",ui.bind(null,e)),a.lua_register(t,"TriggerRegisterFilterUnitEvent",ci.bind(null,e)),a.lua_register(t,"GetEventTargetUnit",di.bind(null,e)),a.lua_register(t,"TriggerRegisterUnitInRange",hi.bind(null,e)),a.lua_register(t,"TriggerAddCondition",fi.bind(null,e)),a.lua_register(t,"TriggerRemoveCondition",_i.bind(null,e)),a.lua_register(t,"TriggerClearConditions",mi.bind(null,e)),a.lua_register(t,"TriggerAddAction",pi.bind(null,e)),a.lua_register(t,"TriggerRemoveAction",gi.bind(null,e)),a.lua_register(t,"TriggerClearActions",bi.bind(null,e)),a.lua_register(t,"TriggerSleepAction",wi.bind(null,e)),a.lua_register(t,"TriggerWaitForSound",vi.bind(null,e)),a.lua_register(t,"TriggerEvaluate",Ai.bind(null,e)),a.lua_register(t,"TriggerExecute",Li.bind(null,e)),a.lua_register(t,"TriggerExecuteWait",yi.bind(null,e)),a.lua_register(t,"TriggerSyncStart",Si.bind(null,e)),a.lua_register(t,"TriggerSyncReady",Ti.bind(null,e)),a.lua_register(t,"GetWidgetLife",Ei.bind(null,e)),a.lua_register(t,"SetWidgetLife",xi.bind(null,e)),a.lua_register(t,"GetWidgetX",ki.bind(null,e)),a.lua_register(t,"GetWidgetY",Mi.bind(null,e)),a.lua_register(t,"GetTriggerWidget",Ii.bind(null,e)),a.lua_register(t,"CreateDestructable",Ui.bind(null,e)),a.lua_register(t,"CreateDestructableZ",Pi.bind(null,e)),a.lua_register(t,"CreateDeadDestructable",Ri.bind(null,e)),a.lua_register(t,"CreateDeadDestructableZ",Oi.bind(null,e)),a.lua_register(t,"RemoveDestructable",Ci.bind(null,e)),a.lua_register(t,"KillDestructable",Bi.bind(null,e)),a.lua_register(t,"SetDestructableInvulnerable",Fi.bind(null,e)),a.lua_register(t,"IsDestructableInvulnerable",Di.bind(null,e)),a.lua_register(t,"EnumDestructablesInRect",Gi.bind(null,e)),a.lua_register(t,"GetDestructableTypeId",Ni.bind(null,e)),a.lua_register(t,"GetDestructableX",Vi.bind(null,e)),a.lua_register(t,"GetDestructableY",ji.bind(null,e)),a.lua_register(t,"SetDestructableLife",Hi.bind(null,e)),a.lua_register(t,"GetDestructableLife",Ki.bind(null,e)),a.lua_register(t,"SetDestructableMaxLife",zi.bind(null,e)),a.lua_register(t,"GetDestructableMaxLife",Xi.bind(null,e)),a.lua_register(t,"DestructableRestoreLife",qi.bind(null,e)),a.lua_register(t,"QueueDestructableAnimation",Yi.bind(null,e)),a.lua_register(t,"SetDestructableAnimation",$i.bind(null,e)),a.lua_register(t,"SetDestructableAnimationSpeed",Wi.bind(null,e)),a.lua_register(t,"ShowDestructable",Zi.bind(null,e)),a.lua_register(t,"GetDestructableOccluderHeight",Ji.bind(null,e)),a.lua_register(t,"SetDestructableOccluderHeight",Qi.bind(null,e)),a.lua_register(t,"GetDestructableName",el.bind(null,e)),a.lua_register(t,"GetTriggerDestructable",tl.bind(null,e)),a.lua_register(t,"CreateItem",nl.bind(null,e)),a.lua_register(t,"RemoveItem",al.bind(null,e)),a.lua_register(t,"GetItemPlayer",rl.bind(null,e)),a.lua_register(t,"GetItemTypeId",il.bind(null,e)),a.lua_register(t,"GetItemX",ll.bind(null,e)),a.lua_register(t,"GetItemY",sl.bind(null,e)),a.lua_register(t,"SetItemPosition",ol.bind(null,e)),a.lua_register(t,"SetItemDropOnDeath",ul.bind(null,e)),a.lua_register(t,"SetItemDroppable",cl.bind(null,e)),a.lua_register(t,"SetItemPawnable",dl.bind(null,e)),a.lua_register(t,"SetItemPlayer",hl.bind(null,e)),a.lua_register(t,"SetItemInvulnerable",fl.bind(null,e)),a.lua_register(t,"IsItemInvulnerable",_l.bind(null,e)),a.lua_register(t,"SetItemVisible",ml.bind(null,e)),a.lua_register(t,"IsItemVisible",pl.bind(null,e)),a.lua_register(t,"IsItemOwned",gl.bind(null,e)),a.lua_register(t,"IsItemPowerup",bl.bind(null,e)),a.lua_register(t,"IsItemSellable",wl.bind(null,e)),a.lua_register(t,"IsItemPawnable",vl.bind(null,e)),a.lua_register(t,"IsItemIdPowerup",Al.bind(null,e)),a.lua_register(t,"IsItemIdSellable",Ll.bind(null,e)),a.lua_register(t,"IsItemIdPawnable",yl.bind(null,e)),a.lua_register(t,"EnumItemsInRect",Sl.bind(null,e)),a.lua_register(t,"GetItemLevel",Tl.bind(null,e)),a.lua_register(t,"GetItemType",El.bind(null,e)),a.lua_register(t,"SetItemDropID",xl.bind(null,e)),a.lua_register(t,"GetItemName",kl.bind(null,e)),a.lua_register(t,"GetItemCharges",Ml.bind(null,e)),a.lua_register(t,"SetItemCharges",Il.bind(null,e)),a.lua_register(t,"GetItemUserData",Ul.bind(null,e)),a.lua_register(t,"SetItemUserData",Pl.bind(null,e)),a.lua_register(t,"CreateUnit",Rl.bind(null,e)),a.lua_register(t,"CreateUnitByName",Ol.bind(null,e)),a.lua_register(t,"CreateUnitAtLoc",Cl.bind(null,e)),a.lua_register(t,"CreateUnitAtLocByName",Bl.bind(null,e)),a.lua_register(t,"CreateCorpse",Fl.bind(null,e)),a.lua_register(t,"KillUnit",Dl.bind(null,e)),a.lua_register(t,"RemoveUnit",Gl.bind(null,e)),a.lua_register(t,"ShowUnit",Nl.bind(null,e)),a.lua_register(t,"SetUnitState",Vl.bind(null,e)),a.lua_register(t,"SetUnitX",jl.bind(null,e)),a.lua_register(t,"SetUnitY",Hl.bind(null,e)),a.lua_register(t,"SetUnitPosition",Kl.bind(null,e)),a.lua_register(t,"SetUnitPositionLoc",zl.bind(null,e)),a.lua_register(t,"SetUnitFacing",Xl.bind(null,e)),a.lua_register(t,"SetUnitFacingTimed",ql.bind(null,e)),a.lua_register(t,"SetUnitMoveSpeed",Yl.bind(null,e)),a.lua_register(t,"SetUnitFlyHeight",$l.bind(null,e)),a.lua_register(t,"SetUnitTurnSpeed",Wl.bind(null,e)),a.lua_register(t,"SetUnitPropWindow",Zl.bind(null,e)),a.lua_register(t,"SetUnitAcquireRange",Jl.bind(null,e)),a.lua_register(t,"SetUnitCreepGuard",Ql.bind(null,e)),a.lua_register(t,"GetUnitAcquireRange",es.bind(null,e)),a.lua_register(t,"GetUnitTurnSpeed",ts.bind(null,e)),a.lua_register(t,"GetUnitPropWindow",ns.bind(null,e)),a.lua_register(t,"GetUnitFlyHeight",as.bind(null,e)),a.lua_register(t,"GetUnitDefaultAcquireRange",rs.bind(null,e)),a.lua_register(t,"GetUnitDefaultTurnSpeed",is.bind(null,e)),a.lua_register(t,"GetUnitDefaultPropWindow",ls.bind(null,e)),a.lua_register(t,"GetUnitDefaultFlyHeight",ss.bind(null,e)),a.lua_register(t,"SetUnitOwner",os.bind(null,e)),a.lua_register(t,"SetUnitColor",us.bind(null,e)),a.lua_register(t,"SetUnitScale",cs.bind(null,e)),a.lua_register(t,"SetUnitTimeScale",ds.bind(null,e)),a.lua_register(t,"SetUnitBlendTime",hs.bind(null,e)),a.lua_register(t,"SetUnitVertexColor",fs.bind(null,e)),a.lua_register(t,"QueueUnitAnimation",_s.bind(null,e)),a.lua_register(t,"SetUnitAnimation",ms.bind(null,e)),a.lua_register(t,"SetUnitAnimationByIndex",ps.bind(null,e)),a.lua_register(t,"SetUnitAnimationWithRarity",gs.bind(null,e)),a.lua_register(t,"AddUnitAnimationProperties",bs.bind(null,e)),a.lua_register(t,"SetUnitLookAt",ws.bind(null,e)),a.lua_register(t,"ResetUnitLookAt",vs.bind(null,e)),a.lua_register(t,"SetUnitRescuable",As.bind(null,e)),a.lua_register(t,"SetUnitRescueRange",Ls.bind(null,e)),a.lua_register(t,"SetHeroStr",ys.bind(null,e)),a.lua_register(t,"SetHeroAgi",Ss.bind(null,e)),a.lua_register(t,"SetHeroInt",Ts.bind(null,e)),a.lua_register(t,"GetHeroStr",Es.bind(null,e)),a.lua_register(t,"GetHeroAgi",xs.bind(null,e)),a.lua_register(t,"GetHeroInt",ks.bind(null,e)),a.lua_register(t,"UnitStripHeroLevel",Ms.bind(null,e)),a.lua_register(t,"GetHeroXP",Is.bind(null,e)),a.lua_register(t,"SetHeroXP",Us.bind(null,e)),a.lua_register(t,"GetHeroSkillPoints",Ps.bind(null,e)),a.lua_register(t,"UnitModifySkillPoints",Rs.bind(null,e)),a.lua_register(t,"AddHeroXP",Os.bind(null,e)),a.lua_register(t,"SetHeroLevel",Cs.bind(null,e)),a.lua_register(t,"GetHeroLevel",Bs.bind(null,e)),a.lua_register(t,"GetUnitLevel",Fs.bind(null,e)),a.lua_register(t,"GetHeroProperName",Ds.bind(null,e)),a.lua_register(t,"SuspendHeroXP",Gs.bind(null,e)),a.lua_register(t,"IsSuspendedXP",Ns.bind(null,e)),a.lua_register(t,"SelectHeroSkill",Vs.bind(null,e)),a.lua_register(t,"GetUnitAbilityLevel",js.bind(null,e)),a.lua_register(t,"DecUnitAbilityLevel",Hs.bind(null,e)),a.lua_register(t,"IncUnitAbilityLevel",Ks.bind(null,e)),a.lua_register(t,"SetUnitAbilityLevel",zs.bind(null,e)),a.lua_register(t,"ReviveHero",Xs.bind(null,e)),a.lua_register(t,"ReviveHeroLoc",qs.bind(null,e)),a.lua_register(t,"SetUnitExploded",Ys.bind(null,e)),a.lua_register(t,"SetUnitInvulnerable",$s.bind(null,e)),a.lua_register(t,"PauseUnit",Ws.bind(null,e)),a.lua_register(t,"IsUnitPaused",Zs.bind(null,e)),a.lua_register(t,"SetUnitPathing",Js.bind(null,e)),a.lua_register(t,"ClearSelection",Qs.bind(null,e)),a.lua_register(t,"SelectUnit",eo.bind(null,e)),a.lua_register(t,"GetUnitPointValue",to.bind(null,e)),a.lua_register(t,"GetUnitPointValueByType",no.bind(null,e)),a.lua_register(t,"UnitAddItem",ao.bind(null,e)),a.lua_register(t,"UnitAddItemById",ro.bind(null,e)),a.lua_register(t,"UnitAddItemToSlotById",io.bind(null,e)),a.lua_register(t,"UnitRemoveItem",lo.bind(null,e)),a.lua_register(t,"UnitRemoveItemFromSlot",so.bind(null,e)),a.lua_register(t,"UnitHasItem",oo.bind(null,e)),a.lua_register(t,"UnitItemInSlot",uo.bind(null,e)),a.lua_register(t,"UnitInventorySize",co.bind(null,e)),a.lua_register(t,"UnitDropItemPoint",ho.bind(null,e)),a.lua_register(t,"UnitDropItemSlot",fo.bind(null,e)),a.lua_register(t,"UnitDropItemTarget",_o.bind(null,e)),a.lua_register(t,"UnitUseItem",mo.bind(null,e)),a.lua_register(t,"UnitUseItemPoint",po.bind(null,e)),a.lua_register(t,"UnitUseItemTarget",go.bind(null,e)),a.lua_register(t,"GetUnitX",bo.bind(null,e)),a.lua_register(t,"GetUnitY",wo.bind(null,e)),a.lua_register(t,"GetUnitLoc",vo.bind(null,e)),a.lua_register(t,"GetUnitFacing",Ao.bind(null,e)),a.lua_register(t,"GetUnitMoveSpeed",Lo.bind(null,e)),a.lua_register(t,"GetUnitDefaultMoveSpeed",yo.bind(null,e)),a.lua_register(t,"GetUnitState",So.bind(null,e)),a.lua_register(t,"GetOwningPlayer",To.bind(null,e)),a.lua_register(t,"GetUnitTypeId",Eo.bind(null,e)),a.lua_register(t,"GetUnitRace",xo.bind(null,e)),a.lua_register(t,"GetUnitName",ko.bind(null,e)),a.lua_register(t,"GetUnitFoodUsed",Mo.bind(null,e)),a.lua_register(t,"GetUnitFoodMade",Io.bind(null,e)),a.lua_register(t,"GetFoodMade",Uo.bind(null,e)),a.lua_register(t,"GetFoodUsed",Po.bind(null,e)),a.lua_register(t,"SetUnitUseFood",Ro.bind(null,e)),a.lua_register(t,"GetUnitRallyPoint",Oo.bind(null,e)),a.lua_register(t,"GetUnitRallyUnit",Co.bind(null,e)),a.lua_register(t,"GetUnitRallyDestructable",Bo.bind(null,e)),a.lua_register(t,"IsUnitInGroup",Fo.bind(null,e)),a.lua_register(t,"IsUnitInForce",Do.bind(null,e)),a.lua_register(t,"IsUnitOwnedByPlayer",Go.bind(null,e)),a.lua_register(t,"IsUnitAlly",No.bind(null,e)),a.lua_register(t,"IsUnitEnemy",Vo.bind(null,e)),a.lua_register(t,"IsUnitVisible",jo.bind(null,e)),a.lua_register(t,"IsUnitDetected",Ho.bind(null,e)),a.lua_register(t,"IsUnitInvisible",Ko.bind(null,e)),a.lua_register(t,"IsUnitFogged",zo.bind(null,e)),a.lua_register(t,"IsUnitMasked",Xo.bind(null,e)),a.lua_register(t,"IsUnitSelected",qo.bind(null,e)),a.lua_register(t,"IsUnitRace",Yo.bind(null,e)),a.lua_register(t,"IsUnitType",$o.bind(null,e)),a.lua_register(t,"IsUnit",Wo.bind(null,e)),a.lua_register(t,"IsUnitInRange",Zo.bind(null,e)),a.lua_register(t,"IsUnitInRangeXY",Jo.bind(null,e)),a.lua_register(t,"IsUnitInRangeLoc",Qo.bind(null,e)),a.lua_register(t,"IsUnitHidden",eu.bind(null,e)),a.lua_register(t,"IsUnitIllusion",tu.bind(null,e)),a.lua_register(t,"IsUnitInTransport",nu.bind(null,e)),a.lua_register(t,"IsUnitLoaded",au.bind(null,e)),a.lua_register(t,"IsHeroUnitId",ru.bind(null,e)),a.lua_register(t,"IsUnitIdType",iu.bind(null,e)),a.lua_register(t,"UnitShareVision",lu.bind(null,e)),a.lua_register(t,"UnitSuspendDecay",su.bind(null,e)),a.lua_register(t,"UnitAddType",ou.bind(null,e)),a.lua_register(t,"UnitRemoveType",uu.bind(null,e)),a.lua_register(t,"UnitAddAbility",cu.bind(null,e)),a.lua_register(t,"UnitRemoveAbility",du.bind(null,e)),a.lua_register(t,"UnitMakeAbilityPermanent",hu.bind(null,e)),a.lua_register(t,"UnitRemoveBuffs",fu.bind(null,e)),a.lua_register(t,"UnitRemoveBuffsEx",_u.bind(null,e)),a.lua_register(t,"UnitHasBuffsEx",mu.bind(null,e)),a.lua_register(t,"UnitCountBuffsEx",pu.bind(null,e)),a.lua_register(t,"UnitAddSleep",gu.bind(null,e)),a.lua_register(t,"UnitCanSleep",bu.bind(null,e)),a.lua_register(t,"UnitAddSleepPerm",wu.bind(null,e)),a.lua_register(t,"UnitCanSleepPerm",vu.bind(null,e)),a.lua_register(t,"UnitIsSleeping",Au.bind(null,e)),a.lua_register(t,"UnitWakeUp",Lu.bind(null,e)),a.lua_register(t,"UnitApplyTimedLife",yu.bind(null,e)),a.lua_register(t,"UnitIgnoreAlarm",Su.bind(null,e)),a.lua_register(t,"UnitIgnoreAlarmToggled",Tu.bind(null,e)),a.lua_register(t,"UnitResetCooldown",Eu.bind(null,e)),a.lua_register(t,"UnitSetConstructionProgress",xu.bind(null,e)),a.lua_register(t,"UnitSetUpgradeProgress",ku.bind(null,e)),a.lua_register(t,"UnitPauseTimedLife",Mu.bind(null,e)),a.lua_register(t,"UnitSetUsesAltIcon",Iu.bind(null,e)),a.lua_register(t,"UnitDamagePoint",Uu.bind(null,e)),a.lua_register(t,"UnitDamageTarget",Pu.bind(null,e)),a.lua_register(t,"IssueImmediateOrder",Ru.bind(null,e)),a.lua_register(t,"IssueImmediateOrderById",Ou.bind(null,e)),a.lua_register(t,"IssuePointOrder",Cu.bind(null,e)),a.lua_register(t,"IssuePointOrderLoc",Bu.bind(null,e)),a.lua_register(t,"IssuePointOrderById",Fu.bind(null,e)),a.lua_register(t,"IssuePointOrderByIdLoc",Du.bind(null,e)),a.lua_register(t,"IssueTargetOrder",Gu.bind(null,e)),a.lua_register(t,"IssueTargetOrderById",Nu.bind(null,e)),a.lua_register(t,"IssueInstantPointOrder",Vu.bind(null,e)),a.lua_register(t,"IssueInstantPointOrderById",ju.bind(null,e)),a.lua_register(t,"IssueInstantTargetOrder",Hu.bind(null,e)),a.lua_register(t,"IssueInstantTargetOrderById",Ku.bind(null,e)),a.lua_register(t,"IssueBuildOrder",zu.bind(null,e)),a.lua_register(t,"IssueBuildOrderById",Xu.bind(null,e)),a.lua_register(t,"IssueNeutralImmediateOrder",qu.bind(null,e)),a.lua_register(t,"IssueNeutralImmediateOrderById",Yu.bind(null,e)),a.lua_register(t,"IssueNeutralPointOrder",$u.bind(null,e)),a.lua_register(t,"IssueNeutralPointOrderById",Wu.bind(null,e)),a.lua_register(t,"IssueNeutralTargetOrder",Zu.bind(null,e)),a.lua_register(t,"IssueNeutralTargetOrderById",Ju.bind(null,e)),a.lua_register(t,"GetUnitCurrentOrder",Qu.bind(null,e)),a.lua_register(t,"SetResourceAmount",ec.bind(null,e)),a.lua_register(t,"AddResourceAmount",tc.bind(null,e)),a.lua_register(t,"GetResourceAmount",nc.bind(null,e)),a.lua_register(t,"WaygateGetDestinationX",ac.bind(null,e)),a.lua_register(t,"WaygateGetDestinationY",rc.bind(null,e)),a.lua_register(t,"WaygateSetDestination",ic.bind(null,e)),a.lua_register(t,"WaygateActivate",lc.bind(null,e)),a.lua_register(t,"WaygateIsActive",sc.bind(null,e)),a.lua_register(t,"AddItemToAllStock",oc.bind(null,e)),a.lua_register(t,"AddItemToStock",uc.bind(null,e)),a.lua_register(t,"AddUnitToAllStock",cc.bind(null,e)),a.lua_register(t,"AddUnitToStock",dc.bind(null,e)),a.lua_register(t,"RemoveItemFromAllStock",hc.bind(null,e)),a.lua_register(t,"RemoveItemFromStock",fc.bind(null,e)),a.lua_register(t,"RemoveUnitFromAllStock",_c.bind(null,e)),a.lua_register(t,"RemoveUnitFromStock",mc.bind(null,e)),a.lua_register(t,"SetAllItemTypeSlots",pc.bind(null,e)),a.lua_register(t,"SetAllUnitTypeSlots",gc.bind(null,e)),a.lua_register(t,"SetItemTypeSlots",bc.bind(null,e)),a.lua_register(t,"SetUnitTypeSlots",wc.bind(null,e)),a.lua_register(t,"GetUnitUserData",vc.bind(null,e)),a.lua_register(t,"SetUnitUserData",Ac.bind(null,e)),a.lua_register(t,"Player",Lc.bind(null,e)),a.lua_register(t,"GetLocalPlayer",yc.bind(null,e)),a.lua_register(t,"IsPlayerAlly",Sc.bind(null,e)),a.lua_register(t,"IsPlayerEnemy",Tc.bind(null,e)),a.lua_register(t,"IsPlayerInForce",Ec.bind(null,e)),a.lua_register(t,"IsPlayerObserver",xc.bind(null,e)),a.lua_register(t,"IsVisibleToPlayer",kc.bind(null,e)),a.lua_register(t,"IsLocationVisibleToPlayer",Mc.bind(null,e)),a.lua_register(t,"IsFoggedToPlayer",Ic.bind(null,e)),a.lua_register(t,"IsLocationFoggedToPlayer",Uc.bind(null,e)),a.lua_register(t,"IsMaskedToPlayer",Pc.bind(null,e)),a.lua_register(t,"IsLocationMaskedToPlayer",Rc.bind(null,e)),a.lua_register(t,"GetPlayerRace",Oc.bind(null,e)),a.lua_register(t,"GetPlayerId",Cc.bind(null,e)),a.lua_register(t,"GetPlayerUnitCount",Bc.bind(null,e)),a.lua_register(t,"GetPlayerTypedUnitCount",Fc.bind(null,e)),a.lua_register(t,"GetPlayerStructureCount",Dc.bind(null,e)),a.lua_register(t,"GetPlayerState",Gc.bind(null,e)),a.lua_register(t,"GetPlayerScore",Nc.bind(null,e)),a.lua_register(t,"GetPlayerAlliance",Vc.bind(null,e)),a.lua_register(t,"GetPlayerHandicap",jc.bind(null,e)),a.lua_register(t,"GetPlayerHandicapXP",Hc.bind(null,e)),a.lua_register(t,"SetPlayerHandicap",Kc.bind(null,e)),a.lua_register(t,"SetPlayerHandicapXP",zc.bind(null,e)),a.lua_register(t,"SetPlayerTechMaxAllowed",Xc.bind(null,e)),a.lua_register(t,"GetPlayerTechMaxAllowed",qc.bind(null,e)),a.lua_register(t,"AddPlayerTechResearched",Yc.bind(null,e)),a.lua_register(t,"SetPlayerTechResearched",$c.bind(null,e)),a.lua_register(t,"GetPlayerTechResearched",Wc.bind(null,e)),a.lua_register(t,"GetPlayerTechCount",Zc.bind(null,e)),a.lua_register(t,"SetPlayerUnitsOwner",Jc.bind(null,e)),a.lua_register(t,"CripplePlayer",Qc.bind(null,e)),a.lua_register(t,"SetPlayerAbilityAvailable",ed.bind(null,e)),a.lua_register(t,"SetPlayerState",td.bind(null,e)),a.lua_register(t,"RemovePlayer",nd.bind(null,e)),a.lua_register(t,"CachePlayerHeroData",ad.bind(null,e)),a.lua_register(t,"SetFogStateRect",rd.bind(null,e)),a.lua_register(t,"SetFogStateRadius",id.bind(null,e)),a.lua_register(t,"SetFogStateRadiusLoc",ld.bind(null,e)),a.lua_register(t,"FogMaskEnable",sd.bind(null,e)),a.lua_register(t,"IsFogMaskEnabled",od.bind(null,e)),a.lua_register(t,"FogEnable",ud.bind(null,e)),a.lua_register(t,"IsFogEnabled",cd.bind(null,e)),a.lua_register(t,"CreateFogModifierRect",dd.bind(null,e)),a.lua_register(t,"CreateFogModifierRadius",hd.bind(null,e)),a.lua_register(t,"CreateFogModifierRadiusLoc",fd.bind(null,e)),a.lua_register(t,"DestroyFogModifier",_d.bind(null,e)),a.lua_register(t,"FogModifierStart",md.bind(null,e)),a.lua_register(t,"FogModifierStop",pd.bind(null,e)),a.lua_register(t,"VersionGet",gd.bind(null,e)),a.lua_register(t,"VersionCompatible",bd.bind(null,e)),a.lua_register(t,"VersionSupported",wd.bind(null,e)),a.lua_register(t,"EndGame",vd.bind(null,e)),a.lua_register(t,"ChangeLevel",Ad.bind(null,e)),a.lua_register(t,"RestartGame",Ld.bind(null,e)),a.lua_register(t,"ReloadGame",yd.bind(null,e)),a.lua_register(t,"SetCampaignMenuRace",Sd.bind(null,e)),a.lua_register(t,"SetCampaignMenuRaceEx",Td.bind(null,e)),a.lua_register(t,"ForceCampaignSelectScreen",Ed.bind(null,e)),a.lua_register(t,"LoadGame",xd.bind(null,e)),a.lua_register(t,"SaveGame",kd.bind(null,e)),a.lua_register(t,"RenameSaveDirectory",Md.bind(null,e)),a.lua_register(t,"RemoveSaveDirectory",Id.bind(null,e)),a.lua_register(t,"CopySaveGame",Ud.bind(null,e)),a.lua_register(t,"SaveGameExists",Pd.bind(null,e)),a.lua_register(t,"SyncSelections",Rd.bind(null,e)),a.lua_register(t,"SetFloatGameState",Od.bind(null,e)),a.lua_register(t,"GetFloatGameState",Cd.bind(null,e)),a.lua_register(t,"SetIntegerGameState",Bd.bind(null,e)),a.lua_register(t,"GetIntegerGameState",Fd.bind(null,e)),a.lua_register(t,"SetTutorialCleared",Dd.bind(null,e)),a.lua_register(t,"SetMissionAvailable",Gd.bind(null,e)),a.lua_register(t,"SetCampaignAvailable",Nd.bind(null,e)),a.lua_register(t,"SetOpCinematicAvailable",Vd.bind(null,e)),a.lua_register(t,"SetEdCinematicAvailable",jd.bind(null,e)),a.lua_register(t,"GetDefaultDifficulty",Hd.bind(null,e)),a.lua_register(t,"SetDefaultDifficulty",Kd.bind(null,e)),a.lua_register(t,"SetCustomCampaignButtonVisible",zd.bind(null,e)),a.lua_register(t,"GetCustomCampaignButtonVisible",Xd.bind(null,e)),a.lua_register(t,"DoNotSaveReplay",qd.bind(null,e)),a.lua_register(t,"DialogCreate",Yd.bind(null,e)),a.lua_register(t,"DialogDestroy",$d.bind(null,e)),a.lua_register(t,"DialogClear",Wd.bind(null,e)),a.lua_register(t,"DialogSetMessage",Zd.bind(null,e)),a.lua_register(t,"DialogAddButton",Jd.bind(null,e)),a.lua_register(t,"DialogAddQuitButton",Qd.bind(null,e)),a.lua_register(t,"DialogDisplay",eh.bind(null,e)),a.lua_register(t,"ReloadGameCachesFromDisk",th.bind(null,e)),a.lua_register(t,"InitGameCache",nh.bind(null,e)),a.lua_register(t,"SaveGameCache",ah.bind(null,e)),a.lua_register(t,"StoreInteger",rh.bind(null,e)),a.lua_register(t,"StoreReal",ih.bind(null,e)),a.lua_register(t,"StoreBoolean",lh.bind(null,e)),a.lua_register(t,"StoreUnit",sh.bind(null,e)),a.lua_register(t,"StoreString",oh.bind(null,e)),a.lua_register(t,"SyncStoredInteger",uh.bind(null,e)),a.lua_register(t,"SyncStoredReal",ch.bind(null,e)),a.lua_register(t,"SyncStoredBoolean",dh.bind(null,e)),a.lua_register(t,"SyncStoredUnit",hh.bind(null,e)),a.lua_register(t,"SyncStoredString",fh.bind(null,e)),a.lua_register(t,"HaveStoredInteger",_h.bind(null,e)),a.lua_register(t,"HaveStoredReal",mh.bind(null,e)),a.lua_register(t,"HaveStoredBoolean",ph.bind(null,e)),a.lua_register(t,"HaveStoredUnit",gh.bind(null,e)),a.lua_register(t,"HaveStoredString",bh.bind(null,e)),a.lua_register(t,"FlushGameCache",wh.bind(null,e)),a.lua_register(t,"FlushStoredMission",vh.bind(null,e)),a.lua_register(t,"FlushStoredInteger",Ah.bind(null,e)),a.lua_register(t,"FlushStoredReal",Lh.bind(null,e)),a.lua_register(t,"FlushStoredBoolean",yh.bind(null,e)),a.lua_register(t,"FlushStoredUnit",Sh.bind(null,e)),a.lua_register(t,"FlushStoredString",Th.bind(null,e)),a.lua_register(t,"GetStoredInteger",Eh.bind(null,e)),a.lua_register(t,"GetStoredReal",xh.bind(null,e)),a.lua_register(t,"GetStoredBoolean",kh.bind(null,e)),a.lua_register(t,"GetStoredString",Mh.bind(null,e)),a.lua_register(t,"RestoreUnit",Ih.bind(null,e)),a.lua_register(t,"InitHashtable",Uh.bind(null,e)),a.lua_register(t,"SaveInteger",Ph.bind(null,e)),a.lua_register(t,"SaveReal",Rh.bind(null,e)),a.lua_register(t,"SaveBoolean",Oh.bind(null,e)),a.lua_register(t,"SaveStr",Ch.bind(null,e)),a.lua_register(t,"SavePlayerHandle",Bh.bind(null,e)),a.lua_register(t,"SaveWidgetHandle",Fh.bind(null,e)),a.lua_register(t,"SaveDestructableHandle",Dh.bind(null,e)),a.lua_register(t,"SaveItemHandle",Gh.bind(null,e)),a.lua_register(t,"SaveUnitHandle",Nh.bind(null,e)),a.lua_register(t,"SaveAbilityHandle",Vh.bind(null,e)),a.lua_register(t,"SaveTimerHandle",jh.bind(null,e)),a.lua_register(t,"SaveTriggerHandle",Hh.bind(null,e)),a.lua_register(t,"SaveTriggerConditionHandle",Kh.bind(null,e)),a.lua_register(t,"SaveTriggerActionHandle",zh.bind(null,e)),a.lua_register(t,"SaveTriggerEventHandle",Xh.bind(null,e)),a.lua_register(t,"SaveForceHandle",qh.bind(null,e)),a.lua_register(t,"SaveGroupHandle",Yh.bind(null,e)),a.lua_register(t,"SaveLocationHandle",$h.bind(null,e)),a.lua_register(t,"SaveRectHandle",Wh.bind(null,e)),a.lua_register(t,"SaveBooleanExprHandle",Zh.bind(null,e)),a.lua_register(t,"SaveSoundHandle",Jh.bind(null,e)),a.lua_register(t,"SaveEffectHandle",Qh.bind(null,e)),a.lua_register(t,"SaveUnitPoolHandle",ef.bind(null,e)),a.lua_register(t,"SaveItemPoolHandle",tf.bind(null,e)),a.lua_register(t,"SaveQuestHandle",nf.bind(null,e)),a.lua_register(t,"SaveQuestItemHandle",af.bind(null,e)),a.lua_register(t,"SaveDefeatConditionHandle",rf.bind(null,e)),a.lua_register(t,"SaveTimerDialogHandle",lf.bind(null,e)),a.lua_register(t,"SaveLeaderboardHandle",sf.bind(null,e)),a.lua_register(t,"SaveMultiboardHandle",of.bind(null,e)),a.lua_register(t,"SaveMultiboardItemHandle",uf.bind(null,e)),a.lua_register(t,"SaveTrackableHandle",cf.bind(null,e)),a.lua_register(t,"SaveDialogHandle",df.bind(null,e)),a.lua_register(t,"SaveButtonHandle",hf.bind(null,e)),a.lua_register(t,"SaveTextTagHandle",ff.bind(null,e)),a.lua_register(t,"SaveLightningHandle",_f.bind(null,e)),a.lua_register(t,"SaveImageHandle",mf.bind(null,e)),a.lua_register(t,"SaveUbersplatHandle",pf.bind(null,e)),a.lua_register(t,"SaveRegionHandle",gf.bind(null,e)),a.lua_register(t,"SaveFogStateHandle",bf.bind(null,e)),a.lua_register(t,"SaveFogModifierHandle",wf.bind(null,e)),a.lua_register(t,"SaveAgentHandle",vf.bind(null,e)),a.lua_register(t,"SaveHashtableHandle",Af.bind(null,e)),a.lua_register(t,"LoadInteger",Lf.bind(null,e)),a.lua_register(t,"LoadReal",yf.bind(null,e)),a.lua_register(t,"LoadBoolean",Sf.bind(null,e)),a.lua_register(t,"LoadStr",Tf.bind(null,e)),a.lua_register(t,"LoadPlayerHandle",Ef.bind(null,e)),a.lua_register(t,"LoadWidgetHandle",xf.bind(null,e)),a.lua_register(t,"LoadDestructableHandle",kf.bind(null,e)),a.lua_register(t,"LoadItemHandle",Mf.bind(null,e)),a.lua_register(t,"LoadUnitHandle",If.bind(null,e)),a.lua_register(t,"LoadAbilityHandle",Uf.bind(null,e)),a.lua_register(t,"LoadTimerHandle",Pf.bind(null,e)),a.lua_register(t,"LoadTriggerHandle",Rf.bind(null,e)),a.lua_register(t,"LoadTriggerConditionHandle",Of.bind(null,e)),a.lua_register(t,"LoadTriggerActionHandle",Cf.bind(null,e)),a.lua_register(t,"LoadTriggerEventHandle",Bf.bind(null,e)),a.lua_register(t,"LoadForceHandle",Ff.bind(null,e)),a.lua_register(t,"LoadGroupHandle",Df.bind(null,e)),a.lua_register(t,"LoadLocationHandle",Gf.bind(null,e)),a.lua_register(t,"LoadRectHandle",Nf.bind(null,e)),a.lua_register(t,"LoadBooleanExprHandle",Vf.bind(null,e)),a.lua_register(t,"LoadSoundHandle",jf.bind(null,e)),a.lua_register(t,"LoadEffectHandle",Hf.bind(null,e)),a.lua_register(t,"LoadUnitPoolHandle",Kf.bind(null,e)),a.lua_register(t,"LoadItemPoolHandle",zf.bind(null,e)),a.lua_register(t,"LoadQuestHandle",Xf.bind(null,e)),a.lua_register(t,"LoadQuestItemHandle",qf.bind(null,e)),a.lua_register(t,"LoadDefeatConditionHandle",Yf.bind(null,e)),a.lua_register(t,"LoadTimerDialogHandle",$f.bind(null,e)),a.lua_register(t,"LoadLeaderboardHandle",Wf.bind(null,e)),a.lua_register(t,"LoadMultiboardHandle",Zf.bind(null,e)),a.lua_register(t,"LoadMultiboardItemHandle",Jf.bind(null,e));a.lua_register(t,"LoadTrackableHandle",Qf.bind(null,e)),a.lua_register(t,"LoadDialogHandle",e_.bind(null,e)),a.lua_register(t,"LoadButtonHandle",t_.bind(null,e)),a.lua_register(t,"LoadTextTagHandle",n_.bind(null,e)),a.lua_register(t,"LoadLightningHandle",a_.bind(null,e)),a.lua_register(t,"LoadImageHandle",r_.bind(null,e)),a.lua_register(t,"LoadUbersplatHandle",i_.bind(null,e)),a.lua_register(t,"LoadRegionHandle",l_.bind(null,e)),a.lua_register(t,"LoadFogStateHandle",s_.bind(null,e)),a.lua_register(t,"LoadFogModifierHandle",o_.bind(null,e)),a.lua_register(t,"LoadHashtableHandle",u_.bind(null,e)),a.lua_register(t,"HaveSavedInteger",c_.bind(null,e)),a.lua_register(t,"HaveSavedReal",d_.bind(null,e)),a.lua_register(t,"HaveSavedBoolean",h_.bind(null,e)),a.lua_register(t,"HaveSavedString",f_.bind(null,e)),a.lua_register(t,"HaveSavedHandle",__.bind(null,e)),a.lua_register(t,"RemoveSavedInteger",m_.bind(null,e)),a.lua_register(t,"RemoveSavedReal",p_.bind(null,e)),a.lua_register(t,"RemoveSavedBoolean",g_.bind(null,e)),a.lua_register(t,"RemoveSavedString",b_.bind(null,e)),a.lua_register(t,"RemoveSavedHandle",w_.bind(null,e)),a.lua_register(t,"FlushParentHashtable",v_.bind(null,e)),a.lua_register(t,"FlushChildHashtable",A_.bind(null,e)),a.lua_register(t,"GetRandomInt",L_.bind(null,e)),a.lua_register(t,"GetRandomReal",y_.bind(null,e)),a.lua_register(t,"CreateUnitPool",S_.bind(null,e)),a.lua_register(t,"DestroyUnitPool",T_.bind(null,e)),a.lua_register(t,"UnitPoolAddUnitType",E_.bind(null,e)),a.lua_register(t,"UnitPoolRemoveUnitType",x_.bind(null,e)),a.lua_register(t,"PlaceRandomUnit",k_.bind(null,e)),a.lua_register(t,"CreateItemPool",M_.bind(null,e)),a.lua_register(t,"DestroyItemPool",I_.bind(null,e)),a.lua_register(t,"ItemPoolAddItemType",U_.bind(null,e)),a.lua_register(t,"ItemPoolRemoveItemType",P_.bind(null,e)),a.lua_register(t,"PlaceRandomItem",R_.bind(null,e)),a.lua_register(t,"ChooseRandomCreep",O_.bind(null,e)),a.lua_register(t,"ChooseRandomNPBuilding",C_.bind(null,e)),a.lua_register(t,"ChooseRandomItem",B_.bind(null,e)),a.lua_register(t,"ChooseRandomItemEx",F_.bind(null,e)),a.lua_register(t,"SetRandomSeed",D_.bind(null,e)),a.lua_register(t,"SetTerrainFog",G_.bind(null,e)),a.lua_register(t,"ResetTerrainFog",N_.bind(null,e)),a.lua_register(t,"SetUnitFog",V_.bind(null,e)),a.lua_register(t,"SetTerrainFogEx",j_.bind(null,e)),a.lua_register(t,"DisplayTextToPlayer",H_.bind(null,e)),a.lua_register(t,"DisplayTimedTextToPlayer",K_.bind(null,e)),a.lua_register(t,"DisplayTimedTextFromPlayer",z_.bind(null,e)),a.lua_register(t,"ClearTextMessages",X_.bind(null,e)),a.lua_register(t,"SetDayNightModels",q_.bind(null,e)),a.lua_register(t,"SetSkyModel",Y_.bind(null,e)),a.lua_register(t,"EnableUserControl",$_.bind(null,e)),a.lua_register(t,"EnableUserUI",W_.bind(null,e)),a.lua_register(t,"SuspendTimeOfDay",Z_.bind(null,e)),a.lua_register(t,"SetTimeOfDayScale",J_.bind(null,e)),a.lua_register(t,"GetTimeOfDayScale",Q_.bind(null,e)),a.lua_register(t,"ShowInterface",em.bind(null,e)),a.lua_register(t,"PauseGame",tm.bind(null,e)),a.lua_register(t,"UnitAddIndicator",nm.bind(null,e)),a.lua_register(t,"AddIndicator",am.bind(null,e)),a.lua_register(t,"PingMinimap",rm.bind(null,e)),a.lua_register(t,"PingMinimapEx",im.bind(null,e)),a.lua_register(t,"EnableOcclusion",lm.bind(null,e)),a.lua_register(t,"SetIntroShotText",sm.bind(null,e)),a.lua_register(t,"SetIntroShotModel",om.bind(null,e)),a.lua_register(t,"EnableWorldFogBoundary",um.bind(null,e)),a.lua_register(t,"PlayModelCinematic",cm.bind(null,e)),a.lua_register(t,"PlayCinematic",dm.bind(null,e)),a.lua_register(t,"ForceUIKey",hm.bind(null,e)),a.lua_register(t,"ForceUICancel",fm.bind(null,e)),a.lua_register(t,"DisplayLoadDialog",_m.bind(null,e)),a.lua_register(t,"SetAltMinimapIcon",mm.bind(null,e)),a.lua_register(t,"DisableRestartMission",pm.bind(null,e)),a.lua_register(t,"CreateTextTag",gm.bind(null,e)),a.lua_register(t,"DestroyTextTag",bm.bind(null,e)),a.lua_register(t,"SetTextTagText",wm.bind(null,e)),a.lua_register(t,"SetTextTagPos",vm.bind(null,e)),a.lua_register(t,"SetTextTagPosUnit",Am.bind(null,e)),a.lua_register(t,"SetTextTagColor",Lm.bind(null,e)),a.lua_register(t,"SetTextTagVelocity",ym.bind(null,e)),a.lua_register(t,"SetTextTagVisibility",Sm.bind(null,e)),a.lua_register(t,"SetTextTagSuspended",Tm.bind(null,e)),a.lua_register(t,"SetTextTagPermanent",Em.bind(null,e)),a.lua_register(t,"SetTextTagAge",xm.bind(null,e)),a.lua_register(t,"SetTextTagLifespan",km.bind(null,e)),a.lua_register(t,"SetTextTagFadepoint",Mm.bind(null,e)),a.lua_register(t,"SetReservedLocalHeroButtons",Im.bind(null,e)),a.lua_register(t,"GetAllyColorFilterState",Um.bind(null,e)),a.lua_register(t,"SetAllyColorFilterState",Pm.bind(null,e)),a.lua_register(t,"GetCreepCampFilterState",Rm.bind(null,e)),a.lua_register(t,"SetCreepCampFilterState",Om.bind(null,e)),a.lua_register(t,"EnableMinimapFilterButtons",Cm.bind(null,e)),a.lua_register(t,"EnableDragSelect",Bm.bind(null,e)),a.lua_register(t,"EnablePreSelect",Fm.bind(null,e)),a.lua_register(t,"EnableSelect",Dm.bind(null,e)),a.lua_register(t,"CreateTrackable",Gm.bind(null,e)),a.lua_register(t,"CreateQuest",Nm.bind(null,e)),a.lua_register(t,"DestroyQuest",Vm.bind(null,e)),a.lua_register(t,"QuestSetTitle",jm.bind(null,e)),a.lua_register(t,"QuestSetDescription",Hm.bind(null,e)),a.lua_register(t,"QuestSetIconPath",Km.bind(null,e)),a.lua_register(t,"QuestSetRequired",zm.bind(null,e)),a.lua_register(t,"QuestSetCompleted",Xm.bind(null,e)),a.lua_register(t,"QuestSetDiscovered",qm.bind(null,e)),a.lua_register(t,"QuestSetFailed",Ym.bind(null,e)),a.lua_register(t,"QuestSetEnabled",$m.bind(null,e)),a.lua_register(t,"IsQuestRequired",Wm.bind(null,e)),a.lua_register(t,"IsQuestCompleted",Zm.bind(null,e)),a.lua_register(t,"IsQuestDiscovered",Jm.bind(null,e)),a.lua_register(t,"IsQuestFailed",Qm.bind(null,e)),a.lua_register(t,"IsQuestEnabled",ep.bind(null,e)),a.lua_register(t,"QuestCreateItem",tp.bind(null,e)),a.lua_register(t,"QuestItemSetDescription",np.bind(null,e)),a.lua_register(t,"QuestItemSetCompleted",ap.bind(null,e)),a.lua_register(t,"IsQuestItemCompleted",rp.bind(null,e)),a.lua_register(t,"CreateDefeatCondition",ip.bind(null,e)),a.lua_register(t,"DestroyDefeatCondition",lp.bind(null,e)),a.lua_register(t,"DefeatConditionSetDescription",sp.bind(null,e)),a.lua_register(t,"FlashQuestDialogButton",op.bind(null,e)),a.lua_register(t,"ForceQuestDialogUpdate",up.bind(null,e)),a.lua_register(t,"CreateTimerDialog",cp.bind(null,e)),a.lua_register(t,"DestroyTimerDialog",dp.bind(null,e)),a.lua_register(t,"TimerDialogSetTitle",hp.bind(null,e)),a.lua_register(t,"TimerDialogSetTitleColor",fp.bind(null,e)),a.lua_register(t,"TimerDialogSetTimeColor",_p.bind(null,e)),a.lua_register(t,"TimerDialogSetSpeed",mp.bind(null,e)),a.lua_register(t,"TimerDialogDisplay",pp.bind(null,e)),a.lua_register(t,"IsTimerDialogDisplayed",gp.bind(null,e)),a.lua_register(t,"TimerDialogSetRealTimeRemaining",bp.bind(null,e)),a.lua_register(t,"CreateLeaderboard",wp.bind(null,e)),a.lua_register(t,"DestroyLeaderboard",vp.bind(null,e)),a.lua_register(t,"LeaderboardDisplay",Ap.bind(null,e)),a.lua_register(t,"IsLeaderboardDisplayed",Lp.bind(null,e)),a.lua_register(t,"LeaderboardGetItemCount",yp.bind(null,e)),a.lua_register(t,"LeaderboardSetSizeByItemCount",Sp.bind(null,e)),a.lua_register(t,"LeaderboardAddItem",Tp.bind(null,e)),a.lua_register(t,"LeaderboardRemoveItem",Ep.bind(null,e)),a.lua_register(t,"LeaderboardRemovePlayerItem",xp.bind(null,e)),a.lua_register(t,"LeaderboardClear",kp.bind(null,e)),a.lua_register(t,"LeaderboardSortItemsByValue",Mp.bind(null,e)),a.lua_register(t,"LeaderboardSortItemsByPlayer",Ip.bind(null,e)),a.lua_register(t,"LeaderboardSortItemsByLabel",Up.bind(null,e)),a.lua_register(t,"LeaderboardHasPlayerItem",Pp.bind(null,e)),a.lua_register(t,"LeaderboardGetPlayerIndex",Rp.bind(null,e)),a.lua_register(t,"LeaderboardSetLabel",Op.bind(null,e)),a.lua_register(t,"LeaderboardGetLabelText",Cp.bind(null,e)),a.lua_register(t,"PlayerSetLeaderboard",Bp.bind(null,e)),a.lua_register(t,"PlayerGetLeaderboard",Fp.bind(null,e)),a.lua_register(t,"LeaderboardSetLabelColor",Dp.bind(null,e)),a.lua_register(t,"LeaderboardSetValueColor",Gp.bind(null,e)),a.lua_register(t,"LeaderboardSetStyle",Np.bind(null,e)),a.lua_register(t,"LeaderboardSetItemValue",Vp.bind(null,e)),a.lua_register(t,"LeaderboardSetItemLabel",jp.bind(null,e)),a.lua_register(t,"LeaderboardSetItemStyle",Hp.bind(null,e)),a.lua_register(t,"LeaderboardSetItemLabelColor",Kp.bind(null,e)),a.lua_register(t,"LeaderboardSetItemValueColor",zp.bind(null,e)),a.lua_register(t,"CreateMultiboard",Xp.bind(null,e)),a.lua_register(t,"DestroyMultiboard",qp.bind(null,e)),a.lua_register(t,"MultiboardDisplay",Yp.bind(null,e)),a.lua_register(t,"IsMultiboardDisplayed",$p.bind(null,e)),a.lua_register(t,"MultiboardMinimize",Wp.bind(null,e)),a.lua_register(t,"IsMultiboardMinimized",Zp.bind(null,e)),a.lua_register(t,"MultiboardClear",Jp.bind(null,e)),a.lua_register(t,"MultiboardSetTitleText",Qp.bind(null,e)),a.lua_register(t,"MultiboardGetTitleText",eg.bind(null,e)),a.lua_register(t,"MultiboardSetTitleTextColor",tg.bind(null,e)),a.lua_register(t,"MultiboardGetRowCount",ng.bind(null,e)),a.lua_register(t,"MultiboardGetColumnCount",ag.bind(null,e)),a.lua_register(t,"MultiboardSetColumnCount",rg.bind(null,e)),a.lua_register(t,"MultiboardSetRowCount",ig.bind(null,e)),a.lua_register(t,"MultiboardSetItemsStyle",lg.bind(null,e)),a.lua_register(t,"MultiboardSetItemsValue",sg.bind(null,e)),a.lua_register(t,"MultiboardSetItemsValueColor",og.bind(null,e)),a.lua_register(t,"MultiboardSetItemsWidth",ug.bind(null,e)),a.lua_register(t,"MultiboardSetItemsIcon",cg.bind(null,e)),a.lua_register(t,"MultiboardGetItem",dg.bind(null,e)),a.lua_register(t,"MultiboardReleaseItem",hg.bind(null,e)),a.lua_register(t,"MultiboardSetItemStyle",fg.bind(null,e)),a.lua_register(t,"MultiboardSetItemValue",_g.bind(null,e)),a.lua_register(t,"MultiboardSetItemValueColor",mg.bind(null,e)),a.lua_register(t,"MultiboardSetItemWidth",pg.bind(null,e)),a.lua_register(t,"MultiboardSetItemIcon",gg.bind(null,e)),a.lua_register(t,"MultiboardSuppressDisplay",bg.bind(null,e)),a.lua_register(t,"SetCameraPosition",wg.bind(null,e)),a.lua_register(t,"SetCameraQuickPosition",vg.bind(null,e)),a.lua_register(t,"SetCameraBounds",Ag.bind(null,e)),a.lua_register(t,"StopCamera",Lg.bind(null,e)),a.lua_register(t,"ResetToGameCamera",yg.bind(null,e)),a.lua_register(t,"PanCameraTo",Sg.bind(null,e)),a.lua_register(t,"PanCameraToTimed",Tg.bind(null,e)),a.lua_register(t,"PanCameraToWithZ",Eg.bind(null,e)),a.lua_register(t,"PanCameraToTimedWithZ",xg.bind(null,e)),a.lua_register(t,"SetCinematicCamera",kg.bind(null,e)),a.lua_register(t,"SetCameraRotateMode",Mg.bind(null,e)),a.lua_register(t,"SetCameraField",Ig.bind(null,e)),a.lua_register(t,"AdjustCameraField",Ug.bind(null,e)),a.lua_register(t,"SetCameraTargetController",Pg.bind(null,e)),a.lua_register(t,"SetCameraOrientController",Rg.bind(null,e)),a.lua_register(t,"CreateCameraSetup",Og.bind(null,e)),a.lua_register(t,"CameraSetupSetField",Cg.bind(null,e)),a.lua_register(t,"CameraSetupGetField",Bg.bind(null,e)),a.lua_register(t,"CameraSetupSetDestPosition",Fg.bind(null,e)),a.lua_register(t,"CameraSetupGetDestPositionLoc",Dg.bind(null,e)),a.lua_register(t,"CameraSetupGetDestPositionX",Gg.bind(null,e)),a.lua_register(t,"CameraSetupGetDestPositionY",Ng.bind(null,e)),a.lua_register(t,"CameraSetupApply",Vg.bind(null,e)),a.lua_register(t,"CameraSetupApplyWithZ",jg.bind(null,e)),a.lua_register(t,"CameraSetupApplyForceDuration",Hg.bind(null,e)),a.lua_register(t,"CameraSetupApplyForceDurationWithZ",Kg.bind(null,e)),a.lua_register(t,"CameraSetTargetNoise",zg.bind(null,e)),a.lua_register(t,"CameraSetSourceNoise",Xg.bind(null,e)),a.lua_register(t,"CameraSetTargetNoiseEx",qg.bind(null,e)),a.lua_register(t,"CameraSetSourceNoiseEx",Yg.bind(null,e)),a.lua_register(t,"CameraSetSmoothingFactor",$g.bind(null,e)),a.lua_register(t,"SetCineFilterTexture",Wg.bind(null,e)),a.lua_register(t,"SetCineFilterBlendMode",Zg.bind(null,e)),a.lua_register(t,"SetCineFilterTexMapFlags",Jg.bind(null,e)),a.lua_register(t,"SetCineFilterStartUV",Qg.bind(null,e)),a.lua_register(t,"SetCineFilterEndUV",eb.bind(null,e)),a.lua_register(t,"SetCineFilterStartColor",tb.bind(null,e)),a.lua_register(t,"SetCineFilterEndColor",nb.bind(null,e)),a.lua_register(t,"SetCineFilterDuration",ab.bind(null,e)),a.lua_register(t,"DisplayCineFilter",rb.bind(null,e)),a.lua_register(t,"IsCineFilterDisplayed",ib.bind(null,e)),a.lua_register(t,"SetCinematicScene",lb.bind(null,e)),a.lua_register(t,"EndCinematicScene",sb.bind(null,e)),a.lua_register(t,"ForceCinematicSubtitles",ob.bind(null,e)),a.lua_register(t,"GetCameraMargin",ub.bind(null,e)),a.lua_register(t,"GetCameraBoundMinX",cb.bind(null,e)),a.lua_register(t,"GetCameraBoundMinY",db.bind(null,e)),a.lua_register(t,"GetCameraBoundMaxX",hb.bind(null,e)),a.lua_register(t,"GetCameraBoundMaxY",fb.bind(null,e)),a.lua_register(t,"GetCameraField",_b.bind(null,e)),a.lua_register(t,"GetCameraTargetPositionX",mb.bind(null,e)),a.lua_register(t,"GetCameraTargetPositionY",pb.bind(null,e)),a.lua_register(t,"GetCameraTargetPositionZ",gb.bind(null,e)),a.lua_register(t,"GetCameraTargetPositionLoc",bb.bind(null,e)),a.lua_register(t,"GetCameraEyePositionX",wb.bind(null,e)),a.lua_register(t,"GetCameraEyePositionY",vb.bind(null,e)),a.lua_register(t,"GetCameraEyePositionZ",Ab.bind(null,e)),a.lua_register(t,"GetCameraEyePositionLoc",Lb.bind(null,e)),a.lua_register(t,"NewSoundEnvironment",yb.bind(null,e)),a.lua_register(t,"CreateSound",Sb.bind(null,e)),a.lua_register(t,"CreateSoundFilenameWithLabel",Tb.bind(null,e)),a.lua_register(t,"CreateSoundFromLabel",Eb.bind(null,e)),a.lua_register(t,"CreateMIDISound",xb.bind(null,e)),a.lua_register(t,"SetSoundParamsFromLabel",kb.bind(null,e)),a.lua_register(t,"SetSoundDistanceCutoff",Mb.bind(null,e)),a.lua_register(t,"SetSoundChannel",Ib.bind(null,e)),a.lua_register(t,"SetSoundVolume",Ub.bind(null,e)),a.lua_register(t,"SetSoundPitch",Pb.bind(null,e)),a.lua_register(t,"SetSoundPlayPosition",Rb.bind(null,e)),a.lua_register(t,"SetSoundDistances",Ob.bind(null,e)),a.lua_register(t,"SetSoundConeAngles",Cb.bind(null,e)),a.lua_register(t,"SetSoundConeOrientation",Bb.bind(null,e)),a.lua_register(t,"SetSoundPosition",Fb.bind(null,e)),a.lua_register(t,"SetSoundVelocity",Db.bind(null,e)),a.lua_register(t,"AttachSoundToUnit",Gb.bind(null,e)),a.lua_register(t,"StartSound",Nb.bind(null,e)),a.lua_register(t,"StopSound",Vb.bind(null,e)),a.lua_register(t,"KillSoundWhenDone",jb.bind(null,e)),a.lua_register(t,"SetMapMusic",Hb.bind(null,e)),a.lua_register(t,"ClearMapMusic",Kb.bind(null,e)),a.lua_register(t,"PlayMusic",zb.bind(null,e)),a.lua_register(t,"PlayMusicEx",Xb.bind(null,e)),a.lua_register(t,"StopMusic",qb.bind(null,e)),a.lua_register(t,"ResumeMusic",Yb.bind(null,e)),a.lua_register(t,"PlayThematicMusic",$b.bind(null,e)),a.lua_register(t,"PlayThematicMusicEx",Wb.bind(null,e)),a.lua_register(t,"EndThematicMusic",Zb.bind(null,e)),a.lua_register(t,"SetMusicVolume",Jb.bind(null,e)),a.lua_register(t,"SetMusicPlayPosition",Qb.bind(null,e)),a.lua_register(t,"SetThematicMusicPlayPosition",ew.bind(null,e)),a.lua_register(t,"SetSoundDuration",tw.bind(null,e)),a.lua_register(t,"GetSoundDuration",nw.bind(null,e)),a.lua_register(t,"GetSoundFileDuration",aw.bind(null,e)),a.lua_register(t,"VolumeGroupSetVolume",rw.bind(null,e)),a.lua_register(t,"VolumeGroupReset",iw.bind(null,e)),a.lua_register(t,"GetSoundIsPlaying",lw.bind(null,e)),a.lua_register(t,"GetSoundIsLoading",sw.bind(null,e)),a.lua_register(t,"RegisterStackedSound",ow.bind(null,e)),a.lua_register(t,"UnregisterStackedSound",uw.bind(null,e)),a.lua_register(t,"AddWeatherEffect",cw.bind(null,e)),a.lua_register(t,"RemoveWeatherEffect",dw.bind(null,e)),a.lua_register(t,"EnableWeatherEffect",hw.bind(null,e)),a.lua_register(t,"TerrainDeformCrater",fw.bind(null,e)),a.lua_register(t,"TerrainDeformRipple",_w.bind(null,e)),a.lua_register(t,"TerrainDeformWave",mw.bind(null,e)),a.lua_register(t,"TerrainDeformRandom",pw.bind(null,e)),a.lua_register(t,"TerrainDeformStop",gw.bind(null,e)),a.lua_register(t,"TerrainDeformStopAll",bw.bind(null,e)),a.lua_register(t,"AddSpecialEffect",ww.bind(null,e)),a.lua_register(t,"AddSpecialEffectLoc",vw.bind(null,e)),a.lua_register(t,"AddSpecialEffectTarget",Aw.bind(null,e)),a.lua_register(t,"DestroyEffect",Lw.bind(null,e)),a.lua_register(t,"AddSpellEffect",yw.bind(null,e)),a.lua_register(t,"AddSpellEffectLoc",Sw.bind(null,e)),a.lua_register(t,"AddSpellEffectById",Tw.bind(null,e)),a.lua_register(t,"AddSpellEffectByIdLoc",Ew.bind(null,e)),a.lua_register(t,"AddSpellEffectTarget",xw.bind(null,e)),a.lua_register(t,"AddSpellEffectTargetById",kw.bind(null,e)),a.lua_register(t,"AddLightning",Mw.bind(null,e)),a.lua_register(t,"AddLightningEx",Iw.bind(null,e)),a.lua_register(t,"DestroyLightning",Uw.bind(null,e)),a.lua_register(t,"MoveLightning",Pw.bind(null,e)),a.lua_register(t,"MoveLightningEx",Rw.bind(null,e)),a.lua_register(t,"GetLightningColorA",Ow.bind(null,e)),a.lua_register(t,"GetLightningColorR",Cw.bind(null,e)),a.lua_register(t,"GetLightningColorG",Bw.bind(null,e)),a.lua_register(t,"GetLightningColorB",Fw.bind(null,e)),a.lua_register(t,"SetLightningColor",Dw.bind(null,e)),a.lua_register(t,"GetAbilityEffect",Gw.bind(null,e)),a.lua_register(t,"GetAbilityEffectById",Nw.bind(null,e)),a.lua_register(t,"GetAbilitySound",Vw.bind(null,e)),a.lua_register(t,"GetAbilitySoundById",jw.bind(null,e)),a.lua_register(t,"GetTerrainCliffLevel",Hw.bind(null,e)),a.lua_register(t,"SetWaterBaseColor",Kw.bind(null,e)),a.lua_register(t,"SetWaterDeforms",zw.bind(null,e)),a.lua_register(t,"GetTerrainType",Xw.bind(null,e)),a.lua_register(t,"GetTerrainVariance",qw.bind(null,e)),a.lua_register(t,"SetTerrainType",Yw.bind(null,e)),a.lua_register(t,"IsTerrainPathable",$w.bind(null,e)),a.lua_register(t,"SetTerrainPathable",Ww.bind(null,e)),a.lua_register(t,"CreateImage",Zw.bind(null,e)),a.lua_register(t,"DestroyImage",Jw.bind(null,e)),a.lua_register(t,"ShowImage",Qw.bind(null,e)),a.lua_register(t,"SetImageConstantHeight",ev.bind(null,e)),a.lua_register(t,"SetImagePosition",tv.bind(null,e)),a.lua_register(t,"SetImageColor",nv.bind(null,e)),a.lua_register(t,"SetImageRender",av.bind(null,e)),a.lua_register(t,"SetImageRenderAlways",rv.bind(null,e)),a.lua_register(t,"SetImageAboveWater",iv.bind(null,e)),a.lua_register(t,"SetImageType",lv.bind(null,e)),a.lua_register(t,"CreateUbersplat",sv.bind(null,e)),a.lua_register(t,"DestroyUbersplat",ov.bind(null,e)),a.lua_register(t,"ResetUbersplat",uv.bind(null,e)),a.lua_register(t,"FinishUbersplat",cv.bind(null,e)),a.lua_register(t,"ShowUbersplat",dv.bind(null,e)),a.lua_register(t,"SetUbersplatRender",hv.bind(null,e)),a.lua_register(t,"SetUbersplatRenderAlways",fv.bind(null,e)),a.lua_register(t,"SetBlight",_v.bind(null,e)),a.lua_register(t,"SetBlightRect",mv.bind(null,e)),a.lua_register(t,"SetBlightPoint",pv.bind(null,e)),a.lua_register(t,"SetBlightLoc",gv.bind(null,e)),a.lua_register(t,"CreateBlightedGoldmine",bv.bind(null,e)),a.lua_register(t,"IsPointBlighted",wv.bind(null,e)),a.lua_register(t,"SetDoodadAnimation",vv.bind(null,e)),a.lua_register(t,"SetDoodadAnimationRect",Av.bind(null,e)),a.lua_register(t,"StartMeleeAI",Lv.bind(null,e)),a.lua_register(t,"StartCampaignAI",yv.bind(null,e)),a.lua_register(t,"CommandAI",Sv.bind(null,e)),a.lua_register(t,"PauseCompAI",Tv.bind(null,e)),a.lua_register(t,"GetAIDifficulty",Ev.bind(null,e)),a.lua_register(t,"RemoveGuardPosition",xv.bind(null,e)),a.lua_register(t,"RecycleGuardPosition",kv.bind(null,e)),a.lua_register(t,"RemoveAllGuardPositions",Mv.bind(null,e)),a.lua_register(t,"Cheat",Iv.bind(null,e)),a.lua_register(t,"IsNoVictoryCheat",Uv.bind(null,e)),a.lua_register(t,"IsNoDefeatCheat",Pv.bind(null,e)),a.lua_register(t,"Preload",Rv.bind(null,e)),a.lua_register(t,"PreloadEnd",Ov.bind(null,e)),a.lua_register(t,"PreloadStart",Cv.bind(null,e)),a.lua_register(t,"PreloadRefresh",Bv.bind(null,e)),a.lua_register(t,"PreloadEndEx",Fv.bind(null,e)),a.lua_register(t,"PreloadGenClear",Dv.bind(null,e)),a.lua_register(t,"PreloadGenStart",Gv.bind(null,e)),a.lua_register(t,"PreloadGenEnd",Nv.bind(null,e)),a.lua_register(t,"Preloader",Vv.bind(null,e)),a.lua_register(t,"AutomationTestStart",jv.bind(null,e)),a.lua_register(t,"AutomationTestEnd",Hv.bind(null,e)),a.lua_register(t,"BlzGetTriggerPlayerMouseX",Kv.bind(null,e)),a.lua_register(t,"BlzGetTriggerPlayerMouseY",zv.bind(null,e)),a.lua_register(t,"BlzGetTriggerPlayerMousePosition",Xv.bind(null,e)),a.lua_register(t,"BlzGetTriggerPlayerMouseButton",qv.bind(null,e)),a.lua_register(t,"BlzSetAbilityTooltip",Yv.bind(null,e)),a.lua_register(t,"BlzSetAbilityActivatedTooltip",$v.bind(null,e)),a.lua_register(t,"BlzSetAbilityExtendedTooltip",Wv.bind(null,e)),a.lua_register(t,"BlzSetAbilityActivatedExtendedTooltip",Zv.bind(null,e)),a.lua_register(t,"BlzSetAbilityResearchTooltip",Jv.bind(null,e)),a.lua_register(t,"BlzSetAbilityResearchExtendedTooltip",Qv.bind(null,e)),a.lua_register(t,"BlzGetAbilityTooltip",eA.bind(null,e)),a.lua_register(t,"BlzGetAbilityActivatedTooltip",tA.bind(null,e)),a.lua_register(t,"BlzGetAbilityExtendedTooltip",nA.bind(null,e)),a.lua_register(t,"BlzGetAbilityActivatedExtendedTooltip",aA.bind(null,e)),a.lua_register(t,"BlzGetAbilityResearchTooltip",rA.bind(null,e)),a.lua_register(t,"BlzGetAbilityResearchExtendedTooltip",iA.bind(null,e)),a.lua_register(t,"BlzSetAbilityIcon",lA.bind(null,e)),a.lua_register(t,"BlzGetAbilityIcon",sA.bind(null,e)),a.lua_register(t,"BlzSetAbilityActivatedIcon",oA.bind(null,e)),a.lua_register(t,"BlzGetAbilityActivatedIcon",uA.bind(null,e)),a.lua_register(t,"BlzGetAbilityPosX",cA.bind(null,e)),a.lua_register(t,"BlzGetAbilityPosY",dA.bind(null,e)),a.lua_register(t,"BlzSetAbilityPosX",hA.bind(null,e)),a.lua_register(t,"BlzSetAbilityPosY",fA.bind(null,e)),a.lua_register(t,"BlzGetAbilityActivatedPosX",_A.bind(null,e)),a.lua_register(t,"BlzGetAbilityActivatedPosY",mA.bind(null,e)),a.lua_register(t,"BlzSetAbilityActivatedPosX",pA.bind(null,e)),a.lua_register(t,"BlzSetAbilityActivatedPosY",gA.bind(null,e)),a.lua_register(t,"BlzGetUnitMaxHP",bA.bind(null,e)),a.lua_register(t,"BlzSetUnitMaxHP",wA.bind(null,e)),a.lua_register(t,"BlzGetUnitMaxMana",vA.bind(null,e)),a.lua_register(t,"BlzSetUnitMaxMana",AA.bind(null,e)),a.lua_register(t,"BlzDeleteHeroAbility",LA.bind(null,e)),a.lua_register(t,"BlzSetItemName",yA.bind(null,e)),a.lua_register(t,"BlzSetItemDescription",SA.bind(null,e)),a.lua_register(t,"BlzGetItemDescription",TA.bind(null,e)),a.lua_register(t,"BlzSetItemTooltip",EA.bind(null,e)),a.lua_register(t,"BlzGetItemTooltip",xA.bind(null,e)),a.lua_register(t,"BlzSetItemExtendedTooltip",kA.bind(null,e)),a.lua_register(t,"BlzGetItemExtendedTooltip",MA.bind(null,e)),a.lua_register(t,"BlzSetItemIconPath",IA.bind(null,e)),a.lua_register(t,"BlzGetItemIconPath",UA.bind(null,e)),a.lua_register(t,"BlzSetUnitName",PA.bind(null,e)),a.lua_register(t,"BlzSetHeroProperName",RA.bind(null,e)),a.lua_register(t,"BlzGetUnitBaseDamage",OA.bind(null,e)),a.lua_register(t,"BlzSetUnitBaseDamage",CA.bind(null,e)),a.lua_register(t,"BlzGetUnitDiceNumber",BA.bind(null,e)),a.lua_register(t,"BlzSetUnitDiceNumber",FA.bind(null,e)),a.lua_register(t,"BlzGetUnitDiceSides",DA.bind(null,e)),a.lua_register(t,"BlzSetUnitDiceSides",GA.bind(null,e)),a.lua_register(t,"BlzGetUnitAttackCooldown",NA.bind(null,e)),a.lua_register(t,"BlzSetUnitAttackCooldown",VA.bind(null,e)),a.lua_register(t,"BlzSetSpecialEffectColorByPlayer",jA.bind(null,e)),a.lua_register(t,"BlzSetSpecialEffectColor",HA.bind(null,e)),a.lua_register(t,"BlzSetSpecialEffectAlpha",KA.bind(null,e)),a.lua_register(t,"BlzSetSpecialEffectScale",zA.bind(null,e)),a.lua_register(t,"BlzSetSpecialEffectPosition",XA.bind(null,e)),a.lua_register(t,"BlzSetSpecialEffectHeight",qA.bind(null,e)),a.lua_register(t,"BlzSetSpecialEffectTimeScale",YA.bind(null,e)),a.lua_register(t,"BlzSetSpecialEffectTime",$A.bind(null,e)),a.lua_register(t,"BlzSetSpecialEffectOrientation",WA.bind(null,e)),a.lua_register(t,"BlzSetSpecialEffectYaw",ZA.bind(null,e)),a.lua_register(t,"BlzSetSpecialEffectPitch",JA.bind(null,e)),a.lua_register(t,"BlzSetSpecialEffectRoll",QA.bind(null,e)),a.lua_register(t,"BlzSetSpecialEffectX",eL.bind(null,e)),a.lua_register(t,"BlzSetSpecialEffectY",tL.bind(null,e)),a.lua_register(t,"BlzSetSpecialEffectZ",nL.bind(null,e)),a.lua_register(t,"BlzSetSpecialEffectPositionLoc",aL.bind(null,e)),a.lua_register(t,"BlzGetLocalSpecialEffectX",rL.bind(null,e)),a.lua_register(t,"BlzGetLocalSpecialEffectY",iL.bind(null,e)),a.lua_register(t,"BlzGetLocalSpecialEffectZ",lL.bind(null,e)),a.lua_register(t,"BlzGetUnitArmor",sL.bind(null,e)),a.lua_register(t,"BlzSetUnitArmor",oL.bind(null,e)),a.lua_register(t,"BlzUnitHideAbility",uL.bind(null,e)),a.lua_register(t,"BlzUnitDisableAbility",cL.bind(null,e)),a.lua_register(t,"BlzUnitCancelTimedLife",dL.bind(null,e)),a.lua_register(t,"BlzIsUnitSelectable",hL.bind(null,e)),a.lua_register(t,"BlzIsUnitInvulnerable",fL.bind(null,e)),a.lua_register(t,"BlzUnitInterruptAttack",_L.bind(null,e)),a.lua_register(t,"BlzGetUnitCollisionSize",mL.bind(null,e)),a.lua_register(t,"BlzGetAbilityManaCost",pL.bind(null,e)),a.lua_register(t,"BlzGetAbilityCooldown",gL.bind(null,e)),a.lua_register(t,"BlzSetUnitAbilityCooldown",bL.bind(null,e)),a.lua_register(t,"BlzGetUnitAbilityCooldown",wL.bind(null,e)),a.lua_register(t,"BlzGetUnitAbilityCooldownRemaining",vL.bind(null,e)),a.lua_register(t,"BlzEndUnitAbilityCooldown",AL.bind(null,e)),a.lua_register(t,"BlzGetUnitAbilityManaCost",LL.bind(null,e)),a.lua_register(t,"BlzSetUnitAbilityManaCost",yL.bind(null,e)),a.lua_register(t,"BlzGetLocalUnitZ",SL.bind(null,e)),a.lua_register(t,"BlzDecPlayerTechResearched",TL.bind(null,e)),a.lua_register(t,"BlzSetEventDamage",EL.bind(null,e))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(11);class r extends a.default{constructor(e,t){super(),this.team=-1,this.startLocation=-1,this.forcedStartLocation=-1,this.color=-1,this.racePreference=-1,this.raceSelectable=!1,this.controller=-1,this.alliances=new Map,this.index=e,this.name=`Player ${e}`;for(let n=0;n<t;n++)n!==e&&this.alliances.set(n,{passive:!1,helpRequest:!1,helpResponse:!1,sharedXp:!1,sharedSpells:!1,sharedVision:!1,sharedControl:!1,sharedAdvancedControl:!1,rescuable:!1,sharedVisionForced:!1})}}t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(11);class r extends a.default{constructor(){super(...arguments),this.health=0,this.maxHealth=0}}t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(29),r=n(127);class i extends r.default{constructor(e,t,n,r,i){super(),this.acquireRange=500,this.player=e,this.unitId=a.base256ToString(t),this.x=n,this.y=r,this.face=i}}t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(11);class r extends a.default{constructor(e,t){super(),this.z=0,this.x=e,this.y=t}}t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(0);class r extends a.default{}t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(0);class r extends a.default{}t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(0);class r extends a.default{}t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(70);class r extends a.default{}t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(70);class r extends a.default{}t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(0);class r extends a.default{}t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(0);class r extends a.default{}t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(0);class r extends a.default{}t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(0);class r extends a.default{}t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(0);class r extends a.default{}t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(20);class r extends a.default{}t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(20);class r extends a.default{}t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(20);class r extends a.default{}t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(20);class r extends a.default{}t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(20);class r extends a.default{}t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(20);class r extends a.default{}t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(20);class r extends a.default{}t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(0);class r extends a.default{}t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(0);class r extends a.default{}t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(0);class r extends a.default{}t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(0);class r extends a.default{}t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(0);class r extends a.default{}t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(0);class r extends a.default{}t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(0);class r extends a.default{}t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(0);class r extends a.default{}t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(0);class r extends a.default{}t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(0);class r extends a.default{}t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(0);class r extends a.default{}t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(0);class r extends a.default{}t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(0);class r extends a.default{}t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(0);class r extends a.default{}t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(0);class r extends a.default{}t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(0);class r extends a.default{}t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(0);class r extends a.default{}t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(0);class r extends a.default{}t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(0);class r extends a.default{}t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(0);class r extends a.default{}t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(0);class r extends a.default{}t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(0);class r extends a.default{}t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(0);class r extends a.default{}t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(0);class r extends a.default{}t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(0);class r extends a.default{}t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(173),r=n(174),i=n(176),l=n(296),s=n(413);t.default={version:a.version,common:r.default,parsers:i.default,viewer:l.default,utils:s.default}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.version="5.0.0-beta.14"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(2),r=n(7),i=n(12),l=n(33),s=n(175),o=n(1),u=n(71),c=n(46);t.default={glMatrix:a,glMatrixAddon:r,math:i,canvas:l,geometry:s,BinaryStream:o.default,BitStream:u.default,urlWithParams:c.default}},function(e,t,n){"use strict";function a(e,t){return{vertices:new Float32Array([-e,t,0,-e,-t,0,e,-t,0,e,t,0]),uvs:new Float32Array([0,0,0,1,1,1,1,0]),faces:new Uint8Array([0,1,2,0,2,3]),edges:new Uint8Array([0,1,1,2,2,3,3,0]),boundingRadius:Math.max(e,t)}}function r(e,t,n){return{vertices:new Float32Array([-e,-t,-n,-e,-t,n,-e,t,-n,-e,t,n,e,t,-n,e,t,n,e,-t,-n,e,-t,n]),uvs:new Float32Array([0,0,0,1,.25,0,.25,1,.5,0,.5,1,.75,0,.75,1]),faces:new Uint8Array([0,1,2,1,3,2,2,3,4,3,5,4,4,5,6,5,7,6,6,7,0,7,1,0,0,2,4,0,4,6,1,5,3,1,7,5]),edges:new Uint8Array([0,1,2,3,4,5,6,7,0,2,2,4,4,6,6,0,1,3,3,5,5,7,7,1]),boundingRadius:Math.max(e,t,n)}}function i(e,t){return t<255?new Uint8Array(e):t<65535?new Uint16Array(e):new Uint32Array(e)}function l(e,t,n){let a=(t+1)*(n+1),r=new Float32Array(3*a),l=new Float32Array(2*a),s=i(t*n*6,a),o=i(t*n*6,a);for(let a=0,i=0,s=0;a<=t;a++){let o=a*Math.PI/t,u=Math.sin(o),c=Math.cos(o);for(let o=0;o<=n;o+=1,i+=3,s+=2){let d=2*o*Math.PI/n,h=Math.sin(d),f=Math.cos(d);r[i+0]=f*u*e,r[i+1]=h*u*e,r[i+2]=c*e,l[s+0]=o/n,l[s+1]=1-a/t}}for(let e=0,a=0;e<t;e++)for(let t=0;t<n;t+=1,a+=6){let r=e*(n+1)+t,i=r+n+1;s[a+0]=r,s[a+1]=i,s[a+2]=r+1,s[a+3]=i,s[a+4]=i+1,s[a+5]=r+1,o[a+0]=r,o[a+1]=i,o[a+2]=r,o[a+3]=r+1,o[a+4]=i,o[a+5]=i+1}return{vertices:r,uvs:l,faces:s,edges:o,boundingRadius:e}}function s(e,t,n){let a=2*((n=Math.max(n,3))+1)+2,r=new Float32Array(3*a),l=new Float32Array(2*a),s=i(12*n,a),o=i(10*n,a),u=2*Math.PI/n,c=0,d=0;for(let a=0;a<n+1;a+=1,c+=6,d+=4){let i=Math.cos(u*a)*e,s=Math.sin(u*a)*e,o=a/n;r[c+0]=i,r[c+1]=s,r[c+2]=t,r[c+3]=i,r[c+4]=s,r[c+5]=-t,l[d+0]=o,l[d+1]=1,l[d+2]=o,l[d+3]=0}r[c+0]=0,r[c+1]=0,r[c+2]=t,r[c+3]=0,r[c+4]=0,r[c+5]=-t,l[d+0]=0,l[d+1]=1,l[d+2]=0,l[d+3]=0;for(let e=0,t=0,r=0;e<n;e+=1,t+=12,r+=10){let n=2*e;s[t+0]=n+0,s[t+1]=n+1,s[t+2]=(n+3)%(a-2),s[t+3]=n+0,s[t+4]=(n+3)%(a-2),s[t+5]=(n+2)%(a-2),s[t+6]=n+0,s[t+7]=(n+2)%(a-2),s[t+8]=a-2,s[t+9]=n+1,s[t+10]=(n+3)%(a-2),s[t+11]=a-1,o[r+0]=n+0,o[r+1]=n+1,o[r+2]=n+0,o[r+3]=(n+2)%(a-2),o[r+4]=n+1,o[r+5]=(n+3)%(a-2),o[r+6]=n+0,o[r+7]=a-2,o[r+8]=n+1,o[r+9]=a-1}return{vertices:r,uvs:l,faces:s,edges:o,boundingRadius:Math.max(e,t)}}Object.defineProperty(t,"__esModule",{value:!0}),t.createRectangle=a,t.createUnitRectangle=function(){return a(1,1)},t.createCube=r,t.createUnitCube=function(){return r(1,1,1)},t.createSphere=l,t.createUnitSphere=function(e,t){return l(1,e,t)},t.createCylinder=s,t.createUnitCylinder=function(e){return s(1,1,e)},t.createFrustum=function(e,t,n,a){let r=2*Math.tan(e/2),i=r*n/2,l=n*t/2,s=r*a/2,o=a*t/2;return{vertices:new Float32Array([-l,-i,n,-l,i,n,-o,-s,a,-o,s,a,o,-s,a,o,s,a,l,-i,n,l,i,n]),uvs:new Float32Array([0,0,0,1,.25,0,.25,1,.5,0,.5,1,.75,0,.75,1]),faces:new Uint8Array([0,1,2,1,3,2,2,3,4,3,5,4,4,5,6,5,7,6,6,7,0,7,1,0,0,2,4,0,4,6,1,5,3,1,7,5]),edges:new Uint8Array([0,1,2,3,4,5,6,7,0,2,2,4,4,6,6,0,1,3,3,5,5,7,7,1])}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(177),r=n(178),i=n(179),l=n(199),s=n(219),o=n(235),u=n(292),c=n(294);t.default={ini:a.default,slk:r.default,m3:i.default,mdlx:l.default,mpq:s.default,w3x:o.default,blp:u.default,dds:c.default}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(72);t.default={File:a.default}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(73);t.default={File:a.default}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(74);t.default={Model:a.default}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(75),r=n(76),i=n(181),l=n(183),s=n(184),o=n(185),u=n(186),c=n(187),d=n(188),h=n(189),f=n(190),_=n(191),m=n(192),p=n(193),g=n(194),b=n(47),w=n(195),v=n(196),A=n(197),L=n(198);let y={MD34:[r.default,{11:24}],MODL:[i.default,{23:784,25:808,26:820,28:844,29:856}],SEQS:[l.default,{1:96,2:92}],STC_:[s.default,{4:204}],STG_:[o.default,{0:24}],STS_:[u.default,{0:28}],BONE:[c.default,{1:160}],DIV_:[d.default,{2:52}],REGN:[h.default,{3:36,4:40,5:48}],BAT_:[f.default,{1:14}],MATM:[_.default,{0:8}],MAT_:[m.default,{15:268,16:280,17:280,18:280,19:340}],LAYR:[p.default,{22:356,24:436,25:468,26:464}],EVNT:[g.default,{0:96,1:104,2:108}],BNDS:[b.default,{0:28}],ATT_:[w.default,{1:20}],CAM_:[v.default,{3:180,5:264}],SDEV:[A.default,{0:32}],SDU6:[A.default,{0:32}],SDFG:[A.default,{0:32}],SDS6:[A.default,{0:32}],SDR3:[A.default,{0:32}],SD2V:[A.default,{0:32}],SD3V:[A.default,{0:32}],SD4Q:[A.default,{0:32}],SDCC:[A.default,{0:32}],SDMB:[A.default,{0:32}],FLAG:[A.default,{0:32}],MSEC:[L.default,{1:72}],LITE:[L.default,{7:212}],ATVL:[L.default,{0:116}],PATU:[L.default,{4:152}],TRGD:[L.default,{0:24}],DIS_:[L.default,{4:68}],CMS_:[L.default,{0:24}],CMP_:[L.default,{2:28}],TER_:[L.default,{0:24,1:28}],VOL_:[L.default,{0:84}],VON_:[L.default,{0:268}],CREP:[L.default,{0:24,1:28}],STBM:[L.default,{0:48}],LFSB:[L.default,{2:56}],LFLR:[L.default,{2:80,3:152}],PAR_:[L.default,{12:1316,17:1460,18:1464,19:1464,21:1464,22:1484,23:1492,24:1496}],PARC:[L.default,{0:40}],PROJ:[L.default,{4:388,5:382}],PHYJ:[L.default,{0:180}],PHCC:[L.default,{0:76}],PHAC:[L.default,{0:32}],PHCL:[L.default,{2:128}],FOR_:[L.default,{1:104,2:104}],DMSE:[L.default,{0:4}],PHSH:[L.default,{1:132,3:300}],PHRB:[L.default,{2:104,4:80}],SSGS:[L.default,{1:108}],BBSC:[L.default,{0:48}],SRIB:[L.default,{0:272}],RIB_:[L.default,{6:748,8:756,9:760}],IKJT:[L.default,{0:32}],SHBX:[L.default,{0:64}],WRP_:[L.default,{1:132}]};t.default=class{constructor(e,t){let n=a.default(e.read(4)),r=e.readUint32(),i=e.readUint32(),l=e.readUint32();this.index=t,this.tag=n,this.offset=r,this.version=l;let s=y[n],o=e.tell();if(e.seek(r),s){let a=s[0],r=s[1][l];if(!r)throw new Error(": Unsupported object version - tag "+n+" and version "+l);this.entries=[];for(let n=0,s=i;n<s;n++)this.entries[n]=new a(e.substream(r),l,t),e.skip(r)}else if("CHAR"===n||"SCHR"===n)this.entries=e.readCharArray(i);else if("U8__"===n)this.entries=e.readUint8Array(i);else if("U16_"===n)this.entries=e.readUint16Array(i);else if("U32_"===n)this.entries=e.readUint32Array(i);else if("I16_"===n)this.entries=e.readInt16Array(i);else if("I32_"===n)this.entries=e.readInt32Array(i);else if("REAL"===n)this.entries=e.readFloat32Array(i);else if("VEC2"===n){this.entries=[];for(let t=0;t<i;t++)this.entries[t]=e.readFloat32Array(2)}else if("VEC3"===n||"SVC3"===n){this.entries=[];for(let t=0;t<i;t++)this.entries[t]=e.readFloat32Array(3)}else if("VEC4"===n||"QUAT"===n){this.entries=[];for(let t=0;t<i;t++)this.entries[t]=e.readFloat32Array(4)}else{if("IREF"!==n)throw this.entries=[],new Error(": Unsupported object tag - tag "+n+" and version "+l);this.entries=[];for(let t=0;t<i;t++)this.entries[t]=e.readFloat32Array(16)}e.seek(o)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(4),r=n(47),i=n(182);t.default=class{constructor(e,t,n){this.clothBehavior=null,this.unknown26=null,this.version=t,this.modelName=new a.default(e,n),this.flags=e.readUint32(),this.sequences=new a.default(e,n),this.stc=new a.default(e,n),this.stg=new a.default(e,n),this.unknown0=e.readFloat32(),this.unknown1=e.readFloat32(),this.unknown2=e.readFloat32(),this.unknown3=e.readFloat32(),this.sts=new a.default(e,n),this.bones=new a.default(e,n),this.numberOfBonesToCheckForSkin=e.readUint32(),this.vertexFlags=e.readUint32(),this.vertices=new a.default(e,n),this.divisions=new a.default(e,n),this.boneLookup=new a.default(e,n),this.boundings=new r.default(e),this.unknown4To20=e.readUint32Array(16),this.attachmentPoints=new a.default(e,n),this.attachmentPointAddons=new a.default(e,n),this.ligts=new a.default(e,n),this.shbxData=new a.default(e,n),this.cameras=new a.default(e,n),this.unknown21=new a.default(e,n),this.materialReferences=new a.default(e,n),this.materials=[new a.default(e,n),new a.default(e,n),new a.default(e,n),new a.default(e,n),new a.default(e,n),new a.default(e,n),new a.default(e,n)],t>24&&this.materials.push(new a.default(e,n)),t>25&&this.materials.push(new a.default(e,n)),t>27&&this.materials.push(new a.default(e,n)),t>28&&this.materials.push(new a.default(e,n)),this.particleEmitters=new a.default(e,n),this.particleEmitterCopies=new a.default(e,n),this.ribbonEmitters=new a.default(e,n),this.projections=new a.default(e,n),this.forces=new a.default(e,n),this.warps=new a.default(e,n),this.unknown22=new a.default(e,n),this.rigidBodies=new a.default(e,n),this.unknown23=new a.default(e,n),this.physicsJoints=new a.default(e,n),t>27&&(this.clothBehavior=new a.default(e,n)),this.unknown24=new a.default(e,n),this.ikjtData=new a.default(e,n),this.unknown25=new a.default(e,n),t>24&&(this.unknown26=new a.default(e,n)),this.partsOfTurrentBehaviors=new a.default(e,n),this.turrentBehaviors=new a.default(e,n),this.absoluteInverseBoneRestPositions=new a.default(e,n),this.tightHitTest=new i.default(e),this.fuzzyHitTestObjects=new a.default(e,n),this.attachmentVolumes=new a.default(e,n),this.attachmentVolumesAddon0=new a.default(e,n),this.attachmentVolumesAddon1=new a.default(e,n),this.billboardBehaviors=new a.default(e,n),this.tmdData=new a.default(e,n),this.unknown27=e.readUint32(),this.unknown28=new a.default(e,n)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(e){this.shape=e.readUint32(),this.bone=e.readInt16(),this.unknown0=e.readUint16(),this.matrix=e.readFloat32Array(16),this.unknown1=e.readUint32(),this.unknown2=e.readUint32(),this.unknown3=e.readUint32(),this.unknown4=e.readUint32(),this.unknown5=e.readUint32(),this.unknown6=e.readUint32(),this.size=e.readFloat32Array(3)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(4),r=n(47);t.default=class{constructor(e,t,n){this.version=t,e.skip(8),this.name=new a.default(e,n),this.interval=e.readUint32Array(2),this.movementSpeed=e.readFloat32(),this.flags=e.readUint32(),this.frequency=e.readUint32(),e.skip(12),t<2&&e.skip(4),this.boundingSphere=new r.default(e),e.skip(12)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(4);t.default=class{constructor(e,t,n){this.version=t,this.name=new a.default(e,n),this.runsConcurrent=e.readUint16(),this.priority=e.readUint16(),this.stsIndex=e.readUint16(),this.stsIndexCopy=e.readUint16(),this.animIds=new a.default(e,n),this.animRefs=new a.default(e,n),e.skip(4),this.sd=[new a.default(e,n),new a.default(e,n),new a.default(e,n),new a.default(e,n),new a.default(e,n),new a.default(e,n),new a.default(e,n),new a.default(e,n),new a.default(e,n),new a.default(e,n),new a.default(e,n),new a.default(e,n),new a.default(e,n)]}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(4);t.default=class{constructor(e,t,n){this.version=t,this.name=new a.default(e,n),this.stcIndices=new a.default(e,n)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(4);t.default=class{constructor(e,t,n){this.version=t,this.animIds=new a.default(e,n),e.skip(16)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(4),r=n(34);t.default=class{constructor(e,t,n){this.version=t,this.unknown0=e.readInt32(),this.name=new a.default(e,n),this.flags=e.readUint32(),this.parent=e.readInt16(),this.unknown1=e.readUint16(),this.location=new r.M3ParserVector3AnimationReference(e),this.rotation=new r.M3ParserVector4AnimationReference(e),this.scale=new r.M3ParserVector3AnimationReference(e),this.visibility=new r.M3ParserUint32AnimationReference(e)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(4);t.default=class{constructor(e,t,n){this.version=t,this.triangles=new a.default(e,n),this.regions=new a.default(e,n),this.batches=new a.default(e,n),this.MSEC=new a.default(e,n),this.unknown0=e.readUint32()}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(e,t,n){this.unknown4=0,this.unknown5=null,this.version=t,this.unknown0=e.readUint32(),this.unknown1=e.readUint32(),this.firstVertexIndex=e.readUint32(),this.verticesCount=e.readUint32(),this.firstTriangleIndex=e.readUint32(),this.triangleIndicesCount=e.readUint32(),this.bonesCount=e.readUint16(),this.firstBoneLookupIndex=e.readUint16(),this.boneLookupIndicesCount=e.readUint16(),this.unknown2=e.readUint16(),this.boneWeightPairsCount=e.readUint8(),this.unknown3=e.readUint8(),this.rootBoneIndex=e.readUint16(),t>3&&(this.unknown4=e.readUint32()),t>4&&(this.unknown5=e.readUint8Array(8))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(e,t,n){this.version=t,this.unknown0=e.readUint32(),this.regionIndex=e.readUint16(),this.unknown1=e.readUint32(),this.materialReferenceIndex=e.readUint16(),this.unknown2=e.readUint16()}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(e,t,n){this.version=t,this.materialType=e.readUint32(),this.materialIndex=e.readUint32()}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(4),r=n(34);t.default=class{constructor(e,t,n){this.glossLayer=null,this.unknown4=null,this.unknown5=null,this.unknown6=null,this.unknown7=null,this.unknown11=null,this.version=t,this.name=new a.default(e,n),this.additionalFlags=e.readUint32(),this.flags=e.readUint32(),this.blendMode=e.readUint32(),this.priority=e.readInt32(),this.usedRTTChannels=e.readUint32(),this.specularity=e.readFloat32(),this.depthBlendFalloff=e.readFloat32(),this.cutoutThreshold=e.readUint8(),this.unknown1=e.readUint8(),this.unknown2=e.readUint8(),this.unknown3=e.readUint8(),this.specMult=e.readFloat32(),this.emisMult=e.readFloat32(),this.diffuseLayer=new a.default(e,n),this.decalLayer=new a.default(e,n),this.specularLayer=new a.default(e,n),t>15&&(this.glossLayer=new a.default(e,n)),this.emissiveLayer=new a.default(e,n),this.emissive2Layer=new a.default(e,n),this.evioLayer=new a.default(e,n),this.evioMaskLayer=new a.default(e,n),this.alphaMaskLayer=new a.default(e,n),this.alphaMask2Layer=new a.default(e,n),this.normalLayer=new a.default(e,n),this.heightLayer=new a.default(e,n),this.lightMapLayer=new a.default(e,n),this.ambientOcclusionLayer=new a.default(e,n),t>18&&(this.unknown4=new a.default(e,n),this.unknown5=new a.default(e,n),this.unknown6=new a.default(e,n),this.unknown7=new a.default(e,n)),this.unknown8=e.readUint32(),this.layerBlendType=e.readUint32(),this.emisBlendType=e.readUint32(),this.emisMode=e.readUint32(),this.specType=e.readUint32(),this.unknown9=new r.M3ParserFloat32AnimationReference(e),this.unknown10=new r.M3ParserUint32AnimationReference(e),t>18&&(this.unknown11=e.readUint8Array(12))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(4),r=n(34);t.default=class{constructor(e,t,n){this.noiseAmp=0,this.noiseFreq=0,this.triPlanarOffset=null,this.triPlanarScale=null,this.unknown6=null,this.fresnelInvertedMaskX=0,this.fresnelInvertedMaskY=0,this.fresnelInvertedMaskZ=0,this.fresnelRotationYaw=0,this.fresnelRotationPitch=0,this.unknown7=0,this.version=t,this.unknown0=e.readUint32(),this.imagePath=new a.default(e,n),this.color=new r.M3ParserPixelAnimationReference(e),this.flags=e.readUint32(),this.uvSource=e.readUint32(),this.colorChannelSetting=e.readUint32(),this.brightMult=new r.M3ParserFloat32AnimationReference(e),this.midtoneOffset=new r.M3ParserFloat32AnimationReference(e),this.unknown1=e.readUint32(),t>23&&(this.noiseAmp=e.readFloat32(),this.noiseFreq=e.readFloat32()),this.rttChannel=e.readInt32(),this.videoFrameRate=e.readUint32(),this.videoStartFrame=e.readUint32(),this.videoEndFrame=e.readInt32(),this.videoMode=e.readUint32(),this.videoSyncTiming=e.readUint32(),this.videoPlay=new r.M3ParserUint32AnimationReference(e),this.videoRestart=new r.M3ParserUint32AnimationReference(e),this.flipBookRows=e.readUint32(),this.flipBookColumns=e.readUint32(),this.flipBookFrame=new r.M3ParserUint16AnimationReference(e),this.uvOffset=new r.M3ParserVector2AnimationReference(e),this.uvAngle=new r.M3ParserVector3AnimationReference(e),this.uvTiling=new r.M3ParserVector2AnimationReference(e),this.unknown2=new r.M3ParserUint32AnimationReference(e),this.unknown3=new r.M3ParserFloat32AnimationReference(e),this.brightness=new r.M3ParserFloat32AnimationReference(e),t>23&&(this.triPlanarOffset=new r.M3ParserVector3AnimationReference(e),this.triPlanarScale=new r.M3ParserVector3AnimationReference(e)),this.unknown4=e.readInt32(),this.fresnelType=e.readUint32(),this.fresnelExponent=e.readFloat32(),this.fresnelMin=e.readFloat32(),this.fresnelMaxOffset=e.readFloat32(),this.unknown5=e.readFloat32(),t>24&&(this.unknown6=e.readUint8Array(8),this.fresnelInvertedMaskX=e.readFloat32(),this.fresnelInvertedMaskY=e.readFloat32(),this.fresnelInvertedMaskZ=e.readFloat32(),this.fresnelRotationYaw=e.readFloat32(),this.fresnelRotationPitch=e.readFloat32(),this.unknown7=e.readUint32())}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(4);t.default=class{constructor(e,t,n){this.unknown6=0,this.unknown7=0,this.unknown8=0,this.version=t,this.name=new a.default(e,n),this.unknown0=e.readInt32(),this.unknown1=e.readInt16(),this.unknown2=e.readUint16(),this.matrix=e.readFloat32Array(16),this.unknown3=e.readInt32(),this.unknown4=e.readInt32(),this.unknown5=e.readInt32(),t>0&&(this.unknown6=e.readInt32(),this.unknown7=e.readInt32()),t>1&&(this.unknown8=e.readInt32())}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(4);t.default=class{constructor(e,t,n){this.version=t,this.unknown=e.readInt32(),this.name=new a.default(e,n),this.bone=e.readUint32()}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(4),r=n(34);t.default=class{constructor(e,t,n){this.version=t,this.bone=e.readUint32(),this.name=new a.default(e,n),this.fieldOfView=new r.M3ParserFloat32AnimationReference(e),this.unknown0=e.readUint32(),this.farClip=new r.M3ParserFloat32AnimationReference(e),this.nearClip=new r.M3ParserFloat32AnimationReference(e),this.clip2=new r.M3ParserFloat32AnimationReference(e),this.focalDepth=new r.M3ParserFloat32AnimationReference(e),this.falloffStart=new r.M3ParserFloat32AnimationReference(e),this.falloffEnd=new r.M3ParserFloat32AnimationReference(e),this.depthOfField=new r.M3ParserFloat32AnimationReference(e)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(4);t.default=class{constructor(e,t,n){this.version=t,this.keys=new a.default(e,n),this.flags=e.readUint32(),this.biggestKey=e.readUint32(),this.values=new a.default(e,n)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(e,t,n){this.reader=e,this.version=t,this.index=n}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(48);t.default={Model:a.default}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(50);t.default=class{constructor(){this.name="",this.interval=new Uint32Array(2),this.moveSpeed=0,this.flags=0,this.rarity=0,this.syncPoint=0,this.extent=new a.default}readMdx(e){this.name=e.read(80),e.readUint32Array(this.interval),this.moveSpeed=e.readFloat32(),this.flags=e.readUint32(),this.rarity=e.readFloat32(),this.syncPoint=e.readUint32(),this.extent.readMdx(e)}writeMdx(e){e.write(this.name),e.skip(80-this.name.length),e.writeUint32Array(this.interval),e.writeFloat32(this.moveSpeed),e.writeUint32(this.flags),e.writeFloat32(this.rarity),e.writeUint32(this.syncPoint),this.extent.writeMdx(e)}readMdl(e){this.name=e.readSafe();for(let t of e.readBlock())if("Interval"===t)e.readIntArray(this.interval);else if("NonLooping"===t)this.flags=1;else if("MoveSpeed"===t)this.moveSpeed=e.readFloat();else if("Rarity"===t)this.rarity=e.readFloat();else if("MinimumExtent"===t)e.readFloatArray(this.extent.min);else if("MaximumExtent"===t)e.readFloatArray(this.extent.max);else{if("BoundsRadius"!==t)throw new Error(`Unknown token in Sequence: "${t}"`);this.extent.boundsRadius=e.readFloat()}}writeMdl(e){e.startObjectBlock("Anim",this.name),e.writeArrayAttrib("Interval",this.interval),1===this.flags&&e.writeFlag("NonLooping"),0!==this.moveSpeed&&e.writeFloatAttrib("MoveSpeed",this.moveSpeed),0!==this.rarity&&e.writeFloatAttrib("Rarity",this.rarity),this.extent.writeMdl(e),e.endBlock()}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(202);t.default=class{constructor(){this.priorityPlane=0,this.flags=0,this.shader="",this.layers=[]}readMdx(e,t){e.readUint32(),this.priorityPlane=e.readInt32(),this.flags=e.readUint32(),t>800&&(this.shader=e.read(80)),e.skip(4);for(let n=0,r=e.readUint32();n<r;n++){let n=new a.default;n.readMdx(e,t),this.layers.push(n)}}writeMdx(e,t){e.writeUint32(this.getByteLength(t)),e.writeUint32(this.priorityPlane),e.writeUint32(this.flags),t>800&&(e.write(this.shader),e.skip(80-this.shader.length)),e.write("LAYS"),e.writeUint32(this.layers.length);for(let n of this.layers)n.writeMdx(e,t)}readMdl(e){for(let t of e.readBlock())if("ConstantColor"===t)this.flags|=1;else if("SortPrimsNearZ"===t)this.flags|=8;else if("SortPrimsFarZ"===t)this.flags|=16;else if("FullResolution"===t)this.flags|=32;else if("PriorityPlane"===t)this.priorityPlane=e.readInt();else{if("Layer"!==t)throw new Error(`Unknown token in Material: "${t}"`);{let t=new a.default;t.readMdl(e),this.layers.push(t)}}}writeMdl(e){e.startBlock("Material"),1&this.flags&&e.writeFlag("ConstantColor"),8&this.flags&&e.writeFlag("SortPrimsNearZ"),16&this.flags&&e.writeFlag("SortPrimsFarZ"),32&this.flags&&e.writeFlag("FullResolution"),0!==this.priorityPlane&&e.writeAttrib("PriorityPlane",this.priorityPlane);for(let t of this.layers)t.writeMdl(e);e.endBlock()}getByteLength(e){let t=20;e>800&&(t+=80);for(let n of this.layers)t+=n.getByteLength(e);return t}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(30),r={None:0,Transparent:1,Blend:2,Additive:3,AddAlpha:4,Modulate:5,Modulate2x:6},i={0:"None",1:"Transparent",2:"Blend",3:"Additive",4:"AddAlpha",5:"Modulate",6:"Modulate2x"};class l extends a.default{constructor(){super(...arguments),this.filterMode=0,this.flags=0,this.textureId=-1,this.textureAnimationId=-1,this.coordId=0,this.alpha=1,this.emissiveGain=0,this.fresnelColor=new Float32Array(3),this.fresnelOpacity=0,this.fresnelTeamColor=0}readMdx(e,t){const n=e.index,a=e.readUint32();this.filterMode=e.readUint32(),this.flags=e.readUint32(),this.textureId=e.readInt32(),this.textureAnimationId=e.readInt32(),this.coordId=e.readUint32(),this.alpha=e.readFloat32(),t>800&&(this.emissiveGain=e.readFloat32(),e.readFloat32Array(this.fresnelColor),this.fresnelOpacity=e.readFloat32(),this.fresnelTeamColor=e.readFloat32()),this.readAnimations(e,a-(e.index-n))}writeMdx(e,t){e.writeUint32(this.getByteLength(t)),e.writeUint32(this.filterMode),e.writeUint32(this.flags),e.writeInt32(this.textureId),e.writeInt32(this.textureAnimationId),e.writeUint32(this.coordId),e.writeFloat32(this.alpha),t>800&&(e.writeFloat32(this.emissiveGain),e.writeFloat32Array(this.fresnelColor),e.writeFloat32(this.fresnelOpacity),e.writeFloat32(this.fresnelTeamColor)),this.writeAnimations(e)}readMdl(e){for(let t of super.readAnimatedBlock(e))if("FilterMode"===t)this.filterMode=r[e.readSafe()];else if("Unshaded"===t)this.flags|=1;else if("SphereEnvMap"===t)this.flags|=2;else if("TwoSided"===t)this.flags|=16;else if("Unfogged"===t)this.flags|=32;else if("NoDepthTest"===t)this.flags|=64;else if("NoDepthSet"===t)this.flags|=256;else if("static TextureID"===t)this.textureId=e.readInt();else if("TextureID"===t)this.readAnimation(e,"KMTF");else if("TVertexAnimId"===t)this.textureAnimationId=e.readInt();else if("CoordId"===t)this.coordId=e.readInt();else if("static Alpha"===t)this.alpha=e.readFloat();else{if("Alpha"!==t)throw new Error(`Unknown token in Layer: "${t}"`);this.readAnimation(e,"KMTA")}}writeMdl(e){e.startBlock("Layer"),e.writeAttrib("FilterMode",i[this.filterMode]),1&this.flags&&e.writeFlag("Unshaded"),2&this.flags&&e.writeFlag("SphereEnvMap"),16&this.flags&&e.writeFlag("TwoSided"),32&this.flags&&e.writeFlag("Unfogged"),64&this.flags&&e.writeFlag("NoDepthTest"),256&this.flags&&e.writeFlag("NoDepthSet"),this.writeAnimation(e,"KMTF")||e.writeAttrib("static TextureID",this.textureId),-1!==this.textureAnimationId&&e.writeAttrib("TVertexAnimId",this.textureAnimationId),0!==this.coordId&&e.writeAttrib("CoordId",this.coordId),this.writeAnimation(e,"KMTA")||1===this.alpha||e.writeFloatAttrib("static Alpha",this.alpha),e.endBlock()}getByteLength(e){let t=28+super.getByteLength();return e>800&&(t+=24),t}}t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(77);t.default={KMTF:["TextureId",a.UintAnimation],KMTA:["Alpha",a.FloatAnimation],KMTE:["EmissiveGain",a.FloatAnimation],KFC3:["FresnelColor",a.Vector3Animation],KFCA:["FresnelAlpha",a.FloatAnimation],KFTC:["FresnelTeamColor",a.FloatAnimation],KTAT:["Translation",a.Vector3Animation],KTAR:["Rotation",a.Vector4Animation],KTAS:["Scaling",a.Vector3Animation],KGAO:["Alpha",a.FloatAnimation],KGAC:["Color",a.Vector3Animation],KGTR:["Translation",a.Vector3Animation],KGRT:["Rotation",a.Vector4Animation],KGSC:["Scaling",a.Vector3Animation],KLAS:["AttenuationStart",a.FloatAnimation],KLAE:["AttenuationEnd",a.FloatAnimation],KLAC:["Color",a.Vector3Animation],KLAI:["Intensity",a.FloatAnimation],KLBI:["AmbIntensity",a.FloatAnimation],KLBC:["AmbColor",a.Vector3Animation],KLAV:["Visibility",a.FloatAnimation],KATV:["Visibility",a.FloatAnimation],KPEE:["EmissionRate",a.FloatAnimation],KPEG:["Gravity",a.FloatAnimation],KPLN:["Longitude",a.FloatAnimation],KPLT:["Latitude",a.FloatAnimation],KPEL:["LifeSpan",a.FloatAnimation],KPES:["InitVelocity",a.FloatAnimation],KPEV:["Visibility",a.FloatAnimation],KP2S:["Speed",a.FloatAnimation],KP2R:["Variation",a.FloatAnimation],KP2L:["Latitude",a.FloatAnimation],KP2G:["Gravity",a.FloatAnimation],KP2E:["EmissionRate",a.FloatAnimation],KP2N:["Width",a.FloatAnimation],KP2W:["Length",a.FloatAnimation],KP2V:["Visibility",a.FloatAnimation],KRHA:["HeightAbove",a.FloatAnimation],KRHB:["HeightBelow",a.FloatAnimation],KRAL:["Alpha",a.FloatAnimation],KRCO:["Color",a.Vector3Animation],KRTX:["TextureSlot",a.UintAnimation],KRVS:["Visibility",a.FloatAnimation],KCTR:["Translation",a.Vector3Animation],KTTR:["Translation",a.Vector3Animation],KCRL:["Rotation",a.UintAnimation],KPPA:["Alpha",a.FloatAnimation],KPPC:["Color",a.Vector3Animation],KPPE:["EmissionRate",a.FloatAnimation],KPPL:["LifeSpan",a.FloatAnimation],KPPS:["Speed",a.FloatAnimation],KPPV:["Visibility",a.FloatAnimation]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(){this.replaceableId=0,this.path="",this.flags=0}readMdx(e){this.replaceableId=e.readUint32(),this.path=e.read(260),this.flags=e.readUint32()}writeMdx(e){e.writeUint32(this.replaceableId),e.write(this.path),e.skip(260-this.path.length),e.writeUint32(this.flags)}readMdl(e){for(let t of e.readBlock())if("Image"===t)this.path=e.readSafe();else if("ReplaceableId"===t)this.replaceableId=e.readInt();else if("WrapWidth"===t)this.flags|=1;else{if("WrapHeight"!==t)throw new Error(`Unknown token in Texture: "${t}"`);this.flags|=2}}writeMdl(e){e.startBlock("Bitmap"),e.writeStringAttrib("Image",this.path),0!==this.replaceableId&&e.writeAttrib("ReplaceableId",this.replaceableId),1&this.flags&&e.writeFlag("WrapWidth"),2&this.flags&&e.writeFlag("WrapHeight"),e.endBlock()}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(30);class r extends a.default{readMdx(e){let t=e.readUint32();this.readAnimations(e,t-4)}writeMdx(e){e.writeUint32(this.getByteLength()),this.writeAnimations(e)}readMdl(e){for(let t of e.readBlock())if("Translation"===t)this.readAnimation(e,"KTAT");else if("Rotation"===t)this.readAnimation(e,"KTAR");else{if("Scaling"!==t)throw new Error(`Unknown token in TextureAnimation: "${t}"`);this.readAnimation(e,"KTAS")}}writeMdl(e){e.startBlock("TVertexAnim "),this.writeAnimation(e,"KTAT"),this.writeAnimation(e,"KTAR"),this.writeAnimation(e,"KTAS"),e.endBlock()}getByteLength(){return 4+super.getByteLength()}}t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(50);t.default=class{constructor(){this.vertices=new Float32Array(0),this.normals=new Float32Array(0),this.faceTypeGroups=new Uint32Array(0),this.faceGroups=new Uint32Array(0),this.faces=new Uint16Array(0),this.vertexGroups=new Uint8Array(0),this.matrixGroups=new Uint32Array(0),this.matrixIndices=new Uint32Array(0),this.materialId=0,this.selectionGroup=0,this.selectionFlags=0,this.lod=0,this.lodName="",this.extent=new a.default,this.sequenceExtents=[],this.tangents=new Float32Array(0),this.skin=new Uint8Array(0),this.uvSets=[]}readMdx(e,t){e.readUint32(),e.skip(4),this.vertices=e.readFloat32Array(3*e.readUint32()),e.skip(4),this.normals=e.readFloat32Array(3*e.readUint32()),e.skip(4),this.faceTypeGroups=e.readUint32Array(e.readUint32()),e.skip(4),this.faceGroups=e.readUint32Array(e.readUint32()),e.skip(4),this.faces=e.readUint16Array(e.readUint32()),e.skip(4),this.vertexGroups=e.readUint8Array(e.readUint32()),e.skip(4),this.matrixGroups=e.readUint32Array(e.readUint32()),e.skip(4),this.matrixIndices=e.readUint32Array(e.readUint32()),this.materialId=e.readUint32(),this.selectionGroup=e.readUint32(),this.selectionFlags=e.readUint32(),t>800&&(this.lod=e.readUint32(),this.lodName=e.read(80)),this.extent.readMdx(e);for(let t=0,n=e.readUint32();t<n;t++){let t=new a.default;t.readMdx(e),this.sequenceExtents.push(t)}t>800&&"TANG"===e.peek(4)&&(e.skip(4),this.tangents=e.readFloat32Array(4*e.readUint32())),t>800&&"SKIN"===e.peek(4)&&(e.skip(4),this.skin=e.readUint8Array(e.readUint32())),e.skip(4);for(let t=0,n=e.readUint32();t<n;t++)e.skip(4),this.uvSets.push(e.readFloat32Array(2*e.readUint32()))}writeMdx(e,t){e.writeUint32(this.getByteLength(t)),e.write("VRTX"),e.writeUint32(this.vertices.length/3),e.writeFloat32Array(this.vertices),e.write("NRMS"),e.writeUint32(this.normals.length/3),e.writeFloat32Array(this.normals),e.write("PTYP"),e.writeUint32(this.faceTypeGroups.length),e.writeUint32Array(this.faceTypeGroups),e.write("PCNT"),e.writeUint32(this.faceGroups.length),e.writeUint32Array(this.faceGroups),e.write("PVTX"),e.writeUint32(this.faces.length),e.writeUint16Array(this.faces),e.write("GNDX"),e.writeUint32(this.vertexGroups.length),e.writeUint8Array(this.vertexGroups),e.write("MTGC"),e.writeUint32(this.matrixGroups.length),e.writeUint32Array(this.matrixGroups),e.write("MATS"),e.writeUint32(this.matrixIndices.length),e.writeUint32Array(this.matrixIndices),e.writeUint32(this.materialId),e.writeUint32(this.selectionGroup),e.writeUint32(this.selectionFlags),t>800&&(e.writeUint32(this.lod),e.write(this.lodName),e.skip(80-this.lodName.length)),this.extent.writeMdx(e),e.writeUint32(this.sequenceExtents.length);for(let t of this.sequenceExtents)t.writeMdx(e);t>800&&this.tangents.length&&(e.write("TANG"),e.writeFloat32Array(this.tangents),e.write("SKIN"),e.writeUint8Array(this.skin)),e.write("UVAS"),e.writeUint32(this.uvSets.length);for(let t of this.uvSets)e.write("UVBS"),e.writeUint32(t.length/2),e.writeFloat32Array(t)}readMdl(e){for(let t of e.readBlock())if("Vertices"===t)this.vertices=e.readVectorArray(new Float32Array(3*e.readInt()),3);else if("Normals"===t)this.normals=e.readVectorArray(new Float32Array(3*e.readInt()),3);else if("TVertices"===t)this.uvSets.push(e.readVectorArray(new Float32Array(2*e.readInt()),2));else if("VertexGroup"===t){let t=[];for(let n of e.readBlockSafe())t.push(parseInt(n));this.vertexGroups=new Uint8Array(t)}else if("Faces"===t){this.faceTypeGroups=new Uint32Array([4]),e.readInt();let t=e.readInt();e.read(),e.read(),e.read(),this.faces=new Uint16Array(t),e.readIntArray(this.faces),e.read(),e.read()}else if("Groups"===t){let t=[],n=[];e.readInt(),e.readInt();for(let a of e.readBlockSafe()){let a=0;for(let n of e.readBlockSafe())t.push(parseInt(n)),a+=1;n.push(a)}this.matrixIndices=new Uint32Array(t),this.matrixGroups=new Uint32Array(n)}else if("MinimumExtent"===t)e.readFloatArray(this.extent.min);else if("MaximumExtent"===t)e.readFloatArray(this.extent.max);else if("BoundsRadius"===t)this.extent.boundsRadius=e.readFloat();else if("Anim"===t){let n=new a.default;for(t of e.readBlockSafe())"MinimumExtent"===t?e.readFloatArray(n.min):"MaximumExtent"===t?e.readFloatArray(n.max):"BoundsRadius"===t&&(n.boundsRadius=e.readFloat());this.sequenceExtents.push(n)}else if("MaterialID"===t)this.materialId=e.readInt();else if("SelectionGroup"===t)this.selectionGroup=e.readInt();else{if("Unselectable"!==t)throw new Error(`Unknown token in Geoset: "${t}"`);this.selectionFlags=4}}writeMdl(e){e.startBlock("Geoset"),e.writeVectorArray("Vertices",this.vertices,3),e.writeVectorArray("Normals",this.normals,3);for(let t of this.uvSets)e.writeVectorArray("TVertices",t,2);e.startBlock("VertexGroup");for(let t=0,n=this.vertexGroups.length;t<n;t++)e.writeLine(`${this.vertexGroups[t]},`);e.endBlock(),e.startBlock("Faces",1,this.faces.length),e.startBlock("Triangles"),e.writeLine(`{ ${this.faces.join(", ")} },`),e.endBlock(),e.endBlock(),e.startBlock("Groups",this.matrixGroups.length,this.matrixIndices.length);let t=0;for(let n of this.matrixGroups)e.writeArrayAttrib("Matrices",this.matrixIndices.subarray(t,t+n)),t+=n;e.endBlock(),this.extent.writeMdl(e);for(let t of this.sequenceExtents)e.startBlock("Anim"),t.writeMdl(e),e.endBlock();e.writeAttrib("MaterialID",this.materialId),e.writeAttrib("SelectionGroup",this.selectionGroup),4===this.selectionFlags&&e.writeFlag("Unselectable"),e.endBlock()}getByteLength(e){let t=120+this.vertices.byteLength+this.normals.byteLength+this.faceTypeGroups.byteLength+this.faceGroups.byteLength+this.faces.byteLength+this.vertexGroups.byteLength+this.matrixGroups.byteLength+this.matrixIndices.byteLength+28*this.sequenceExtents.length;e>800&&(t+=84,this.tangents.length&&(t+=8+this.tangents.byteLength+this.skin.byteLength));for(let e of this.uvSets)t+=8+e.byteLength;return t}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(30);class r extends a.default{constructor(){super(...arguments),this.alpha=1,this.flags=0,this.color=new Float32Array([1,1,1]),this.geosetId=-1}readMdx(e){let t=e.readUint32();this.alpha=e.readFloat32(),this.flags=e.readUint32(),e.readFloat32Array(this.color),this.geosetId=e.readInt32(),this.readAnimations(e,t-28)}writeMdx(e){e.writeUint32(this.getByteLength()),e.writeFloat32(this.alpha),e.writeUint32(this.flags),e.writeFloat32Array(this.color),e.writeInt32(this.geosetId),this.writeAnimations(e)}readMdl(e){for(let t of super.readAnimatedBlock(e))if("DropShadow"===t)this.flags|=1;else if("static Alpha"===t)this.alpha=e.readFloat();else if("Alpha"===t)this.readAnimation(e,"KGAO");else if("static Color"===t)this.flags|=2,e.readColor(this.color);else if("Color"===t)this.flags|=2,this.readAnimation(e,"KGAC");else{if("GeosetId"!==t)throw new Error(`Unknown token in GeosetAnimation: "${t}"`);this.geosetId=e.readInt()}}writeMdl(e){e.startBlock("GeosetAnim"),1&this.flags&&e.writeFlag("DropShadow"),this.writeAnimation(e,"KGAO")||e.writeFloatAttrib("static Alpha",this.alpha),2&this.flags&&(this.writeAnimation(e,"KGAC")||1===this.color[0]&&1===this.color[1]&&1===this.color[2]||e.writeColor("static Color ",this.color)),e.writeAttrib("GeosetId",this.geosetId),e.endBlock()}getByteLength(){return 28+super.getByteLength()}}t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(8);class r extends a.default{constructor(){super(512),this.type=-1,this.attenuation=new Float32Array(2),this.color=new Float32Array(3),this.intensity=0,this.ambientColor=new Float32Array(3),this.ambientIntensity=0}readMdx(e){const t=e.index,n=e.readUint32();super.readMdx(e),this.type=e.readUint32(),e.readFloat32Array(this.attenuation),e.readFloat32Array(this.color),this.intensity=e.readFloat32(),e.readFloat32Array(this.ambientColor),this.ambientIntensity=e.readFloat32(),this.readAnimations(e,n-(e.index-t))}writeMdx(e){e.writeUint32(this.getByteLength()),super.writeMdx(e),e.writeUint32(this.type),e.writeFloat32Array(this.attenuation),e.writeFloat32Array(this.color),e.writeFloat32(this.intensity),e.writeFloat32Array(this.ambientColor),e.writeFloat32(this.ambientIntensity),this.writeNonGenericAnimationChunks(e)}readMdl(e){for(let t of super.readGenericBlock(e))if("Omnidirectional"===t)this.type=0;else if("Directional"===t)this.type=1;else if("Ambient"===t)this.type=2;else if("static AttenuationStart"===t)this.attenuation[0]=e.readFloat();else if("AttenuationStart"===t)this.readAnimation(e,"KLAS");else if("static AttenuationEnd"===t)this.attenuation[1]=e.readFloat();else if("AttenuationEnd"===t)this.readAnimation(e,"KLAE");else if("static Intensity"===t)this.intensity=e.readFloat();else if("Intensity"===t)this.readAnimation(e,"KLAI");else if("static Color"===t)e.readColor(this.color);else if("Color"===t)this.readAnimation(e,"KLAC");else if("static AmbIntensity"===t)this.ambientIntensity=e.readFloat();else if("AmbIntensity"===t)this.readAnimation(e,"KLBI");else if("static AmbColor"===t)e.readColor(this.ambientColor);else if("AmbColor"===t)this.readAnimation(e,"KLBC");else{if("Visibility"!==t)throw new Error(`Unknown token in Light: "${t}"`);this.readAnimation(e,"KLAV")}}writeMdl(e){e.startObjectBlock("Light",this.name),this.writeGenericHeader(e),0===this.type?e.writeFlag("Omnidirectional"):1===this.type?e.writeFlag("Directional"):2===this.type&&e.writeFlag("Ambient"),this.writeAnimation(e,"KLAS")||e.writeFloatAttrib("static AttenuationStart",this.attenuation[0]),this.writeAnimation(e,"KLAE")||e.writeFloatAttrib("static AttenuationEnd",this.attenuation[1]),this.writeAnimation(e,"KLAI")||e.writeFloatAttrib("static Intensity",this.intensity),this.writeAnimation(e,"KLAC")||e.writeColor("static Color",this.color),this.writeAnimation(e,"KLBI")||e.writeFloatAttrib("static AmbIntensity",this.ambientIntensity),this.writeAnimation(e,"KLBC")||e.writeColor("static AmbColor",this.ambientColor),this.writeAnimation(e,"KLAV"),this.writeGenericAnimations(e),e.endBlock()}getByteLength(){return 48+super.getByteLength()}}t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(8);class r extends a.default{readMdl(e){for(let t of super.readGenericBlock(e))throw new Error(`Unknown token in Helper: "${t}"`)}writeMdl(e){e.startObjectBlock("Helper",this.name),this.writeGenericHeader(e),this.writeGenericAnimations(e),e.endBlock()}}t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(8);class r extends a.default{constructor(){super(2048),this.path="",this.attachmentId=0}readMdx(e){const t=e.index,n=e.readUint32();super.readMdx(e),this.path=e.read(260),this.attachmentId=e.readInt32(),this.readAnimations(e,n-(e.index-t))}writeMdx(e){e.writeUint32(this.getByteLength()),super.writeMdx(e),e.write(this.path),e.skip(260-this.path.length),e.writeInt32(this.attachmentId),this.writeNonGenericAnimationChunks(e)}readMdl(e){for(let t of super.readGenericBlock(e))if("AttachmentID"===t)this.attachmentId=e.readInt();else if("Path"===t)this.path=e.readSafe();else{if("Visibility"!==t)throw new Error(`Unknown token in Attachment ${this.name}: "${t}"`);this.readAnimation(e,"KATV")}}writeMdl(e){e.startObjectBlock("Attachment",this.name),this.writeGenericHeader(e),e.writeAttrib("AttachmentID",this.attachmentId),this.path.length&&e.writeStringAttrib("Path",this.path),this.writeAnimation(e,"KATV"),this.writeGenericAnimations(e),e.endBlock()}getByteLength(){return 268+super.getByteLength()}}t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(8);class r extends a.default{constructor(){super(4096),this.emissionRate=0,this.gravity=0,this.longitude=0,this.latitude=0,this.path="",this.lifeSpan=0,this.speed=0}readMdx(e){const t=e.index,n=e.readUint32();super.readMdx(e),this.emissionRate=e.readFloat32(),this.gravity=e.readFloat32(),this.longitude=e.readFloat32(),this.latitude=e.readFloat32(),this.path=e.read(260),this.lifeSpan=e.readFloat32(),this.speed=e.readFloat32(),this.readAnimations(e,n-(e.index-t))}writeMdx(e){e.writeUint32(this.getByteLength()),super.writeMdx(e),e.writeFloat32(this.emissionRate),e.writeFloat32(this.gravity),e.writeFloat32(this.longitude),e.writeFloat32(this.latitude),e.write(this.path),e.skip(260-this.path.length),e.writeFloat32(this.lifeSpan),e.writeFloat32(this.speed),this.writeNonGenericAnimationChunks(e)}readMdl(e){for(let t of super.readGenericBlock(e))if("EmitterUsesMDL"===t)this.flags|=32768;else if("EmitterUsesTGA"===t)this.flags|=65536;else if("static EmissionRate"===t)this.emissionRate=e.readFloat();else if("EmissionRate"===t)this.readAnimation(e,"KPEE");else if("static Gravity"===t)this.gravity=e.readFloat();else if("Gravity"===t)this.readAnimation(e,"KPEG");else if("static Longitude"===t)this.longitude=e.readFloat();else if("Longitude"===t)this.readAnimation(e,"KPLN");else if("static Latitude"===t)this.latitude=e.readFloat();else if("Latitude"===t)this.readAnimation(e,"KPLT");else if("Visibility"===t)this.readAnimation(e,"KPEV");else{if("Particle"!==t)throw new Error(`Unknown token in ParticleEmitter: "${t}"`);for(t of this.readAnimatedBlock(e))"static LifeSpan"===t?this.lifeSpan=e.readFloat():"LifeSpan"===t?this.readAnimation(e,"KPEL"):"static InitVelocity"===t?this.speed=e.readFloat():"InitVelocity"===t?this.readAnimation(e,"KPES"):"Path"===t&&(this.path=e.readSafe())}}writeMdl(e){e.startObjectBlock("ParticleEmitter",this.name),this.writeGenericHeader(e),32768&this.flags&&e.writeFlag("EmitterUsesMDL"),65536&this.flags&&e.writeFlag("EmitterUsesTGA"),this.writeAnimation(e,"KPEE")||e.writeFloatAttrib("static EmissionRate",this.emissionRate),this.writeAnimation(e,"KPEG")||e.writeFloatAttrib("static Gravity",this.gravity),this.writeAnimation(e,"KPLN")||e.writeFloatAttrib("static Longitude",this.longitude),this.writeAnimation(e,"KPLT")||e.writeFloatAttrib("static Latitude",this.latitude),this.writeAnimation(e,"KPEV"),e.startBlock("Particle"),this.writeAnimation(e,"KPEL")||e.writeFloatAttrib("static LifeSpan",this.lifeSpan),this.writeAnimation(e,"KPES")||e.writeFloatAttrib("static InitVelocity",this.speed),(32768&this.flags||65536&this.flags)&&e.writeAttrib("Path",this.path),e.endBlock(),this.writeGenericAnimations(e),e.endBlock()}getByteLength(){return 288+super.getByteLength()}}t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(8);class r extends a.default{constructor(){super(...arguments),this.speed=0,this.variation=0,this.latitude=0,this.gravity=0,this.lifeSpan=0,this.emissionRate=0,this.width=0,this.length=0,this.filterMode=0,this.rows=0,this.columns=0,this.headOrTail=0,this.tailLength=0,this.timeMiddle=0,this.segmentColors=[new Float32Array(3),new Float32Array(3),new Float32Array(3)],this.segmentAlphas=new Uint8Array(3),this.segmentScaling=new Float32Array(3),this.headIntervals=[new Uint32Array(3),new Uint32Array(3)],this.tailIntervals=[new Uint32Array(3),new Uint32Array(3)],this.textureId=-1,this.squirt=0,this.priorityPlane=0,this.replaceableId=0}readMdx(e){const t=e.index,n=e.readUint32();super.readMdx(e),this.speed=e.readFloat32(),this.variation=e.readFloat32(),this.latitude=e.readFloat32(),this.gravity=e.readFloat32(),this.lifeSpan=e.readFloat32(),this.emissionRate=e.readFloat32(),this.width=e.readFloat32(),this.length=e.readFloat32(),this.filterMode=e.readUint32(),this.rows=e.readUint32(),this.columns=e.readUint32(),this.headOrTail=e.readUint32(),this.tailLength=e.readFloat32(),this.timeMiddle=e.readFloat32(),e.readFloat32Array(this.segmentColors[0]),e.readFloat32Array(this.segmentColors[1]),e.readFloat32Array(this.segmentColors[2]),e.readUint8Array(this.segmentAlphas),e.readFloat32Array(this.segmentScaling),e.readUint32Array(this.headIntervals[0]),e.readUint32Array(this.headIntervals[1]),e.readUint32Array(this.tailIntervals[0]),e.readUint32Array(this.tailIntervals[1]),this.textureId=e.readInt32(),this.squirt=e.readUint32(),this.priorityPlane=e.readInt32(),this.replaceableId=e.readUint32(),this.readAnimations(e,n-(e.index-t))}writeMdx(e){e.writeUint32(this.getByteLength()),super.writeMdx(e),e.writeFloat32(this.speed),e.writeFloat32(this.variation),e.writeFloat32(this.latitude),e.writeFloat32(this.gravity),e.writeFloat32(this.lifeSpan),e.writeFloat32(this.emissionRate),e.writeFloat32(this.length),e.writeFloat32(this.width),e.writeUint32(this.filterMode),e.writeUint32(this.rows),e.writeUint32(this.columns),e.writeUint32(this.headOrTail),e.writeFloat32(this.tailLength),e.writeFloat32(this.timeMiddle),e.writeFloat32Array(this.segmentColors[0]),e.writeFloat32Array(this.segmentColors[1]),e.writeFloat32Array(this.segmentColors[2]),e.writeUint8Array(this.segmentAlphas),e.writeFloat32Array(this.segmentScaling),e.writeUint32Array(this.headIntervals[0]),e.writeUint32Array(this.headIntervals[1]),e.writeUint32Array(this.tailIntervals[0]),e.writeUint32Array(this.tailIntervals[1]),e.writeInt32(this.textureId),e.writeUint32(this.squirt),e.writeInt32(this.priorityPlane),e.writeUint32(this.replaceableId),this.writeNonGenericAnimationChunks(e)}readMdl(e){for(const t of super.readGenericBlock(e))if("SortPrimsFarZ"===t)this.flags|=65536;else if("Unshaded"===t)this.flags|=32768;else if("LineEmitter"===t)this.flags|=131072;else if("Unfogged"===t)this.flags|=262144;else if("ModelSpace"===t)this.flags|=524288;else if("XYQuad"===t)this.flags|=1048576;else if("static Speed"===t)this.speed=e.readFloat();else if("Speed"===t)this.readAnimation(e,"KP2S");else if("static Variation"===t)this.variation=e.readFloat();else if("Variation"===t)this.readAnimation(e,"KP2R");else if("static Latitude"===t)this.latitude=e.readFloat();else if("Latitude"===t)this.readAnimation(e,"KP2L");else if("static Gravity"===t)this.gravity=e.readFloat();else if("Gravity"===t)this.readAnimation(e,"KP2G");else if("Visibility"===t)this.readAnimation(e,"KP2V");else if("Squirt"===t)this.squirt=1;else if("LifeSpan"===t)this.lifeSpan=e.readFloat();else if("static EmissionRate"===t)this.emissionRate=e.readFloat();else if("EmissionRate"===t)this.readAnimation(e,"KP2E");else if("static Width"===t)this.width=e.readFloat();else if("Width"===t)this.readAnimation(e,"KP2W");else if("static Length"===t)this.length=e.readFloat();else if("Length"===t)this.readAnimation(e,"KP2N");else if("Blend"===t)this.filterMode=0;else if("Additive"===t)this.filterMode=1;else if("Modulate"===t)this.filterMode=2;else if("Modulate2x"===t)this.filterMode=3;else if("AlphaKey"===t)this.filterMode=4;else if("Rows"===t)this.rows=e.readInt();else if("Columns"===t)this.columns=e.readInt();else if("Head"===t)this.headOrTail=0;else if("Tail"===t)this.headOrTail=1;else if("Both"===t)this.headOrTail=2;else if("TailLength"===t)this.tailLength=e.readFloat();else if("Time"===t)this.timeMiddle=e.readFloat();else if("SegmentColor"===t){e.read();for(let t=0;t<3;t++)e.read(),e.readColor(this.segmentColors[t]);e.read()}else if("Alpha"===t)e.readIntArray(this.segmentAlphas);else if("ParticleScaling"===t)e.readFloatArray(this.segmentScaling);else if("LifeSpanUVAnim"===t)e.readIntArray(this.headIntervals[0]);else if("DecayUVAnim"===t)e.readIntArray(this.headIntervals[1]);else if("TailUVAnim"===t)e.readIntArray(this.tailIntervals[0]);else if("TailDecayUVAnim"===t)e.readIntArray(this.tailIntervals[1]);else if("TextureID"===t)this.textureId=e.readInt();else if("ReplaceableId"===t)this.replaceableId=e.readInt();else{if("PriorityPlane"!==t)throw new Error(`Unknown token in ParticleEmitter2: "${t}"`);this.priorityPlane=e.readInt()}}writeMdl(e){e.startObjectBlock("ParticleEmitter2",this.name),this.writeGenericHeader(e),65536&this.flags&&e.writeFlag("SortPrimsFarZ"),32768&this.flags&&e.writeFlag("Unshaded"),131072&this.flags&&e.writeFlag("LineEmitter"),262144&this.flags&&e.writeFlag("Unfogged"),524288&this.flags&&e.writeFlag("ModelSpace"),1048576&this.flags&&e.writeFlag("XYQuad"),this.writeAnimation(e,"KP2S")||e.writeFloatAttrib("static Speed",this.speed),this.writeAnimation(e,"KP2R")||e.writeFloatAttrib("static Variation",this.variation),this.writeAnimation(e,"KP2L")||e.writeFloatAttrib("static Latitude",this.latitude),this.writeAnimation(e,"KP2G")||e.writeFloatAttrib("static Gravity",this.gravity),this.writeAnimation(e,"KP2V"),this.squirt&&e.writeFlag("Squirt"),e.writeFloatAttrib("LifeSpan",this.lifeSpan),this.writeAnimation(e,"KP2E")||e.writeFloatAttrib("static EmissionRate",this.emissionRate),this.writeAnimation(e,"KP2W")||e.writeFloatAttrib("static Width",this.width),this.writeAnimation(e,"KP2N")||e.writeFloatAttrib("static Length",this.length),0===this.filterMode?e.writeFlag("Blend"):1===this.filterMode?e.writeFlag("Additive"):2===this.filterMode?e.writeFlag("Modulate"):3===this.filterMode?e.writeFlag("Modulate2x"):4===this.filterMode&&e.writeFlag("AlphaKey"),e.writeAttrib("Rows",this.rows),e.writeAttrib("Columns",this.columns),0===this.headOrTail?e.writeFlag("Head"):1===this.headOrTail?e.writeFlag("Tail"):2===this.headOrTail&&e.writeFlag("Both"),e.writeFloatAttrib("TailLength",this.tailLength),e.writeFloatAttrib("Time",this.timeMiddle),e.startBlock("SegmentColor"),e.writeColor("Color",this.segmentColors[0]),e.writeColor("Color",this.segmentColors[1]),e.writeColor("Color",this.segmentColors[2]),e.endBlockComma(),e.writeArrayAttrib("Alpha",this.segmentAlphas),e.writeFloatArrayAttrib("ParticleScaling",this.segmentScaling),e.writeArrayAttrib("LifeSpanUVAnim",this.headIntervals[0]),e.writeArrayAttrib("DecayUVAnim",this.headIntervals[1]),e.writeArrayAttrib("TailUVAnim",this.tailIntervals[0]),e.writeArrayAttrib("TailDecayUVAnim",this.tailIntervals[1]),e.writeAttrib("TextureID",this.textureId),0!==this.replaceableId&&e.writeAttrib("ReplaceableId",this.replaceableId),0!==this.priorityPlane&&e.writeAttrib("PriorityPlane",this.priorityPlane),this.writeGenericAnimations(e),e.endBlock()}getByteLength(){return 175+super.getByteLength()}}t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(8);class r extends a.default{constructor(){super(16384),this.heightAbove=0,this.heightBelow=0,this.alpha=0,this.color=new Float32Array(3),this.lifeSpan=0,this.textureSlot=0,this.emissionRate=0,this.rows=0,this.columns=0,this.materialId=0,this.gravity=0}readMdx(e){const t=e.index,n=e.readUint32();super.readMdx(e),this.heightAbove=e.readFloat32(),this.heightBelow=e.readFloat32(),this.alpha=e.readFloat32(),e.readFloat32Array(this.color),this.lifeSpan=e.readFloat32(),this.textureSlot=e.readUint32(),this.emissionRate=e.readUint32(),this.rows=e.readUint32(),this.columns=e.readUint32(),this.materialId=e.readInt32(),this.gravity=e.readFloat32(),this.readAnimations(e,n-(e.index-t))}writeMdx(e){e.writeUint32(this.getByteLength()),super.writeMdx(e),e.writeFloat32(this.heightAbove),e.writeFloat32(this.heightBelow),e.writeFloat32(this.alpha),e.writeFloat32Array(this.color),e.writeFloat32(this.lifeSpan),e.writeUint32(this.textureSlot),e.writeUint32(this.emissionRate),e.writeUint32(this.rows),e.writeUint32(this.columns),e.writeInt32(this.materialId),e.writeFloat32(this.gravity),this.writeNonGenericAnimationChunks(e)}readMdl(e){for(let t of super.readGenericBlock(e))if("static HeightAbove"===t)this.heightAbove=e.readFloat();else if("HeightAbove"===t)this.readAnimation(e,"KRHA");else if("static HeightBelow"===t)this.heightBelow=e.readFloat();else if("HeightBelow"===t)this.readAnimation(e,"KRHB");else if("static Alpha"===t)this.alpha=e.readFloat();else if("Alpha"===t)this.readAnimation(e,"KRAL");else if("static Color"===t)e.readColor(this.color);else if("Color"===t)this.readAnimation(e,"KRCO");else if("static TextureSlot"===t)this.textureSlot=e.readInt();else if("TextureSlot"===t)this.readAnimation(e,"KRTX");else if("Visibility"===t)this.readAnimation(e,"KRVS");else if("EmissionRate"===t)this.emissionRate=e.readInt();else if("LifeSpan"===t)this.lifeSpan=e.readFloat();else if("Gravity"===t)this.gravity=e.readFloat();else if("Rows"===t)this.rows=e.readInt();else if("Columns"===t)this.columns=e.readInt();else{if("MaterialID"!==t)throw new Error(`Unknown token in RibbonEmitter: "${t}"`);this.materialId=e.readInt()}}writeMdl(e){e.startObjectBlock("RibbonEmitter",this.name),this.writeGenericHeader(e),this.writeAnimation(e,"KRHA")||e.writeFloatAttrib("static HeightAbove",this.heightAbove),this.writeAnimation(e,"KRHB")||e.writeFloatAttrib("static HeightBelow",this.heightBelow),this.writeAnimation(e,"KRAL")||e.writeFloatAttrib("static Alpha",this.alpha),this.writeAnimation(e,"KRCO")||e.writeColor("static Color",this.color),this.writeAnimation(e,"KRTX")||e.writeAttrib("static TextureSlot",this.textureSlot),this.writeAnimation(e,"KRVS"),e.writeAttrib("EmissionRate",this.emissionRate),e.writeFloatAttrib("LifeSpan",this.lifeSpan),0!==this.gravity&&e.writeFloatAttrib("Gravity",this.gravity),e.writeAttrib("Rows",this.rows),e.writeAttrib("Columns",this.columns),e.writeAttrib("MaterialID",this.materialId),this.writeGenericAnimations(e),e.endBlock()}getByteLength(){return 56+super.getByteLength()}}t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(30);class r extends a.default{constructor(){super(...arguments),this.name="",this.position=new Float32Array(3),this.fieldOfView=0,this.farClippingPlane=0,this.nearClippingPlane=0,this.targetPosition=new Float32Array(3)}readMdx(e){let t=e.readUint32();this.name=e.read(80),e.readFloat32Array(this.position),this.fieldOfView=e.readFloat32(),this.farClippingPlane=e.readFloat32(),this.nearClippingPlane=e.readFloat32(),e.readFloat32Array(this.targetPosition),this.readAnimations(e,t-120)}writeMdx(e){e.writeUint32(this.getByteLength()),e.write(this.name),e.skip(80-this.name.length),e.writeFloat32Array(this.position),e.writeFloat32(this.fieldOfView),e.writeFloat32(this.farClippingPlane),e.writeFloat32(this.nearClippingPlane),e.writeFloat32Array(this.targetPosition),this.writeAnimations(e)}readMdl(e){this.name=e.readSafe();for(let t of e.readBlock())if("Position"===t)e.readFloatArray(this.position);else if("Translation"===t)this.readAnimation(e,"KCTR");else if("Rotation"===t)this.readAnimation(e,"KCRL");else if("FieldOfView"===t)this.fieldOfView=e.readFloat();else if("FarClip"===t)this.farClippingPlane=e.readFloat();else if("NearClip"===t)this.nearClippingPlane=e.readFloat();else{if("Target"!==t)throw new Error(`Unknown token in Camera ${this.name}: "${t}"`);for(t of e.readBlock())if("Position"===t)e.readFloatArray(this.targetPosition);else{if("Translation"!==t)throw new Error(`Unknown token in Camera ${this.name}'s Target: "${t}"`);this.readAnimation(e,"KTTR")}}}writeMdl(e){e.startObjectBlock("Camera",this.name),e.writeFloatArrayAttrib("Position",this.position),this.writeAnimation(e,"KCTR"),this.writeAnimation(e,"KCRL"),e.writeFloatAttrib("FieldOfView",this.fieldOfView),e.writeFloatAttrib("FarClip",this.farClippingPlane),e.writeFloatAttrib("NearClip",this.nearClippingPlane),e.startBlock("Target"),e.writeFloatArrayAttrib("Position",this.targetPosition),this.writeAnimation(e,"KTTR"),e.endBlock(),e.endBlock()}getByteLength(){return 120+super.getByteLength()}}t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(8);class r extends a.default{constructor(){super(1024),this.globalSequenceId=-1,this.tracks=new Uint32Array(0)}readMdx(e){super.readMdx(e),e.skip(4);let t=e.readUint32();this.globalSequenceId=e.readInt32(),this.tracks=e.readUint32Array(t)}writeMdx(e){super.writeMdx(e),e.write("KEVT"),e.writeUint32(this.tracks.length),e.writeInt32(this.globalSequenceId),e.writeUint32Array(this.tracks)}readMdl(e){for(let t of super.readGenericBlock(e)){if("EventTrack"!==t)throw new Error(`Unknown token in EventObject: "${t}"`);this.tracks=new Uint32Array(e.readInt()),e.readIntArray(this.tracks)}}writeMdl(e){e.startObjectBlock("EventObject",this.name),this.writeGenericHeader(e),e.startBlock("EventTrack",this.tracks.length);for(let t of this.tracks)e.writeFlag(`${t}`);e.endBlock(),this.writeGenericAnimations(e),e.endBlock()}getByteLength(){return 12+this.tracks.byteLength+super.getByteLength()}}t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(8);class r extends a.default{constructor(){super(8192),this.type=-1,this.vertices=[new Float32Array(3),new Float32Array(3)],this.boundsRadius=0}readMdx(e){super.readMdx(e),this.type=e.readUint32(),e.readFloat32Array(this.vertices[0]),2!==this.type&&e.readFloat32Array(this.vertices[1]),2!==this.type&&3!==this.type||(this.boundsRadius=e.readFloat32())}writeMdx(e){super.writeMdx(e),e.writeUint32(this.type),e.writeFloat32Array(this.vertices[0]),2!==this.type&&e.writeFloat32Array(this.vertices[1]),2!==this.type&&3!==this.type||e.writeFloat32(this.boundsRadius)}readMdl(e){for(let t of super.readGenericBlock(e))if("Plane"===t)this.type=0;else if("Box"===t)this.type=1;else if("Sphere"===t)this.type=2;else if("Cylinder"===t)this.type=3;else if("Vertices"===t){let t=e.readInt();e.read(),e.readFloatArray(this.vertices[0]),2===t&&e.readFloatArray(this.vertices[1]),e.read()}else{if("BoundsRadius"!==t)throw new Error(`Unknown token in CollisionShape: "${t}"`);this.boundsRadius=e.readFloat()}}writeMdl(e){e.startObjectBlock("CollisionShape",this.name),this.writeGenericHeader(e);let t="",n=2,a=!1;0===this.type?t="Plane":1===this.type?t="Box":2===this.type?(t="Sphere",n=1,a=!0):3===this.type&&(t="Cylinder",a=!0),e.writeFlag(t),e.startBlock("Vertices",n),e.writeFloatArray(this.vertices[0]),2===n&&e.writeFloatArray(this.vertices[1]),e.endBlock(),a&&e.writeFloatAttrib("BoundsRadius",this.boundsRadius),this.writeGenericAnimations(e),e.endBlock()}getByteLength(){let e=16+super.getByteLength();return 2!==this.type&&(e+=12),2!==this.type&&3!==this.type||(e+=4),e}}t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(8);class r extends a.default{constructor(){super(...arguments),this.lifeSpan=0,this.emissionRate=0,this.speed=0,this.color=new Float32Array(4),this.replaceableId=0,this.path="",this.options=""}readMdx(e){const t=e.index,n=e.readUint32();super.readMdx(e),this.lifeSpan=e.readFloat32(),this.emissionRate=e.readFloat32(),this.speed=e.readFloat32(),e.readFloat32Array(this.color),this.replaceableId=e.readUint32(),this.path=e.read(260),this.options=e.read(260),this.readAnimations(e,n-(e.index-t))}writeMdx(e){e.writeUint32(this.getByteLength()),super.writeMdx(e),e.writeFloat32(this.lifeSpan),e.writeFloat32(this.emissionRate),e.writeFloat32(this.speed),e.writeFloat32Array(this.color),e.writeUint32(this.replaceableId),e.write(this.path),e.skip(260-this.path.length),e.write(this.options),e.skip(260-this.options.length),this.writeNonGenericAnimationChunks(e)}getByteLength(){return 556+super.getByteLength()}}t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(e,t,n){this.tag=n,this.chunk=e.readUint8Array(new Uint8Array(t))}writeMdx(e){e.write(this.tag),e.writeUint32(this.chunk.byteLength),e.writeUint8Array(this.chunk)}getByteLength(){return 8+this.chunk.byteLength}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(79);t.default={Archive:a.default}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(21),r=new Uint8Array(4),i=new Uint32Array(r.buffer);t.default=class{constructor(){this.cryptTable=new Uint32Array(1280);let e=1048577,t=0,n=0;for(let a=0;a<256;a++)for(let r=a,i=0;i<5;i+=1,r+=256)e=(125*e+3)%2796203,t=(65535&e)<<16,e=(125*e+3)%2796203,n=65535&e,this.cryptTable[r]=t|n}hash(e,t){let n=this.cryptTable,a=2146271213,r=4008636142;e=e.toUpperCase();for(let i=0;i<e.length;i++){let l=e.charCodeAt(i);a=n[(t<<8)+l]^a+r,r=l+a+r+(r<<5)+3}return a>>>0}decryptBlock(e,t){let n,a=this.cryptTable,l=4008636142;n=e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength);for(let s=0,o=e.byteLength>>>2;s<o;s++)l+=a[1024+(255&t)],r[0]=n[4*s],r[1]=n[4*s+1],r[2]=n[4*s+2],r[3]=n[4*s+3],i[0]^=t+l,t=286331153+(~t<<21)|t>>>11,l=i[0]+l+(l<<5)+3,n[4*s]=r[0],n[4*s+1]=r[1],n[4*s+2]=r[2],n[4*s+3]=r[3];return e}encryptBlock(e,t){let n,a=this.cryptTable,l=4008636142;n=e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength);for(let s=0,o=e.byteLength>>>2;s<o;s++){l+=a[1024+(255&t)],r[0]=n[4*s],r[1]=n[4*s+1],r[2]=n[4*s+2],r[3]=n[4*s+3];let e=i[0];i[0]^=t+l,t=286331153+(~t<<21)|t>>>11,l=e+l+(l<<5)+3,n[4*s]=r[0],n[4*s+1]=r[1],n[4*s+2]=r[2],n[4*s+3]=r[3]}return e}computeFileKey(e,t){let n=e.lastIndexOf("\\"),r=e.substring(n+1),i=this.hash(r,a.HASH_FILE_KEY);return t.flags&a.FILE_OFFSET_ADJUSTED_KEY&&(i=i+t.offset^t.normalSize),i}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(222),r=n(21);t.default=class{constructor(e){this.c=e,this.entries=[],this.addEmpties(4)}clear(){this.entries.length=0}addEmpties(e){for(let t=0;t<e;t++)this.entries.push(new a.default)}getInsertionIndex(e){let t=this.entries,n=this.c.hash(e,r.HASH_TABLE_INDEX)&t.length-1;for(let e=0,a=t.length;e<a;e++){let r=(e+n)%a;if(65535===t[r].platform)return r}return-1}add(e,t){let n=this.getInsertionIndex(e);if(-1!==n){let a=this.entries[n];return a.nameA=this.c.hash(e,r.HASH_NAME_A),a.nameB=this.c.hash(e,r.HASH_NAME_B),a.locale=0,a.platform=0,a.blockIndex=t,a}}load(e){let t=e.byteLength/16,n=new Uint32Array(this.c.decryptBlock(e,r.HASH_TABLE_KEY).buffer),a=0;this.clear(),this.addEmpties(t);for(let e of this.entries)e.load(n.subarray(a,a+4)),a+=4}save(e){let t=new Uint32Array(4*this.entries.length),n=0;for(let e of this.entries)e.save(t.subarray(n,n+4)),n+=4;let a=new Uint8Array(t.buffer);this.c.encryptBlock(a,r.HASH_TABLE_KEY),e.set(a)}get(e){let t=this.c,n=this.entries,a=t.hash(e,r.HASH_TABLE_INDEX)&n.length-1,i=t.hash(e,r.HASH_NAME_A),l=t.hash(e,r.HASH_NAME_B);for(let e=0,t=n.length;e<t;e++){let r=n[(e+a)%t];if(i===r.nameA&&l===r.nameB)return r;if(4294967295===r.blockIndex)return null}return null}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(21);t.default=class{constructor(){this.nameA=4294967295,this.nameB=4294967295,this.locale=65535,this.platform=65535,this.blockIndex=a.HASH_ENTRY_EMPTY}load(e){let t=e[2];this.nameA=e[0],this.nameB=e[1],this.locale=65535&t,this.platform=t>>>16,this.blockIndex=e[3]}copy(e){this.nameA=e.nameA,this.nameB=e.nameB,this.locale=e.locale,this.platform=e.platform,this.blockIndex=e.blockIndex}save(e){e[0]=this.nameA,e[1]=this.nameB,e[2]=this.locale<<16|this.platform,e[3]=this.blockIndex}delete(){this.nameA=4294967295,this.nameB=4294967295,this.locale=65535,this.platform=65535,this.blockIndex=a.HASH_ENTRY_DELETED}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(224),r=n(21);t.default=class{constructor(e){this.c=e,this.entries=[]}add(e){let t=new a.default;return t.normalSize=e.byteLength,this.entries.push(t),t}clear(){this.entries.length=0}addEmpties(e){for(let t=0;t<e;t++)this.entries.push(new a.default)}load(e){let t=e.byteLength/16,n=new Uint32Array(this.c.decryptBlock(e,r.BLOCK_TABLE_KEY).buffer),a=0;this.clear(),this.addEmpties(t);for(let e of this.entries)e.load(n.subarray(a,a+4)),a+=4}save(e){let t=new Uint32Array(4*this.entries.length),n=0;for(let e of this.entries)e.save(t.subarray(n,n+4)),n+=4;let a=new Uint8Array(t.buffer);this.c.encryptBlock(a,r.BLOCK_TABLE_KEY),e.set(a)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(){this.offset=0,this.compressedSize=0,this.normalSize=0,this.flags=0}load(e){this.offset=e[0],this.compressedSize=e[1],this.normalSize=e[2],this.flags=e[3]}save(e){e[0]=this.offset,e[1]=this.compressedSize,e[2]=this.normalSize,e[3]=this.flags}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(226),r=n(1),i=n(80),l=n(21);t.default=class{constructor(e,t,n,a){let r=e.headerOffset;this.archive=e,this.c=e.c,this.name=`File${`${t.blockIndex}`.padStart(8,"0")}`,this.nameResolved=!1,this.hash=t,this.block=n,this.rawBuffer=a.slice(r+n.offset,r+n.offset+n.compressedSize),this.buffer=null}arrayBuffer(){return null===this.buffer&&this.decode(),this.buffer}text(){let e=this.arrayBuffer();if(e){return new r.default(e).read(e.byteLength)}return null}save(e){this.rawBuffer&&e.set(new Uint8Array(this.rawBuffer))}set(e){if(this.archive.readonly)return!1;let t=this.hash,n=this.block;return t.locale=0,t.platform=0,n.compressedSize=0,n.normalSize=e.byteLength,n.flags=0,this.buffer=e,this.rawBuffer=null,!0}delete(){if(this.archive.readonly)return!1;let e=this.archive,t=this.hash,n=t.blockIndex;t.delete();for(let t of e.hashTable.entries)t.blockIndex<l.HASH_ENTRY_DELETED&&t.blockIndex>n&&(t.blockIndex-=1);return e.blockTable.entries.splice(n,1),e.files.splice(n,1),!0}rename(e){if(this.archive.readonly)return!1;let t=this.hash,n=t.locale,a=t.platform,r=t.blockIndex;t.delete();let i=this.archive.hashTable.add(e,r);return i.locale=n,i.platform=a,this.name=e,this.nameResolved=!0,this.hash=i,!0}decode(){if(!this.rawBuffer)return;let e=this.archive,t=this.block,n=e.c,a=n.computeFileKey(this.name,t),r=new Uint8Array(this.rawBuffer),i=t.flags;if(i===l.FILE_EXISTS)this.buffer=r.slice(0,t.normalSize).buffer;else if(i&l.FILE_SINGLE_UNIT){let e;if(e=i&l.FILE_ENCRYPTED?n.decryptBlock(r.slice(0,t.compressedSize),a):r.subarray(0,t.compressedSize),e=i&l.FILE_COMPRESSED?this.decompressSector(e,t.normalSize):e.slice(),!e)return!1;this.buffer=e.buffer}else{let s=Math.ceil(t.normalSize/e.sectorSize),o=new Uint8Array(t.normalSize),u=new Uint32Array(r.buffer,0,s+1);i&l.FILE_ENCRYPTED&&(u=n.decryptBlock(u.slice(),a-1));let c=u[0],d=u[1],h=0;for(let f=0;f<s;f++){let _;if(_=i&l.FILE_ENCRYPTED?n.decryptBlock(r.slice(c,d),a+f):r.subarray(c,d),i&l.FILE_COMPRESSED){let n=e.sectorSize;t.normalSize-h<n&&(n=t.normalSize-h),_=this.decompressSector(_,n)}if(!_)return!1;o.set(_,h),h+=_.byteLength,f<s&&(c=d,d=u[f+2])}this.buffer=o.buffer}return e.readonly&&(this.rawBuffer=null),!0}decompressSector(e,t){if(e.byteLength===t)return e;{let t=e[0];if(t&l.COMPRESSION_BZIP2)return console.warn(`File ${this.name}, compression type 'bzip2' not supported`),null;if(t&l.COMPRESSION_IMPLODE)return console.warn(`File ${this.name}, compression type 'implode' not supported`),null;if(t&l.COMPRESSION_DEFLATE)try{e=a.inflate(e.subarray(1))}catch(e){return console.warn(`File ${this.name}, failed to decompress with 'zlib': ${e}`),null}return t&l.COMPRESSION_HUFFMAN?(console.warn(`File ${this.name}, compression type 'huffman' not supported`),null):t&l.COMPRESSION_ADPCM_STEREO?(console.warn(`File ${this.name}, compression type 'adpcm stereo' not supported`),null):t&l.COMPRESSION_ADPCM_MONO?(console.warn(`File ${this.name}, compression type 'adpcm mono' not supported`),null):e}}encode(){if(null!==this.buffer&&null===this.rawBuffer){let e=new Uint8Array(this.buffer);if(i.isArchive(e))this.rawBuffer=this.buffer,this.block.compressedSize=this.buffer.byteLength,this.block.flags=l.FILE_EXISTS;else{let t=this.archive.sectorSize,n=Math.ceil(e.byteLength/t),r=new Uint32Array(n+1),i=r.byteLength,s=[];r[0]=r.byteLength;for(let l=0;l<n;l++){let n=l*t,o=e.subarray(n,n+t),u=a.deflate(o),c=u.byteLength+1;c>t&&(u=o),i+=c,r[l+1]=i,s[l]=u}let o=r[r.length-1],u=new Uint8Array(o);u.set(new Uint8Array(r.buffer)),i=r.byteLength;for(let e of s)e.byteLength<t&&(u[i]=2,i+=1),u.set(e,i),i+=e.byteLength;u.byteLength<e.byteLength?(this.rawBuffer=u.buffer,this.block.compressedSize=u.byteLength,this.block.flags=(l.FILE_EXISTS|l.FILE_COMPRESSED)>>>0):(this.rawBuffer=this.buffer,this.block.compressedSize=this.buffer.byteLength,this.block.flags=l.FILE_EXISTS)}}}reEncrypt(e){if(!this.rawBuffer)return!1;let t=this.archive,n=this.block,a=t.c,r=new Uint8Array(this.rawBuffer),i=n.flags,s=a.computeFileKey(this.name,n);n.offset=e;let o=a.computeFileKey(this.name,n);if(i&l.FILE_SINGLE_UNIT)a.decryptBlock(r,s),a.encryptBlock(r,o);else{let e=Math.ceil(n.normalSize/t.sectorSize),i=new Uint32Array(r.buffer,0,e+1);a.decryptBlock(i,s-1);let l=i[0],u=i[1];for(let t=0;t<e;t++){let n=r.subarray(l,u);a.decryptBlock(n,s+t),a.encryptBlock(n,o+t),t<e&&(l=u,u=i[t+2])}a.encryptBlock(i,o-1)}return!0}offsetChanged(e){let t=this.block;return t.offset!==e&&t.flags&l.FILE_OFFSET_ADJUSTED_KEY?!!this.nameResolved&&this.reEncrypt(e):(t.offset=e,!0)}}},function(e,t,n){"use strict";var a={};(0,n(16).assign)(a,n(227),n(230),n(85)),e.exports=a},function(e,t,n){"use strict";var a=n(228),r=n(16),i=n(83),l=n(51),s=n(84),o=Object.prototype.toString,u=0,c=-1,d=0,h=8;function f(e){if(!(this instanceof f))return new f(e);this.options=r.assign({level:c,method:h,chunkSize:16384,windowBits:15,memLevel:8,strategy:d,to:""},e||{});var t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new s,this.strm.avail_out=0;var n=a.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(n!==u)throw new Error(l[n]);if(t.header&&a.deflateSetHeader(this.strm,t.header),t.dictionary){var _;if(_="string"==typeof t.dictionary?i.string2buf(t.dictionary):"[object ArrayBuffer]"===o.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,(n=a.deflateSetDictionary(this.strm,_))!==u)throw new Error(l[n]);this._dict_set=!0}}function _(e,t){var n=new f(t);if(n.push(e,!0),n.err)throw n.msg||l[n.err];return n.result}f.prototype.push=function(e,t){var n,l,s=this.strm,c=this.options.chunkSize;if(this.ended)return!1;l=t===~~t?t:!0===t?4:0,"string"==typeof e?s.input=i.string2buf(e):"[object ArrayBuffer]"===o.call(e)?s.input=new Uint8Array(e):s.input=e,s.next_in=0,s.avail_in=s.input.length;do{if(0===s.avail_out&&(s.output=new r.Buf8(c),s.next_out=0,s.avail_out=c),1!==(n=a.deflate(s,l))&&n!==u)return this.onEnd(n),this.ended=!0,!1;0!==s.avail_out&&(0!==s.avail_in||4!==l&&2!==l)||("string"===this.options.to?this.onData(i.buf2binstring(r.shrinkBuf(s.output,s.next_out))):this.onData(r.shrinkBuf(s.output,s.next_out)))}while((s.avail_in>0||0===s.avail_out)&&1!==n);return 4===l?(n=a.deflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===u):2!==l||(this.onEnd(u),s.avail_out=0,!0)},f.prototype.onData=function(e){this.chunks.push(e)},f.prototype.onEnd=function(e){e===u&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=r.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},t.Deflate=f,t.deflate=_,t.deflateRaw=function(e,t){return(t=t||{}).raw=!0,_(e,t)},t.gzip=function(e,t){return(t=t||{}).gzip=!0,_(e,t)}},function(e,t,n){"use strict";var a,r=n(16),i=n(229),l=n(81),s=n(82),o=n(51),u=0,c=1,d=3,h=4,f=5,_=0,m=1,p=-2,g=-3,b=-5,w=-1,v=1,A=2,L=3,y=4,S=0,T=2,E=8,x=9,k=15,M=8,I=286,U=30,P=19,R=2*I+1,O=15,C=3,B=258,F=B+C+1,D=32,G=42,N=69,V=73,j=91,H=103,K=113,z=666,X=1,q=2,Y=3,$=4,W=3;function Z(e,t){return e.msg=o[t],t}function J(e){return(e<<1)-(e>4?9:0)}function Q(e){for(var t=e.length;--t>=0;)e[t]=0}function ee(e){var t=e.state,n=t.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(r.arraySet(e.output,t.pending_buf,t.pending_out,n,e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))}function te(e,t){i._tr_flush_block(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,ee(e.strm)}function ne(e,t){e.pending_buf[e.pending++]=t}function ae(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function re(e,t){var n,a,r=e.max_chain_length,i=e.strstart,l=e.prev_length,s=e.nice_match,o=e.strstart>e.w_size-F?e.strstart-(e.w_size-F):0,u=e.window,c=e.w_mask,d=e.prev,h=e.strstart+B,f=u[i+l-1],_=u[i+l];e.prev_length>=e.good_match&&(r>>=2),s>e.lookahead&&(s=e.lookahead);do{if(u[(n=t)+l]===_&&u[n+l-1]===f&&u[n]===u[i]&&u[++n]===u[i+1]){i+=2,n++;do{}while(u[++i]===u[++n]&&u[++i]===u[++n]&&u[++i]===u[++n]&&u[++i]===u[++n]&&u[++i]===u[++n]&&u[++i]===u[++n]&&u[++i]===u[++n]&&u[++i]===u[++n]&&i<h);if(a=B-(h-i),i=h-B,a>l){if(e.match_start=t,l=a,a>=s)break;f=u[i+l-1],_=u[i+l]}}}while((t=d[t&c])>o&&0!=--r);return l<=e.lookahead?l:e.lookahead}function ie(e){var t,n,a,i,o,u,c,d,h,f,_=e.w_size;do{if(i=e.window_size-e.lookahead-e.strstart,e.strstart>=_+(_-F)){r.arraySet(e.window,e.window,_,_,0),e.match_start-=_,e.strstart-=_,e.block_start-=_,t=n=e.hash_size;do{a=e.head[--t],e.head[t]=a>=_?a-_:0}while(--n);t=n=_;do{a=e.prev[--t],e.prev[t]=a>=_?a-_:0}while(--n);i+=_}if(0===e.strm.avail_in)break;if(u=e.strm,c=e.window,d=e.strstart+e.lookahead,h=i,f=void 0,(f=u.avail_in)>h&&(f=h),n=0===f?0:(u.avail_in-=f,r.arraySet(c,u.input,u.next_in,f,d),1===u.state.wrap?u.adler=l(u.adler,c,f,d):2===u.state.wrap&&(u.adler=s(u.adler,c,f,d)),u.next_in+=f,u.total_in+=f,f),e.lookahead+=n,e.lookahead+e.insert>=C)for(o=e.strstart-e.insert,e.ins_h=e.window[o],e.ins_h=(e.ins_h<<e.hash_shift^e.window[o+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[o+C-1])&e.hash_mask,e.prev[o&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=o,o++,e.insert--,!(e.lookahead+e.insert<C)););}while(e.lookahead<F&&0!==e.strm.avail_in)}function le(e,t){for(var n,a;;){if(e.lookahead<F){if(ie(e),e.lookahead<F&&t===u)return X;if(0===e.lookahead)break}if(n=0,e.lookahead>=C&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+C-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-F&&(e.match_length=re(e,n)),e.match_length>=C)if(a=i._tr_tally(e,e.strstart-e.match_start,e.match_length-C),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=C){e.match_length--;do{e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+C-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!=--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else a=i._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(a&&(te(e,!1),0===e.strm.avail_out))return X}return e.insert=e.strstart<C-1?e.strstart:C-1,t===h?(te(e,!0),0===e.strm.avail_out?Y:$):e.last_lit&&(te(e,!1),0===e.strm.avail_out)?X:q}function se(e,t){for(var n,a,r;;){if(e.lookahead<F){if(ie(e),e.lookahead<F&&t===u)return X;if(0===e.lookahead)break}if(n=0,e.lookahead>=C&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+C-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=C-1,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-F&&(e.match_length=re(e,n),e.match_length<=5&&(e.strategy===v||e.match_length===C&&e.strstart-e.match_start>4096)&&(e.match_length=C-1)),e.prev_length>=C&&e.match_length<=e.prev_length){r=e.strstart+e.lookahead-C,a=i._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-C),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=r&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+C-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!=--e.prev_length);if(e.match_available=0,e.match_length=C-1,e.strstart++,a&&(te(e,!1),0===e.strm.avail_out))return X}else if(e.match_available){if((a=i._tr_tally(e,0,e.window[e.strstart-1]))&&te(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return X}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(a=i._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<C-1?e.strstart:C-1,t===h?(te(e,!0),0===e.strm.avail_out?Y:$):e.last_lit&&(te(e,!1),0===e.strm.avail_out)?X:q}function oe(e,t,n,a,r){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=a,this.func=r}function ue(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=E,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new r.Buf16(2*R),this.dyn_dtree=new r.Buf16(2*(2*U+1)),this.bl_tree=new r.Buf16(2*(2*P+1)),Q(this.dyn_ltree),Q(this.dyn_dtree),Q(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new r.Buf16(O+1),this.heap=new r.Buf16(2*I+1),Q(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new r.Buf16(2*I+1),Q(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function ce(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=T,(t=e.state).pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?G:K,e.adler=2===t.wrap?0:1,t.last_flush=u,i._tr_init(t),_):Z(e,p)}function de(e){var t,n=ce(e);return n===_&&((t=e.state).window_size=2*t.w_size,Q(t.head),t.max_lazy_match=a[t.level].max_lazy,t.good_match=a[t.level].good_length,t.nice_match=a[t.level].nice_length,t.max_chain_length=a[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=C-1,t.match_available=0,t.ins_h=0),n}function he(e,t,n,a,i,l){if(!e)return p;var s=1;if(t===w&&(t=6),a<0?(s=0,a=-a):a>15&&(s=2,a-=16),i<1||i>x||n!==E||a<8||a>15||t<0||t>9||l<0||l>y)return Z(e,p);8===a&&(a=9);var o=new ue;return e.state=o,o.strm=e,o.wrap=s,o.gzhead=null,o.w_bits=a,o.w_size=1<<o.w_bits,o.w_mask=o.w_size-1,o.hash_bits=i+7,o.hash_size=1<<o.hash_bits,o.hash_mask=o.hash_size-1,o.hash_shift=~~((o.hash_bits+C-1)/C),o.window=new r.Buf8(2*o.w_size),o.head=new r.Buf16(o.hash_size),o.prev=new r.Buf16(o.w_size),o.lit_bufsize=1<<i+6,o.pending_buf_size=4*o.lit_bufsize,o.pending_buf=new r.Buf8(o.pending_buf_size),o.d_buf=1*o.lit_bufsize,o.l_buf=3*o.lit_bufsize,o.level=t,o.strategy=l,o.method=n,de(e)}a=[new oe(0,0,0,0,(function(e,t){var n=65535;for(n>e.pending_buf_size-5&&(n=e.pending_buf_size-5);;){if(e.lookahead<=1){if(ie(e),0===e.lookahead&&t===u)return X;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var a=e.block_start+n;if((0===e.strstart||e.strstart>=a)&&(e.lookahead=e.strstart-a,e.strstart=a,te(e,!1),0===e.strm.avail_out))return X;if(e.strstart-e.block_start>=e.w_size-F&&(te(e,!1),0===e.strm.avail_out))return X}return e.insert=0,t===h?(te(e,!0),0===e.strm.avail_out?Y:$):(e.strstart>e.block_start&&(te(e,!1),e.strm.avail_out),X)})),new oe(4,4,8,4,le),new oe(4,5,16,8,le),new oe(4,6,32,32,le),new oe(4,4,16,16,se),new oe(8,16,32,32,se),new oe(8,16,128,128,se),new oe(8,32,128,256,se),new oe(32,128,258,1024,se),new oe(32,258,258,4096,se)],t.deflateInit=function(e,t){return he(e,t,E,k,M,S)},t.deflateInit2=he,t.deflateReset=de,t.deflateResetKeep=ce,t.deflateSetHeader=function(e,t){return e&&e.state?2!==e.state.wrap?p:(e.state.gzhead=t,_):p},t.deflate=function(e,t){var n,r,l,o;if(!e||!e.state||t>f||t<0)return e?Z(e,p):p;if(r=e.state,!e.output||!e.input&&0!==e.avail_in||r.status===z&&t!==h)return Z(e,0===e.avail_out?b:p);if(r.strm=e,n=r.last_flush,r.last_flush=t,r.status===G)if(2===r.wrap)e.adler=0,ne(r,31),ne(r,139),ne(r,8),r.gzhead?(ne(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(r.gzhead.extra?4:0)+(r.gzhead.name?8:0)+(r.gzhead.comment?16:0)),ne(r,255&r.gzhead.time),ne(r,r.gzhead.time>>8&255),ne(r,r.gzhead.time>>16&255),ne(r,r.gzhead.time>>24&255),ne(r,9===r.level?2:r.strategy>=A||r.level<2?4:0),ne(r,255&r.gzhead.os),r.gzhead.extra&&r.gzhead.extra.length&&(ne(r,255&r.gzhead.extra.length),ne(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(e.adler=s(e.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=N):(ne(r,0),ne(r,0),ne(r,0),ne(r,0),ne(r,0),ne(r,9===r.level?2:r.strategy>=A||r.level<2?4:0),ne(r,W),r.status=K);else{var g=E+(r.w_bits-8<<4)<<8;g|=(r.strategy>=A||r.level<2?0:r.level<6?1:6===r.level?2:3)<<6,0!==r.strstart&&(g|=D),g+=31-g%31,r.status=K,ae(r,g),0!==r.strstart&&(ae(r,e.adler>>>16),ae(r,65535&e.adler)),e.adler=1}if(r.status===N)if(r.gzhead.extra){for(l=r.pending;r.gzindex<(65535&r.gzhead.extra.length)&&(r.pending!==r.pending_buf_size||(r.gzhead.hcrc&&r.pending>l&&(e.adler=s(e.adler,r.pending_buf,r.pending-l,l)),ee(e),l=r.pending,r.pending!==r.pending_buf_size));)ne(r,255&r.gzhead.extra[r.gzindex]),r.gzindex++;r.gzhead.hcrc&&r.pending>l&&(e.adler=s(e.adler,r.pending_buf,r.pending-l,l)),r.gzindex===r.gzhead.extra.length&&(r.gzindex=0,r.status=V)}else r.status=V;if(r.status===V)if(r.gzhead.name){l=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>l&&(e.adler=s(e.adler,r.pending_buf,r.pending-l,l)),ee(e),l=r.pending,r.pending===r.pending_buf_size)){o=1;break}o=r.gzindex<r.gzhead.name.length?255&r.gzhead.name.charCodeAt(r.gzindex++):0,ne(r,o)}while(0!==o);r.gzhead.hcrc&&r.pending>l&&(e.adler=s(e.adler,r.pending_buf,r.pending-l,l)),0===o&&(r.gzindex=0,r.status=j)}else r.status=j;if(r.status===j)if(r.gzhead.comment){l=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>l&&(e.adler=s(e.adler,r.pending_buf,r.pending-l,l)),ee(e),l=r.pending,r.pending===r.pending_buf_size)){o=1;break}o=r.gzindex<r.gzhead.comment.length?255&r.gzhead.comment.charCodeAt(r.gzindex++):0,ne(r,o)}while(0!==o);r.gzhead.hcrc&&r.pending>l&&(e.adler=s(e.adler,r.pending_buf,r.pending-l,l)),0===o&&(r.status=H)}else r.status=H;if(r.status===H&&(r.gzhead.hcrc?(r.pending+2>r.pending_buf_size&&ee(e),r.pending+2<=r.pending_buf_size&&(ne(r,255&e.adler),ne(r,e.adler>>8&255),e.adler=0,r.status=K)):r.status=K),0!==r.pending){if(ee(e),0===e.avail_out)return r.last_flush=-1,_}else if(0===e.avail_in&&J(t)<=J(n)&&t!==h)return Z(e,b);if(r.status===z&&0!==e.avail_in)return Z(e,b);if(0!==e.avail_in||0!==r.lookahead||t!==u&&r.status!==z){var w=r.strategy===A?function(e,t){for(var n;;){if(0===e.lookahead&&(ie(e),0===e.lookahead)){if(t===u)return X;break}if(e.match_length=0,n=i._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(te(e,!1),0===e.strm.avail_out))return X}return e.insert=0,t===h?(te(e,!0),0===e.strm.avail_out?Y:$):e.last_lit&&(te(e,!1),0===e.strm.avail_out)?X:q}(r,t):r.strategy===L?function(e,t){for(var n,a,r,l,s=e.window;;){if(e.lookahead<=B){if(ie(e),e.lookahead<=B&&t===u)return X;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=C&&e.strstart>0&&(a=s[r=e.strstart-1])===s[++r]&&a===s[++r]&&a===s[++r]){l=e.strstart+B;do{}while(a===s[++r]&&a===s[++r]&&a===s[++r]&&a===s[++r]&&a===s[++r]&&a===s[++r]&&a===s[++r]&&a===s[++r]&&r<l);e.match_length=B-(l-r),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=C?(n=i._tr_tally(e,1,e.match_length-C),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=i._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(te(e,!1),0===e.strm.avail_out))return X}return e.insert=0,t===h?(te(e,!0),0===e.strm.avail_out?Y:$):e.last_lit&&(te(e,!1),0===e.strm.avail_out)?X:q}(r,t):a[r.level].func(r,t);if(w!==Y&&w!==$||(r.status=z),w===X||w===Y)return 0===e.avail_out&&(r.last_flush=-1),_;if(w===q&&(t===c?i._tr_align(r):t!==f&&(i._tr_stored_block(r,0,0,!1),t===d&&(Q(r.head),0===r.lookahead&&(r.strstart=0,r.block_start=0,r.insert=0))),ee(e),0===e.avail_out))return r.last_flush=-1,_}return t!==h?_:r.wrap<=0?m:(2===r.wrap?(ne(r,255&e.adler),ne(r,e.adler>>8&255),ne(r,e.adler>>16&255),ne(r,e.adler>>24&255),ne(r,255&e.total_in),ne(r,e.total_in>>8&255),ne(r,e.total_in>>16&255),ne(r,e.total_in>>24&255)):(ae(r,e.adler>>>16),ae(r,65535&e.adler)),ee(e),r.wrap>0&&(r.wrap=-r.wrap),0!==r.pending?_:m)},t.deflateEnd=function(e){var t;return e&&e.state?(t=e.state.status)!==G&&t!==N&&t!==V&&t!==j&&t!==H&&t!==K&&t!==z?Z(e,p):(e.state=null,t===K?Z(e,g):_):p},t.deflateSetDictionary=function(e,t){var n,a,i,s,o,u,c,d,h=t.length;if(!e||!e.state)return p;if(2===(s=(n=e.state).wrap)||1===s&&n.status!==G||n.lookahead)return p;for(1===s&&(e.adler=l(e.adler,t,h,0)),n.wrap=0,h>=n.w_size&&(0===s&&(Q(n.head),n.strstart=0,n.block_start=0,n.insert=0),d=new r.Buf8(n.w_size),r.arraySet(d,t,h-n.w_size,n.w_size,0),t=d,h=n.w_size),o=e.avail_in,u=e.next_in,c=e.input,e.avail_in=h,e.next_in=0,e.input=t,ie(n);n.lookahead>=C;){a=n.strstart,i=n.lookahead-(C-1);do{n.ins_h=(n.ins_h<<n.hash_shift^n.window[a+C-1])&n.hash_mask,n.prev[a&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=a,a++}while(--i);n.strstart=a,n.lookahead=C-1,ie(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=C-1,n.match_available=0,e.next_in=u,e.input=c,e.avail_in=o,n.wrap=s,_},t.deflateInfo="pako deflate (from Nodeca project)"},function(e,t,n){"use strict";var a=n(16),r=4,i=0,l=1,s=2;function o(e){for(var t=e.length;--t>=0;)e[t]=0}var u=0,c=1,d=2,h=29,f=256,_=f+1+h,m=30,p=19,g=2*_+1,b=15,w=16,v=7,A=256,L=16,y=17,S=18,T=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],E=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],x=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],k=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],M=new Array(2*(_+2));o(M);var I=new Array(2*m);o(I);var U=new Array(512);o(U);var P=new Array(256);o(P);var R=new Array(h);o(R);var O,C,B,F=new Array(m);function D(e,t,n,a,r){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=a,this.max_length=r,this.has_stree=e&&e.length}function G(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function N(e){return e<256?U[e]:U[256+(e>>>7)]}function V(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function j(e,t,n){e.bi_valid>w-n?(e.bi_buf|=t<<e.bi_valid&65535,V(e,e.bi_buf),e.bi_buf=t>>w-e.bi_valid,e.bi_valid+=n-w):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)}function H(e,t,n){j(e,n[2*t],n[2*t+1])}function K(e,t){var n=0;do{n|=1&e,e>>>=1,n<<=1}while(--t>0);return n>>>1}function z(e,t,n){var a,r,i=new Array(b+1),l=0;for(a=1;a<=b;a++)i[a]=l=l+n[a-1]<<1;for(r=0;r<=t;r++){var s=e[2*r+1];0!==s&&(e[2*r]=K(i[s]++,s))}}function X(e){var t;for(t=0;t<_;t++)e.dyn_ltree[2*t]=0;for(t=0;t<m;t++)e.dyn_dtree[2*t]=0;for(t=0;t<p;t++)e.bl_tree[2*t]=0;e.dyn_ltree[2*A]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function q(e){e.bi_valid>8?V(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function Y(e,t,n,a){var r=2*t,i=2*n;return e[r]<e[i]||e[r]===e[i]&&a[t]<=a[n]}function $(e,t,n){for(var a=e.heap[n],r=n<<1;r<=e.heap_len&&(r<e.heap_len&&Y(t,e.heap[r+1],e.heap[r],e.depth)&&r++,!Y(t,a,e.heap[r],e.depth));)e.heap[n]=e.heap[r],n=r,r<<=1;e.heap[n]=a}function W(e,t,n){var a,r,i,l,s=0;if(0!==e.last_lit)do{a=e.pending_buf[e.d_buf+2*s]<<8|e.pending_buf[e.d_buf+2*s+1],r=e.pending_buf[e.l_buf+s],s++,0===a?H(e,r,t):(H(e,(i=P[r])+f+1,t),0!==(l=T[i])&&j(e,r-=R[i],l),H(e,i=N(--a),n),0!==(l=E[i])&&j(e,a-=F[i],l))}while(s<e.last_lit);H(e,A,t)}function Z(e,t){var n,a,r,i=t.dyn_tree,l=t.stat_desc.static_tree,s=t.stat_desc.has_stree,o=t.stat_desc.elems,u=-1;for(e.heap_len=0,e.heap_max=g,n=0;n<o;n++)0!==i[2*n]?(e.heap[++e.heap_len]=u=n,e.depth[n]=0):i[2*n+1]=0;for(;e.heap_len<2;)i[2*(r=e.heap[++e.heap_len]=u<2?++u:0)]=1,e.depth[r]=0,e.opt_len--,s&&(e.static_len-=l[2*r+1]);for(t.max_code=u,n=e.heap_len>>1;n>=1;n--)$(e,i,n);r=o;do{n=e.heap[1],e.heap[1]=e.heap[e.heap_len--],$(e,i,1),a=e.heap[1],e.heap[--e.heap_max]=n,e.heap[--e.heap_max]=a,i[2*r]=i[2*n]+i[2*a],e.depth[r]=(e.depth[n]>=e.depth[a]?e.depth[n]:e.depth[a])+1,i[2*n+1]=i[2*a+1]=r,e.heap[1]=r++,$(e,i,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],function(e,t){var n,a,r,i,l,s,o=t.dyn_tree,u=t.max_code,c=t.stat_desc.static_tree,d=t.stat_desc.has_stree,h=t.stat_desc.extra_bits,f=t.stat_desc.extra_base,_=t.stat_desc.max_length,m=0;for(i=0;i<=b;i++)e.bl_count[i]=0;for(o[2*e.heap[e.heap_max]+1]=0,n=e.heap_max+1;n<g;n++)(i=o[2*o[2*(a=e.heap[n])+1]+1]+1)>_&&(i=_,m++),o[2*a+1]=i,a>u||(e.bl_count[i]++,l=0,a>=f&&(l=h[a-f]),s=o[2*a],e.opt_len+=s*(i+l),d&&(e.static_len+=s*(c[2*a+1]+l)));if(0!==m){do{for(i=_-1;0===e.bl_count[i];)i--;e.bl_count[i]--,e.bl_count[i+1]+=2,e.bl_count[_]--,m-=2}while(m>0);for(i=_;0!==i;i--)for(a=e.bl_count[i];0!==a;)(r=e.heap[--n])>u||(o[2*r+1]!==i&&(e.opt_len+=(i-o[2*r+1])*o[2*r],o[2*r+1]=i),a--)}}(e,t),z(i,u,e.bl_count)}function J(e,t,n){var a,r,i=-1,l=t[1],s=0,o=7,u=4;for(0===l&&(o=138,u=3),t[2*(n+1)+1]=65535,a=0;a<=n;a++)r=l,l=t[2*(a+1)+1],++s<o&&r===l||(s<u?e.bl_tree[2*r]+=s:0!==r?(r!==i&&e.bl_tree[2*r]++,e.bl_tree[2*L]++):s<=10?e.bl_tree[2*y]++:e.bl_tree[2*S]++,s=0,i=r,0===l?(o=138,u=3):r===l?(o=6,u=3):(o=7,u=4))}function Q(e,t,n){var a,r,i=-1,l=t[1],s=0,o=7,u=4;for(0===l&&(o=138,u=3),a=0;a<=n;a++)if(r=l,l=t[2*(a+1)+1],!(++s<o&&r===l)){if(s<u)do{H(e,r,e.bl_tree)}while(0!=--s);else 0!==r?(r!==i&&(H(e,r,e.bl_tree),s--),H(e,L,e.bl_tree),j(e,s-3,2)):s<=10?(H(e,y,e.bl_tree),j(e,s-3,3)):(H(e,S,e.bl_tree),j(e,s-11,7));s=0,i=r,0===l?(o=138,u=3):r===l?(o=6,u=3):(o=7,u=4)}}o(F);var ee=!1;function te(e,t,n,r){j(e,(u<<1)+(r?1:0),3),function(e,t,n,r){q(e),r&&(V(e,n),V(e,~n)),a.arraySet(e.pending_buf,e.window,t,n,e.pending),e.pending+=n}(e,t,n,!0)}t._tr_init=function(e){ee||(!function(){var e,t,n,a,r,i=new Array(b+1);for(n=0,a=0;a<h-1;a++)for(R[a]=n,e=0;e<1<<T[a];e++)P[n++]=a;for(P[n-1]=a,r=0,a=0;a<16;a++)for(F[a]=r,e=0;e<1<<E[a];e++)U[r++]=a;for(r>>=7;a<m;a++)for(F[a]=r<<7,e=0;e<1<<E[a]-7;e++)U[256+r++]=a;for(t=0;t<=b;t++)i[t]=0;for(e=0;e<=143;)M[2*e+1]=8,e++,i[8]++;for(;e<=255;)M[2*e+1]=9,e++,i[9]++;for(;e<=279;)M[2*e+1]=7,e++,i[7]++;for(;e<=287;)M[2*e+1]=8,e++,i[8]++;for(z(M,_+1,i),e=0;e<m;e++)I[2*e+1]=5,I[2*e]=K(e,5);O=new D(M,T,f+1,_,b),C=new D(I,E,0,m,b),B=new D(new Array(0),x,0,p,v)}(),ee=!0),e.l_desc=new G(e.dyn_ltree,O),e.d_desc=new G(e.dyn_dtree,C),e.bl_desc=new G(e.bl_tree,B),e.bi_buf=0,e.bi_valid=0,X(e)},t._tr_stored_block=te,t._tr_flush_block=function(e,t,n,a){var o,u,h=0;e.level>0?(e.strm.data_type===s&&(e.strm.data_type=function(e){var t,n=4093624447;for(t=0;t<=31;t++,n>>>=1)if(1&n&&0!==e.dyn_ltree[2*t])return i;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return l;for(t=32;t<f;t++)if(0!==e.dyn_ltree[2*t])return l;return i}(e)),Z(e,e.l_desc),Z(e,e.d_desc),h=function(e){var t;for(J(e,e.dyn_ltree,e.l_desc.max_code),J(e,e.dyn_dtree,e.d_desc.max_code),Z(e,e.bl_desc),t=p-1;t>=3&&0===e.bl_tree[2*k[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}(e),o=e.opt_len+3+7>>>3,(u=e.static_len+3+7>>>3)<=o&&(o=u)):o=u=n+5,n+4<=o&&-1!==t?te(e,t,n,a):e.strategy===r||u===o?(j(e,(c<<1)+(a?1:0),3),W(e,M,I)):(j(e,(d<<1)+(a?1:0),3),function(e,t,n,a){var r;for(j(e,t-257,5),j(e,n-1,5),j(e,a-4,4),r=0;r<a;r++)j(e,e.bl_tree[2*k[r]+1],3);Q(e,e.dyn_ltree,t-1),Q(e,e.dyn_dtree,n-1)}(e,e.l_desc.max_code+1,e.d_desc.max_code+1,h+1),W(e,e.dyn_ltree,e.dyn_dtree)),X(e),a&&q(e)},t._tr_tally=function(e,t,n){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&n,e.last_lit++,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*(P[n]+f+1)]++,e.dyn_dtree[2*N(t)]++),e.last_lit===e.lit_bufsize-1},t._tr_align=function(e){j(e,c<<1,3),H(e,A,M),function(e){16===e.bi_valid?(V(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}(e)}},function(e,t,n){"use strict";var a=n(231),r=n(16),i=n(83),l=n(85),s=n(51),o=n(84),u=n(234),c=Object.prototype.toString;function d(e){if(!(this instanceof d))return new d(e);this.options=r.assign({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new o,this.strm.avail_out=0;var n=a.inflateInit2(this.strm,t.windowBits);if(n!==l.Z_OK)throw new Error(s[n]);if(this.header=new u,a.inflateGetHeader(this.strm,this.header),t.dictionary&&("string"==typeof t.dictionary?t.dictionary=i.string2buf(t.dictionary):"[object ArrayBuffer]"===c.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(n=a.inflateSetDictionary(this.strm,t.dictionary))!==l.Z_OK))throw new Error(s[n])}function h(e,t){var n=new d(t);if(n.push(e,!0),n.err)throw n.msg||s[n.err];return n.result}d.prototype.push=function(e,t){var n,s,o,u,d,h=this.strm,f=this.options.chunkSize,_=this.options.dictionary,m=!1;if(this.ended)return!1;s=t===~~t?t:!0===t?l.Z_FINISH:l.Z_NO_FLUSH,"string"==typeof e?h.input=i.binstring2buf(e):"[object ArrayBuffer]"===c.call(e)?h.input=new Uint8Array(e):h.input=e,h.next_in=0,h.avail_in=h.input.length;do{if(0===h.avail_out&&(h.output=new r.Buf8(f),h.next_out=0,h.avail_out=f),(n=a.inflate(h,l.Z_NO_FLUSH))===l.Z_NEED_DICT&&_&&(n=a.inflateSetDictionary(this.strm,_)),n===l.Z_BUF_ERROR&&!0===m&&(n=l.Z_OK,m=!1),n!==l.Z_STREAM_END&&n!==l.Z_OK)return this.onEnd(n),this.ended=!0,!1;h.next_out&&(0!==h.avail_out&&n!==l.Z_STREAM_END&&(0!==h.avail_in||s!==l.Z_FINISH&&s!==l.Z_SYNC_FLUSH)||("string"===this.options.to?(o=i.utf8border(h.output,h.next_out),u=h.next_out-o,d=i.buf2string(h.output,o),h.next_out=u,h.avail_out=f-u,u&&r.arraySet(h.output,h.output,o,u,0),this.onData(d)):this.onData(r.shrinkBuf(h.output,h.next_out)))),0===h.avail_in&&0===h.avail_out&&(m=!0)}while((h.avail_in>0||0===h.avail_out)&&n!==l.Z_STREAM_END);return n===l.Z_STREAM_END&&(s=l.Z_FINISH),s===l.Z_FINISH?(n=a.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===l.Z_OK):s!==l.Z_SYNC_FLUSH||(this.onEnd(l.Z_OK),h.avail_out=0,!0)},d.prototype.onData=function(e){this.chunks.push(e)},d.prototype.onEnd=function(e){e===l.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=r.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},t.Inflate=d,t.inflate=h,t.inflateRaw=function(e,t){return(t=t||{}).raw=!0,h(e,t)},t.ungzip=h},function(e,t,n){"use strict";var a=n(16),r=n(81),i=n(82),l=n(232),s=n(233),o=0,u=1,c=2,d=4,h=5,f=6,_=0,m=1,p=2,g=-2,b=-3,w=-4,v=-5,A=8,L=1,y=2,S=3,T=4,E=5,x=6,k=7,M=8,I=9,U=10,P=11,R=12,O=13,C=14,B=15,F=16,D=17,G=18,N=19,V=20,j=21,H=22,K=23,z=24,X=25,q=26,Y=27,$=28,W=29,Z=30,J=31,Q=32,ee=852,te=592,ne=15;function ae(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function re(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new a.Buf16(320),this.work=new a.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function ie(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=L,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new a.Buf32(ee),t.distcode=t.distdyn=new a.Buf32(te),t.sane=1,t.back=-1,_):g}function le(e){var t;return e&&e.state?((t=e.state).wsize=0,t.whave=0,t.wnext=0,ie(e)):g}function se(e,t){var n,a;return e&&e.state?(a=e.state,t<0?(n=0,t=-t):(n=1+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?g:(null!==a.window&&a.wbits!==t&&(a.window=null),a.wrap=n,a.wbits=t,le(e))):g}function oe(e,t){var n,a;return e?(a=new re,e.state=a,a.window=null,(n=se(e,t))!==_&&(e.state=null),n):g}var ue,ce,de=!0;function he(e){if(de){var t;for(ue=new a.Buf32(512),ce=new a.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(s(u,e.lens,0,288,ue,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;s(c,e.lens,0,32,ce,0,e.work,{bits:5}),de=!1}e.lencode=ue,e.lenbits=9,e.distcode=ce,e.distbits=5}function fe(e,t,n,r){var i,l=e.state;return null===l.window&&(l.wsize=1<<l.wbits,l.wnext=0,l.whave=0,l.window=new a.Buf8(l.wsize)),r>=l.wsize?(a.arraySet(l.window,t,n-l.wsize,l.wsize,0),l.wnext=0,l.whave=l.wsize):((i=l.wsize-l.wnext)>r&&(i=r),a.arraySet(l.window,t,n-r,i,l.wnext),(r-=i)?(a.arraySet(l.window,t,n-r,r,0),l.wnext=r,l.whave=l.wsize):(l.wnext+=i,l.wnext===l.wsize&&(l.wnext=0),l.whave<l.wsize&&(l.whave+=i))),0}t.inflateReset=le,t.inflateReset2=se,t.inflateResetKeep=ie,t.inflateInit=function(e){return oe(e,ne)},t.inflateInit2=oe,t.inflate=function(e,t){var n,ee,te,ne,re,ie,le,se,oe,ue,ce,de,_e,me,pe,ge,be,we,ve,Ae,Le,ye,Se,Te,Ee=0,xe=new a.Buf8(4),ke=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return g;(n=e.state).mode===R&&(n.mode=O),re=e.next_out,te=e.output,le=e.avail_out,ne=e.next_in,ee=e.input,ie=e.avail_in,se=n.hold,oe=n.bits,ue=ie,ce=le,ye=_;e:for(;;)switch(n.mode){case L:if(0===n.wrap){n.mode=O;break}for(;oe<16;){if(0===ie)break e;ie--,se+=ee[ne++]<<oe,oe+=8}if(2&n.wrap&&35615===se){n.check=0,xe[0]=255&se,xe[1]=se>>>8&255,n.check=i(n.check,xe,2,0),se=0,oe=0,n.mode=y;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&se)<<8)+(se>>8))%31){e.msg="incorrect header check",n.mode=Z;break}if((15&se)!==A){e.msg="unknown compression method",n.mode=Z;break}if(oe-=4,Le=8+(15&(se>>>=4)),0===n.wbits)n.wbits=Le;else if(Le>n.wbits){e.msg="invalid window size",n.mode=Z;break}n.dmax=1<<Le,e.adler=n.check=1,n.mode=512&se?U:R,se=0,oe=0;break;case y:for(;oe<16;){if(0===ie)break e;ie--,se+=ee[ne++]<<oe,oe+=8}if(n.flags=se,(255&n.flags)!==A){e.msg="unknown compression method",n.mode=Z;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=Z;break}n.head&&(n.head.text=se>>8&1),512&n.flags&&(xe[0]=255&se,xe[1]=se>>>8&255,n.check=i(n.check,xe,2,0)),se=0,oe=0,n.mode=S;case S:for(;oe<32;){if(0===ie)break e;ie--,se+=ee[ne++]<<oe,oe+=8}n.head&&(n.head.time=se),512&n.flags&&(xe[0]=255&se,xe[1]=se>>>8&255,xe[2]=se>>>16&255,xe[3]=se>>>24&255,n.check=i(n.check,xe,4,0)),se=0,oe=0,n.mode=T;case T:for(;oe<16;){if(0===ie)break e;ie--,se+=ee[ne++]<<oe,oe+=8}n.head&&(n.head.xflags=255&se,n.head.os=se>>8),512&n.flags&&(xe[0]=255&se,xe[1]=se>>>8&255,n.check=i(n.check,xe,2,0)),se=0,oe=0,n.mode=E;case E:if(1024&n.flags){for(;oe<16;){if(0===ie)break e;ie--,se+=ee[ne++]<<oe,oe+=8}n.length=se,n.head&&(n.head.extra_len=se),512&n.flags&&(xe[0]=255&se,xe[1]=se>>>8&255,n.check=i(n.check,xe,2,0)),se=0,oe=0}else n.head&&(n.head.extra=null);n.mode=x;case x:if(1024&n.flags&&((de=n.length)>ie&&(de=ie),de&&(n.head&&(Le=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),a.arraySet(n.head.extra,ee,ne,de,Le)),512&n.flags&&(n.check=i(n.check,ee,de,ne)),ie-=de,ne+=de,n.length-=de),n.length))break e;n.length=0,n.mode=k;case k:if(2048&n.flags){if(0===ie)break e;de=0;do{Le=ee[ne+de++],n.head&&Le&&n.length<65536&&(n.head.name+=String.fromCharCode(Le))}while(Le&&de<ie);if(512&n.flags&&(n.check=i(n.check,ee,de,ne)),ie-=de,ne+=de,Le)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=M;case M:if(4096&n.flags){if(0===ie)break e;de=0;do{Le=ee[ne+de++],n.head&&Le&&n.length<65536&&(n.head.comment+=String.fromCharCode(Le))}while(Le&&de<ie);if(512&n.flags&&(n.check=i(n.check,ee,de,ne)),ie-=de,ne+=de,Le)break e}else n.head&&(n.head.comment=null);n.mode=I;case I:if(512&n.flags){for(;oe<16;){if(0===ie)break e;ie--,se+=ee[ne++]<<oe,oe+=8}if(se!==(65535&n.check)){e.msg="header crc mismatch",n.mode=Z;break}se=0,oe=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=R;break;case U:for(;oe<32;){if(0===ie)break e;ie--,se+=ee[ne++]<<oe,oe+=8}e.adler=n.check=ae(se),se=0,oe=0,n.mode=P;case P:if(0===n.havedict)return e.next_out=re,e.avail_out=le,e.next_in=ne,e.avail_in=ie,n.hold=se,n.bits=oe,p;e.adler=n.check=1,n.mode=R;case R:if(t===h||t===f)break e;case O:if(n.last){se>>>=7&oe,oe-=7&oe,n.mode=Y;break}for(;oe<3;){if(0===ie)break e;ie--,se+=ee[ne++]<<oe,oe+=8}switch(n.last=1&se,oe-=1,3&(se>>>=1)){case 0:n.mode=C;break;case 1:if(he(n),n.mode=V,t===f){se>>>=2,oe-=2;break e}break;case 2:n.mode=D;break;case 3:e.msg="invalid block type",n.mode=Z}se>>>=2,oe-=2;break;case C:for(se>>>=7&oe,oe-=7&oe;oe<32;){if(0===ie)break e;ie--,se+=ee[ne++]<<oe,oe+=8}if((65535&se)!=(se>>>16^65535)){e.msg="invalid stored block lengths",n.mode=Z;break}if(n.length=65535&se,se=0,oe=0,n.mode=B,t===f)break e;case B:n.mode=F;case F:if(de=n.length){if(de>ie&&(de=ie),de>le&&(de=le),0===de)break e;a.arraySet(te,ee,ne,de,re),ie-=de,ne+=de,le-=de,re+=de,n.length-=de;break}n.mode=R;break;case D:for(;oe<14;){if(0===ie)break e;ie--,se+=ee[ne++]<<oe,oe+=8}if(n.nlen=257+(31&se),se>>>=5,oe-=5,n.ndist=1+(31&se),se>>>=5,oe-=5,n.ncode=4+(15&se),se>>>=4,oe-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=Z;break}n.have=0,n.mode=G;case G:for(;n.have<n.ncode;){for(;oe<3;){if(0===ie)break e;ie--,se+=ee[ne++]<<oe,oe+=8}n.lens[ke[n.have++]]=7&se,se>>>=3,oe-=3}for(;n.have<19;)n.lens[ke[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,Se={bits:n.lenbits},ye=s(o,n.lens,0,19,n.lencode,0,n.work,Se),n.lenbits=Se.bits,ye){e.msg="invalid code lengths set",n.mode=Z;break}n.have=0,n.mode=N;case N:for(;n.have<n.nlen+n.ndist;){for(;ge=(Ee=n.lencode[se&(1<<n.lenbits)-1])>>>16&255,be=65535&Ee,!((pe=Ee>>>24)<=oe);){if(0===ie)break e;ie--,se+=ee[ne++]<<oe,oe+=8}if(be<16)se>>>=pe,oe-=pe,n.lens[n.have++]=be;else{if(16===be){for(Te=pe+2;oe<Te;){if(0===ie)break e;ie--,se+=ee[ne++]<<oe,oe+=8}if(se>>>=pe,oe-=pe,0===n.have){e.msg="invalid bit length repeat",n.mode=Z;break}Le=n.lens[n.have-1],de=3+(3&se),se>>>=2,oe-=2}else if(17===be){for(Te=pe+3;oe<Te;){if(0===ie)break e;ie--,se+=ee[ne++]<<oe,oe+=8}oe-=pe,Le=0,de=3+(7&(se>>>=pe)),se>>>=3,oe-=3}else{for(Te=pe+7;oe<Te;){if(0===ie)break e;ie--,se+=ee[ne++]<<oe,oe+=8}oe-=pe,Le=0,de=11+(127&(se>>>=pe)),se>>>=7,oe-=7}if(n.have+de>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=Z;break}for(;de--;)n.lens[n.have++]=Le}}if(n.mode===Z)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=Z;break}if(n.lenbits=9,Se={bits:n.lenbits},ye=s(u,n.lens,0,n.nlen,n.lencode,0,n.work,Se),n.lenbits=Se.bits,ye){e.msg="invalid literal/lengths set",n.mode=Z;break}if(n.distbits=6,n.distcode=n.distdyn,Se={bits:n.distbits},ye=s(c,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,Se),n.distbits=Se.bits,ye){e.msg="invalid distances set",n.mode=Z;break}if(n.mode=V,t===f)break e;case V:n.mode=j;case j:if(ie>=6&&le>=258){e.next_out=re,e.avail_out=le,e.next_in=ne,e.avail_in=ie,n.hold=se,n.bits=oe,l(e,ce),re=e.next_out,te=e.output,le=e.avail_out,ne=e.next_in,ee=e.input,ie=e.avail_in,se=n.hold,oe=n.bits,n.mode===R&&(n.back=-1);break}for(n.back=0;ge=(Ee=n.lencode[se&(1<<n.lenbits)-1])>>>16&255,be=65535&Ee,!((pe=Ee>>>24)<=oe);){if(0===ie)break e;ie--,se+=ee[ne++]<<oe,oe+=8}if(ge&&0==(240&ge)){for(we=pe,ve=ge,Ae=be;ge=(Ee=n.lencode[Ae+((se&(1<<we+ve)-1)>>we)])>>>16&255,be=65535&Ee,!(we+(pe=Ee>>>24)<=oe);){if(0===ie)break e;ie--,se+=ee[ne++]<<oe,oe+=8}se>>>=we,oe-=we,n.back+=we}if(se>>>=pe,oe-=pe,n.back+=pe,n.length=be,0===ge){n.mode=q;break}if(32&ge){n.back=-1,n.mode=R;break}if(64&ge){e.msg="invalid literal/length code",n.mode=Z;break}n.extra=15&ge,n.mode=H;case H:if(n.extra){for(Te=n.extra;oe<Te;){if(0===ie)break e;ie--,se+=ee[ne++]<<oe,oe+=8}n.length+=se&(1<<n.extra)-1,se>>>=n.extra,oe-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=K;case K:for(;ge=(Ee=n.distcode[se&(1<<n.distbits)-1])>>>16&255,be=65535&Ee,!((pe=Ee>>>24)<=oe);){if(0===ie)break e;ie--,se+=ee[ne++]<<oe,oe+=8}if(0==(240&ge)){for(we=pe,ve=ge,Ae=be;ge=(Ee=n.distcode[Ae+((se&(1<<we+ve)-1)>>we)])>>>16&255,be=65535&Ee,!(we+(pe=Ee>>>24)<=oe);){if(0===ie)break e;ie--,se+=ee[ne++]<<oe,oe+=8}se>>>=we,oe-=we,n.back+=we}if(se>>>=pe,oe-=pe,n.back+=pe,64&ge){e.msg="invalid distance code",n.mode=Z;break}n.offset=be,n.extra=15&ge,n.mode=z;case z:if(n.extra){for(Te=n.extra;oe<Te;){if(0===ie)break e;ie--,se+=ee[ne++]<<oe,oe+=8}n.offset+=se&(1<<n.extra)-1,se>>>=n.extra,oe-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=Z;break}n.mode=X;case X:if(0===le)break e;if(de=ce-le,n.offset>de){if((de=n.offset-de)>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=Z;break}de>n.wnext?(de-=n.wnext,_e=n.wsize-de):_e=n.wnext-de,de>n.length&&(de=n.length),me=n.window}else me=te,_e=re-n.offset,de=n.length;de>le&&(de=le),le-=de,n.length-=de;do{te[re++]=me[_e++]}while(--de);0===n.length&&(n.mode=j);break;case q:if(0===le)break e;te[re++]=n.length,le--,n.mode=j;break;case Y:if(n.wrap){for(;oe<32;){if(0===ie)break e;ie--,se|=ee[ne++]<<oe,oe+=8}if(ce-=le,e.total_out+=ce,n.total+=ce,ce&&(e.adler=n.check=n.flags?i(n.check,te,ce,re-ce):r(n.check,te,ce,re-ce)),ce=le,(n.flags?se:ae(se))!==n.check){e.msg="incorrect data check",n.mode=Z;break}se=0,oe=0}n.mode=$;case $:if(n.wrap&&n.flags){for(;oe<32;){if(0===ie)break e;ie--,se+=ee[ne++]<<oe,oe+=8}if(se!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=Z;break}se=0,oe=0}n.mode=W;case W:ye=m;break e;case Z:ye=b;break e;case J:return w;case Q:default:return g}return e.next_out=re,e.avail_out=le,e.next_in=ne,e.avail_in=ie,n.hold=se,n.bits=oe,(n.wsize||ce!==e.avail_out&&n.mode<Z&&(n.mode<Y||t!==d))&&fe(e,e.output,e.next_out,ce-e.avail_out)?(n.mode=J,w):(ue-=e.avail_in,ce-=e.avail_out,e.total_in+=ue,e.total_out+=ce,n.total+=ce,n.wrap&&ce&&(e.adler=n.check=n.flags?i(n.check,te,ce,e.next_out-ce):r(n.check,te,ce,e.next_out-ce)),e.data_type=n.bits+(n.last?64:0)+(n.mode===R?128:0)+(n.mode===V||n.mode===B?256:0),(0===ue&&0===ce||t===d)&&ye===_&&(ye=v),ye)},t.inflateEnd=function(e){if(!e||!e.state)return g;var t=e.state;return t.window&&(t.window=null),e.state=null,_},t.inflateGetHeader=function(e,t){var n;return e&&e.state?0==(2&(n=e.state).wrap)?g:(n.head=t,t.done=!1,_):g},t.inflateSetDictionary=function(e,t){var n,a=t.length;return e&&e.state?0!==(n=e.state).wrap&&n.mode!==P?g:n.mode===P&&r(1,t,a,0)!==n.check?b:fe(e,t,a,a)?(n.mode=J,w):(n.havedict=1,_):g},t.inflateInfo="pako inflate (from Nodeca project)"},function(e,t,n){"use strict";e.exports=function(e,t){var n,a,r,i,l,s,o,u,c,d,h,f,_,m,p,g,b,w,v,A,L,y,S,T,E;n=e.state,a=e.next_in,T=e.input,r=a+(e.avail_in-5),i=e.next_out,E=e.output,l=i-(t-e.avail_out),s=i+(e.avail_out-257),o=n.dmax,u=n.wsize,c=n.whave,d=n.wnext,h=n.window,f=n.hold,_=n.bits,m=n.lencode,p=n.distcode,g=(1<<n.lenbits)-1,b=(1<<n.distbits)-1;e:do{_<15&&(f+=T[a++]<<_,_+=8,f+=T[a++]<<_,_+=8),w=m[f&g];t:for(;;){if(f>>>=v=w>>>24,_-=v,0===(v=w>>>16&255))E[i++]=65535&w;else{if(!(16&v)){if(0==(64&v)){w=m[(65535&w)+(f&(1<<v)-1)];continue t}if(32&v){n.mode=12;break e}e.msg="invalid literal/length code",n.mode=30;break e}A=65535&w,(v&=15)&&(_<v&&(f+=T[a++]<<_,_+=8),A+=f&(1<<v)-1,f>>>=v,_-=v),_<15&&(f+=T[a++]<<_,_+=8,f+=T[a++]<<_,_+=8),w=p[f&b];n:for(;;){if(f>>>=v=w>>>24,_-=v,!(16&(v=w>>>16&255))){if(0==(64&v)){w=p[(65535&w)+(f&(1<<v)-1)];continue n}e.msg="invalid distance code",n.mode=30;break e}if(L=65535&w,_<(v&=15)&&(f+=T[a++]<<_,(_+=8)<v&&(f+=T[a++]<<_,_+=8)),(L+=f&(1<<v)-1)>o){e.msg="invalid distance too far back",n.mode=30;break e}if(f>>>=v,_-=v,L>(v=i-l)){if((v=L-v)>c&&n.sane){e.msg="invalid distance too far back",n.mode=30;break e}if(y=0,S=h,0===d){if(y+=u-v,v<A){A-=v;do{E[i++]=h[y++]}while(--v);y=i-L,S=E}}else if(d<v){if(y+=u+d-v,(v-=d)<A){A-=v;do{E[i++]=h[y++]}while(--v);if(y=0,d<A){A-=v=d;do{E[i++]=h[y++]}while(--v);y=i-L,S=E}}}else if(y+=d-v,v<A){A-=v;do{E[i++]=h[y++]}while(--v);y=i-L,S=E}for(;A>2;)E[i++]=S[y++],E[i++]=S[y++],E[i++]=S[y++],A-=3;A&&(E[i++]=S[y++],A>1&&(E[i++]=S[y++]))}else{y=i-L;do{E[i++]=E[y++],E[i++]=E[y++],E[i++]=E[y++],A-=3}while(A>2);A&&(E[i++]=E[y++],A>1&&(E[i++]=E[y++]))}break}}break}}while(a<r&&i<s);a-=A=_>>3,f&=(1<<(_-=A<<3))-1,e.next_in=a,e.next_out=i,e.avail_in=a<r?r-a+5:5-(a-r),e.avail_out=i<s?s-i+257:257-(i-s),n.hold=f,n.bits=_}},function(e,t,n){"use strict";var a=n(16),r=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],i=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],l=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],s=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];e.exports=function(e,t,n,o,u,c,d,h){var f,_,m,p,g,b,w,v,A,L=h.bits,y=0,S=0,T=0,E=0,x=0,k=0,M=0,I=0,U=0,P=0,R=null,O=0,C=new a.Buf16(16),B=new a.Buf16(16),F=null,D=0;for(y=0;y<=15;y++)C[y]=0;for(S=0;S<o;S++)C[t[n+S]]++;for(x=L,E=15;E>=1&&0===C[E];E--);if(x>E&&(x=E),0===E)return u[c++]=20971520,u[c++]=20971520,h.bits=1,0;for(T=1;T<E&&0===C[T];T++);for(x<T&&(x=T),I=1,y=1;y<=15;y++)if(I<<=1,(I-=C[y])<0)return-1;if(I>0&&(0===e||1!==E))return-1;for(B[1]=0,y=1;y<15;y++)B[y+1]=B[y]+C[y];for(S=0;S<o;S++)0!==t[n+S]&&(d[B[t[n+S]]++]=S);if(0===e?(R=F=d,b=19):1===e?(R=r,O-=257,F=i,D-=257,b=256):(R=l,F=s,b=-1),P=0,S=0,y=T,g=c,k=x,M=0,m=-1,p=(U=1<<x)-1,1===e&&U>852||2===e&&U>592)return 1;for(;;){w=y-M,d[S]<b?(v=0,A=d[S]):d[S]>b?(v=F[D+d[S]],A=R[O+d[S]]):(v=96,A=0),f=1<<y-M,T=_=1<<k;do{u[g+(P>>M)+(_-=f)]=w<<24|v<<16|A|0}while(0!==_);for(f=1<<y-1;P&f;)f>>=1;if(0!==f?(P&=f-1,P+=f):P=0,S++,0==--C[y]){if(y===E)break;y=t[n+d[S]]}if(y>x&&(P&p)!==m){for(0===M&&(M=x),g+=T,I=1<<(k=y-M);k+M<E&&!((I-=C[k+M])<=0);)k++,I<<=1;if(U+=1<<k,1===e&&U>852||2===e&&U>592)return 1;u[m=P&p]=x<<24|k<<16|g-c|0}}return 0!==P&&(u[g+P]=y-M<<24|64<<16|0),h.bits=x,0}},function(e,t,n){"use strict";e.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(86),r=n(260),i=n(261),l=n(262),s=n(265),o=n(267),u=n(270),c=n(271),d=n(272),h=n(273),f=n(275),_=n(278),m=n(281),p=n(282),g=n(283),b=n(285),w=n(286),v=n(287),A=n(288);t.default={Map:a.default,doo:r.default,imp:i.default,mmp:l.default,shd:s.default,w3c:o.default,w3d:u.default,w3e:c.default,w3i:d.default,w3o:h.default,w3r:f.default,w3s:_.default,w3u:m.default,wct:p.default,wpm:g.default,wtg:b.default,wts:w.default,unitsdoo:v.default,w3f:A.default}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(237);t.default=class{constructor(){this.id="\0\0\0\0",this.variation=0,this.location=new Float32Array(3),this.angle=0,this.scale=new Float32Array([1,1,1]),this.flags=0,this.life=0,this.itemTable=-1,this.itemSets=[],this.editorId=0,this.u1=new Uint8Array(8)}load(e,t){if(this.id=e.read(4),this.variation=e.readInt32(),e.readFloat32Array(this.location),this.angle=e.readFloat32(),e.readFloat32Array(this.scale),this.flags=e.readUint8(),this.life=e.readUint8(),t>7){this.itemTable=e.readUint32();for(let t=0,n=e.readUint32();t<n;t++){let t=new a.default;t.load(e),this.itemSets.push(t)}}this.editorId=e.readInt32()}save(e,t){if(e.write(this.id),e.writeInt32(this.variation),e.writeFloat32Array(this.location),e.writeFloat32(this.angle),e.writeFloat32Array(this.scale),e.writeUint8(this.flags),e.writeUint8(this.life),t>7){e.writeUint32(this.itemTable),e.writeUint32(this.itemSets.length);for(let t of this.itemSets)t.save(e)}e.writeInt32(this.editorId)}getByteLength(e){let t=42;if(e>7){t+=8;for(let e of this.itemSets)t+=e.getByteLength()}return t}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(238);t.default=class{constructor(){this.items=[]}load(e){for(let t=0,n=e.readUint32();t<n;t++){let t=new a.default;t.load(e),this.items.push(t)}}save(e){e.writeUint32(this.items.length);for(let t of this.items)t.save(e)}getByteLength(){return 4+8*this.items.length}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(){this.id="\0\0\0\0",this.chance=0}load(e){this.id=e.read(4),this.chance=e.readInt32()}save(e){e.write(this.id),e.writeInt32(this.chance)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(){this.id="\0\0\0\0",this.u1=0,this.location=new Uint32Array(2)}load(e,t){this.id=e.read(4),this.u1=e.readUint32(),e.readUint32Array(this.location)}save(e,t){e.write(this.id),e.writeUint32(this.u1),e.writeUint32Array(this.location)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(){this.isCustom=0,this.path=""}load(e){this.isCustom=e.readUint8(),this.path=e.readUntilNull()}save(e){e.writeUint8(this.isCustom),e.write(`${this.path}\0`)}getByteLength(){return 2+this.path.length}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(242);t.default=class{constructor(){this.oldId="\0\0\0\0",this.newId="\0\0\0\0",this.modifications=[]}load(e,t){this.oldId=e.read(4),this.newId=e.read(4);for(let n=0,r=e.readUint32();n<r;n++){let r=new a.default;r.load(e,t),this.modifications[n]=r}}save(e,t){this.oldId?e.write(this.oldId):e.writeUint32(0),this.newId?e.write(this.newId):e.writeUint32(0),e.writeUint32(this.modifications.length);for(let n of this.modifications)n.save(e,t)}getByteLength(e){let t=12;for(let n of this.modifications)t+=n.getByteLength(e);return t}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(){this.id="\0\0\0\0",this.variableType=0,this.levelOrVariation=0,this.dataPointer=0,this.value=0,this.u1=0}load(e,t){if(this.id=e.read(4),this.variableType=e.readInt32(),t&&(this.levelOrVariation=e.readInt32(),this.dataPointer=e.readInt32()),0===this.variableType)this.value=e.readInt32();else if(1===this.variableType||2===this.variableType)this.value=e.readFloat32();else{if(3!==this.variableType)throw new Error(`Modification: unknown variable type ${this.variableType}`);this.value=e.readUntilNull()}this.u1=e.readInt32()}save(e,t){if(e.write(this.id),e.writeInt32(this.variableType),t&&(e.writeInt32(this.levelOrVariation),e.writeInt32(this.dataPointer)),0===this.variableType)e.writeInt32(this.value);else if(1===this.variableType||2===this.variableType)e.writeFloat32(this.value);else{if(3!==this.variableType)throw new Error(`Modification: unknown variable type ${this.variableType}`);e.write(`${this.value}\0`)}e.writeInt32(this.u1)}getByteLength(e){let t=12;if(e&&(t+=8),3===this.variableType){t+=1+this.value.length}else t+=4;return t}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(){this.groundHeight=0,this.waterHeight=0,this.mapEdge=0,this.ramp=0,this.blight=0,this.water=0,this.boundary=0,this.groundTexture=0,this.cliffVariation=0,this.groundVariation=0,this.cliffTexture=0,this.layerHeight=0}load(e){this.groundHeight=(e.readInt16()-8192)/512;let t=e.readInt16();this.waterHeight=((16383&t)-8192)/512,this.mapEdge=16384&t;let n=e.readUint8();this.ramp=16&n,this.blight=32&n,this.water=64&n,this.boundary=128&n,this.groundTexture=15&n;let a=e.readUint8();this.cliffVariation=(224&a)>>>5,this.groundVariation=31&a;let r=e.readUint8();this.cliffTexture=(240&r)>>>4,this.layerHeight=15&r}save(e){e.writeInt16(512*this.groundHeight+8192),e.writeInt16(512*this.waterHeight+8192+this.mapEdge<<14),e.writeUint8(this.ramp<<4|this.blight<<5|this.water<<6|this.boundary<<7|this.groundTexture),e.writeUint8(this.cliffVariation<<5|this.groundVariation),e.writeUint8((this.cliffTexture<<4)+this.layerHeight)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(){this.id=0,this.type=0,this.race=0,this.isFixedStartPosition=0,this.name="",this.startLocation=new Float32Array(2),this.allyLowPriorities=0,this.allyHighPriorities=0}load(e){this.id=e.readInt32(),this.type=e.readInt32(),this.race=e.readInt32(),this.isFixedStartPosition=e.readInt32(),this.name=e.readUntilNull(),e.readFloat32Array(this.startLocation),this.allyLowPriorities=e.readUint32(),this.allyHighPriorities=e.readUint32()}save(e){e.writeInt32(this.id),e.writeInt32(this.type),e.writeInt32(this.race),e.writeInt32(this.isFixedStartPosition),e.write(`${this.name}\0`),e.writeFloat32Array(this.startLocation),e.writeUint32(this.allyLowPriorities),e.writeUint32(this.allyHighPriorities)}getByteLength(){return 33+this.name.length}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(){this.flags=0,this.playerMasks=0,this.name=""}load(e){this.flags=e.readUint32(),this.playerMasks=e.readUint32(),this.name=e.readUntilNull()}save(e){e.writeUint32(this.flags),e.writeUint32(this.playerMasks),e.write(`${this.name}\0`)}getByteLength(){return 9+this.name.length}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(){this.playerFlags=0,this.id="\0\0\0\0",this.levelAffected=0,this.availability=0}load(e){this.playerFlags=e.readUint32(),this.id=e.read(4),this.levelAffected=e.readInt32(),this.availability=e.readInt32()}save(e){e.writeUint32(this.playerFlags),e.write(this.id),e.writeInt32(this.levelAffected),e.writeInt32(this.availability)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(){this.playerFlags=0,this.id="\0\0\0\0"}load(e){this.playerFlags=e.readUint32(),this.id=e.read(4)}save(e){e.writeUint32(this.playerFlags),e.write(this.id)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(249);t.default=class{constructor(){this.id=0,this.name="",this.positions=0,this.columnTypes=new Int32Array(0),this.units=[]}load(e){this.id=e.readInt32(),this.name=e.readUntilNull(),this.positions=e.readInt32(),this.columnTypes=e.readInt32Array(this.positions);for(let t=0,n=e.readUint32();t<n;t++){let n=new a.default;n.load(e,this.positions),this.units[t]=n}}save(e){e.writeInt32(this.id),e.write(`${this.name}\0`),e.writeInt32(this.positions),e.writeInt32Array(this.columnTypes),e.writeUint32(this.units.length);for(let t of this.units)t.save(e)}getByteLength(){return 13+this.name.length+this.columnTypes.byteLength+this.units.length*(4+4*this.positions)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(){this.chance=0,this.ids=[]}load(e,t){this.chance=e.readInt32();for(let n=0;n<t;n++)this.ids[n]=e.read(4,!0)}save(e){e.writeInt32(this.chance);for(let t of this.ids)e.write(t)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(251);t.default=class{constructor(){this.id=0,this.name="",this.sets=[]}load(e){this.id=e.readInt32(),this.name=e.readUntilNull();for(let t=0,n=e.readUint32();t<n;t++){let n=new a.default;n.load(e),this.sets[t]=n}}save(e){e.writeInt32(this.id),e.write(`${this.name}\0`),e.writeUint32(this.sets.length);for(let t of this.sets)t.save(e)}getByteLength(){let e=9+this.name.length;for(let t of this.sets)e+=t.getByteLength();return e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(252);t.default=class{constructor(){this.items=[]}load(e){for(let t=0,n=e.readUint32();t<n;t++){let n=new a.default;n.load(e),this.items[t]=n}}save(e){e.writeUint32(this.items.length);for(let t of this.items)t.save(e)}getByteLength(){return 4+8*this.items.length}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(){this.chance=0,this.id="\0\0\0\0"}load(e){this.chance=e.readInt32(),this.id=e.read(4)}save(e){e.writeInt32(this.chance),e.write(this.id)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(){this.id=0,this.name="",this.isComment=0}load(e,t){this.id=e.readInt32(),this.name=e.readUntilNull(),7===t&&(this.isComment=e.readInt32())}save(e,t){e.writeInt32(this.id),e.write(`${this.name}\0`),7===t&&e.writeInt32(this.isComment)}getByteLength(e){let t=5+this.name.length;return 7===e&&(t+=4),t}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(){this.name="",this.type="",this.u1=0,this.isArray=0,this.arraySize=0,this.isInitialized=0,this.initialValue=""}load(e,t){this.name=e.readUntilNull(),this.type=e.readUntilNull(),this.u1=e.readInt32(),this.isArray=e.readInt32(),7===t&&(this.arraySize=e.readInt32()),this.isInitialized=e.readInt32(),this.initialValue=e.readUntilNull()}save(e,t){e.write(`${this.name}\0`),e.write(`${this.type}\0`),e.writeInt32(this.u1),e.writeInt32(this.isArray),7===t&&e.writeInt32(this.arraySize),e.writeInt32(this.isInitialized),e.write(`${this.initialValue}\0`)}getByteLength(e){let t=15+this.name.length+this.type.length+this.initialValue.length;return 7===e&&(t+=4),t}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(256);t.default=class{constructor(){this.items=[]}load(e){for(let t=0,n=e.readInt32();t<n;t++){let n=new a.default;n.load(e),this.items[t]=n}}save(e){e.writeInt32(this.items.length);for(let t of this.items)t.save(e)}getByteLength(){return 4+8*this.items.length}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(){this.id="\0\0\0\0",this.chance=0}load(e){this.id=e.read(4),this.chance=e.readInt32()}save(e){e.write(this.id),e.writeInt32(this.chance)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(){this.slot=0,this.id="\0\0\0\0"}load(e){this.slot=e.readInt32(),this.id=e.read(4)}save(e){e.writeInt32(this.slot),e.write(this.id)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(){this.id="\0\0\0\0",this.activeForAutocast=0,this.heroLevel=1}load(e){this.id=e.read(4),this.activeForAutocast=e.readInt32(),this.heroLevel=e.readInt32()}save(e){e.write(this.id),e.writeInt32(this.activeForAutocast),e.writeInt32(this.heroLevel)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(){this.id="\0\0\0\0",this.chance=0}load(e){this.id=e.read(4),this.chance=e.readInt32()}save(e){e.write(this.id),e.writeInt32(this.chance)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(52);t.default={File:a.default}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(87);t.default={File:a.default}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(263);t.default={File:a.default}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(1),r=n(264);t.default=class{constructor(e){this.u1=0,this.icons=[],e&&this.load(e)}load(e){let t=new a.default(e);this.u1=t.readInt32();for(let e=0,n=t.readInt32();e<n;e++){let n=new r.default;n.load(t),this.icons[e]=n}}save(){let e=new ArrayBuffer(this.getByteLength()),t=new a.default(e);t.writeInt32(this.u1),t.writeUint32(this.icons.length);for(let e of this.icons)e.save(t);return e}getByteLength(){return 8+16*this.icons.length}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(){this.type=0,this.location=new Int32Array(2),this.color=new Uint8Array(4)}load(e){this.type=e.readInt32(),e.readInt32Array(this.location),e.readUint8Array(this.color)}save(e){e.writeInt32(this.type),e.writeInt32Array(this.location),e.writeUint8Array(this.color)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(266);t.default={File:a.default}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(e,t,n){this.shadows=new Uint8Array(0),e&&t&&n&&this.load(e,t,n)}load(e,t,n){this.shadows=new Uint8Array(e.slice(0,t*n*16))}save(){return this.shadows.slice().buffer}getByteLength(){return this.shadows.length}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(268);t.default={File:a.default}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(1),r=n(269);t.default=class{constructor(e){this.version=0,this.cameras=[],e&&this.load(e)}load(e){let t=new a.default(e);this.version=t.readInt32();for(let e=0,n=t.readUint32();e<n;e++){let n=new r.default;n.load(t),this.cameras[e]=n}}save(){let e=new ArrayBuffer(this.getByteLength()),t=new a.default(e);t.writeInt32(this.version),t.writeUint32(this.cameras.length);for(let e of this.cameras)e.save(t);return e}getByteLength(){let e=8;for(let t of this.cameras)e+=t.getByteLength();return e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(){this.targetLocation=new Float32Array(3),this.rotation=0,this.angleOfAttack=0,this.distance=0,this.roll=0,this.fieldOfView=0,this.farClippingPlane=0,this.nearClippingPlane=0,this.cinematicName=""}load(e){e.readFloat32Array(this.targetLocation),this.rotation=e.readFloat32(),this.angleOfAttack=e.readFloat32(),this.distance=e.readFloat32(),this.roll=e.readFloat32(),this.fieldOfView=e.readFloat32(),this.farClippingPlane=e.readFloat32(),this.nearClippingPlane=e.readFloat32(),this.cinematicName=e.readUntilNull()}save(e){e.writeFloat32Array(this.targetLocation),e.writeFloat32(this.rotation),e.writeFloat32(this.angleOfAttack),e.writeFloat32(this.distance),e.writeFloat32(this.roll),e.writeFloat32(this.fieldOfView),e.writeFloat32(this.farClippingPlane),e.writeFloat32(this.nearClippingPlane),e.write(`${this.cinematicName}\0`)}getByteLength(){return 41+this.cinematicName.length}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(53);t.default={File:a.default}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(54);t.default={File:a.default}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(55);t.default={File:a.default}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(274);t.default={File:a.default}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(1),r=n(56),i=n(53);t.default=class{constructor(e){this.version=0,this.units=null,this.items=null,this.destructables=null,this.doodads=null,this.abilities=null,this.buffs=null,this.upgrades=null,e&&this.load(e)}load(e){let t=new a.default(e);this.version=t.readInt32(),t.readInt32()&&(this.units=new r.default(t)),t.readInt32()&&(this.items=new r.default(t)),t.readInt32()&&(this.destructables=new r.default(t)),t.readInt32()&&(this.doodads=new i.default(t)),t.readInt32()&&(this.abilities=new i.default(t)),t.readInt32()&&(this.buffs=new r.default(t)),t.readInt32()&&(this.upgrades=new i.default(t))}save(){let e=new ArrayBuffer(this.getByteLength()),t=new a.default(e);return t.writeInt32(this.version),this.units?(t.writeInt32(1),this.units.save(t)):t.writeInt32(0),this.items?(t.writeInt32(1),this.items.save(t)):t.writeInt32(0),this.destructables?(t.writeInt32(1),this.destructables.save(t)):t.writeInt32(0),this.doodads?(t.writeInt32(1),this.doodads.save(t)):t.writeInt32(0),this.abilities?(t.writeInt32(1),this.abilities.save(t)):t.writeInt32(0),this.buffs?(t.writeInt32(1),this.buffs.save(t)):t.writeInt32(0),this.upgrades?(t.writeInt32(1),this.upgrades.save(t)):t.writeInt32(0),e}getByteLength(){let e=32;return this.units&&(e+=this.units.getByteLength()),this.items&&(e+=this.items.getByteLength()),this.destructables&&(e+=this.destructables.getByteLength()),this.doodads&&(e+=this.doodads.getByteLength()),this.abilities&&(e+=this.abilities.getByteLength()),this.buffs&&(e+=this.buffs.getByteLength()),this.upgrades&&(e+=this.upgrades.getByteLength()),e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(276);t.default={File:a.default}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(1),r=n(277);t.default=class{constructor(e){this.version=0,this.regions=[],e&&this.load(e)}load(e){let t=new a.default(e);this.version=t.readInt32();for(let e=0,n=t.readUint32();e<n;e++){let n=new r.default;n.load(t),this.regions[e]=n}}save(){let e=new ArrayBuffer(this.getByteLength()),t=new a.default(e);t.writeInt32(this.version),t.writeUint32(this.regions.length);for(let e of this.regions)e.save(t);return e}getByteLength(){let e=8;for(let t of this.regions)e+=t.getByteLength();return e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(){this.left=0,this.right=0,this.bottom=0,this.top=0,this.name="",this.creationNumber=0,this.weatherEffectId="\0\0\0\0",this.ambientSound="",this.color=new Uint8Array(4)}load(e){this.left=e.readFloat32(),this.right=e.readFloat32(),this.bottom=e.readFloat32(),this.top=e.readFloat32(),this.name=e.readUntilNull(),this.creationNumber=e.readUint32(),this.weatherEffectId=e.read(4),this.ambientSound=e.readUntilNull(),e.readUint8Array(this.color)}save(e){e.writeFloat32(this.left),e.writeFloat32(this.right),e.writeFloat32(this.bottom),e.writeFloat32(this.top),e.write(`${this.name}\0`),e.writeUint32(this.creationNumber),this.weatherEffectId?e.write(this.weatherEffectId):e.writeUint32(0),e.write(`${this.ambientSound}\0`),e.writeUint8Array(this.color)}getByteLength(){return 30+this.name.length+this.ambientSound.length}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(279);t.default={File:a.default}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(1),r=n(280);t.default=class{constructor(e){this.version=0,this.sounds=[],e&&this.load(e)}load(e){let t=new a.default(e);this.version=t.readInt32();for(let e=0,n=t.readUint32();e<n;e++){let n=new r.default;n.load(t),this.sounds[e]=n}}save(){let e=new ArrayBuffer(this.getByteLength()),t=new a.default(e);t.writeInt32(this.version),t.writeUint32(this.sounds.length);for(let e of this.sounds)e.save(t);return e}getByteLength(){let e=8;for(let t of this.sounds)e+=t.getByteLength();return e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(){this.name="",this.file="",this.eaxEffect="",this.flags=0,this.fadeInRate=0,this.fadeOutRate=0,this.volume=0,this.pitch=0,this.u1=0,this.u2=0,this.channel=0,this.minDistance=0,this.maxDistance=0,this.distanceCutoff=0,this.u3=0,this.u4=0,this.u5=0,this.u6=0,this.u7=0,this.u8=0}load(e){this.name=e.readUntilNull(),this.file=e.readUntilNull(),this.eaxEffect=e.readUntilNull(),this.flags=e.readUint32(),this.fadeInRate=e.readInt32(),this.fadeOutRate=e.readInt32(),this.volume=e.readInt32(),this.pitch=e.readFloat32(),this.u1=e.readFloat32(),this.u2=e.readInt32(),this.channel=e.readInt32(),this.minDistance=e.readFloat32(),this.maxDistance=e.readFloat32(),this.distanceCutoff=e.readFloat32(),this.u3=e.readFloat32(),this.u4=e.readFloat32(),this.u5=e.readInt32(),this.u6=e.readFloat32(),this.u7=e.readFloat32(),this.u8=e.readFloat32()}save(e){e.write(`${this.name}\0`),e.write(`${this.file}\0`),e.write(`${this.eaxEffect}\0`),e.writeUint32(this.flags),e.writeUint32(this.fadeInRate),e.writeUint32(this.fadeOutRate),e.writeUint32(this.volume),e.writeFloat32(this.pitch),e.writeFloat32(this.u1),e.writeInt32(this.u2),e.writeInt32(this.channel),e.writeFloat32(this.minDistance),e.writeFloat32(this.maxDistance),e.writeFloat32(this.distanceCutoff),e.writeFloat32(this.u3),e.writeFloat32(this.u4),e.writeInt32(this.u5),e.writeFloat32(this.u6),e.writeFloat32(this.u7),e.writeFloat32(this.u8)}getByteLength(){return 71+this.name.length+this.file.length+this.eaxEffect.length}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(56);t.default={File:a.default}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(89);t.default={File:a.default}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(284);t.default={File:a.default}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(1);t.default=class{constructor(e){this.version=0,this.size=new Int32Array(2),this.pathing=new Uint8Array(0),e&&this.load(e)}load(e){let t=new a.default(e);return"MP3W"===t.read(4)&&(this.version=t.readInt32(),t.readInt32Array(this.size),this.pathing=t.readUint8Array(this.size[0]*this.size[1]),!0)}save(){let e=new ArrayBuffer(this.getByteLength()),t=new a.default(e);return t.write("MP3W"),t.writeInt32(this.version),t.writeInt32Array(this.size),t.writeUint8Array(this.pathing),e}getByteLength(){return 16+this.size[0]*this.size[1]}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(91);t.default={File:a.default}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(95);t.default={File:a.default}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(35);t.default={File:a.default}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(289);t.default={File:a.default}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(1),r=n(290),i=n(291);t.default=class{constructor(e){this.version=0,this.campaignVersion=0,this.editorVersion=0,this.name="",this.difficulty="",this.author="",this.description="",this.mode=-1,this.backgroundScreen=-1,this.backgroundScreenPath="",this.minimapImagePath="",this.ambientSound=0,this.ambientSoundPath="",this.terrainFog=0,this.fogStartZ=0,this.fogEndZ=0,this.fogDensity=0,this.fogColor=new Uint8Array(4),this.userInterface=-1,this.mapTitles=[],this.mapOrders=[],e&&this.load(e)}load(e){let t=new a.default(e);this.version=t.readInt32(),this.campaignVersion=t.readInt32(),this.editorVersion=t.readInt32(),this.name=t.readUntilNull(),this.difficulty=t.readUntilNull(),this.author=t.readUntilNull(),this.description=t.readUntilNull(),this.mode=t.readInt32(),this.backgroundScreen=t.readInt32(),this.backgroundScreenPath=t.readUntilNull(),this.minimapImagePath=t.readUntilNull(),this.ambientSound=t.readInt32(),this.ambientSoundPath=t.readUntilNull(),this.terrainFog=t.readInt32(),this.fogStartZ=t.readFloat32(),this.fogEndZ=t.readFloat32(),this.fogDensity=t.readFloat32(),t.readUint8Array(this.fogColor),this.userInterface=t.readInt32();for(let e=0,n=t.readUint32();e<n;e++){let n=new r.default;n.load(t),this.mapTitles[e]=n}for(let e=0,n=t.readUint32();e<n;e++){let n=new i.default;n.load(t),this.mapOrders[e]=n}}save(){let e=new ArrayBuffer(this.getByteLength()),t=new a.default(e);t.writeInt32(this.version),t.writeInt32(this.campaignVersion),t.writeInt32(this.editorVersion),t.write(`${this.name}\0`),t.write(`${this.difficulty}\0`),t.write(`${this.author}\0`),t.write(`${this.description}\0`),t.writeInt32(this.mode),t.writeInt32(this.backgroundScreen),t.write(`${this.backgroundScreenPath}\0`),t.write(`${this.minimapImagePath}\0`),t.writeInt32(this.ambientSound),t.write(`${this.ambientSoundPath}\0`),t.writeInt32(this.terrainFog),t.writeFloat32(this.fogStartZ),t.writeFloat32(this.fogEndZ),t.writeFloat32(this.fogDensity),t.writeUint8Array(this.fogColor),t.writeInt32(this.userInterface),t.writeUint32(this.mapTitles.length);for(let e of this.mapTitles)e.save(t);t.writeUint32(this.mapOrders.length);for(let e of this.mapOrders)e.save(t);return e}getByteLength(){let e=63+this.name.length+this.difficulty.length+this.author.length+this.description.length+this.backgroundScreenPath.length+this.minimapImagePath.length+this.ambientSoundPath.length;for(let t of this.mapTitles)e+=t.getByteLength();for(let t of this.mapOrders)e+=t.getByteLength();return e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(){this.visible=0,this.chapterTitle="",this.mapTitle="",this.path=""}load(e){this.visible=e.readInt32(),this.chapterTitle=e.readUntilNull(),this.mapTitle=e.readUntilNull(),this.path=e.readUntilNull()}save(e){e.writeInt32(this.visible),e.write(`${this.chapterTitle}\0`),e.write(`${this.mapTitle}\0`),e.write(`${this.path}\0`)}getByteLength(){return 7+this.chapterTitle.length+this.mapTitle.length+this.path.length}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(){this.u1=0,this.path=""}load(e){this.u1=e.readInt8(),this.path=e.readUntilNull()}save(e){e.writeInt8(this.u1),e.write(`${this.path}\0`)}getByteLength(){return 2+this.path.length}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(97);t.default={Image:a.default}},function(e,t,n){"use strict";let a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=function(){function e(e){this.message="JPEG error: "+e}return e.prototype=new Error,e.prototype.name="JpegError",e.constructor=e,e}(),i=function(){let e=new Uint8Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]),t=4017,n=799,i=3406,l=2276,s=1567,o=3784,u=5793,c=2896;function d(){this.decodeTransform=null,this.colorTransform=-1}function h(e,t){let n,a,r=0,i=[],l=16;for(;l>0&&!e[l-1];)l--;i.push({children:[],index:0});let s,o=i[0];for(n=0;n<l;n++){for(a=0;a<e[n];a++){for(o=i.pop(),o.children[o.index]=t[r];o.index>0;)o=i.pop();for(o.index++,i.push(o);i.length<=n;)i.push(s={children:[],index:0}),o.children[o.index]=s.children,o=s;r++}n+1<l&&(i.push(s={children:[],index:0}),o.children[o.index]=s.children,o=s)}return i[0].children}function f(e,t,n){return 64*((e.blocksPerLine+1)*t+n)}function _(t,n,i,l,s,o,u,c,d){let h=i.mcusPerLine,_=i.progressive,m=n,p=0,b=0;function w(){if(b>0)return b--,p>>b&1;if(p=t[n++],255===p){let e=t[n++];if(e)throw new r("unexpected marker "+(p<<8|e).toString(16))}return b=7,p>>>7}function v(e){let t=e;for(;;){if(t=t[w()],"number"==typeof t)return t;if("object"!==(void 0===t?"undefined":a(t)))throw new r("invalid huffman sequence")}}function A(e){let t=0;for(;e>0;)t=t<<1|w(),e--;return t}function L(e){if(1===e)return 1===w()?1:-1;let t=A(e);return t>=1<<e-1?t:t+(-1<<e)+1}let y=0;let S,T=0;function E(e,t,n,a,r){let i=n%h;t(e,f(e,(n/h|0)*e.v+a,i*e.h+r))}function x(e,t,n){t(e,f(e,n/e.blocksPerLine|0,n%e.blocksPerLine))}let k,M,I,U,P,R,O=l.length;R=_?0===o?0===c?function(e,t){let n=v(e.huffmanTableDC),a=0===n?0:L(n)<<d;e.blockData[t]=e.pred+=a}:function(e,t){e.blockData[t]|=w()<<d}:0===c?function(t,n){if(y>0)return void y--;let a=o,r=u;for(;a<=r;){let r=v(t.huffmanTableAC),i=15&r,l=r>>4;if(0===i){if(l<15){y=A(l)+(1<<l)-1;break}a+=16;continue}a+=l;let s=e[a];t.blockData[n+s]=L(i)*(1<<d),a++}}:function(t,n){let a,i,l=o,s=u,c=0;for(;l<=s;){let s=e[l];switch(T){case 0:if(i=v(t.huffmanTableAC),a=15&i,c=i>>4,0===a)c<15?(y=A(c)+(1<<c),T=4):(c=16,T=1);else{if(1!==a)throw new r("invalid ACn encoding");S=L(a),T=c?2:3}continue;case 1:case 2:t.blockData[n+s]?t.blockData[n+s]+=w()<<d:(c--,0===c&&(T=2===T?3:0));break;case 3:t.blockData[n+s]?t.blockData[n+s]+=w()<<d:(t.blockData[n+s]=S<<d,T=0);break;case 4:t.blockData[n+s]&&(t.blockData[n+s]+=w()<<d)}l++}4===T&&(y--,0===y&&(T=0))}:function(t,n){let a=v(t.huffmanTableDC),r=0===a?0:L(a);t.blockData[n]=t.pred+=r;let i=1;for(;i<64;){let a=v(t.huffmanTableAC),r=15&a,l=a>>4;if(0===r){if(l<15)break;i+=16;continue}i+=l;let s=e[i];t.blockData[n+s]=L(r),i++}};let C,B,F,D,G=0;for(B=1===O?l[0].blocksPerLine*l[0].blocksPerColumn:h*i.mcusPerColumn;G<B;){let e=s?Math.min(B-G,s):B;for(M=0;M<O;M++)l[M].pred=0;if(y=0,1===O)for(k=l[0],P=0;P<e;P++)x(k,R,G),G++;else for(P=0;P<e;P++){for(M=0;M<O;M++)for(k=l[M],F=k.h,D=k.v,I=0;I<D;I++)for(U=0;U<F;U++)E(k,R,G,I,U);G++}b=0,C=g(t,n),C&&C.invalid&&(n=C.offset);let a=C&&C.marker;if(!a||a<=65280)throw new r("marker was not found");if(!(a>=65488&&a<=65495))break;n+=2}return C=g(t,n),C&&C.invalid&&(n=C.offset),n-m}function m(e,a,d){let h,f,_,m,p,g,b,w,v,A,L,y,S,T,E,x,k,M=e.quantizationTable,I=e.blockData;if(!M)throw new r("missing required Quantization Table.");for(let e=0;e<64;e+=8)v=I[a+e],A=I[a+e+1],L=I[a+e+2],y=I[a+e+3],S=I[a+e+4],T=I[a+e+5],E=I[a+e+6],x=I[a+e+7],v*=M[e],0!=(A|L|y|S|T|E|x)?(A*=M[e+1],L*=M[e+2],y*=M[e+3],S*=M[e+4],T*=M[e+5],E*=M[e+6],x*=M[e+7],h=u*v+128>>8,f=u*S+128>>8,_=L,m=E,p=c*(A-x)+128>>8,w=c*(A+x)+128>>8,g=y<<4,b=T<<4,h=h+f+1>>1,f=h-f,k=_*o+m*s+128>>8,_=_*s-m*o+128>>8,m=k,p=p+b+1>>1,b=p-b,w=w+g+1>>1,g=w-g,h=h+m+1>>1,m=h-m,f=f+_+1>>1,_=f-_,k=p*l+w*i+2048>>12,p=p*i-w*l+2048>>12,w=k,k=g*n+b*t+2048>>12,g=g*t-b*n+2048>>12,b=k,d[e]=h+w,d[e+7]=h-w,d[e+1]=f+b,d[e+6]=f-b,d[e+2]=_+g,d[e+5]=_-g,d[e+3]=m+p,d[e+4]=m-p):(k=u*v+512>>10,d[e]=k,d[e+1]=k,d[e+2]=k,d[e+3]=k,d[e+4]=k,d[e+5]=k,d[e+6]=k,d[e+7]=k);for(let e=0;e<8;++e)v=d[e],A=d[e+8],L=d[e+16],y=d[e+24],S=d[e+32],T=d[e+40],E=d[e+48],x=d[e+56],0!=(A|L|y|S|T|E|x)?(h=u*v+2048>>12,f=u*S+2048>>12,_=L,m=E,p=c*(A-x)+2048>>12,w=c*(A+x)+2048>>12,g=y,b=T,h=4112+(h+f+1>>1),f=h-f,k=_*o+m*s+2048>>12,_=_*s-m*o+2048>>12,m=k,p=p+b+1>>1,b=p-b,w=w+g+1>>1,g=w-g,h=h+m+1>>1,m=h-m,f=f+_+1>>1,_=f-_,k=p*l+w*i+2048>>12,p=p*i-w*l+2048>>12,w=k,k=g*n+b*t+2048>>12,g=g*t-b*n+2048>>12,b=k,v=h+w,x=h-w,A=f+b,E=f-b,L=_+g,T=_-g,y=m+p,S=m-p,v=v<16?0:v>=4080?255:v>>4,A=A<16?0:A>=4080?255:A>>4,L=L<16?0:L>=4080?255:L>>4,y=y<16?0:y>=4080?255:y>>4,S=S<16?0:S>=4080?255:S>>4,T=T<16?0:T>=4080?255:T>>4,E=E<16?0:E>=4080?255:E>>4,x=x<16?0:x>=4080?255:x>>4,I[a+e]=v,I[a+e+8]=A,I[a+e+16]=L,I[a+e+24]=y,I[a+e+32]=S,I[a+e+40]=T,I[a+e+48]=E,I[a+e+56]=x):(k=u*v+8192>>14,k=k<-2040?0:k>=2024?255:k+2056>>4,I[a+e]=k,I[a+e+8]=k,I[a+e+16]=k,I[a+e+24]=k,I[a+e+32]=k,I[a+e+40]=k,I[a+e+48]=k,I[a+e+56]=k)}function p(e,t){let n=t.blocksPerLine,a=t.blocksPerColumn,r=new Int16Array(64);for(let e=0;e<a;e++)for(let a=0;a<n;a++){m(t,f(t,e,a),r)}return t.blockData}function g(e,t,n){function a(t){return e[t]<<8|e[t+1]}let r=e.length-1,i=n<t?n:t;if(t>=r)return null;let l=a(t);if(l>=65472&&l<=65534)return{invalid:null,marker:l,offset:t};let s=a(i);for(;!(s>=65472&&s<=65534);){if(++i>=r)return null;s=a(i)}return{invalid:l.toString(16),marker:s,offset:i}}return d.prototype={parse:function(t){function n(){let e=t[l]<<8|t[l+1];return l+=2,e}function a(){let e=n(),a=l+e-2,r=g(t,a,l);r&&r.invalid&&(a=r.offset);let i=t.subarray(l,a);return l+=i.length,i}function i(e){let t=Math.ceil(e.samplesPerLine/8/e.maxH),n=Math.ceil(e.scanLines/8/e.maxV);for(let a=0;a<e.components.length;a++){M=e.components[a];let r=Math.ceil(Math.ceil(e.samplesPerLine/8)*M.h/e.maxH),i=Math.ceil(Math.ceil(e.scanLines/8)*M.v/e.maxV),l=t*M.h,s=64*(n*M.v)*(l+1);M.blockData=new Int16Array(s),M.blocksPerLine=r,M.blocksPerColumn=i}e.mcusPerLine=t,e.mcusPerColumn=n}var l=0;let s,o,u=null,c=null,d=[],f=[],m=[],b=n();if(65496!==b)throw new r("SOI not found");for(b=n();65497!==b;){var w,v,A;switch(b){case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:var L=a();65504===b&&74===L[0]&&70===L[1]&&73===L[2]&&70===L[3]&&0===L[4]&&(u={version:{major:L[5],minor:L[6]},densityUnits:L[7],xDensity:L[8]<<8|L[9],yDensity:L[10]<<8|L[11],thumbWidth:L[12],thumbHeight:L[13],thumbData:L.subarray(14,14+3*L[12]*L[13])}),65518===b&&65===L[0]&&100===L[1]&&111===L[2]&&98===L[3]&&101===L[4]&&(c={version:L[5]<<8|L[6],flags0:L[7]<<8|L[8],flags1:L[9]<<8|L[10],transformCode:L[11]});break;case 65499:for(var y=n()+l-2;l<y;){let a=t[l++],i=new Uint16Array(64);if(a>>4==0)for(v=0;v<64;v++)i[e[v]]=t[l++];else{if(a>>4!=1)throw new r("DQT - invalid table spec");for(v=0;v<64;v++)i[e[v]]=n()}d[15&a]=i}break;case 65472:case 65473:case 65474:if(s)throw new r("Only single frame JPEGs supported");n(),s={},s.extended=65473===b,s.progressive=65474===b,s.precision=t[l++],s.scanLines=n(),s.samplesPerLine=n(),s.components=[],s.componentIds={};var S,T=t[l++],E=0,x=0;for(w=0;w<T;w++){S=t[l];let e=t[l+1]>>4,n=15&t[l+1];E<e&&(E=e),x<n&&(x=n);let a=t[l+2];A=s.components.push({h:e,v:n,quantizationId:a,quantizationTable:null}),s.componentIds[S]=A-1,l+=3}s.maxH=E,s.maxV=x,i(s);break;case 65476:var k=n();for(w=2;w<k;){let e=t[l++],n=new Uint8Array(16),a=0;for(v=0;v<16;v++,l++)a+=n[v]=t[l];let r=new Uint8Array(a);for(v=0;v<a;v++,l++)r[v]=t[l];w+=17+a,(e>>4==0?m:f)[15&e]=h(n,r)}break;case 65501:n(),o=n();break;case 65498:n();var M,I=t[l++],U=[];for(w=0;w<I;w++){let e=s.componentIds[t[l++]];M=s.components[e];let n=t[l++];M.huffmanTableDC=m[n>>4],M.huffmanTableAC=f[15&n],U.push(M)}var P=t[l++],R=t[l++],O=t[l++],C=_(t,l,s,U,o,P,R,O>>4,15&O);l+=C;break;case 65535:255!==t[l]&&l--;break;default:if(255===t[l-3]&&t[l-2]>=192&&t[l-2]<=254){l-=3;break}throw new r("unknown marker "+b.toString(16))}b=n()}for(this.width=s.samplesPerLine,this.height=s.scanLines,this.jfif=u,this.adobe=c,this.components=[],w=0;w<s.components.length;w++){let e=d[(M=s.components[w]).quantizationId];e&&(M.quantizationTable=e),this.components.push({output:p(0,M),scaleX:M.h/s.maxH,scaleY:M.v/s.maxV,blocksPerLine:M.blocksPerLine,blocksPerColumn:M.blocksPerColumn})}this.numComponents=this.components.length},getData:function(e){let t=e.data,n=this.components,a=new Uint8Array((n[0].blocksPerLine<<3)*n[0].blocksPerColumn*8);[n[0],n[2]]=[n[2],n[0]];for(let e=0,s=n.length;e<s;e++){let o=n[e],u=o.blocksPerLine,c=o.blocksPerColumn,d=u<<3;var r,i,l=0;for(let e=0;e<c;e++){let t=e<<3;for(let n=0;n<u;n++){let s=f(o,e,n),u=0,c=n<<3;for(r=0;r<8;r++){l=(t+r)*d;for(i=0;i<8;i++)a[l+c+i]=o.output[s+u++]}}}let h=e;for(let e=0;e<this.height;e++)for(let n=0;n<this.width;n++)t[h]=a[e*d+n],h+=s}return t}},d}();t.JpegImage=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(99);t.default={Image:a.DdsImage,FOURCC_DXT1:a.FOURCC_DXT1,FOURCC_DXT3:a.FOURCC_DXT3,FOURCC_DXT5:a.FOURCC_DXT5,FOURCC_ATI2:a.FOURCC_ATI2}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(98),r=a.default(4,8),i=a.default(5,8),l=a.default(6,8),s=new Uint16Array(4),o=new Uint8Array(12),u=new Uint8Array(8),c=new Uint8Array(8),d=new Uint8Array(8);function h(e,t,n){let a=31&t,r=2016&t,i=63488&t,l=31&n,s=2016&n,o=63488&n;e[0]=t,e[1]=n,e[2]=5*a+3*l>>3|5*r+3*s>>3&2016|5*i+3*o>>3&63488,e[3]=5*l+3*a>>3|5*s+3*r>>3&2016|5*o+3*i>>3&63488}function f(e,t,n){let a=(t>>11&31)*i,r=(t>>5&63)*l,s=(31&t)*i,o=(n>>11&31)*i,u=(n>>5&63)*l,c=(31&n)*i;e[0]=a,e[1]=r,e[2]=s,e[3]=o,e[4]=u,e[5]=c,e[6]=5*a+3*o>>3,e[7]=5*r+3*u>>3,e[8]=5*s+3*c>>3,e[9]=5*o+3*a>>3,e[10]=5*u+3*r>>3,e[11]=5*c+3*s>>3}function _(e,t,n){e[0]=t,e[1]=n,t>n?(e[2]=(6*t+1*n)/7,e[3]=(5*t+2*n)/7,e[4]=(4*t+3*n)/7,e[5]=(3*t+4*n)/7,e[6]=(2*t+5*n)/7,e[7]=(1*t+6*n)/7):(e[2]=(4*t+1*n)/5,e[3]=(3*t+2*n)/5,e[4]=(2*t+3*n)/5,e[5]=(1*t+4*n)/5,e[6]=0,e[7]=1)}t.decodeDxt1=function(e,t,n){let a=new Uint16Array(t*n);for(let r=0,i=n/4;r<i;r++)for(let n=0,i=t/4;n<i;n++){let l=8*(r*i+n);h(s,e[l]+256*e[l+1],e[l+2]+256*e[l+3]);let o=4*r*t+4*n,u=e[l+4]|e[l+5]<<8|e[l+6]<<16|e[l+7]<<24;for(let e=0;e<4;e++){let n=8*e,r=o+e*t;for(let e=0;e<4;e++)a[r+e]=s[u>>n+2*e&3]}}return a},t.decodeDxt3=function(e,t,n){let a=new Uint8Array(t*n*4),i=4*t;for(let l=0,s=t/4;l<s;l++)for(let s=0,u=n/4;s<u;s++){let n=16*(l*u+s);f(o,e[n+8]+256*e[n+9],e[n+10]+256*e[n+11]);let c=16*l*t+16*s;for(let t=0;t<4;t++){let l=e[n+2*t]+256*e[n+1+2*t],s=e[n+12+t];for(let e=0;e<4;e++){let t=c+4*e,n=3*(s>>2*e&3);a[t+0]=o[n+0],a[t+1]=o[n+1],a[t+2]=o[n+2],a[t+3]=(l>>4*e&15)*r}c+=i}}return a},t.decodeDxt5=function(e,t,n){let a=new Uint8Array(t*n*4),r=4*t;for(let c=0,d=n/4;c<d;c++)for(let n=0,d=t/4;n<d;n++){let h=16*(c*d+n);i=u,l=e[h],s=e[h+1],i[0]=l,i[1]=s,l>s?(i[2]=54*l+9*s>>6,i[3]=45*l+18*s>>6,i[4]=36*l+27*s>>6,i[5]=27*l+36*s>>6,i[6]=18*l+45*s>>6,i[7]=9*l+54*s>>6):(i[2]=12*l+3*s>>4,i[3]=9*l+6*s>>4,i[4]=6*l+9*s>>4,i[5]=3*l+12*s>>4,i[6]=0,i[7]=255),f(o,e[h+8]+256*e[h+9],e[h+10]+256*e[h+11]);let _=16*c*t+16*n;for(let t=0;t<2;t++){let n=h+2+3*t,i=h+12+2*t,l=e[n]+256*(e[n+1]+256*e[n+2]);for(let t=0;t<2;t++){let n=e[i+t];for(let e=0;e<4;e++){let r=_+4*e,i=3*(n>>2*e&3),s=l>>12*t+3*e&7;a[r+0]=o[i+0],a[r+1]=o[i+1],a[r+2]=o[i+2],a[r+3]=u[s]}_+=r}}}var i,l,s;return a},t.decodeRgtc=function(e,t,n){let a=new Uint8Array(t*n*2),r=2*t;for(let i=0,l=n/4;i<l;i++)for(let n=0,l=t/4;n<l;n++){let s=16*(i*l+n);_(c,e[s],e[s+1]),_(d,e[s+8],e[s+9]);let o=8*i*t+8*n;for(let t=0;t<2;t++){let n=s+3*t,i=e[n+2]+256*(e[n+3]+256*e[n+4]),l=e[n+10]+256*(e[n+11]+256*e[n+12]);for(let e=0;e<2;e++){let t=4*e;for(let e=0;e<4;e++){let n=o+2*e,r=3*(t+e);a[n+1]=c[i>>r&7],a[n+2]=d[l>>r&7]}o+=r}}}return a}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(58),r=n(100),i=n(101),l=n(308);t.default={ModelViewer:a.default,Scene:r.default,Camera:i.default,handlers:l.default}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(e.size!==t.size)return!1;for(let[n,a]of e){let e=t.get(n);if(e!==a||void 0===e&&!t.has(n))return!1}return!0}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(299),r=n(300);t.default=class{constructor(e,t={alpha:!1}){this.shaderUnits=new Map,this.shaderPrograms=new Map,this.currentShaderProgram=null,this.extensions={};let n=e.getContext("webgl",t);if(n||(n=e.getContext("experimental-webgl",t)),!n)throw new Error("WebGL: Failed to create a WebGL context!");let a=new Uint8ClampedArray([0,0,0,255,0,0,0,255,0,0,0,255,0,0,0,255]),r=n.createTexture();n.bindTexture(n.TEXTURE_2D,r),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.NEAREST),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,2,2,0,n.RGBA,n.UNSIGNED_BYTE,a);let i=n.createTexture();n.bindTexture(n.TEXTURE_CUBE_MAP,i),n.texParameteri(n.TEXTURE_CUBE_MAP,n.TEXTURE_MAG_FILTER,n.NEAREST),n.texParameteri(n.TEXTURE_CUBE_MAP,n.TEXTURE_MIN_FILTER,n.NEAREST);for(let e=0;e<6;e++)n.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+e,0,n.RGBA,2,2,0,n.RGBA,n.UNSIGNED_BYTE,a);this.gl=n,this.emptyTexture=r,this.emptyCubeMap=i,n.depthFunc(n.LEQUAL),n.enable(n.DEPTH_TEST)}ensureExtension(e){let t=this.gl.getExtension(e);return!!t&&(this.extensions[e]=t,!0)}createShaderUnit(e,t){let n=this.shaderUnits;return n.has(e)||n.set(e,new a.default(this.gl,e,t)),n.get(e)}createShaderProgram(e,t){let n=this.gl,a=this.createShaderUnit(e,n.VERTEX_SHADER),i=this.createShaderUnit(t,n.FRAGMENT_SHADER),l=this.shaderPrograms;if(a.ok&&i.ok){let n=e+t;l.has(n)||l.set(n,new r.default(this,a,i));let s=l.get(n);if(s.ok)return s}return null}enableVertexAttribs(e,t){let n=this.gl;for(let a=e;a<t;a++)n.enableVertexAttribArray(a)}disableVertexAttribs(e,t){let n=this.gl;for(let a=e;a<t;a++)n.disableVertexAttribArray(a)}useShaderProgram(e){let t=this.currentShaderProgram;if(e&&e.ok&&e!==t){let n=0,a=e.attribsCount;t&&(n=t.attribsCount),this.gl.useProgram(e.webglResource),a>n?this.enableVertexAttribs(n,a):a<n&&this.disableVertexAttribs(a,n),this.currentShaderProgram=e}}bindTexture(e,t){let n=this.gl;n.activeTexture(n.TEXTURE0+t),e&&e.ok?n.bindTexture(n.TEXTURE_2D,e.webglResource):n.bindTexture(n.TEXTURE_2D,this.emptyTexture)}bindCubeMap(e,t){let n=this.gl;n.activeTexture(n.TEXTURE0+t),e&&e.ok?n.bindTexture(n.TEXTURE_CUBE_MAP,e.webglResource):n.bindTexture(n.TEXTURE_CUBE_MAP,this.emptyCubeMap)}setTextureMode(e,t,n,a){let r=this.gl;r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,e),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,t),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,n),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,a)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let a=/:(\d+):/g;t.default=class{constructor(e,t,n){this.ok=!1;let r=e.createShader(n);if(this.webglResource=r,this.src=t,this.shaderType=n,e.shaderSource(r,t),e.compileShader(r),e.getShaderParameter(r,e.COMPILE_STATUS))this.ok=!0;else{let n=e.getShaderInfoLog(r);if(n){let e=t.split("\n");console.error("Shader unit failed to compile!"),console.error(n);let r=a.exec(n);for(;r;){let t=parseInt(r[1]);console.error(t+": "+e[t-1]),r=a.exec(n)}}else console.error("A shader unit failed to compile due to unknown reasons")}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(e,t,n){this.ok=!1,this.uniforms={},this.attribs={},this.attribsCount=0;let a=e.gl,r=a.createProgram();if(this.webgl=e,this.webglResource=r,this.shaders=[t,n],a.attachShader(r,t.webglResource),a.attachShader(r,n.webglResource),a.linkProgram(r),a.getProgramParameter(r,a.LINK_STATUS)){for(let e=0,t=a.getProgramParameter(r,a.ACTIVE_UNIFORMS);e<t;e++){let t=a.getActiveUniform(r,e);if(t)if(1===t.size)this.uniforms[t.name]=a.getUniformLocation(r,t.name);else{let e=t.name.substr(0,t.name.length-3);for(let n=0;n<t.size;n++){let t=e+"["+n+"]";this.uniforms[t]=a.getUniformLocation(r,t)}}}for(let e=0,t=a.getProgramParameter(r,a.ACTIVE_ATTRIBUTES);e<t;e++){let t=a.getActiveAttrib(r,e);if(t)if(this.attribsCount+=t.size,1===t.size)this.attribs[t.name]=a.getAttribLocation(r,t.name);else{let e=t.name.substr(0,t.name.length-3);for(let n=0;n<t.size;n++){let t=e+"["+n+"]";this.attribs[t]=a.getAttribLocation(r,t)}}}this.ok=!0}else console.error("Shader program failed to link!"),console.error(a.getProgramInfoLog(r))}use(){this.webgl.useShaderProgram(this)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(36);class r extends a.Resource{promise(){this.emit("loadstart",this)}resolve(){this.emit("loadend",this)}}t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(7);t.default=class{constructor(e,t,n,a){this.plane=-1,this.instances=[],this.visible=!1,this.left=e,this.right=t,this.bottom=n,this.top=a}add(e){this.instances.push(e)}remove(e){let t=this.instances.indexOf(e);this.instances.splice(t,1)}clear(){this.instances.length=0}isVisible(e){return this.plane=a.testCell(e.planes,this.left,this.right,this.bottom,this.top,this.plane),-1===this.plane}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(){this.objects=[],this.alive=0}add(e){this.objects[this.alive++]=e}update(e){let t=this.objects;for(let n=0;n<this.alive;n++){let a=t[n];a.update(e),a.health<=0&&(this.alive-=1,a.emitter.kill(a),n!==this.alive&&(t[n]=t[this.alive],n-=1))}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(36);class r extends a.Resource{constructor(){super(...arguments),this.data=null}load(e){this.data=e}}t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(e,t=4){this.size=0,this.arrayBuffer=null,this.byteView=null,this.floatView=null,this.gl=e,this.buffer=e.createBuffer(),this.reserve(t)}reserve(e){if(this.size<e){let t=this.gl;this.size=4*Math.ceil(e/4),t.bindBuffer(t.ARRAY_BUFFER,this.buffer),t.bufferData(t.ARRAY_BUFFER,this.size,t.DYNAMIC_DRAW),this.arrayBuffer=new ArrayBuffer(this.size),this.byteView=new Uint8Array(this.arrayBuffer),this.floatView=new Float32Array(this.arrayBuffer)}}bindAndUpdate(e=this.size){let t=this.gl,n=this.byteView;t.bindBuffer(t.ARRAY_BUFFER,this.buffer),t.bufferSubData(t.ARRAY_BUFFER,0,n.subarray(0,e))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(e,t){let n;n=t?new Map(t):new Map,this.model=e,this.textures=n}get(e){return this.textures.get(e)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(60),r=n(22),i=n(104);class l extends r.default{async load(){let e=[];for(let t=0;t<6;t++){let n=this.pathSolver(t)[0];i.isImageSource(n)?e[t]=new Promise(e=>e({ok:!0,data:n})):e[t]=a.fetchDataType(n,"image")}let t=await Promise.all(e);for(let e=0;e<6;e++)if(!t[e].ok)throw new Error("Failed to load a cube map image");let n=this.viewer.gl;this.webglResource=n.createTexture(),n.bindTexture(n.TEXTURE_CUBE_MAP,this.webglResource),n.texParameteri(n.TEXTURE_CUBE_MAP,n.TEXTURE_MAG_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_CUBE_MAP,n.TEXTURE_MIN_FILTER,n.LINEAR_MIPMAP_LINEAR);for(let e=0;e<6;e++)n.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+e,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,t[e].data);n.generateMipmap(n.TEXTURE_CUBE_MAP)}bind(e){this.viewer.webgl.bindCubeMap(this,e)}}t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(105),r=n(61),i=n(62),l=n(63),s=n(13),o=n(64),u=n(116),c=n(401);t.default={blp:a.default,dds:r.default,geo:i.default,m3:l.default,mdx:s.default,tga:o.default,gltf:u.default,War3MapViewer:c.default}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(97),r=n(22);class i extends r.default{load(e){let t;t=e instanceof a.default?e:new a.default(e);let n=this.viewer.gl,r=n.createTexture();n.bindTexture(n.TEXTURE_2D,r);let i=t.getMipmap(0);n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,i),this.webglResource=r,this.width=i.width,this.height=i.height}}t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(99),r=n(22);class i extends r.default{load(e){let t;t=e instanceof a.DdsImage?e:new a.DdsImage(e);let n=this.viewer,r=n.gl,i=n.webgl.extensions.WEBGL_compressed_texture_s3tc,l=t.format,s=0;i&&(l===a.FOURCC_DXT1?s=i.COMPRESSED_RGB_S3TC_DXT1_EXT:l===a.FOURCC_DXT3?s=i.COMPRESSED_RGBA_S3TC_DXT3_EXT:l===a.FOURCC_DXT5&&(s=i.COMPRESSED_RGBA_S3TC_DXT5_EXT));let o=r.createTexture();this.width=t.width,this.height=t.height,this.webglResource=o,r.bindTexture(r.TEXTURE_2D,o);let u=t.mipmaps();l!==a.FOURCC_DXT1&&l!==a.FOURCC_ATI2||r.pixelStorei(r.UNPACK_ALIGNMENT,2);for(let e=0;e<u;e++){let{width:n,height:i,data:o}=t.getMipmap(e,0!==s);s?r.compressedTexImage2D(r.TEXTURE_2D,e,s,n,i,0,o):l===a.FOURCC_DXT1?r.texImage2D(r.TEXTURE_2D,e,r.RGB,n,i,0,r.RGB,r.UNSIGNED_SHORT_5_6_5,o):l===a.FOURCC_DXT3?r.texImage2D(r.TEXTURE_2D,e,r.RGBA,n,i,0,r.RGBA,r.UNSIGNED_BYTE,o):l===a.FOURCC_DXT5?r.texImage2D(r.TEXTURE_2D,e,r.RGBA,n,i,0,r.RGBA,r.UNSIGNED_BYTE,o):r.texImage2D(r.TEXTURE_2D,e,r.LUMINANCE_ALPHA,n,i,0,r.LUMINANCE_ALPHA,r.UNSIGNED_BYTE,o)}r.pixelStorei(r.UNPACK_ALIGNMENT,4),u>1&&(this.minFilter=r.LINEAR_MIPMAP_LINEAR)}}t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(37),r=n(313);class i extends a.default{constructor(){super(...arguments),this.vertexBuffer=null,this.uvBuffer=null,this.faceBuffer=null,this.edgeBuffer=null,this.faceIndexType=0,this.edgeIndexType=0,this.faceElements=0,this.edgeElements=0,this.texture=null,this.twoSided=!1,this.faceColor=new Uint8Array([255,255,255]),this.edgeColor=new Uint8Array([255,255,255]),this.renderMode=0,this.sizzle=0}createInstance(e){return new r.default(this)}load(e){const t=this.viewer.gl;let n=e.geometry,a=e.material,r=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,r),t.bufferData(t.ARRAY_BUFFER,n.vertices,t.STATIC_DRAW);let i=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,i),t.bufferData(t.ARRAY_BUFFER,n.uvs,t.STATIC_DRAW);let l=t.createBuffer();t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,l),t.bufferData(t.ELEMENT_ARRAY_BUFFER,n.faces,t.STATIC_DRAW);let s=t.createBuffer();t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,s),t.bufferData(t.ELEMENT_ARRAY_BUFFER,n.edges,t.STATIC_DRAW),this.boundingRadius=n.boundingRadius,this.vertexBuffer=r,this.uvBuffer=i,this.faceBuffer=l,this.edgeBuffer=s;let o=n.faces.BYTES_PER_ELEMENT;this.faceIndexType=1===o?t.UNSIGNED_BYTE:2===o?t.UNSIGNED_SHORT:t.UNSIGNED_INT,o=n.edges.BYTES_PER_ELEMENT,this.edgeIndexType=1===o?t.UNSIGNED_BYTE:2===o?t.UNSIGNED_SHORT:t.UNSIGNED_INT,this.faceElements=n.faces.length,this.edgeElements=n.edges.length,a.texture&&(this.texture=a.texture);let u=a.texture,c=a.twoSided,d=a.faceColor,h=a.edgeColor,f=a.renderMode,_=a.sizzle;u&&(this.texture=u),this.twoSided=c||!1,d&&this.faceColor.set(d),h&&this.edgeColor.set(h),this.renderMode=f||0,this.sizzle=_||!1}}t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(){this.x=0,this.y=0,this.z=0,this.r=0}fromExtents(e,t){let n=e[0],a=e[1],r=e[2],i=t[0]-n,l=t[1]-a,s=t[2]-r;this.x=n+i/2,this.y=a+l/2,this.z=r+s/2,this.r=Math.max(i,l,s)/2}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(106),r=n(314);class i extends a.default{constructor(){super(...arguments),this.faceColor=new Uint8Array(3),this.edgeColor=new Uint8Array(3)}load(){let e=this.model;this.setFaceColor(e.faceColor),this.setEdgeColor(e.edgeColor)}setFaceColor(e){return this.faceColor.set(e),this}setEdgeColor(e){return this.edgeColor.set(e),this}getBatch(e){return new r.default(this.scene,this.model,e)}}t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(107),r=n(62);class i extends a.default{bindAndUpdateBuffer(e){let t=this.count,n=this.instances;e.reserve(54*t);let a=e.floatView,r=e.byteView,i=48*t;for(let e=0;e<t;e++){let t=n[e],l=t.worldMatrix,s=t.faceColor,o=t.edgeColor,u=12*e;a[u+0]=l[0],a[u+1]=l[1],a[u+2]=l[2],a[u+3]=l[4],a[u+4]=l[5],a[u+5]=l[6],a[u+6]=l[8],a[u+7]=l[9],a[u+8]=l[10],a[u+9]=l[12],a[u+10]=l[13],a[u+11]=l[14],u=i+6*e,r[u+0]=s[0],r[u+1]=s[1],r[u+2]=s[2],r[u+3]=o[0],r[u+4]=o[1],r[u+5]=o[2]}e.bindAndUpdate(54*t)}render(){let e=this.count;if(e){let t=this.model,n=t.viewer,a=n.gl,i=n.webgl,l=i.extensions.ANGLE_instanced_arrays,s=r.default.shaders.standard,o=s.uniforms,u=s.attribs,c=u.a_m0,d=u.a_m1,h=u.a_m2,f=u.a_m3,_=u.a_faceColor,m=u.a_edgeColor,p=n.buffer,g=this.textureMapper;if(s.use(),this.bindAndUpdateBuffer(p),a.vertexAttribPointer(c,3,a.FLOAT,!1,48,0),a.vertexAttribPointer(d,3,a.FLOAT,!1,48,12),a.vertexAttribPointer(h,3,a.FLOAT,!1,48,24),a.vertexAttribPointer(f,3,a.FLOAT,!1,48,36),a.vertexAttribPointer(_,3,a.UNSIGNED_BYTE,!0,6,48*e),a.vertexAttribPointer(m,3,a.UNSIGNED_BYTE,!0,6,48*e+3),a.uniform1i(o.u_texture,0),a.uniformMatrix4fv(o.u_VP,!1,this.scene.camera.viewProjectionMatrix),a.bindBuffer(a.ARRAY_BUFFER,t.vertexBuffer),a.vertexAttribPointer(u.a_position,3,a.FLOAT,!1,12,0),a.bindBuffer(a.ARRAY_BUFFER,t.uvBuffer),a.vertexAttribPointer(u.a_uv,2,a.FLOAT,!1,8,0),l.vertexAttribDivisorANGLE(c,1),l.vertexAttribDivisorANGLE(d,1),l.vertexAttribDivisorANGLE(h,1),l.vertexAttribDivisorANGLE(f,1),l.vertexAttribDivisorANGLE(_,1),l.vertexAttribDivisorANGLE(m,1),t.twoSided?a.disable(a.CULL_FACE):a.enable(a.CULL_FACE),a.enable(a.DEPTH_TEST),a.depthMask(!0),a.disable(a.BLEND),1!==t.renderMode){let n=g.get(null)||t.texture;i.bindTexture(n,0);let r=o.u_hasTexture;n?(a.uniform1f(r,1),a.uniform1f(o.u_sizzle,t.sizzle?1:0)):a.uniform1f(r,0),a.uniform1f(o.u_isEdge,0),a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,t.faceBuffer),l.drawElementsInstancedANGLE(a.TRIANGLES,t.faceElements,t.faceIndexType,0,e)}0!==t.renderMode&&(a.uniform1f(o.u_isEdge,1),a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,t.edgeBuffer),l.drawElementsInstancedANGLE(a.LINES,t.edgeElements,t.edgeIndexType,0,e)),l.vertexAttribDivisorANGLE(m,0),l.vertexAttribDivisorANGLE(_,0),l.vertexAttribDivisorANGLE(f,0),l.vertexAttribDivisorANGLE(h,0),l.vertexAttribDivisorANGLE(d,0),l.vertexAttribDivisorANGLE(c,0)}}}t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default="\n uniform mat4 u_VP;\n\n// Instances\nattribute vec3 a_m0;\nattribute vec3 a_m1;\nattribute vec3 a_m2;\nattribute vec3 a_m3;\nattribute vec3 a_faceColor;\nattribute vec3 a_edgeColor;\n\n// Vertices\nattribute vec3 a_position;\nattribute vec2 a_uv;\n\nvarying vec2 v_uv;\nvarying vec3 v_faceColor;\nvarying vec3 v_edgeColor;\n\nvoid main() {\n  v_uv = a_uv;\n  v_faceColor = a_faceColor;\n  v_edgeColor = a_edgeColor;\n\n  gl_Position = u_VP * mat4(a_m0, 0.0, a_m1, 0.0, a_m2, 0.0, a_m3, 1.0) * vec4(a_position, 1.0);\n}\n"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default="\nprecision mediump float;\n    \nuniform sampler2D u_diffuseMap;\nuniform bool u_isEdge;\nuniform bool u_hasTexture;\nuniform bool u_isBGR;\n\nvarying vec2 v_uv;\nvarying vec3 v_faceColor;\nvarying vec3 v_edgeColor;\n\nvoid main() {\n  vec3 color;\n\n  if (u_isEdge) {\n    color = v_edgeColor;\n  } else {\n    color = v_faceColor;\n\n    if (u_hasTexture) {\n      vec4 texel = texture2D(u_diffuseMap, v_uv);\n\n      if (u_isBGR) {\n        texel = texel.bgra;\n      }\n\n      color *= texel.rgb;\n    }\n  }\n\n  gl_FragColor = vec4(color, 1.0);\n}\n"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(33),r=n(22);class i extends r.default{load(e){let t=this.viewer.gl,n=new DataView(e);if(2!==n.getUint8(2))throw new Error("Unsupported image type");let r=n.getUint16(12,!0),i=n.getUint16(14,!0);if(32!==n.getUint8(16))throw new Error("Unsupported bits per pixel");let l=a.scaleNPOT(new ImageData(new Uint8ClampedArray(e,18,r*i*4),r,i)),s=t.createTexture();t.bindTexture(t.TEXTURE_2D,s),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,l),this.width=l.width,this.height=l.height,this.webglResource=s}}t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(74),r=n(37),i=n(319),l=n(321),s=n(322),o=n(323),u=n(324),c=n(326),d=n(327),h=n(328),f=n(329),_=n(330),m=n(333);class p extends r.default{constructor(){super(...arguments),this.name="",this.batches=[],this.materials=[[],[]],this.materialMaps=[],this.bones=[],this.boneLookup=null,this.sequences=[],this.sts=[],this.stc=[],this.stg=[],this.attachments=[],this.cameras=[],this.regions=[],this.initialReference=[],this.elementBuffer=null,this.arrayBuffer=null,this.vertexSize=0,this.uvSetCount=0}createInstance(e){return new _.default(this)}load(e){let t;t=e instanceof a.default?e:new a.default(e);let n=t.model,r=n.divisions.get();this.name=n.modelName.getAll().join(""),this.setupGeometry(n,r);let f=n.materialReferences.getAll();this.materialMaps=f;for(let e of n.materials[0].getAll())this.materials[1].push(new i.default(this,e));for(let e of r.batches.getAll()){let t=e.regionIndex,n=f[e.materialReferenceIndex];1===n.materialType&&this.batches.push(new m.default(this.regions[t],this.materials[1][n.materialIndex]))}this.initialReference=n.absoluteInverseBoneRestPositions.getAll();for(let e of n.bones.getAll())this.bones.push(new l.default(e));this.boneLookup=n.boneLookup.getAll();for(let e of n.sequences.getAll())this.sequences.push(new s.default(e));for(let e of n.sts.getAll())this.sts.push(new o.default(e));for(let e of n.stc.getAll())this.stc.push(new u.default(e));for(let e of n.stg.getAll())this.stg.push(new c.default(e,this.sts,this.stc));this.addGlobalAnims();for(let e of n.attachmentPoints.getAll())this.attachments.push(new d.default(e));for(let e of n.cameras.getAll())this.cameras.push(new h.default(e))}setupGeometry(e,t){let n=this.viewer.gl,a=1,r=e.vertexFlags;262144&r?a=2:524288&r?a=3:1048576&r&&(a=4);let i=t.regions.getAll(),l=0,s=[];for(let e=0,t=i.length;e<t;e++)s[e]=l,l+=i[e].triangleIndicesCount;let o=new Uint16Array(l),u=t.triangles.getAll();for(let e=0,t=i.length;e<t;e++)this.regions.push(new f.default(this,i[e],u,o,s[e]));let c=e.vertices.getAll();this.elementBuffer=n.createBuffer(),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,this.elementBuffer),n.bufferData(n.ELEMENT_ARRAY_BUFFER,o,n.STATIC_DRAW);let d=n.createBuffer();n.bindBuffer(n.ARRAY_BUFFER,d),n.bufferData(n.ARRAY_BUFFER,c,n.STATIC_DRAW),this.arrayBuffer=d,this.vertexSize=4*(7+a),this.uvSetCount=a}mapMaterial(e){let t=this.materialMaps[e];return this.materials[t.materialType][t.materialIndex]}addGlobalAnims(){}getValue(e,t,n){return-1!==t?this.stg[t].getValue(e,n):e.initValue}}t.default=p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(320);t.default=class{constructor(e,t){this.model=e,this.gl=e.viewer.gl,this.name=t.name.getAll().join(""),this.flags=t.flags,this.blendMode=t.blendMode,this.priority=t.priority,this.specularity=t.specularity,this.specMult=t.specMult,this.emisMult=t.emisMult,this.layerBlendType=t.layerBlendType,this.emisBlendType=t.emisBlendType,this.emisMode=t.emisMode,this.doubleSided=8&t.flags,this.layers=[new a.default(this,t.diffuseLayer,"diffuse",2),new a.default(this,t.decalLayer,"decal",2),new a.default(this,t.specularLayer,"specular",2),new a.default(this,t.glossLayer,"gloss",2),new a.default(this,t.emissiveLayer,"emissive",t.emisBlendType),new a.default(this,t.emissive2Layer,"emissive2",t.emisMode),new a.default(this,t.evioLayer,"evio",2),new a.default(this,t.evioMaskLayer,"evioMask",2),new a.default(this,t.alphaMaskLayer,"alphaMask",2),new a.default(this,t.alphaMask2Layer,"alphaMask2",2),new a.default(this,t.normalLayer,"normal",2),new a.default(this,t.heightLayer,"heightMap",2),new a.default(this,t.lightMapLayer,"lightMap",2),new a.default(this,t.ambientOcclusionLayer,"ao",2)]}bindCommon(){const e=this.gl;1===this.blendMode?(e.enable(e.BLEND),e.blendFunc(e.ONE,e.ONE)):2===this.blendMode?(e.enable(e.BLEND),e.blendFunc(e.ONE,e.ONE)):e.disable(e.BLEND),this.doubleSided?e.disable(e.CULL_FACE):e.enable(e.CULL_FACE),e.enable(e.DEPTH_TEST),e.depthMask(!0)}bind(e,t){const n=this.gl;this.bindCommon(),n.uniform1f(e.uniforms.u_specularity,this.specularity),n.uniform1f(e.uniforms.u_specMult,this.specMult),n.uniform1f(e.uniforms.u_emisMult,this.emisMult),n.uniform4f(e.uniforms.u_lightAmbient,.02,.02,.02,0);const a=this.layers;a[0].bind(e,t),a[1].bind(e,t),a[2].bind(e,t),a[4].bind(e,t),a[5].bind(e,t),a[10].bind(e,t),a[12].bind(e,t)}unbind(e){const t=this.gl;t.disable(t.BLEND),t.enable(t.CULL_FACE);const n=this.layers;n[0].unbind(e),n[1].unbind(e),n[2].unbind(e),n[4].unbind(e),n[5].unbind(e),n[10].unbind(e),n[12].unbind(e)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let a={diffuse:1,decal:2,specular:3,gloss:4,emissive:5,emissive2:6,evio:7,evioMask:8,alphaMask:9,alphaMask2:10,normal:11,heightMap:12,lightMap:13,ao:14};t.default=class{constructor(e,t,n,r){this.active=0,this.layer=null,this.source="",this.texture=null,this.flags=0,this.colorChannels=0,this.type="",this.op=0,this.uvCoordinate=0,this.textureUnit=0,this.invert=0,this.clampResult=0,this.teamColorMode=0;let i=e.model;this.model=i,this.gl=e.gl;let l="u_"+n,s=l+"LayerSettings.";if(this.uniformMap={map:l+"Map",enabled:s+"enabled",op:s+"op",channels:s+"channels",teamColorMode:s+"teamColorMode",invert:s+"invert",clampResult:s+"clampResult",uvCoordinate:s+"uvCoordinate"},t){let e=t.get();this.layer=e;let l=i.pathSolver,s=e.imagePath.getAll().join("").replace("\0","").toLowerCase();if(s.length){this.source=s,this.texture=i.viewer.load(s,l),this.active=1;let t=e.uvSource,o=e.flags;this.flags=o,this.colorChannels=e.colorChannelSetting,this.model=i,this.type=n,this.op=r;let u=0;1===t?u=1:9===t?u=2:10===t&&(u=3),this.uvCoordinate=u,this.textureUnit=a[n],this.invert=16&o,this.clampResult=32&o,"diffuse"===n&&(this.teamColorMode=1)}}}bind(e,t){let n=this.gl,a=this.uniformMap,r=e.uniforms,i=this.active;if(n.uniform1f(r[a.enabled],i),i){let e=this.texture,i=this.textureUnit;n.uniform1i(r[a.map],i),this.model.viewer.webgl.bindTexture(t.get(e)||e,i),n.uniform1f(r[a.op],this.op),n.uniform1f(r[a.channels],this.colorChannels),n.uniform1f(r[a.teamColorMode],this.teamColorMode),n.uniform1f(r[a.invert],this.invert),n.uniform1f(r[a.clampResult],this.clampResult),n.uniform1f(r[a.uvCoordinate],this.uvCoordinate)}}unbind(e){this.active&&this.gl.uniform1f(e.uniforms[this.uniformMap.enabled],0)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(e){let t=e.flags;this.name=e.name.getAll().join(""),this.parent=e.parent,this.location=e.location,this.rotation=e.rotation,this.scale=e.scale,this.visibility=e.visibility,this.inhertTranslation=1&t,this.inheritScale=2&t,this.inheritRotation=4&t,this.billboard1=16&t,this.billboard2=64&t,this.twoDProjection=256&t,this.animated=512&t,this.inverseKinematics=1024&t,this.skinned=2048&t,this.real=8192&t}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(e){this.name=e.name.getAll().join(""),this.interval=e.interval,this.movementSpeed=e.movementSpeed,this.frequency=e.frequency,this.boundingSphere=e.boundingSphere,this.flags=e.flags}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(e){this.animIds={};let t=e.animIds.getAll();for(let e=0,n=t.length;e<n;e++)this.animIds[t[e]]=e}hasData(e){return!!this.animIds[e.animId]}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(325);t.default=class{constructor(e){const t=e.animIds.getAll();this.name=e.name.getAll().join(""),this.runsConcurrent=e.runsConcurrent,this.priority=e.priority,this.stsIndex=e.stsIndex;const n=new Uint16Array(e.animRefs.getAll().buffer);this.animRefs=[];for(let e=0,a=t.length;e<a;e++)this.animRefs[t[e]]=[n[2*e+1],n[2*e]];this.sd=e.sd.map(e=>new a.default(e.getAll()))}getValueUnsafe(e,t){const n=this.animRefs[e.animId];return n?this.sd[n[0]].getValueUnsafe(n[1],e,t.frame,this.runsConcurrent):e.initValue}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(12),r=new Float32Array(3),i=new Float32Array(4);class l{constructor(e){this.keys=e.keys.getAll(),this.values=e.values.getAll(),this.biggestKey=e.biggestKey}}t.default=class{constructor(e){this.sd=e.map(e=>new l(e))}getValueUnsafe(e,t,n,l){let s=this.sd[e];l&&(n%=s.biggestKey);let o=s.keys,u=s.values,c=o.length,d=0;for(;d!==o.length&&n>o[d];)c=d,d++;let h=o.length;if(c===h)return d===h?t.initValue:u[d];if(d===h||c>=d)return u[c];let f=a.clamp((n-o[c])/(o[d]-o[c]),0,1),_=u[c],m=u[d],p=t.interpolationType;return 4===_.length?0===p?quat.copy(i,_):quat.slerp(i,_,m,f):3===_.length?0===p?vec3.copy(r,_):vec3.lerp(r,_,m,f):0===p?_:a.lerp(_,m,f)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(e,t,n){this.name=e.name.getAll().join(""),this.stcIndices=e.stcIndices.getAll(),this.sts=t,this.stc=n}getValueUnsafe(e,t){let n=this.stcIndices,a=this.stc,r=this.sts;for(let i=0,l=n.length;i<l;i++){let l=a[n[i]];if(r[l.stsIndex].hasData(e))return l.getValueUnsafe(e,t)}return e.initValue}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(e){this.name=e.name.getAll().join(""),this.bone=e.bone}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(e){this.bone=e.bone,this.name=e.name.getAll().join("")}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(e,t,n,a,r){let i=t.firstVertexIndex,l=t.triangleIndicesCount,s=t.firstTriangleIndex;for(let e=0;e<l;e++)a[r+e]=n[s+e]+i;this.gl=e.viewer.gl,this.firstBoneLookupIndex=t.firstBoneLookupIndex,this.boneWeightPairsCount=t.boneWeightPairsCount,this.offset=2*r,this.verticesCount=t.verticesCount,this.elements=l}render(e){let t=this.gl;t.uniform1f(e.uniforms.u_firstBoneLookupIndex,this.firstBoneLookupIndex),t.uniform1f(e.uniforms.u_boneWeightPairsCount,this.boneWeightPairsCount),t.drawElements(t.TRIANGLES,this.elements,t.UNSIGNED_SHORT,this.offset)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(2),r=n(108),i=n(38),l=n(63),s=n(331),o=a.mat4.create();class u extends i.default{constructor(){super(...arguments),this.skeleton=null,this.teamColor=0,this.vertexColor=new Float32Array([1,1,1,1]),this.sequence=-1,this.frame=0,this.sequenceLoopMode=0,this.sequenceEnded=!1,this.forced=!0,this.boneTexture=null}load(){this.skeleton=new s.default(this),-1!==this.sequence&&this.setSequence(this.sequence);let e=this.model,t=e.boneLookup;this.boneTexture=new r.default(e.viewer.gl,3,4*t.length,1)}updateSkeletonAndBoneTexture(e){let t=this.model,n=t.viewer.buffer,r=t.boneLookup,i=this.skeleton,l=i.nodes,s=t.initialReference,u=r.length,c=-1!==this.sequence,d=this.boneTexture;i.update(e),n.reserve(48*u);let h,f=n.floatView;h=c?o:this.worldMatrix;for(let e=0;e<u;e++){let t=12*e;if(c){let t=r[e];h=a.mat4.mul(o,l[t].worldMatrix,s[t])}f[t+0]=h[0],f[t+1]=h[1],f[t+2]=h[2],f[t+3]=h[4],f[t+4]=h[5],f[t+5]=h[6],f[t+6]=h[8],f[t+7]=h[9],f[t+8]=h[10],f[t+9]=h[12],f[t+10]=h[13],f[t+11]=h[14]}d.bindAndUpdate(f,d.width,1)}renderOpaque(){let e=this.model,t=e.batches;if(t.length){let n=e.viewer.gl,a=e.vertexSize,r=e.uvSetCount,i=l.default.shaders.standard[r-1],s=i.attribs,o=i.uniforms,u=this.scene.camera,c=this.textureMapper,d=this.boneTexture;i.use(),n.uniform1f(o.u_teamColor,this.teamColor),n.uniform4fv(o.u_vertexColor,this.vertexColor),n.uniformMatrix4fv(o.u_VP,!1,u.viewProjectionMatrix),n.uniformMatrix4fv(o.u_MV,!1,u.viewMatrix),n.uniform3fv(o.u_eyePos,u.location),n.uniform3fv(o.u_lightPos,l.default.lightPosition),d.bind(15),n.uniform1i(o.u_boneMap,15),n.uniform1f(o.u_vectorSize,1/d.width),n.uniform1f(o.u_rowSize,1),n.bindBuffer(n.ARRAY_BUFFER,e.arrayBuffer),n.vertexAttribPointer(s.a_position,3,n.FLOAT,!1,a,0),n.vertexAttribPointer(s.a_weights,4,n.UNSIGNED_BYTE,!1,a,12),n.vertexAttribPointer(s.a_bones,4,n.UNSIGNED_BYTE,!1,a,16),n.vertexAttribPointer(s.a_normal,4,n.UNSIGNED_BYTE,!1,a,20);for(let e=0;e<r;e++)n.vertexAttribPointer(s[`a_uv${e}`],2,n.SHORT,!1,a,24+4*e);n.vertexAttribPointer(s.a_tangent,4,n.UNSIGNED_BYTE,!1,a,24+4*r),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e.elementBuffer);for(let e of t){let t=e.material,n=e.region;t.bind(i,c),n.render(i),t.unbind(i)}}}updateAnimations(e){let t=this.sequence;if(-1!==t){let e=this.model,n=e.sequences[t],a=n.interval;this.frame+=e.viewer.frameTime,this.frame>a[1]?((0!==this.sequenceLoopMode||1&n.flags)&&2!==this.sequenceLoopMode?this.frame=a[1]:this.frame=a[0],this.sequenceEnded=!0):this.sequenceEnded=!1}(this.forced||-1!==t)&&(this.forced=!1,this.updateSkeletonAndBoneTexture(e))}setTeamColor(e){return this.teamColor=e,this}setVertexColor(e){return this.vertexColor.set(e),this}setSequence(e){let t=this.model;return this.sequence=e,this.frame=0,this.model.ok&&((e<-1||e>t.sequences.length-1)&&(e=-1,this.sequence=e),this.forced=!0),this}setSequenceLoopMode(e){return this.sequenceLoopMode=e,this}getAttachment(e){let t=this.model.attachments[e];if(t)return this.skeleton.nodes[t.bone]}}t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(23),r=n(332);t.default=class{constructor(e){let t=e.model,n=t.bones,i=t.boneLookup,l=a.createSkeletalNodes(n.length,r.default),s=l.nodes;this.nodes=s,this.worldMatrices=l.worldMatrices,this.instance=e,this.modelNodes=n,this.initialReference=t.initialReference,this.sts=t.sts,this.stc=t.stc,this.stg=t.stg,this.boneLookup=i;for(let t=0,a=n.length;t<a;t++){let a=n[t];-1===a.parent?s[t].parent=e:s[t].parent=s[a.parent],a.billboard1&&(s[t].billboarded=!0)}}update(e){let t=this.instance,n=t.scene,a=this.nodes,r=this.modelNodes;for(let i=0,l=a.length;i<l;i++){let l=a[i],s=r[i];this.getValue4(l.localRotation,s.rotation,t),this.getValue3(l.localLocation,s.location,t),this.getValue3(l.localScale,s.scale,t),l.recalculateTransformation(n),l.updateChildren(e,n)}}getValueUnsafe(e,t){let n=t.sequence;return-1!==n?this.stg[n].getValueUnsafe(e,t):e.initValue}getValue(e,t){return this.getValueUnsafe(e,t)}getValue2(e,t,n){let a=this.getValueUnsafe(t,n);return e[0]=a[0],e[1]=a[1],e}getValue3(e,t,n){let a=this.getValueUnsafe(t,n);return e[0]=a[0],e[1]=a[1],e[2]=a[2],e}getValue4(e,t,n){let a=this.getValueUnsafe(t,n);return e[0]=a[0],e[1]=a[1],e[2]=a[2],e[3]=a[3],e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(2),r=n(23);class i extends r.SkeletalNode{convertBasis(e){let t=Math.PI/2;a.quat.rotateZ(e,e,t),a.quat.rotateY(e,e,-t)}}t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(e,t){this.region=e,this.material=t}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=`\nuniform mat4 u_VP;\nuniform mat4 u_MV;\nuniform vec3 u_eyePos;\nuniform vec3 u_lightPos;\nuniform float u_firstBoneLookupIndex;\nuniform float u_boneWeightPairsCount;\nuniform vec3 u_teamColors[14];\nuniform float u_teamColor;\nuniform vec4 u_vertexColor;\n\nattribute vec3 a_position;\nattribute vec4 a_normal;\nattribute vec2 a_uv0;\n\n#ifdef EXPLICITUV1\nattribute vec2 a_uv1;\n#endif\n#ifdef EXPLICITUV2\nattribute vec2 a_uv1, a_uv2;\n#endif\n#ifdef EXPLICITUV3\nattribute vec2 a_uv1, a_uv2, a_uv3;\n#endif\n\nattribute vec4 a_tangent;\nattribute vec4 a_bones;\nattribute vec4 a_weights;\n\nvarying vec3 v_normal;\nvarying vec4 v_uv[2]; // Pack 4 vec2 in 2 vec4, to reduce the varyings count\nvarying vec3 v_lightDir;\n// varying vec3 v_eyeVec;\nvarying vec3 v_halfVec;\nvarying vec3 v_teamColor;\nvarying vec4 v_vertexColor;\n\n${n(65).default}\n\nvec3 TBN(vec3 vector, vec3 tangent, vec3 binormal, vec3 normal) {\n  return vec3(dot(vector, tangent), dot(vector, binormal), dot(vector, normal));\n}\n\nvec4 decodeVector(vec4 v) {\n  return ((v / 255.0) * 2.0) - 1.0;\n}\n\nvoid transform(inout vec3 position, inout vec3 normal, inout vec3 tangent, inout vec3 binormal, vec4 bones, vec4 weights) {\n  if (u_boneWeightPairsCount > 0.0) {\n    mat4 bone;\n\n    if (u_boneWeightPairsCount == 1.0) {\n      bone = fetchMatrix(bones[0], 0.0);\n    } else {\n      bone += fetchMatrix(bones[0], 0.0) * weights[0];\n      bone += fetchMatrix(bones[1], 0.0) * weights[1];\n      bone += fetchMatrix(bones[2], 0.0) * weights[2];\n      bone += fetchMatrix(bones[3], 0.0) * weights[3];\n    }\n\n    position = vec3(bone * vec4(position, 1.0));\n    normal = mat3(bone) * normal;\n    tangent = vec3(bone * vec4(tangent, 0.0));\n    binormal = vec3(bone * vec4(binormal, 0.0));\n  }\n}\n\nvoid main() {\n  vec4 decodedNormal = decodeVector(a_normal);\n\n  vec3 position = a_position;\n  vec3 normal = decodedNormal.xyz;\n  vec3 tangent = vec3(decodeVector(a_tangent));\n  vec3 binormal = cross(normal, tangent) * decodedNormal.w;\n\n  transform(position, normal, tangent, binormal, a_bones + u_firstBoneLookupIndex, a_weights / 255.0);\n\n  vec3 position_mv = vec3(u_MV * vec4(position, 1));\n\n  mat3 mv = mat3(u_MV);\n  vec3 t = normalize(mv * tangent);\n  vec3 b = normalize(mv * binormal);\n  vec3 n = normalize(mv * normal);\n\n  vec3 lightDir = normalize(u_lightPos - position_mv);\n\n  v_lightDir = normalize(TBN(lightDir, t, b, n));\n\n  vec3 eyeVec = normalize(u_eyePos - position_mv);\n  vec3 halfVec = normalize(eyeVec - u_lightPos);\n\n  // v_eyeVec = TBN(eyeVec, t, b, n);\n  v_halfVec = TBN(halfVec, t, b, n);\n\n  v_normal = n;\n\n  vec4 uv0, uv1;\n\n  uv0.xy = a_uv0 / 2048.0;\n\n  #ifdef EXPLICITUV1\n  uv0.zw = a_uv1 / 2048.0;\n  #endif\n\n  #ifdef EXPLICITUV2\n  uv0.zw = a_uv1 / 2048.0;\n  uv1.xy = a_uv2 / 2048.0;\n  #endif\n\n  #ifdef EXPLICITUV3\n  uv0.zw = a_uv1 / 2048.0;\n  uv1.xy = a_uv2 / 2048.0;\n  uv1.zw = a_uv3 / 2048.0;\n  #endif\n\n  v_uv[0] = uv0;\n  v_uv[1] = uv1;\n\n  v_teamColor = u_teamColors[int(u_teamColor)];\n  v_vertexColor = u_vertexColor;\n\n  gl_Position = u_VP * vec4(position, 1.0);\n}\n`;t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=`\nprecision mediump float;\n\n${n(336).default}\n\nvoid main() {\n  vec3 color;\n  vec4 final = u_lightAmbient;\n  vec3 normal;\n  vec3 lightMapDiffuse;\n\n  if (u_normalLayerSettings.enabled) {\n    normal = decodeNormal(u_normalMap);\n  } else {\n    normal = v_normal;\n  }\n\n  float lambertFactor = max(dot(normal, v_lightDir), 0.0);\n\n  if (lambertFactor > 0.0) {\n    if (u_diffuseLayerSettings.enabled) {\n      vec4 diffuseColor = computeLayerColor(u_diffuseMap, u_diffuseLayerSettings);\n\n      color = combineLayerColor(diffuseColor, color, u_diffuseLayerSettings);\n    }\n\n    if (u_decalLayerSettings.enabled) {\n      vec4 decalColor = computeLayerColor(u_decalMap, u_decalLayerSettings);\n\n      color = combineLayerColor(decalColor, color, u_decalLayerSettings);\n    }\n\n    vec4 specularColor = computeSpecular(u_specularMap, u_specularLayerSettings, u_specularity, u_specMult, normal);\n\n    if (u_lightMapLayerSettings.enabled) {\n      vec4 lightMapColor = computeLayerColor(u_lightMapMap, u_lightMapLayerSettings) * 2.0;\n\n      lightMapDiffuse = lightMapColor.rgb;\n    }\n\n    // final.rgb = color * lightMapDiffuse + specularColor.rgb;\n    final.rgb = (color + specularColor.rgb) * lambertFactor;\n\n    bool addEmissive = false;\n    vec3 emissiveColor;\n    vec4 tempColor;\n\n    if (u_emissiveLayerSettings.enabled) {\n      tempColor = computeLayerColor(u_emissiveMap, u_emissiveLayerSettings);\n\n      if (u_emissiveLayerSettings.op == LAYEROP_MOD || u_emissiveLayerSettings.op == LAYEROP_MOD2X || u_emissiveLayerSettings.op == LAYEROP_LERP) {\n        final.rgb = combineLayerColor(tempColor, final.rgb, u_emissiveLayerSettings);\n      } else {\n        emissiveColor = combineLayerColor(tempColor, emissiveColor, u_emissiveLayerSettings);\n        addEmissive = true;\n      }\n    }\n\n    if (u_emissive2LayerSettings.enabled) {\n      tempColor = computeLayerColor(u_emissive2Map, u_emissive2LayerSettings);\n\n      if (!addEmissive && (u_emissive2LayerSettings.op == LAYEROP_MOD || u_emissive2LayerSettings.op == LAYEROP_MOD2X || u_emissive2LayerSettings.op == LAYEROP_LERP)) {\n        final.rgb = combineLayerColor(tempColor, final.rgb, u_emissive2LayerSettings);\n      } else {\n        emissiveColor = combineLayerColor(tempColor, emissiveColor, u_emissive2LayerSettings);\n        addEmissive = true;\n      }\n    }\n\n    if (addEmissive) {\n      final.rgb += emissiveColor * u_emisMult;\n    }\n  }\n\n  gl_FragColor = final * v_vertexColor;\n}\n`;t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default="\nvarying vec3 v_normal;\nvarying vec4 v_uv[2];\nvarying vec3 v_lightDir;\n// varying vec3 v_eyeVec;\nvarying vec3 v_halfVec;\nvarying vec3 v_teamColor;\nvarying vec4 v_vertexColor;\n\nstruct LayerSettings {\n  bool enabled;\n  float op;\n  float channels;\n  float teamColorMode;\n  // vec3 multAddAlpha;\n  // bool useAlphaFactor;\n  bool invert;\n  // bool multColor;\n  // bool addColor;\n  bool clampResult;\n  // bool useConstantColor;\n  // vec4 constantColor;\n  // float uvSource;\n  float uvCoordinate;\n  // float fresnelMode;\n  // float fresnelTransformMode;\n  // mat4 fresnelTransform;\n  // bool fresnelClamp;\n  // vec3 fresnelExponentBiasScale;\n};\n\nuniform float u_specularity;\nuniform float u_specMult;\nuniform float u_emisMult;\nuniform vec4 u_lightAmbient;\n\nuniform LayerSettings u_diffuseLayerSettings;\nuniform sampler2D u_diffuseMap;\nuniform LayerSettings u_decalLayerSettings;\nuniform sampler2D u_decalMap;\nuniform LayerSettings u_specularLayerSettings;\nuniform sampler2D u_specularMap;\nuniform LayerSettings u_glossLayerSettings;\nuniform sampler2D u_glossMap;\nuniform LayerSettings u_emissiveLayerSettings;\nuniform sampler2D u_emissiveMap;\nuniform LayerSettings u_emissive2LayerSettings;\nuniform sampler2D u_emissive2Map;\nuniform LayerSettings u_evioLayerSettings;\nuniform sampler2D u_evioMap;\nuniform LayerSettings u_evioMaskLayerSettings;\nuniform sampler2D u_evioMaskMap;\nuniform LayerSettings u_alphaLayerSettings;\nuniform sampler2D u_alphaMap;\nuniform LayerSettings u_alphaMaskLayerSettings;\nuniform sampler2D u_alphaMaskMap;\nuniform LayerSettings u_normalLayerSettings;\nuniform sampler2D u_normalMap;\nuniform LayerSettings u_heightLayerSettings;\nuniform sampler2D u_heightMap;\nuniform LayerSettings u_lightMapLayerSettings;\nuniform sampler2D u_lightMapMap;\nuniform LayerSettings u_aoLayerSettings;\nuniform sampler2D u_aoMap;\n\n#define SPECULAR_RGB 0.0\n#define SPECULAR_A_ONLY 1.0\n\n#define FRESNELMODE_NONE 0.0\n#define FRESNELMODE_STANDARD 1.0\n#define FRESNELMODE_INVERTED 2.0\n\n#define FRESNELTRANSFORM_NONE 0.0\n#define FRESNELTRANSFORM_SIMPLE 1.0\n#define FRESNELTRANSFORM_NORMALIZED 2.0\n\n#define UVMAP_EXPLICITUV0 0.0\n#define UVMAP_EXPLICITUV1 1.0\n#define UVMAP_REFLECT_CUBICENVIO 2.0\n#define UVMAP_REFLECT_SPHERICALENVIO 3.0\n#define UVMAP_PLANARLOCALZ 4.0\n#define UVMAP_PLANARWORLDZ 5.0\n#define UVMAP_PARTICLE_FLIPBOOK 6.0\n#define UVMAP_CUBICENVIO 7.0\n#define UVMAP_SPHERICALENVIO 8.0\n#define UVMAP_EXPLICITUV2 9.0\n#define UVMAP_EXPLICITUV3 10.0\n#define UVMAP_PLANARLOCALX 11.0\n#define UVMAP_PLANARLOCALY 12.0\n#define UVMAP_PLANARWORLDX 13.0\n#define UVMAP_PLANARWORLDY 14.0\n#define UVMAP_SCREENSPACE 15.0\n#define UVMAP_TRIPLANAR_LOCAL 16.0\n#define UVMAP_TRIPLANAR_WORLD 17.0\n#define UVMAP_TRIPLANAR_WORLD_LOCAL_Z 18.0\n\n#define CHANNELSELECT_RGB 0.0\n#define CHANNELSELECT_RGBA 1.0\n#define CHANNELSELECT_A 2.0\n#define CHANNELSELECT_R 3.0\n#define CHANNELSELECT_G 4.0\n#define CHANNELSELECT_B 5.0\n\n#define TEAMCOLOR_NONE 0.0\n#define TEAMCOLOR_DIFFUSE 1.0\n#define TEAMCOLOR_EMISSIVE 2.0\n\n#define LAYEROP_MOD 0.0\n#define LAYEROP_MOD2X 1.0\n#define LAYEROP_ADD 2.0\n#define LAYEROP_LERP 3.0\n#define LAYEROP_TEAMCOLOR_EMISSIVE_ADD 4.0\n#define LAYEROP_TEAMCOLOR_DIFFUSE_ADD 5.0\n#define LAYEROP_ADD_NO_ALPHA 6.0\n\n// float calculateFresnelTerm(vec3 normal, vec3 eyeToVertex, float exponent, mat4 fresnelTransform, float fresnelTransformMode, bool fresnelClamp) {\n//   vec3 fresnelDir = eyeToVertex;\n//   float result;\n\n//   if (fresnelTransformMode != FRESNELTRANSFORM_NONE) {\n//     fresnelDir = (fresnelTransform * vec4(fresnelDir, 1.0)).xyz;\n\n//     if (fresnelTransformMode == FRESNELTRANSFORM_NORMALIZED) {\n//       fresnelDir = normalize(fresnelDir);\n//     }\n//   }\n\n//   if (fresnelClamp) {\n//     result = 1.0 - clamp(-dot(normal, fresnelDir), 0.0, 1.0);\n//   } else {\n//     result = 1.0 - abs(dot(normal, fresnelDir));\n//   }\n\n//   result = max(result, 0.0000001);\n\n//   return pow(result, exponent);\n// }\n\nvec3 combineLayerColor(vec4 color, vec3 result, LayerSettings layerSettings) {\n  if (layerSettings.op == LAYEROP_MOD) {\n    result *= color.rgb;\n  } else if (layerSettings.op == LAYEROP_MOD2X) {\n    result *= color.rgb * 2.0;\n  } else if (layerSettings.op == LAYEROP_ADD) {\n    result += color.rgb * color.a;\n  } else if (layerSettings.op == LAYEROP_ADD_NO_ALPHA) {\n    result += color.rgb;\n  } else if (layerSettings.op == LAYEROP_LERP) {\n    result = mix(result, color.rgb, color.a);\n  } else if (layerSettings.op == LAYEROP_TEAMCOLOR_EMISSIVE_ADD) {\n    result += color.a * v_teamColor;\n  } else if (layerSettings.op == LAYEROP_TEAMCOLOR_DIFFUSE_ADD) {\n    result += color.a * v_teamColor;\n  }\n\n  return result;\n}\n\nvec4 chooseChannel(float channel, vec4 texel) {\n  if (channel == CHANNELSELECT_R) {\n    texel = texel.rrrr;\n  } else if (channel == CHANNELSELECT_G) {\n    texel = texel.gggg;\n  } else if (channel == CHANNELSELECT_B) {\n    texel = texel.bbbb;\n  } else if (channel == CHANNELSELECT_A) {\n    texel = texel.aaaa;\n  } else if (channel == CHANNELSELECT_RGB) {\n    texel.a = 1.0;\n  }\n\n  return texel;\n}\n\nvec2 getUV(LayerSettings layerSettings) {\n  if (layerSettings.uvCoordinate == 1.0) {\n    return v_uv[0].zw;\n  } else if (layerSettings.uvCoordinate == 2.0) {\n    return v_uv[1].xy;\n  } else if (layerSettings.uvCoordinate == 3.0) {\n    return v_uv[1].zw;\n  }\n\n  return v_uv[0].xy;\n}\n\nvec4 sampleLayer(sampler2D layer, LayerSettings layerSettings) {\n  // if (layerSettings.useConstantColor) {\n  //   return layerSettings.constantColor;\n  // }\n\n  return texture2D(layer, getUV(layerSettings));\n}\n\nvec4 computeLayerColor(sampler2D layer, LayerSettings layerSettings) {\n  vec4 color = sampleLayer(layer, layerSettings);\n\n  // if (layerSettings.useMask) {\n  //   result *= mask;\n  // }\n\n  vec4 result = chooseChannel(layerSettings.channels, color);\n\n  // if (layerSettings.useAlphaFactor) {\n  //   result.a *= layerSettings.multiplyAddAlpha.z;\n  // }\n\n  if (layerSettings.teamColorMode == TEAMCOLOR_DIFFUSE) {\n    result = vec4(mix(v_teamColor, result.rgb, color.a), 1.0);\n  } else if (layerSettings.teamColorMode == TEAMCOLOR_EMISSIVE) {\n    result = vec4(mix(v_teamColor, result.rgb, color.a), 1.0);\n  }\n\n  if (layerSettings.invert) {\n    result = vec4(1.0) - result;\n  }\n\n  // if (layerSettings.multiplyEnable) {\n  //   result *= layerSettings.multiplyAddAlpha.x;\n  // }\n\n  // if (layerSettings.addEnable) {\n  //   result += layerSettings.multiplyAddAlpha.y;\n  // }\n\n  if (layerSettings.clampResult) {\n    result = clamp(result, 0.0, 1.0);\n  }\n\n  // if (layerSettings.fresnelMode != FRESNELMODE_NONE) {\n  //   float fresnelTerm = calculateFresnelTerm(v_normal, v_eyeVec, layerSettings.fresnelExponentBiasScale.x, layerSettings.fresnelTransform, layerSettings.fresnelTransformMode, layerSettings.fresnelClamp);\n    \n  //   if (layerSettings.fresnelMode == FRESNELMODE_INVERTED) {\n  //     fresnelTerm = 1.0 - fresnelTerm;\n  //   }\n    \n  //   fresnelTerm = clamp(fresnelTerm * layerSettings.fresnelExponentBiasScale.z + layerSettings.fresnelExponentBiasScale.y, 0.0, 1.0);\n    \n  //   result *= fresnelTerm;\n  // }\n\n  return result;\n}\n\nvec3 decodeNormal(sampler2D map) {\n  vec4 texel = texture2D(map, v_uv[0].xy);\n  vec3 normal;\n\n  normal.xy = 2.0 * texel.wy - 1.0;\n  normal.z = sqrt(max(0.0, 1.0 - dot(normal.xy, normal.xy)));\n\n  return normal;\n}\n\nvec4 computeSpecular(sampler2D specularMap, LayerSettings layerSettings, float specularity, float specMult, vec3 normal) {\n  vec4 color;\n\n  if (layerSettings.enabled) {\n    color = computeLayerColor(specularMap, layerSettings);\n  } else {\n    color = vec4(0);\n  }\n\n  float factor = pow(max(-dot(v_halfVec, normal), 0.0), specularity) * specMult;\n\n  return color * factor;\n}\n"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(48),r=n(37),i=n(13),l=n(338),s=n(340),o=n(341),u=n(342),c=n(109),d=n(343),h=n(344),f=n(345),_=n(346),m=n(347),p=n(348),g=n(110),b=n(349),w=n(350),v=n(352),A=n(353),L=n(355),y=n(357),S=n(358),T=n(360);class E extends r.default{constructor(){super(...arguments),this.reforged=!1,this.hd=!1,this.solverParams={},this.name="",this.sequences=[],this.globalSequences=[],this.materials=[],this.layers=[],this.replaceables=[],this.textures=[],this.textureAnimations=[],this.geosets=[],this.geosetAnimations=[],this.bones=[],this.lights=[],this.helpers=[],this.attachments=[],this.pivotPoints=[],this.particleEmitters=[],this.particleEmitters2=[],this.ribbonEmitters=[],this.cameras=[],this.eventObjects=[],this.collisionShapes=[],this.hasLayerAnims=!1,this.hasGeosetAnims=!1,this.batches=[],this.genericObjects=[],this.sortedGenericObjects=[],this.hierarchy=[],this.opaqueGroups=[],this.translucentGroups=[],this.simpleGroups=[],this.arrayBuffer=null,this.elementBuffer=null}createInstance(e){return 1===e?new S.default(this):new T.default(this)}load(e){let t;t=e instanceof a.default?e:new a.default(e);let n=this.viewer,r=this.pathSolver,S=this.solverParams,T=t.version>800,E=T?".dds":".blp";this.reforged=T,this.name=t.name;let x=t.extent;this.bounds.fromExtents(x.min,x.max);for(let e of t.sequences)this.sequences.push(e);for(let e of t.globalSequences)this.globalSequences.push(e);for(let e of t.textureAnimations)this.textureAnimations.push(new l.default(this,e));let k=0;for(let e of t.materials){let t=[];for(let n of e.layers){let a=new s.default(this,n,k++,e.priorityPlane);t.push(a),this.layers.push(a)}this.materials.push(new o.default(this,e.shader,t)),""!==e.shader&&(this.hd=!0)}T&&(S.reforged=!0),this.hd&&(S.hd=!0);let M=n.gl,I=!1;for(let e of t.textures){let t=e.path,a=e.replaceableId,i=e.flags;0!==a&&(t=`ReplaceableTextures\\${c.default[a]}${E}`,1!==a&&2!==a||(I=!0)),T&&!t.endsWith(".dds")&&(t=`${t.slice(0,-4)}.dds`);let l=n.load(t,r,S);l.loaded||(1&i&&(l.wrapS=M.REPEAT),2&i&&(l.wrapT=M.REPEAT)),this.replaceables.push(a),this.textures.push(l)}if(I){let e=T?i.default.reforgedTeamColors:i.default.teamColors,t=T?i.default.reforgedTeamGlows:i.default.teamGlows;if(!e.length)for(let a=0;a<28;a++){let i=(""+a).padStart(2,"0");e[a]=n.load(`ReplaceableTextures\\TeamColor\\TeamColor${i}${E}`,r,S),t[a]=n.load(`ReplaceableTextures\\TeamGlow\\TeamGlow${i}${E}`,r,S)}}for(let e of t.geosetAnimations)this.geosetAnimations.push(new u.default(this,e));A.default(this,t.geosets),this.pivotPoints=t.pivotPoints;let U=0;for(let e of t.bones)this.bones.push(new d.default(this,e,U++));for(let e of t.lights)this.lights.push(new h.default(this,e,U++));for(let e of t.helpers)this.helpers.push(new f.default(this,e,U++));for(let e of t.attachments)this.attachments.push(new _.default(this,e,U++));for(let e of t.particleEmitters)this.particleEmitters.push(new m.default(this,e,U++));for(let e of t.particleEmitters2)this.particleEmitters2.push(new p.default(this,e,U++));for(let e of t.ribbonEmitters)this.ribbonEmitters.push(new g.default(this,e,U++));for(let e of t.cameras)this.cameras.push(new b.default(this,e));for(let e of t.eventObjects)this.eventObjects.push(new w.default(this,e,U++));for(let e of t.collisionShapes)this.collisionShapes.push(new v.default(this,e,U++));this.genericObjects.push(...this.bones,...this.lights,...this.helpers,...this.attachments,...this.particleEmitters,...this.particleEmitters2,...this.ribbonEmitters,...this.eventObjects,...this.collisionShapes),L.default(this),y.default(this),this.setupHierarchy(-1);for(let e=0,t=this.genericObjects.length;e<t;e++)this.sortedGenericObjects[e]=this.genericObjects[this.hierarchy[e]]}setupHierarchy(e){for(let t=0,n=this.genericObjects.length;t<n;t++){let n=this.genericObjects[t];n.parentId===e&&(this.hierarchy.push(t),this.setupHierarchy(n.objectId))}}}t.default=E},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(7),r=n(31);class i extends r.default{constructor(e,t){super(e,t),this.addVariants("KTAT","translation"),this.addVariants("KTAR","rotation"),this.addVariants("KTAS","scale")}getTranslation(e,t){return this.getVectorValue(e,"KTAT",t,a.VEC3_ZERO)}getRotation(e,t){return this.getQuatValue(e,"KTAR",t,a.QUAT_DEFAULT)}getScale(e,t){return this.getVectorValue(e,"KTAS",t,a.VEC3_ONE)}}t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(2),r=n(12),i=n(77);class l{constructor(e,t,n,a,r){this.frames=[],this.values=[],this.inTans=[],this.outTans=[],this.constant=!1,this.sd=e,this.start=t,this.end=n;let i=e.interpolationType,l=a.frames,s=a.values,o=a.inTans,u=a.outTans,c=e.defval;r&&l[0]>n&&(this.frames[0]=l[0],this.values[0]=s[0]);for(let e=0,a=l.length;e<a;e++){let a=l[e];a>=t&&a<=n&&(this.frames.push(a),this.values.push(s[e]),i>1&&(this.inTans.push(o[e]),this.outTans.push(u[e])))}let d=this.frames.length;if(0===d)this.constant=!0,this.frames[0]=t,this.values[0]=c;else if(1===d)this.constant=!0;else{let e=this.values[0];this.constant=this.values.every(t=>e.every((e,n)=>e===t[n])),this.constant||(this.frames[0]!==t&&(this.frames.unshift(t),this.values.unshift(c),i>1&&(this.inTans.unshift(c),this.outTans.unshift(c))),this.frames[this.frames.length-1]!==n&&(this.frames.push(n),this.values.push(this.values[0]),i>1&&(this.inTans.push(this.inTans[0]),this.outTans.push(this.outTans[0]))))}}getValue(e,t){let n=this.frames,a=n.length;if(this.constant||t<this.start)return this.sd.copy(e,this.values[0]),-1;if(t>=this.end)return this.sd.copy(e,this.values[a-1]),a-1;for(let i=1;i<a;i++)if(n[i]>t){let a=n[i-1],l=n[i],s=r.clamp((t-a)/(l-a),0,1);return this.sd.interpolate(e,this.values,this.inTans,this.outTans,i-1,i,s),i}return-1}}const s={KLAV:0,KATV:0,KPEV:0,KP2V:0,KRVS:0},o=new Float32Array(1),u=new Uint32Array(1),c=new Float32Array([1]),d=a.vec3.create(),h=a.quat.create(),f=a.vec3.fromValues(1,1,1),_={KMTF:o,KMTA:c,KTAT:d,KTAR:h,KTAS:f,KGAO:c,KGAC:d,KLAS:o,KLAE:o,KLAC:d,KLAI:o,KLBI:o,KLBC:d,KLAV:c,KATV:c,KPEE:o,KPEG:o,KPLN:o,KPLT:o,KPEL:o,KPES:o,KPEV:c,KP2S:o,KP2R:o,KP2L:o,KP2G:o,KP2E:o,KP2N:o,KP2W:o,KP2V:c,KRHA:o,KRHB:o,KRAL:c,KRCO:d,KRTX:o,KRVS:c,KCTR:d,KTTR:d,KCRL:u,KGTR:d,KGRT:h,KGSC:f};class m{constructor(e,t){this.globalSequence=null,this.sequences=[];let n=e.globalSequences,a=t.globalSequenceId,r=s[t.name];if(this.model=e,this.name=t.name,this.defval=_[t.name],this.interpolationType=void 0!==r?r:t.interpolationType,-1!==a&&n)this.globalSequence=new l(this,0,n[a],t,!0);else for(let n of e.sequences){let e=n.interval;this.sequences.push(new l(this,e[0],e[1],t,!1))}}getValue(e,t){return this.globalSequence?this.globalSequence.getValue(e,t.counter%this.globalSequence.end):-1!==t.sequence?this.sequences[t.sequence].getValue(e,t.frame):(this.copy(e,this.defval),-1)}isVariant(e){return this.globalSequence?!this.globalSequence.constant:!this.sequences[e].constant}}t.Sd=m;class p extends m{copy(e,t){e[0]=t[0]}interpolate(e,t,n,a,i,l,s){let o=this.interpolationType,u=t[i][0];0===o?e[0]=u:1===o?e[0]=r.lerp(u,t[l][0],s):2===o?e[0]=r.hermite(u,a[i][0],n[l][0],t[l][0],s):3===o&&(e[0]=r.bezier(u,a[i][0],n[l][0],t[l][0],s))}}t.ScalarSd=p;class g extends m{copy(e,t){a.vec3.copy(e,t)}interpolate(e,t,n,r,i,l,s){let o=this.interpolationType;0===o?a.vec3.copy(e,t[i]):1===o?a.vec3.lerp(e,t[i],t[l],s):2===o?a.vec3.hermite(e,t[i],r[i],n[l],t[l],s):3===o&&a.vec3.bezier(e,t[i],r[i],n[l],t[l],s)}}t.VectorSd=g;class b extends m{copy(e,t){a.quat.copy(e,t)}interpolate(e,t,n,r,i,l,s){let o=this.interpolationType;0===o?a.quat.copy(e,t[i]):1===o?a.quat.slerp(e,t[i],t[l],s):2!==o&&3!==o||a.quat.sqlerp(e,t[i],r[i],n[l],t[l],s)}}t.QuatSd=b,t.createTypedSd=function(e,t){return t instanceof i.UintAnimation||t instanceof i.FloatAnimation?new p(e,t):t instanceof i.Vector3Animation?new g(e,t):new b(e,t)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(31),r=n(66);class i extends a.default{constructor(e,t,n,a){super(e,t),this.textureAnimation=null;let i=t.filterMode,l=t.textureAnimationId,s=e.viewer.gl;this.index=n,this.priorityPlane=a,this.filterMode=i,this.textureId=t.textureId,this.coordId=t.coordId,this.alpha=t.alpha;let o=t.flags;if(this.unshaded=1&o,this.sphereEnvironmentMap=2&o,this.twoSided=16&o,this.unfogged=32&o,this.noDepthTest=64&o,this.noDepthSet=128&o,this.depthMaskValue=0===i||1===i,this.blendSrc=0,this.blendDst=0,this.blended=i>1,this.blended&&([this.blendSrc,this.blendDst]=r.layerFilterMode(i,s)),-1!==l){let t=e.textureAnimations[l];t&&(this.textureAnimation=t)}this.addVariants("KMTA","alpha"),this.addVariants("KMTF","textureId")}bind(e){let t=this.model.viewer.gl;t.uniform1f(e.uniforms.u_filterMode,this.filterMode),this.blended?(t.enable(t.BLEND),t.blendFunc(this.blendSrc,this.blendDst)):t.disable(t.BLEND),this.twoSided?t.disable(t.CULL_FACE):t.enable(t.CULL_FACE),this.noDepthTest?t.disable(t.DEPTH_TEST):t.enable(t.DEPTH_TEST),this.noDepthSet?t.depthMask(!1):t.depthMask(this.depthMaskValue)}getAlpha(e,t){return this.getScalarValue(e,"KMTA",t,this.alpha)}getTextureId(e,t){return this.getScalarValue(e,"KMTF",t,this.textureId)}}t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(e,t,n){this.model=e,this.shader=t,this.layers=n}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(2),r=n(31);class i extends r.default{constructor(e,t){super(e,t);let n=t.color;this.alpha=t.alpha,this.color=a.vec3.fromValues(n[2],n[1],n[0]),this.geosetId=t.geosetId,this.addVariants("KGAO","alpha"),this.addVariants("KGAC","color")}getAlpha(e,t){return this.getScalarValue(e,"KGAO",t,this.alpha)}getColor(e,t){return this.getVectorValue(e,"KGAC",t,this.color)}}t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(9);class r extends a.default{constructor(e,t,n){super(e,t,n),this.geosetAnimation=e.geosetAnimations[t.geosetAnimationId]}getVisibility(e,t){return this.geosetAnimation?this.geosetAnimation.getAlpha(e,t):(e[0]=1,-1)}}t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(9);class r extends a.default{constructor(e,t,n){super(e,t,n),this.type=t.type,this.attenuation=t.attenuation,this.color=t.color,this.intensity=t.intensity,this.ambientColor=t.ambientColor,this.ambientIntensity=t.ambientIntensity}getAttenuationStart(e,t){return this.getScalarValue(e,"KLAS",t,this.attenuation[0])}getAttenuationEnd(e,t){return this.getScalarValue(e,"KLAE",t,this.attenuation[1])}getIntensity(e,t){return this.getScalarValue(e,"KLAI",t,this.intensity)}getColor(e,t){return this.getVectorValue(e,"KLAC",t,this.color)}getAmbientIntensity(e,t){return this.getScalarValue(e,"KLBI",t,this.ambientIntensity)}getAmbientColor(e,t){return this.getVectorValue(e,"KLBC",t,this.ambientColor)}}t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(9);class r extends a.default{}t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(9);class r extends a.default{constructor(e,t,n){super(e,t,n),this.internalModel=null;let a=t.path.replace(/\\/g,"/").toLowerCase().replace(".mdl",".mdx");this.path=a,this.attachmentId=t.attachmentId,""!==a&&-1!=a.indexOf(".mdx")&&(this.internalModel=e.viewer.load(a,e.pathSolver,e.solverParams))}getVisibility(e,t){return this.getScalarValue(e,"KATV",t,1)}}t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(9);class r extends a.default{constructor(e,t,n){super(e,t,n),this.ok=!1,this.internalModel=e.viewer.load(t.path.replace(/\\/g,"/").toLowerCase().replace(".mdl",".mdx"),e.pathSolver,e.solverParams),this.speed=t.speed,this.latitude=t.latitude,this.longitude=t.longitude,this.lifeSpan=t.lifeSpan,this.gravity=t.gravity,this.emissionRate=t.emissionRate,this.internalModel.whenLoaded(()=>{this.ok=this.internalModel.ok})}getSpeed(e,t){return this.getScalarValue(e,"KPES",t,this.speed)}getLatitude(e,t){return this.getScalarValue(e,"KPLTV",t,this.latitude)}getLongitude(e,t){return this.getScalarValue(e,"KPLN",t,this.longitude)}getLifeSpan(e,t){return this.getScalarValue(e,"KPEL",t,this.lifeSpan)}getGravity(e,t){return this.getScalarValue(e,"KPEG",t,this.gravity)}getEmissionRate(e,t){return this.getScalarValue(e,"KPEE",t,this.emissionRate)}getVisibility(e,t){return this.getScalarValue(e,"KPEV",t,1)}}t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(9),r=n(66),i=n(109),l=n(39);class s extends a.default{constructor(e,t,n){super(e,t,n),this.geometryEmitterType=l.EMITTER_PARTICLE2,this.teamColored=0,this.internalTexture=null,this.colors=[],this.ok=!0,this.width=t.width,this.length=t.length,this.speed=t.speed,this.latitude=t.latitude,this.gravity=t.gravity,this.emissionRate=t.emissionRate,this.squirt=t.squirt,this.lifeSpan=t.lifeSpan,this.variation=t.variation,this.tailLength=t.tailLength,this.timeMiddle=t.timeMiddle;let a=t.replaceableId;if(this.columns=t.columns,this.rows=t.rows,0===a)this.internalTexture=e.textures[t.textureId];else if(1===a||2===a)this.teamColored=1;else{let t=e.reforged?".dds":".blp";this.internalTexture=e.viewer.load(`ReplaceableTextures\\${i.default[a]}${t}`,e.pathSolver,e.solverParams)}this.replaceableId=t.replaceableId;let s=t.headOrTail;this.head=0===s||2===s,this.tail=1===s||2===s,this.cellWidth=1/t.columns,this.cellHeight=1/t.rows;let o=t.segmentColors,u=t.segmentAlphas;for(let e=0;e<3;e++){let t=o[e];this.colors[e]=new Float32Array([t[0],t[1],t[2],u[e]/255])}this.scaling=t.segmentScaling;let c=t.headIntervals,d=t.tailIntervals;this.intervals=[new Float32Array(c[0]),new Float32Array(c[1]),new Float32Array(d[0]),new Float32Array(d[1])];let h=r.emitterFilterMode(t.filterMode,this.model.viewer.gl);this.blendSrc=h[0],this.blendDst=h[1],this.priorityPlane=t.priorityPlane}getWidth(e,t){return this.getScalarValue(e,"KP2N",t,this.width)}getLength(e,t){return this.getScalarValue(e,"KP2W",t,this.length)}getSpeed(e,t){return this.getScalarValue(e,"KP2S",t,this.speed)}getLatitude(e,t){return this.getScalarValue(e,"KP2L",t,this.latitude)}getGravity(e,t){return this.getScalarValue(e,"KP2G",t,this.gravity)}getEmissionRate(e,t){return this.getScalarValue(e,"KP2E",t,this.emissionRate)}getVisibility(e,t){return this.getScalarValue(e,"KP2V",t,1)}getVariation(e,t){return this.getScalarValue(e,"KP2R",t,this.variation)}}t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(31);class r extends a.default{constructor(e,t){super(e,t),this.name=t.name,this.position=t.position,this.fieldOfView=t.fieldOfView,this.farClippingPlane=t.farClippingPlane,this.nearClippingPlane=t.nearClippingPlane,this.targetPosition=t.targetPosition}getPositionTranslation(e,t){return this.getVectorValue(e,"KCTR",t,this.position)}getTargetTranslation(e,t){return this.getVectorValue(e,"KTTR",t,this.targetPosition)}getRotation(e,t){return this.getScalarValue(e,"KCRL",t,0)}}t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(46),r=n(351),i=n(67),l=n(9),s=n(66),o=n(39),u=e=>new i.MappedData(e),c=e=>r.decodeAudioData(e);class d extends l.default{constructor(e,t,n){super(e,t,n),this.geometryEmitterType=-1,this.globalSequence=-1,this.defval=new Uint32Array(1),this.internalModel=null,this.internalTexture=null,this.colors=null,this.intervalTimes=null,this.scale=0,this.columns=0,this.rows=0,this.lifeSpan=0,this.blendSrc=0,this.blendDst=0,this.intervals=null,this.distanceCutoff=0,this.maxDistance=0,this.minDistance=0,this.pitch=0,this.pitchVariance=0,this.volume=0,this.decodedBuffers=[],this.ok=!1;let r=e.viewer,i=t.name,l=i.substring(0,3),s=i.substring(4);"FPT"===l&&(l="SPL"),"SPL"===l?this.geometryEmitterType=o.EMITTER_SPLAT:"UBR"===l&&(this.geometryEmitterType=o.EMITTER_UBERSPLAT),this.type=l,this.id=s,this.tracks=t.tracks;let c=t.globalSequenceId;-1!==c&&(this.globalSequence=e.globalSequences[c]);let d=[],h=e.pathSolver,f=e.solverParams;if("SPN"===l)d[0]=r.loadGeneric(a.default(h("Splats\\SpawnData.slk")[0],f),"text",u);else if("SPL"===l)d[0]=r.loadGeneric(a.default(h("Splats\\SplatData.slk")[0],f),"text",u);else if("UBR"===l)d[0]=r.loadGeneric(a.default(h("Splats\\UberSplatData.slk")[0],f),"text",u);else{if("SND"!==l)return;e.reforged||d.push(r.loadGeneric(a.default(h("UI\\SoundInfo\\AnimLookups.slk")[0],f),"text",u)),d.push(r.loadGeneric(a.default(h("UI\\SoundInfo\\AnimSounds.slk")[0],f),"text",u))}let _=r.promise();r.whenLoaded(d,e=>{for(let t of e)if(!t.ok)return void _.resolve();this.load(e),_.resolve()})}load(e){let t=e[0].data.getRow(this.id),n=this.type;if(t){let r=this.model,i=r.viewer,l=r.pathSolver;if("SPN"===n)this.internalModel=i.load(t.Model.replace(".mdl",".mdx"),l,r.solverParams),this.internalModel&&this.internalModel.whenLoaded(e=>this.ok=e.ok);else if("SPL"===n||"UBR"===n){let e=r.reforged?".dds":".blp";this.internalTexture=i.load(`replaceabletextures/splats/${t.file}${e}`,l,r.solverParams),this.scale=t.Scale,this.colors=[new Float32Array([t.StartR,t.StartG,t.StartB,t.StartA]),new Float32Array([t.MiddleR,t.MiddleG,t.MiddleB,t.MiddleA]),new Float32Array([t.EndR,t.EndG,t.EndB,t.EndA])],"SPL"===n?(this.columns=t.Columns,this.rows=t.Rows,this.lifeSpan=t.Lifespan+t.Decay,this.intervalTimes=new Float32Array([t.Lifespan,t.Decay]),this.intervals=[new Float32Array([t.UVLifespanStart,t.UVLifespanEnd,t.LifespanRepeat]),new Float32Array([t.UVDecayStart,t.UVDecayEnd,t.DecayRepeat])]):(this.columns=1,this.rows=1,this.lifeSpan=t.BirthTime+t.PauseTime+t.Decay,this.intervalTimes=new Float32Array([t.BirthTime,t.PauseTime,t.Decay]));let a=s.emitterFilterMode(t.BlendMode,i.gl);this.blendSrc=a[0],this.blendDst=a[1],this.ok=!0}else if("SND"===n&&i.audioEnabled){let n=e[1].data;if(t=n.getRow(t.SoundLabel),t){this.distanceCutoff=t.DistanceCutoff,this.maxDistance=t.MaxDistance,this.minDistance=t.MinDistance,this.pitch=t.Pitch,this.pitchVariance=t.PitchVariance,this.volume=t.Volume;let e=t.FileNames.split(",").map(e=>i.loadGeneric(a.default(l(t.DirectoryBase+e)[0],r.solverParams),"arrayBuffer",c));i.whenLoaded(e,e=>{for(let t of e)this.decodedBuffers.push(t.data);this.ok=!0})}}}else console.warn("Unknown event object ID",n,this.id)}getValue(e,t){if(-1!==this.globalSequence){let n=this.globalSequence;return this.getValueAtTime(e,t.counter%n,0,n)}if(-1!==t.sequence){let n=this.model.sequences[t.sequence].interval;return this.getValueAtTime(e,t.frame,n[0],n[1])}return e[0]=this.defval[0],-1}getValueAtTime(e,t,n,a){let r=this.tracks;if(t>=n&&t<=a)for(let a=r.length-1;a>-1;a--){if(r[a]<n)return e[0]=0,a;if(r[a]<=t)return e[0]=1,a}return e[0]=0,-1}}t.default=d},function(e,t,n){"use strict";let a;Object.defineProperty(t,"__esModule",{value:!0}),"function"==typeof OfflineAudioContext&&(a=new OfflineAudioContext(1,1,48e3)),t.decodeAudioData=function(e){if(a)return a.decodeAudioData(e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(9);class r extends a.default{}t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(354),r=n(111),i=n(112),l=0,s=1,o=2;t.default=function(e,t){if(t.length>0){let n=e.viewer.gl,u=0,c=0,d=0,h=0,f=0,_=[];for(let e=0,n=t.length;e<n;e++){let n=t[e];if(0===n.lod){let t=n.vertices.length/3;if(u+=12*t,c+=12*t,d+=n.uvSets.length*t*8,n.skin.length)h+=8*t,_[e]=o;else{let a=0;for(let e of n.matrixGroups)e>a&&(a=e);a>4?(h+=9*t,_[e]=s):(h+=5*t,_[e]=l)}f+=n.faces.byteLength}}let m=0,p=m+u,g=p+c,b=g+d,w=0;e.arrayBuffer=n.createBuffer(),n.bindBuffer(n.ARRAY_BUFFER,e.arrayBuffer),n.bufferData(n.ARRAY_BUFFER,b+h,n.STATIC_DRAW),e.elementBuffer=n.createBuffer(),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e.elementBuffer),n.bufferData(n.ELEMENT_ARRAY_BUFFER,f,n.STATIC_DRAW);for(let l=0,u=t.length;l<u;l++){let u=t[l];if(0===u.lod){let t,c=u.vertices,d=u.normals,h=u.uvSets,f=u.faces,v=u.vertices.length/3,A=_[l];if(A===o)t=u.skin;else{let e=u.matrixIndices,n=u.vertexGroups,a=[],r=0,i=4;A===s&&(i=8),t=new Uint8Array(v*(i+1));for(let t of u.matrixGroups)a.push(e.subarray(r,r+t)),r+=t;for(let e=0;e<v;e++){let l=a[n[e]];if(r=e*(i+1),l){let e=Math.min(l.length,i);for(let n=0;n<e;n++)t[r+n]=l[n]+1;t[r+i]=e}}}let L=new a.default(e,e.geosets.length,m,p,g,b,w,v,f.length);if(e.geosets.push(L),A===o)e.batches.push(new i.default(e.batches.length,L,e.materials[u.materialId]));else{let t=A===s;for(let n of e.materials[u.materialId].layers)e.batches.push(new r.default(e.batches.length,L,n,t))}n.bufferSubData(n.ARRAY_BUFFER,m,c),m+=c.byteLength,n.bufferSubData(n.ARRAY_BUFFER,p,d),p+=d.byteLength;for(let e of h)n.bufferSubData(n.ARRAY_BUFFER,g,e),g+=e.byteLength;n.bufferSubData(n.ARRAY_BUFFER,b,t),b+=t.byteLength,n.bufferSubData(n.ELEMENT_ARRAY_BUFFER,w,f),w+=f.byteLength}}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(e,t,n,a,r,i,l,s,o){this.geosetAnimation=null,this.model=e,this.index=t,this.positionOffset=n,this.normalOffset=a,this.uvOffset=r,this.skinOffset=i,this.faceOffset=l,this.vertices=s,this.elements=o;for(let n of e.geosetAnimations)n.geosetId===t&&(this.geosetAnimation=n)}bind(e,t){let n=this.model.viewer.gl,a=e.attribs;n.vertexAttribPointer(a.a_position,3,n.FLOAT,!1,0,this.positionOffset),n.vertexAttribPointer(a.a_normal,3,n.FLOAT,!1,0,this.normalOffset),n.vertexAttribPointer(a.a_uv,2,n.FLOAT,!1,0,this.uvOffset+t*this.vertices*8),n.vertexAttribPointer(a.a_bones,4,n.UNSIGNED_BYTE,!1,5,this.skinOffset),n.vertexAttribPointer(a.a_boneNumber,1,n.UNSIGNED_BYTE,!1,5,this.skinOffset+4)}bindExtended(e,t){let n=this.model.viewer.gl,a=e.attribs;n.vertexAttribPointer(a.a_position,3,n.FLOAT,!1,0,this.positionOffset),n.vertexAttribPointer(a.a_normal,3,n.FLOAT,!1,0,this.normalOffset),n.vertexAttribPointer(a.a_uv,2,n.FLOAT,!1,0,this.uvOffset+t*this.vertices*8),n.vertexAttribPointer(a.a_bones,4,n.UNSIGNED_BYTE,!1,9,this.skinOffset),n.vertexAttribPointer(a.a_extendedBones,4,n.UNSIGNED_BYTE,!1,9,this.skinOffset+4),n.vertexAttribPointer(a.a_boneNumber,1,n.UNSIGNED_BYTE,!1,9,this.skinOffset+8)}render(){let e=this.model.viewer.gl;e.drawElements(e.TRIANGLES,this.elements,e.UNSIGNED_SHORT,this.faceOffset)}bindSimple(e){let t=this.model.viewer.gl,n=e.attribs;t.vertexAttribPointer(n.a_position,3,t.FLOAT,!1,0,this.positionOffset),t.vertexAttribPointer(n.a_uv,2,t.FLOAT,!1,0,this.uvOffset)}renderSimple(e){let t=this.model.viewer,n=t.gl;t.webgl.extensions.ANGLE_instanced_arrays.drawElementsInstancedANGLE(n.TRIANGLES,this.elements,n.UNSIGNED_SHORT,this.faceOffset,e)}bindHd(e,t){let n=this.model.viewer.gl,a=e.attribs;n.vertexAttribPointer(a.a_position,3,n.FLOAT,!1,0,this.positionOffset),n.vertexAttribPointer(a.a_normal,3,n.FLOAT,!1,0,this.normalOffset),n.vertexAttribPointer(a.a_uv,2,n.FLOAT,!1,0,this.uvOffset+t*this.vertices*8),n.vertexAttribPointer(a.a_bones,4,n.UNSIGNED_BYTE,!1,8,this.skinOffset),n.vertexAttribPointer(a.a_weights,4,n.UNSIGNED_BYTE,!0,8,this.skinOffset+4)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(111),r=n(113),i=n(112),l=n(114),s=n(356),o=n(9),u=n(110);function c(e){return e instanceof a.default||e instanceof u.default?e.layer.priorityPlane:e.priorityPlane}function d(e,t){return e instanceof r.default?t instanceof a.default&&t.isExtended===e.isExtended:e instanceof l.default?t instanceof i.default&&t.material.shader===e.shader:t instanceof o.default}function h(e,t){return t instanceof a.default?new r.default(e,t.isExtended):t instanceof i.default?new l.default(e,t.material.shader):new s.default(e)}t.default=function(e){let t=[],n=[];for(let a of e.batches)a instanceof i.default||a.layer.filterMode<2?t.push(a):n.push(a);let r=e.opaqueGroups,l=e.translucentGroups,s=null;for(let n of t)s&&d(s,n)||(s=h(e,n),r.push(s)),s.objects.push(n.index);let o=[...[...n,...e.particleEmitters2,...e.ribbonEmitters].sort((e,t)=>c(e)-c(t)),...e.eventObjects];s=null;for(let t of o)(t instanceof a.default||t instanceof i.default||-1!==t.geometryEmitterType)&&(s&&d(s,t)||(s=h(e,t),l.push(s)),s.objects.push(t.index))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(13),r=n(39);t.default=class{constructor(e){this.objects=[],this.model=e}render(e){let t=e.scene,n=e.nodes,i=e.model.viewer,l=i.gl,s=i.webgl.extensions.ANGLE_instanced_arrays,o=a.default.shaders.particles,u=o.uniforms,c=o.attribs;l.depthMask(!1),l.enable(l.BLEND),l.disable(l.CULL_FACE),l.enable(l.DEPTH_TEST),o.use(),l.uniformMatrix4fv(u.u_VP,!1,t.camera.viewProjectionMatrix),l.uniform1i(u.u_texture,0),s.vertexAttribDivisorANGLE(c.a_position,0),l.bindBuffer(l.ARRAY_BUFFER,i.rectBuffer),l.vertexAttribPointer(c.a_position,1,l.UNSIGNED_BYTE,!1,0,0),s.vertexAttribDivisorANGLE(c.a_p0,1),s.vertexAttribDivisorANGLE(c.a_p1,1),s.vertexAttribDivisorANGLE(c.a_p2,1),s.vertexAttribDivisorANGLE(c.a_p3,1),s.vertexAttribDivisorANGLE(c.a_health,1),s.vertexAttribDivisorANGLE(c.a_color,1),s.vertexAttribDivisorANGLE(c.a_tail,1),s.vertexAttribDivisorANGLE(c.a_leftRightTop,1);for(let e of this.objects)r.renderEmitter(n[e].object,o);s.vertexAttribDivisorANGLE(c.a_leftRightTop,0),s.vertexAttribDivisorANGLE(c.a_tail,0),s.vertexAttribDivisorANGLE(c.a_color,0),s.vertexAttribDivisorANGLE(c.a_health,0),s.vertexAttribDivisorANGLE(c.a_p3,0),s.vertexAttribDivisorANGLE(c.a_p2,0),s.vertexAttribDivisorANGLE(c.a_p1,0),s.vertexAttribDivisorANGLE(c.a_p0,0)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(113),r=n(114);t.default=function(e){let t=e.batches,n=e.simpleGroups;for(let i of e.opaqueGroups){let l;l=i instanceof a.default?new a.default(e,i.isExtended):new r.default(e,i.shader);for(let e of i.objects)t[e],l.objects.push(e);n.push(l)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(106),r=n(359);class i extends a.default{getBatch(e){return new r.default(this.scene,this.model,e)}}t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(107),r=n(13);class i extends a.default{bindAndUpdateBuffer(e){let t=this.count,n=this.instances;e.reserve(48*t);let a=e.floatView;for(let e=0;e<t;e++){let t=n[e].worldMatrix,r=12*e;a[r+0]=t[0],a[r+1]=t[1],a[r+2]=t[2],a[r+3]=t[4],a[r+4]=t[5],a[r+5]=t[6],a[r+6]=t[8],a[r+7]=t[9],a[r+8]=t[10],a[r+9]=t[12],a[r+10]=t[13],a[r+11]=t[14]}e.bindAndUpdate(48*t)}render(){let e=this.count;if(e){let t=this.model,n=t.batches,a=t.textures,i=t.viewer,l=i.gl,s=i.webgl,o=s.extensions.ANGLE_instanced_arrays,u=r.default.shaders.simple,c=u.uniforms,d=u.attribs,h=d.a_m0,f=d.a_m1,_=d.a_m2,m=d.a_m3,p=i.buffer,g=this.textureMapper;s.useShaderProgram(u),this.bindAndUpdateBuffer(p),l.vertexAttribPointer(h,3,l.FLOAT,!1,48,0),l.vertexAttribPointer(f,3,l.FLOAT,!1,48,12),l.vertexAttribPointer(_,3,l.FLOAT,!1,48,24),l.vertexAttribPointer(m,3,l.FLOAT,!1,48,36),l.uniformMatrix4fv(c.u_VP,!1,this.scene.camera.viewProjectionMatrix),l.bindBuffer(l.ARRAY_BUFFER,t.arrayBuffer),l.bindBuffer(l.ELEMENT_ARRAY_BUFFER,t.elementBuffer),o.vertexAttribDivisorANGLE(h,1),o.vertexAttribDivisorANGLE(f,1),o.vertexAttribDivisorANGLE(_,1),o.vertexAttribDivisorANGLE(m,1);for(let r of t.simpleGroups)for(let t of r.objects){let r=n[t],s=r.geoset,o=r.layer,d=a[o.textureId];l.uniform1i(c.u_texture,0),i.webgl.bindTexture(g.get(d)||d,0),o.bind(u),s.bindSimple(u),s.renderSimple(e)}o.vertexAttribDivisorANGLE(m,0),o.vertexAttribDivisorANGLE(_,0),o.vertexAttribDivisorANGLE(f,0),o.vertexAttribDivisorANGLE(h,0)}}}t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(2),r=n(38),i=n(23),l=n(361),s=n(362),o=n(363),u=n(366),c=n(368),d=n(370),h=n(372),f=n(373),_=n(374),m=n(108),p=new Float32Array(1),g=a.vec3.create(),b=a.quat.create(),w=a.vec3.create(),v=a.vec3.create(),A=new Float32Array(1),L=new Uint32Array(1);class y extends r.default{constructor(){super(...arguments),this.attachments=[],this.particleEmitters=[],this.particleEmitters2=[],this.ribbonEmitters=[],this.eventObjectEmitters=[],this.nodes=[],this.sortedNodes=[],this.frame=0,this.counter=0,this.sequence=-1,this.sequenceLoopMode=0,this.sequenceEnded=!1,this.teamColor=0,this.vertexColor=new Float32Array([1,1,1,1]),this.allowParticleSpawn=!1,this.forced=!0,this.geosetColors=[],this.layerAlphas=[],this.layerTextures=[],this.uvAnims=[],this.worldMatrices=null,this.boneTexture=null}load(){let e=this.model;for(let t=0,n=e.geosets.length;t<n;t++)this.geosetColors[t]=new Float32Array(4);for(let t=0,n=e.layers.length;t<n;t++)this.layerAlphas[t]=0,this.layerTextures[t]=0,this.uvAnims[t]=new Float32Array(5);let t=i.createSkeletalNodes(e.genericObjects.length,l.default),n=t.nodes,a=0;this.nodes.push(...n),this.worldMatrices=t.worldMatrices;for(let t of e.bones)this.initNode(n,n[a++],t);for(let t of e.lights)this.initNode(n,n[a++],t);for(let t of e.helpers)this.initNode(n,n[a++],t);for(let t of e.attachments){let e;t.internalModel&&(e=new s.default(this,t),this.attachments.push(e)),this.initNode(n,n[a++],t,e)}for(let t of e.particleEmitters){let e=new o.default(this,t);this.particleEmitters.push(e),this.initNode(n,n[a++],t,e)}for(let t of e.particleEmitters2){let e=new u.default(this,t);this.particleEmitters2.push(e),this.initNode(n,n[a++],t,e)}for(let t of e.ribbonEmitters){let e=new c.default(this,t);this.ribbonEmitters.push(e),this.initNode(n,n[a++],t,e)}for(let t of e.eventObjects){let e,r=t.type;e="SPN"===r?new d.default(this,t):"SPL"===r?new h.default(this,t):"UBR"===r?new f.default(this,t):new _.default(this,t),this.eventObjectEmitters.push(e),this.initNode(n,n[a++],t,e)}for(let t of e.collisionShapes)this.initNode(n,n[a++],t);let r=e.hierarchy;for(let e=0,t=n.length;e<t;e++)this.sortedNodes[e]=n[r[e]];this.setSequence(this.sequence),e.bones.length&&(this.boneTexture=new m.default(e.viewer.gl,4,4*e.bones.length,1))}clearEmittedObjects(){for(let e of this.particleEmitters)e.clear();for(let e of this.particleEmitters2)e.clear();for(let e of this.ribbonEmitters)e.clear();for(let e of this.eventObjectEmitters)e.clear()}initNode(e,t,n,a){t.pivot.set(n.pivot),-1===n.parentId?t.parent=this:t.parent=e[n.parentId],n.billboarded&&(t.billboarded=!0),a&&(t.object=a)}hide(){super.hide();for(let e of this.attachments)e.internalInstance.hide()}updateNodes(e,t){let n=this.sortedNodes,a=this.sequence,r=this.model.sortedGenericObjects,i=this.scene;for(let l=0,s=n.length;l<s;l++){let s=r[l],o=n[l],u=o.parent;s.getVisibility(p,this);let c=p[0]>0,d=t||u.visible&&c;if(o.visible=d,d){let n=!1,r=s.variants,l=o.localLocation,d=o.localRotation,h=o.localScale;(t||r.generic[a])&&(n=!0,(t||r.translation[a])&&(s.getTranslation(g,this),l[0]=g[0],l[1]=g[1],l[2]=g[2]),(t||r.rotation[a])&&(s.getRotation(b,this),d[0]=b[0],d[1]=b[1],d[2]=b[2],d[3]=b[3]),(t||r.scale[a])&&(s.getScale(w,this),h[0]=w[0],h[1]=w[1],h[2]=w[2]));let f=t||n||u.wasDirty||s.anyBillboarding;o.wasDirty=f,f&&o.recalculateTransformation(i);let _=o.object;_&&c&&_.update(e),o.updateChildren(e,i)}}}updateBatches(e){let t=this.model,n=t.geosets,a=t.layers,r=this.geosetColors,i=this.layerAlphas,l=this.layerTextures,s=this.uvAnims,o=this.sequence;for(let t=0,a=n.length;t<a;t++){let a=n[t].geosetAnimation,i=r[t];a?((e||a.variants.color[o])&&(a.getColor(v,this),i[0]=v[0],i[1]=v[1],i[2]=v[2]),(e||a.variants.alpha[o])&&(a.getAlpha(A,this),i[3]=A[0])):e&&(i[0]=1,i[1]=1,i[2]=1,i[3]=1)}for(let t=0,n=a.length;t<n;t++){let n=a[t],r=n.textureAnimation,u=s[t];(e||n.variants.alpha[o])&&(n.getAlpha(A,this),i[t]=A[0]),(e||n.variants.textureId[o])&&(n.getTextureId(L,this),l[t]=L[0]),r?((e||r.variants.translation[o])&&(r.getTranslation(g,this),u[0]=g[0],u[1]=g[1]),(e||r.variants.rotation[o])&&(r.getRotation(b,this),u[2]=b[2],u[3]=b[3]),(e||r.variants.scale[o])&&(r.getScale(w,this),u[4]=w[0])):e&&(u[0]=0,u[1]=0,u[2]=0,u[3]=1,u[4]=1)}}updateBoneTexture(){this.boneTexture&&this.boneTexture.bindAndUpdate(this.worldMatrices)}renderOpaque(){let e=this.model;for(let t of e.opaqueGroups)t.render(this)}renderTranslucent(){let e=this.model;for(let t of e.translucentGroups)t.render(this)}updateAnimations(e){let t=this.model,n=this.sequence;if(-1!==n){let e=t.sequences[n],a=e.interval,r=t.viewer.frameTime;this.frame+=r,this.counter+=r,this.allowParticleSpawn=!0,this.frame>=a[1]?(2===this.sequenceLoopMode||0===this.sequenceLoopMode&&0===e.flags?(this.frame=a[0],this.resetEventEmitters()):(this.frame=a[1],this.counter-=r,this.allowParticleSpawn=!1),this.sequenceEnded=!0):this.sequenceEnded=!1}let a=this.forced;-1===n?a&&(this.updateNodes(e,a),this.updateBoneTexture(),this.updateBatches(a)):(this.updateNodes(e,a),this.updateBoneTexture(),this.updateBatches(a)),this.forced=!1}setTeamColor(e){return this.teamColor=e,this}setVertexColor(e){return this.vertexColor.set(e),this}setSequence(e){let t=this.model;if(this.sequence=e,t.ok){let n=t.sequences;e<0||e>n.length-1?(this.sequence=-1,this.frame=0,this.allowParticleSpawn=!1):this.frame=n[e].interval[0],this.resetEventEmitters(),this.forced=!0}return this}setSequenceLoopMode(e){return this.sequenceLoopMode=e,this}getAttachment(e){let t=this.model.attachments[e];if(t)return this.nodes[t.index]}resetEventEmitters(){}}t.default=y},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(2),r=n(23);class i extends r.SkeletalNode{convertBasis(e){a.quat.rotateY(e,e,-Math.PI/2),a.quat.rotateX(e,e,-Math.PI/2)}}t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=new Float32Array(1);t.default=class{constructor(e,t){let n=t.internalModel.addInstance();n.setSequenceLoopMode(2),n.dontInheritScaling=!1,n.hide(),n.setParent(e.nodes[t.objectId]),this.instance=e,this.attachment=t,this.internalInstance=n}update(){let e=this.instance,t=this.internalInstance;t.model.ok&&e.scene&&(this.attachment.getVisibility(a,this.instance),a[0]>.1?(e.scene.addInstance(t),t.hidden()&&(t.show(),t.setSequence(0))):t.hide())}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(40),r=n(365),i=new Float32Array(1);class l extends a.default{updateEmission(e){let t=this.instance;if(t.allowParticleSpawn){this.emitterObject.getEmissionRate(i,t),this.currentEmission+=i[0]*e}}emit(){this.emitObject()}createObject(){return new r.default(this)}}t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(e){this.objects=[],this.alive=0,this.currentEmission=0,this.instance=e}update(e){this.updateEmission(e);let t=this.currentEmission;if(t>=1)for(let e=0;e<t;e+=1)this.emit()}clear(){let e=this.objects;for(let t=0,n=this.alive;t<n;t++){e[t].health=0}this.currentEmission=0}emitObject(e){let t=this.objects;this.alive===t.length&&t.push(this.createObject());let n=t[this.alive];return n.index=this.alive,n.bind(e),this.alive+=1,this.currentEmission-=1,this.instance.scene.emittedObjectUpdater.add(n),n}kill(e){let t=this.objects;this.alive-=1;let n=t[this.alive];t[e.index]=n,t[this.alive]=e,n.index=e.index,e.index=-1}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(2),r=n(7),i=n(12),l=n(24),s=a.quat.create(),o=a.vec3.create(),u=new Float32Array(1),c=new Float32Array(1),d=new Float32Array(1),h=new Float32Array(1);class f extends l.default{constructor(e){super(e),this.velocity=a.vec3.create(),this.gravity=0;let t=e.emitterObject;this.internalInstance=t.internalModel.addInstance()}bind(){let e=this.emitter,t=e.instance,n=t.scene,l=e.emitterObject,o=t.nodes[l.index],f=this.internalInstance,_=o.worldScale,m=this.velocity;l.getLatitude(u,t),l.getLifeSpan(c,t),l.getGravity(d,t),l.getSpeed(h,t),this.health=c[0],this.gravity=d[0]*_[2],a.quat.identity(s),a.quat.rotateZ(s,s,i.randomInRange(-Math.PI,Math.PI)),a.quat.rotateY(s,s,i.randomInRange(-u[0],u[0])),a.vec3.transformQuat(m,r.VEC3_UNIT_Z,s),a.vec3.transformQuat(m,m,o.worldRotation),a.vec3.scale(m,m,h[0]),a.vec3.mul(m,m,_),n.addInstance(f),f.setTransformation(o.worldLocation,a.quat.setAxisAngle(s,r.VEC3_UNIT_Z,i.randomInRange(0,2*Math.PI)),o.worldScale),f.setSequence(0),f.show()}update(e){let t=this.internalInstance;if(t.paused=!1,this.health-=e,this.health>0){let n=this.velocity;n[2]-=this.gravity*e,t.move(a.vec3.scale(o,n,e))}else t.hide()}}t.default=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(40),r=n(367),i=new Float32Array(1);class l extends a.default{constructor(e,t){super(e,t),this.lastEmissionKey=-1,this.node=e.nodes[t.index]}updateEmission(e){let t=this.instance;if(t.allowParticleSpawn){let n=this.emitterObject,a=n.getEmissionRate(i,t);n.squirt?(a!==this.lastEmissionKey&&(this.currentEmission+=i[0]),this.lastEmissionKey=a):this.currentEmission+=i[0]*e}}emit(){let e=this.emitterObject;e.head&&this.emitObject(0),e.tail&&this.emitObject(1)}createObject(){return new r.default(this)}}t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(2),r=n(7),i=n(12),l=n(24),s=a.quat.create(),o=new Float32Array(1),u=new Float32Array(1),c=new Float32Array(1),d=new Float32Array(1),h=new Float32Array(1),f=new Float32Array(1);class _ extends l.default{constructor(){super(...arguments),this.tail=0,this.gravity=0,this.location=a.vec3.create(),this.velocity=a.vec3.create(),this.scale=a.vec3.create()}bind(e){let t=this.emitter,n=t.instance,l=t.emitterObject;l.getWidth(o,n),l.getLength(u,n),l.getLatitude(c,n),l.getVariation(d,n),l.getSpeed(h,n),l.getGravity(f,n);let _=t.node,m=_.pivot,p=_.worldScale,g=.5*o[0],b=.5*u[0],w=i.degToRad(c[0]),v=d[0],A=h[0],L=this.location,y=this.velocity;this.health=l.lifeSpan,this.tail=e,this.gravity=f[0]*p[2],a.vec3.copy(this.scale,p),L[0]=m[0]+i.randomInRange(-g,g),L[1]=m[1]+i.randomInRange(-b,b),L[2]=m[2],l.modelSpace||a.vec3.transformMat4(L,L,_.worldMatrix),a.quat.identity(s),a.quat.rotateZ(s,s,Math.PI/2),a.quat.rotateY(s,s,i.randomInRange(-w,w)),l.lineEmitter||a.quat.rotateX(s,s,i.randomInRange(-w,w)),l.modelSpace||a.quat.mul(s,_.worldRotation,s),a.vec3.transformQuat(y,r.VEC3_UNIT_Z,s),a.vec3.scale(y,y,A+i.randomInRange(-v,v)),l.modelSpace||a.vec3.mul(y,y,p)}update(e){if(this.health-=e,this.health>0){let t=this.location,n=this.velocity;n[2]-=this.gravity*e,t[0]+=n[0]*e,t[1]+=n[1]*e,t[2]+=n[2]*e}}}t.default=_},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(40),r=n(369);class i extends a.default{constructor(){super(...arguments),this.first=null,this.last=null}updateEmission(e){if(this.instance.allowParticleSpawn){let t=this.emitterObject;this.currentEmission=Math.min(this.currentEmission+t.emissionRate*e,1)}}emit(){let e=this.emitObject(),t=this.last;t?(t.next=e,e.prev=t):this.first=e,this.last=e}kill(e){super.kill(e);let t=e.prev,n=e.next;e===this.first&&(this.first=n),e===this.last&&(this.first=null,this.last=null),t&&(t.next=n),n&&(n.prev=t),e.prev=null,e.next=null}createObject(){return new r.default(this)}}t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(2),r=n(24),i=a.vec3.create(),l=a.vec3.create(),s=a.vec3.create(),o=new Float32Array(1),u=new Uint32Array(1);class c extends r.default{constructor(){super(...arguments),this.vertices=new Float32Array(6),this.color=new Uint8Array(4),this.slot=0,this.prev=null,this.next=null}bind(){let e=this.emitter,t=e.instance,n=e.emitterObject,r=t.nodes[n.index],[s,o,u]=r.pivot,c=r.worldMatrix,d=this.vertices;this.health=e.emitterObject.lifeSpan,n.getHeightBelow(i,t),n.getHeightAbove(l,t),i[1]=o-i[0],i[0]=s,i[2]=u,l[1]=o+l[0],l[0]=s,l[2]=u,a.vec3.transformMat4(i,i,c),a.vec3.transformMat4(l,l,c),d[0]=l[0],d[1]=l[1],d[2]=l[2],d[3]=i[0],d[4]=i[1],d[5]=i[2]}update(e){if(this.health-=e,this.health>0){let t=this.emitter,n=t.instance,a=t.emitterObject,r=this.color,i=this.vertices,l=a.gravity*e*e;a.getColor(s,n),a.getAlpha(o,n),a.getTextureSlot(u,n),i[1]-=l,i[4]-=l,r[0]=255*s[0],r[1]=255*s[1],r[2]=255*s[2],r[3]=255*o[0],this.slot=u[0]}}}t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(41),r=n(371);class i extends a.default{createObject(){return new r.default(this)}}t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(24);class r extends a.default{constructor(e){super(e);let t=e.emitterObject.internalModel;this.internalInstance=t.addInstance()}bind(){let e=this.emitter,t=e.instance,n=t.scene,a=t.nodes[e.emitterObject.index],r=this.internalInstance;r.setSequence(0),r.setTransformation(a.worldLocation,a.worldRotation,a.worldScale),r.show(),n.addInstance(r),this.health=1}update(e){let t=this.internalInstance,n=t.model;t.frame>=n.sequences[0].interval[1]&&(this.health=0,t.hide())}}t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(41),r=n(115);class i extends a.default{createObject(){return new r.default(this)}}t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(41),r=n(115);class i extends a.default{createObject(){return new r.default(this)}}t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(41),r=n(375);class i extends a.default{createObject(){return new r.default(this)}}t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(24);class r extends a.default{bind(){let e=this.emitter,t=e.instance,n=t.model.viewer,a=t.scene;if(n.enableAudio&&a.audioEnabled){let n=e.emitterObject,r=t.nodes[n.index],i=a.audioContext,l=n.decodedBuffers,s=i.createPanner(),o=i.createBufferSource(),u=r.worldLocation;s.setPosition(u[0],u[1],u[2]),s.maxDistance=n.distanceCutoff,s.refDistance=n.minDistance,s.connect(i.destination),o.buffer=l[Math.random()*l.length|0],o.connect(s),o.start(0)}}update(e){}}t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=`\nuniform mat4 u_VP;\nuniform vec4 u_vertexColor;\nuniform vec4 u_geosetColor;\nuniform float u_layerAlpha;\nuniform vec2 u_uvTrans;\nuniform vec2 u_uvRot;\nuniform float u_uvScale;\nuniform bool u_hasBones;\n\nattribute vec3 a_position;\nattribute vec3 a_normal;\nattribute vec2 a_uv;\nattribute vec4 a_bones;\n#ifdef EXTENDED_BONES\nattribute vec4 a_extendedBones;\n#endif\nattribute float a_boneNumber;\n\nvarying vec2 v_uv;\nvarying vec4 v_color;\nvarying vec4 v_uvTransRot;\nvarying float v_uvScale;\n\n${n(65).default}\n\nvoid transform(inout vec3 position, inout vec3 normal) {\n  // For the broken models out there, since the game supports this.\n  if (a_boneNumber > 0.0) {\n    vec4 position4 = vec4(position, 1.0);\n    vec4 normal4 = vec4(normal, 0.0);\n    mat4 bone;\n    vec4 p;\n    vec4 n;\n\n    for (int i = 0; i < 4; i++) {\n      if (a_bones[i] > 0.0) {\n        bone = fetchMatrix(a_bones[i] - 1.0, 0.0);\n\n        p += bone * position4;\n        n += bone * normal4;\n      }\n    }\n\n    #ifdef EXTENDED_BONES\n      for (int i = 0; i < 4; i++) {\n        if (a_extendedBones[i] > 0.0) {\n          bone = fetchMatrix(a_extendedBones[i] - 1.0, 0.0);\n\n          p += bone * position4;\n          n += bone * normal4;\n        }\n      }\n    #endif\n\n    position = p.xyz / a_boneNumber;\n    normal = normalize(n.xyz);\n  }\n}\n\nvoid main() {\n  vec3 position = a_position;\n  vec3 normal = a_normal;\n\n  if (u_hasBones) {\n    transform(position, normal);\n  }\n\n  v_uv = a_uv;\n  v_color = u_vertexColor * u_geosetColor.bgra * vec4(1.0, 1.0, 1.0, u_layerAlpha);\n  v_uvTransRot = vec4(u_uvTrans, u_uvRot);\n  v_uvScale = u_uvScale;\n\n  gl_Position = u_VP * vec4(position, 1.0);\n}\n`;t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=`\nprecision mediump float;\n\n${n(378).default}\n\nuniform sampler2D u_texture;\nuniform float u_filterMode;\n\nvarying vec2 v_uv;\nvarying vec4 v_color;\nvarying vec4 v_uvTransRot;\nvarying float v_uvScale;\n\nvoid main() {\n  vec2 uv = v_uv;\n\n  // Translation animation\n  uv += v_uvTransRot.xy;\n\n  // Rotation animation\n  uv = quat_transform(v_uvTransRot.zw, uv - 0.5) + 0.5;\n\n  // Scale animation\n  uv = v_uvScale * (uv - 0.5) + 0.5;\n\n  vec4 texel = texture2D(u_texture, uv);\n  vec4 color = texel * v_color;\n\n  // 1bit Alpha\n  if (u_filterMode == 1.0 && color.a < 0.75) {\n    discard;\n  }\n\n  // "Close to 0 alpha"\n  if (u_filterMode >= 5.0 && color.a < 0.02) {\n    discard;\n  }\n\n  // if (!u_unshaded) {\n  //   color *= clamp(dot(v_normal, lightDirection) + 0.45, 0.0, 1.0);\n  // }\n\n  gl_FragColor = color;\n}\n`;t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default="\n// A 2D quaternion*vector.\n// q is the zw components of the original quaternion.\nvec2 quat_transform(vec2 q, vec2 v) {\n  vec2 uv = vec2(-q.x * v.y, q.x * v.x);\n  vec2 uuv = vec2(-q.x * uv.y, q.x * uv.x);\n\n  return v + 2.0 * (uv * q.y + uuv);\n}\n"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default="\n#define EMITTER_PARTICLE2 0\n#define EMITTER_RIBBON 1\n#define EMITTER_SPLAT 2\n#define EMITTER_UBERSPLAT 3\n#define HEAD 0.0\n\nuniform mat4 u_VP;\nuniform int u_emitter;\n\n// Shared\nuniform vec4 u_colors[3];\nuniform vec3 u_vertices[4];\nuniform vec3 u_intervals[4];\nuniform float u_lifeSpan;\nuniform float u_columns;\nuniform float u_rows;\n\n// Particle2\nuniform vec3 u_scaling;\nuniform vec3 u_cameraZ;\nuniform float u_timeMiddle;\nuniform bool u_teamColored;\n\n// Splat and Uber.\nuniform vec3 u_intervalTimes;\n\n// Vertices\nattribute float a_position;\n\n// Instances\nattribute vec3 a_p0;\nattribute vec3 a_p1;\nattribute vec3 a_p2;\nattribute vec3 a_p3;\nattribute float a_health;\nattribute vec4 a_color;\nattribute float a_tail;\nattribute vec3 a_leftRightTop;\n\nvarying vec2 v_texcoord;\nvarying vec4 v_color;\n\nfloat getCell(vec3 interval, float factor) {\n  float start = interval[0];\n  float end = interval[1];\n  float repeat = interval[2];\n  float spriteCount = end - start;\n\n  if (spriteCount > 0.0) {\n    // Repeating speeds up the sprite animation, which makes it effectively run N times in its interval.\n    // E.g. if repeat is 4, the sprite animation will be seen 4 times, and thus also run 4 times as fast.\n    // The sprite index is limited to the number of actual sprites.\n    return min(start + mod(floor(spriteCount * repeat * factor), spriteCount), u_columns * u_rows - 1.0);\n  }\n\n  return 0.0;\n}\n\nvoid particle2() {\n  float factor = (u_lifeSpan - a_health) / u_lifeSpan;\n  int index = 0;\n\n  if (factor < u_timeMiddle) {\n    factor = factor / u_timeMiddle;\n    index = 0;\n  } else {\n    factor = (factor - u_timeMiddle) / (1.0 - u_timeMiddle);\n    index = 1;\n  }\n\n  factor = min(factor, 1.0);\n\n  float scale = mix(u_scaling[index], u_scaling[index + 1], factor);\n  vec4 color = mix(u_colors[index], u_colors[index + 1], factor);\n\n  float cell = 0.0;\n\n  if (u_teamColored) {\n    cell = a_leftRightTop[0];\n  } else {\n    vec3 interval;\n\n    if (a_tail == HEAD) {\n      interval = u_intervals[index];\n    } else {\n      interval = u_intervals[index + 2];\n    }\n\n    cell = getCell(interval, factor);\n  }\n\n  float left = floor(mod(cell, u_columns));\n  float top = floor(cell / u_columns);\n  float right = left + 1.0;\n  float bottom = top + 1.0;\n\n  left /= u_columns;\n  right /= u_columns;\n  top /= u_rows;\n  bottom /= u_rows;\n\n  if (a_position == 0.0) {\n    v_texcoord = vec2(right, top);\n  } else if (a_position == 1.0) {\n    v_texcoord = vec2(left, top);\n  } else if (a_position == 2.0) {\n    v_texcoord = vec2(left, bottom);\n  } else if (a_position == 3.0) {\n    v_texcoord = vec2(right, bottom);\n  }\n\n  v_color = color;\n  \n  if (a_tail == HEAD) {\n    gl_Position = u_VP * vec4(a_p0 + (u_vertices[int(a_position)] * scale), 1.0);\n  } else {\n    // Get the normal to the tail in camera space.\n    // This allows to build a 2D rectangle around the 3D tail.\n    vec3 normal = cross(u_cameraZ, normalize(a_p1 - a_p0));\n    vec3 boundary = normal * scale * a_p2[0];\n    vec3 position;\n\n    if (a_position == 0.0) {\n      position = a_p0 - boundary;\n    } else if (a_position == 1.0) {\n      position = a_p1 - boundary;\n    } else if (a_position == 2.0) {\n      position = a_p1 + boundary;\n    } else if (a_position == 3.0) {\n      position = a_p0 + boundary;\n    }\n\n    gl_Position = u_VP * vec4(position, 1.0);\n  }\n}\n\nvoid ribbon() {\n  vec3 position;\n  float left = a_leftRightTop[0] / 255.0;\n  float right = a_leftRightTop[1] / 255.0;\n  float top = a_leftRightTop[2] / 255.0;\n  float bottom = top + 1.0;\n\n  if (a_position == 0.0) {\n    v_texcoord = vec2(right, top);\n    position = a_p0;\n  } else if (a_position == 1.0) {\n    v_texcoord = vec2(right, bottom);\n    position = a_p1;\n  } else if (a_position == 2.0) {\n    v_texcoord = vec2(left, bottom);\n    position = a_p2;\n  } else if (a_position == 3.0) {\n    v_texcoord = vec2(left, top);\n    position = a_p3;\n  }\n\n  v_texcoord[0] /= u_columns;\n  v_texcoord[1] /= u_rows;\n\n  v_color = a_color;\n\n  gl_Position = u_VP * vec4(position, 1.0);\n}\n\nvoid splat() {\n  float factor = u_lifeSpan - a_health;\n  int index;\n\n  if (factor < u_intervalTimes[0]) {\n    factor = factor / u_intervalTimes[0];\n    index = 0;\n  } else {\n    factor = (factor - u_intervalTimes[0]) / u_intervalTimes[1];\n    index = 1;\n  }\n\n  float cell = getCell(u_intervals[index], factor);\n  float left = floor(mod(cell, u_columns));\n  float top = floor(cell / u_columns);\n  float right = left + 1.0;\n  float bottom = top + 1.0;\n  vec3 position;\n\n  if (a_position == 0.0) {\n    v_texcoord = vec2(left, top);\n    position = a_p0;\n  } else if (a_position == 1.0) {\n    v_texcoord = vec2(left, bottom);\n    position = a_p1;\n  } else if (a_position == 2.0) {\n    v_texcoord = vec2(right, bottom);\n    position = a_p2;\n  } else if (a_position == 3.0) {\n    v_texcoord = vec2(right, top);\n    position = a_p3;\n  }\n\n  v_texcoord[0] /= u_columns;\n  v_texcoord[1] /= u_rows;\n\n  v_color = mix(u_colors[index], u_colors[index + 1], factor) / 255.0;\n\n  gl_Position = u_VP * vec4(position, 1.0);\n}\n\nvoid ubersplat() {\n  float factor = u_lifeSpan - a_health;\n  vec4 color;\n\n  if (factor < u_intervalTimes[0]) {\n    color = mix(u_colors[0], u_colors[1], factor / u_intervalTimes[0]);\n  } else if (factor < u_intervalTimes[0] + u_intervalTimes[1]) {\n    color = u_colors[1];\n  } else {\n    color = mix(u_colors[1], u_colors[2], (factor - u_intervalTimes[0] - u_intervalTimes[1]) / u_intervalTimes[2]);\n  }\n\n  vec3 position;\n\n  if (a_position == 0.0) {\n    v_texcoord = vec2(0.0, 0.0);\n    position = a_p0;\n  } else if (a_position == 1.0) {\n    v_texcoord = vec2(0.0, 1.0);\n    position = a_p1;\n  } else if (a_position == 2.0) {\n    v_texcoord = vec2(1.0, 1.0);\n    position = a_p2;\n  } else if (a_position == 3.0) {\n    v_texcoord = vec2(1.0, 0.0);\n    position = a_p3;\n  }\n\n  v_color = color / 255.0;\n\n  gl_Position = u_VP * vec4(position, 1.0);\n}\n\nvoid main() {\n  if (u_emitter == EMITTER_PARTICLE2) {\n    particle2();\n  } else if (u_emitter == EMITTER_RIBBON) {\n    ribbon();\n  } else if (u_emitter == EMITTER_SPLAT) {\n    splat();\n  } else if (u_emitter == EMITTER_UBERSPLAT) {\n    ubersplat();\n  }\n}\n"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default="\nprecision mediump float;\n\n#define EMITTER_RIBBON 1\n\nuniform sampler2D u_texture;\nuniform highp int u_emitter;\nuniform float u_filterMode;\n\nvarying vec2 v_texcoord;\nvarying vec4 v_color;\n\nvoid main() {\n  vec4 texel = texture2D(u_texture, v_texcoord);\n  vec4 color = texel * v_color;\n\n  // 1bit Alpha, used by ribbon emitters.\n  if (u_emitter == EMITTER_RIBBON && u_filterMode == 1.0 && color.a < 0.75) {\n    discard;\n  }\n\n  gl_FragColor = color;\n}\n"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default="\nuniform mat4 u_VP;\n\nattribute vec3 a_m0;\nattribute vec3 a_m1;\nattribute vec3 a_m2;\nattribute vec3 a_m3;\nattribute vec3 a_position;\nattribute vec2 a_uv;\n\nvarying vec2 v_uv;\n\nvoid main() {\n  v_uv = a_uv;\n\n  gl_Position = u_VP * mat4(a_m0, 0.0, a_m1, 0.0, a_m2, 0.0, a_m3, 1.0) * vec4(a_position, 1.0);\n}\n"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default="\nprecision mediump float;\n\nuniform sampler2D u_texture;\nuniform float u_filterMode;\n\nvarying vec2 v_uv;\n\nvoid main() {\n  vec4 color = texture2D(u_texture, v_uv);\n\n  // 1bit Alpha\n  if (u_filterMode == 1.0 && color.a < 0.75) {\n    discard;\n  }\n\n  gl_FragColor = color;\n}\n"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=`\nuniform mat4 u_VP;\nuniform float u_layerAlpha;\nuniform bool u_hasBones;\n\nattribute vec3 a_position;\nattribute vec3 a_normal;\nattribute vec2 a_uv;\nattribute vec4 a_bones;\nattribute vec4 a_weights;\n\nvarying vec3 v_normal;\nvarying vec2 v_uv;\nvarying float v_layerAlpha;\n\n${n(65).default}\n\nvoid transform(inout vec3 position, inout vec3 normal) {\n  mat4 bone;\n\n  bone += fetchMatrix(a_bones[0], 0.0) * a_weights[0];\n  bone += fetchMatrix(a_bones[1], 0.0) * a_weights[1];\n  bone += fetchMatrix(a_bones[2], 0.0) * a_weights[2];\n  bone += fetchMatrix(a_bones[3], 0.0) * a_weights[3];\n\n  position = vec3(bone * vec4(position, 1.0));\n  normal = mat3(bone) * normal;\n}\n\nvoid main() {\n  vec3 position = a_position;\n  vec3 normal = a_normal;\n\n  if (u_hasBones) {\n    transform(position, normal);\n  }\n\n  v_normal = normal;\n  v_uv = a_uv;\n  v_layerAlpha = u_layerAlpha;\n\n  gl_Position = u_VP * vec4(position, 1.0);\n}\n`;t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default="\nprecision mediump float;\n\nuniform sampler2D u_diffuseMap;\nuniform sampler2D u_ormMap;\nuniform sampler2D u_teamColorMap;\nuniform float u_filterMode;\n\nvarying vec3 v_normal;\nvarying vec2 v_uv;\nvarying float v_layerAlpha;\n\nvoid main() {\n  vec4 texel = texture2D(u_diffuseMap, v_uv);\n  vec4 color = vec4(texel.rgb, texel.a * v_layerAlpha);\n\n  vec4 orma = texture2D(u_ormMap, v_uv);\n\n  if (orma.a > 0.1) {\n    color *= texture2D(u_teamColorMap, v_uv) * orma.a;\n  }\n\n  // 1bit Alpha\n  if (u_filterMode == 1.0 && color.a < 0.75) {\n    discard;\n  }\n\n  gl_FragColor = color;\n}\n"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(37),r=n(386),i=n(387),l=n(388),s=n(68),o=n(390),u=n(391),c=n(392),d=new TextDecoder,h=1179937895,f=1313821514,_=5130562;class m extends a.default{constructor(){super(...arguments),this.bufferViews=[],this.accessors=[],this.meshes=[],this.textures=[],this.materials=[],this.nodes=[],this.scenes=[],this.batches=[],this.opaqueGroups=[],this.translucentGroups=[]}createInstance(e){return new o.default(this)}load(e){e instanceof ArrayBuffer?this.loadGlb(e):this.loadGltf(e)}loadGlb(e){let t=new Uint32Array(e),n=t[0],a=(t[1],t[2]);if(n!==h)throw new Error("WrongMagicNumber");let o=new Uint8Array(e),m=12,p=void 0,g=[];for(;m<a;){let e=m/4,n=t[e],a=t[e+1],r=m+8,i=r+n,l=o.subarray(r,i);a!==f||p?a===_&&g.push(l):p=JSON.parse(d.decode(l)),m+=8+n}let b=this.viewer,w=b.gl;for(let e of p.bufferViews)this.bufferViews.push(new r.default(w,e,g[e.buffer]));for(let e of p.accessors)this.accessors.push(new i.default(this,e));for(let e of p.meshes)this.meshes.push(new l.default(this,e));if(void 0!==p.textures)for(let e of p.textures){let t=p.images[e.source],n=p.samplers[e.sampler],a=this.bufferViews[t.bufferView],r=new Blob([a.buffer],{type:t.mimeType}),i=URL.createObjectURL(r),l=b.load(i,()=>[i,".png",!0]);l.wrapS=n.wrapS||w.CLAMP_TO_EDGE,l.wrapT=n.wrapT||w.CLAMP_TO_EDGE,l.magFilter=n.magFilter||w.LINEAR,l.minFilter=n.minFilter||w.LINEAR,this.textures.push(l)}for(let e of p.materials)this.materials.push(new s.GltfMaterial(this,e));this.nodes.push(...p.nodes),this.scenes.push(...p.scenes);for(let e=0,t=p.nodes.length;e<t;e++){let t=p.nodes[e];if(void 0!==t.mesh){let n=this.meshes[t.mesh];for(let t of n.primitives)this.batches.push(new u.default(e,t,this.materials[t.material]))}}c.setupGroups(this)}loadGltf(e){throw new Error("No GLTF support for now!")}}t.default=m},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(e,t,n){this.target=-1;let a=t.target,r=t.byteOffset,i=r+t.byteLength,l=n.subarray(r,i);void 0!==a?(this.buffer=e.createBuffer(),e.bindBuffer(a,this.buffer),e.bufferData(a,l,e.STATIC_DRAW),this.target=a):this.buffer=l}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a={SCALAR:1,VEC2:2,VEC3:3,VEC4:4};t.default=class{constructor(e,t){this.normalized=!1,this.byteStride=0,this.byteOffset=0,this.model=e,this.bufferView=e.bufferViews[t.bufferView],this.componentType=t.componentType,this.components=a[t.type],this.count=t.count,void 0!==t.byteStride&&(this.byteStride=t.byteStride),void 0!==t.byteOffset&&(this.byteOffset=t.byteOffset)}bind(e){let t=this.model.viewer.gl;t.bindBuffer(t.ARRAY_BUFFER,this.bufferView.buffer),t.vertexAttribPointer(e,this.components,this.componentType,this.normalized,this.byteStride,this.byteOffset)}render(e){let t=this.model.viewer.gl;this.bufferView.target===t.ARRAY_BUFFER?t.drawArrays(e,0,this.count):(t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.bufferView.buffer),t.drawElements(e,this.count,this.componentType,this.byteOffset))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(389);t.default=class{constructor(e,t){this.primitives=[];for(let n of t.primitives)this.primitives.push(new a.default(e,n))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(42);t.default=class{constructor(e,t){this.normals=-1,this.tangents=-1,this.uvSet0=-1,this.uvSet1=-1,this.mode=4,this.indices=-1;let n=t.attributes;this.model=e,this.material=t.material,this.positions=n.POSITION,void 0!==n.NORMAL&&(this.normals=n.NORMAL),void 0!==n.TANGENT&&(this.tangents=n.TANGENT),void 0!==n.TEXCOORD_0&&(this.uvSet0=n.TEXCOORD_0),void 0!==n.TEXCOORD_1&&(this.uvSet1=n.TEXCOORD_1),void 0!==t.mode&&(this.mode=t.mode),void 0!==t.indices&&(this.indices=t.indices),this.flags=a.getPrimitiveFlags(this)}render(e){let t=this.model.accessors,n=e.attribs,a=t[this.positions];a.bind(n.a_position),-1!==this.normals&&t[this.normals].bind(n.a_normal),-1!==this.tangents&&t[this.tangents].bind(n.a_tangent),-1!==this.uvSet0&&t[this.uvSet0].bind(n.a_uv0),-1!==this.uvSet1&&t[this.uvSet1].bind(n.a_uv1),-1!==this.indices?t[this.indices].render(this.mode):a.render(this.mode)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(2),r=n(23),i=n(38);class l extends i.default{constructor(){super(...arguments),this.nodes=[]}load(){let e=this.model,t=e.nodes.length,n=r.createSkeletalNodes(t);this.nodes.push(...n.nodes);for(let t of e.scenes)for(let e of t.nodes)this.loadNode(e,-1)}loadNode(e,t){let n=this.model,r=n.nodes[e],i=this.nodes,l=i[e];if(void 0!==r.translation&&a.vec3.copy(l.localLocation,r.translation),void 0!==r.rotation&&a.quat.copy(l.localRotation,r.rotation),void 0!==r.scale&&a.vec3.copy(l.localScale,r.scale),void 0!==r.matrix&&(a.mat4.getTranslation(l.localLocation,r.matrix),a.mat4.getRotation(l.localRotation,r.matrix),a.mat4.getScaling(l.localScale,r.matrix)),r.camera,void 0!==r.mesh&&(l.object=n.meshes[r.mesh]),l.parent=-1===t?this:i[t],void 0!==r.children)for(let t of r.children)this.loadNode(t,e)}updateAnimations(e){let t=this.scene;for(let e of this.nodes)e.recalculateTransformation(t)}renderOpaque(){let e=this.model;for(let t of e.opaqueGroups)t.render(this)}renderTranslucent(){let e=this.model;for(let t of e.translucentGroups)t.render(this)}}t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(e,t,n){this.node=e,this.primitive=t,this.material=n}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(68),r=n(393),i=n(42);function l(e,t){return e.primitiveFlags===t.primitive.flags&&e.materialFlags===t.material.flags&&function(e,t){let n=!!(e.materialFlags&i.ALPHAMODE_OPAQUE||e.materialFlags&i.ALPHAMODE_MASK),a=!!(t.material.flags&i.ALPHAMODE_OPAQUE||t.material.flags&i.ALPHAMODE_MASK);return n&&a||!n&&!a}(e,t)}function s(e,t){let n;n=t.material.alphaMode===a.ALPHA_MODE_BLEND?e.translucentGroups:e.opaqueGroups;for(let e of n)if(l(e,t))return e;let i=new r.default(e,t);return n.push(i),i}t.setupGroups=function(e){let t=e.batches;for(let n=0,a=t.length;n<a;n++){s(e,t[n]).objects.push(n)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(2),r=n(116),i=a.mat4.create();t.default=class{constructor(e,t){this.objects=[],this.model=e,this.primitiveFlags=t.primitive.flags,this.materialFlags=t.material.flags,this.shader=r.default.getShader(this)}render(e){let t=e.scene,n=e.textureMapper,l=this.model,s=l.viewer,o=s.gl,u=s.webgl,c=l.batches,d=this.shader,h=d.uniforms;d.use(),o.uniformMatrix4fv(h.u_viewProjectionMatrix,!1,t.camera.viewProjectionMatrix),o.uniform3fv(h.u_camera,t.camera.location),o.uniform1i(h.u_hasEnvSamplers,r.default.env.hasTextures),u.bindCubeMap(r.default.env.diffuseTexture,0),o.uniform1i(h.u_diffuseEnvSampler,0),u.bindCubeMap(r.default.env.specularTexture,1),o.uniform1i(h.u_specularEnvSampler,1),u.bindTexture(r.default.env.brdfLUTTexture,2),o.uniform1i(h.u_brdfLUT,2),o.uniform1i(h.u_mipCount,9),o.uniform1f(h.u_exposure,1);for(let r of this.objects){let l=c[r],s=e.nodes[l.node],u=l.primitive,f=l.material;o.uniformMatrix4fv(h.u_modelMatrix,!1,s.worldMatrix),a.mat4.mul(i,t.camera.viewMatrix,s.worldMatrix),a.mat4.invert(i,i),a.mat4.transpose(i,i),o.uniformMatrix4fv(h.u_normalMatrix,!1,i),f.bind(d,n),u.render(d)}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=`\nattribute vec4 a_position;\nvarying vec3 v_position;\n\n#ifdef HAS_NORMALS\nattribute vec4 a_normal;\n\n  #ifdef HAS_TANGENTS\n    varying mat3 v_TBN;\n  #else\n    varying vec3 v_normal;\n  #endif\n#endif\n\n#ifdef HAS_TANGENTS\nattribute vec4 a_tangent;\n#endif\n\n#ifdef HAS_UV_SET0\n  attribute vec2 a_uv0;\n#endif\n\n#ifdef HAS_UV_SET1\n  attribute vec2 a_uv1;\n#endif\n\nvarying vec2 v_uvCoord0;\nvarying vec2 v_uvCoord1;\n\n#if defined(HAS_VERTEX_COLOR_VEC3)\n  attribute vec3 a_color;\n  varying vec3 v_color;\n#elif defined(HAS_VERTEX_COLOR_VEC4)\n  attribute vec4 a_color;\n  varying vec4 v_color;\n#endif\n\nuniform mat4 u_viewProjectionMatrix;\nuniform mat4 u_modelMatrix;\nuniform mat4 u_normalMatrix;\n\n${n(395).default}\n\nvec4 getPosition() {\n  vec4 pos = a_position;\n\n  #ifdef USE_MORPHING\n    pos += getTargetPosition();\n  #endif\n\n  #ifdef USE_SKINNING\n    pos = getSkinningMatrix() * pos;\n  #endif\n\n  return pos;\n}\n\n#ifdef HAS_NORMALS\n  vec4 getNormal() {\n    vec4 normal = a_normal;\n\n    #ifdef USE_MORPHING\n      normal += getTargetNormal();\n    #endif\n\n    #ifdef USE_SKINNING\n      normal = getSkinningNormalMatrix() * normal;\n    #endif\n\n    return normalize(normal);\n  }\n#endif\n\n#ifdef HAS_TANGENTS\n  vec4 getTangent() {\n    vec4 tangent = a_tangent;\n\n    #ifdef USE_MORPHING\n      tangent += getTargetTangent();\n    #endif\n\n    #ifdef USE_SKINNING\n      tangent = getSkinningMatrix() * tangent;\n    #endif\n\n    return normalize(tangent);\n  }\n#endif\n\nvoid main() {\n  vec4 pos = u_modelMatrix * getPosition();\n  \n  v_position = vec3(pos.xyz) / pos.w;\n\n  #ifdef HAS_NORMALS\n    #ifdef HAS_TANGENTS\n      vec4 tangent = getTangent();\n      vec3 normalW = normalize(vec3(u_normalMatrix * vec4(getNormal().xyz, 0.0)));\n      vec3 tangentW = normalize(vec3(u_modelMatrix * vec4(tangent.xyz, 0.0)));\n      vec3 bitangentW = cross(normalW, tangentW) * tangent.w;\n\n      v_TBN = mat3(tangentW, bitangentW, normalW);\n    #else\n      v_normal = normalize(vec3(u_normalMatrix * vec4(getNormal().xyz, 0.0)));\n    #endif\n  #endif\n\n  #ifdef HAS_UV_SET0\n    v_uvCoord0 = a_uv0;\n  #else\n    v_uvCoord0 = vec2(0.0, 0.0);\n  #endif\n\n  #ifdef HAS_UV_SET1\n    v_uvCoord1 = a_uv1;\n  #else\n    v_uvCoord1 = vec2(0.0, 0.0);\n  #endif\n\n  #if defined(HAS_VERTEX_COLOR_VEC3) || defined(HAS_VERTEX_COLOR_VEC4)\n    v_color = a_color;\n  #endif\n\n  gl_Position = u_viewProjectionMatrix * pos;\n}\n`;t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default="\n#ifdef HAS_TARGET_POSITION0\n  attribute vec3 a_targetPosition0;\n#endif\n\n#ifdef HAS_TARGET_POSITION1\n  attribute vec3 a_targetPosition1;\n#endif\n\n#ifdef HAS_TARGET_POSITION2\n  attribute vec3 a_targetPosition2;\n#endif\n\n#ifdef HAS_TARGET_POSITION3\n  attribute vec3 a_targetPosition3;\n#endif\n\n#ifdef HAS_TARGET_POSITION4\n  attribute vec3 a_targetPosition4;\n#endif\n\n#ifdef HAS_TARGET_POSITION5\n  attribute vec3 a_targetPosition5;\n#endif\n\n#ifdef HAS_TARGET_POSITION6\n  attribute vec3 a_targetPosition6;\n#endif\n\n#ifdef HAS_TARGET_POSITION7\n  attribute vec3 a_targetPosition7;\n#endif\n\n#ifdef HAS_TARGET_NORMAL0\n  attribute vec3 a_targetNormal0;\n#endif\n\n#ifdef HAS_TARGET_NORMAL1\n  attribute vec3 a_targetNormal1;\n#endif\n\n#ifdef HAS_TARGET_NORMAL2\n  attribute vec3 a_targetNormal2;\n#endif\n\n#ifdef HAS_TARGET_NORMAL3\n  attribute vec3 a_targetNormal3;\n#endif\n\n#ifdef HAS_TARGET_TANGENT0\n  attribute vec3 a_targetTangent0;\n#endif\n\n#ifdef HAS_TARGET_TANGENT1\n  attribute vec3 a_targetTangent1;\n#endif\n\n#ifdef HAS_TARGET_TANGENT2\n  attribute vec3 a_targetTangent2;\n#endif\n\n#ifdef HAS_TARGET_TANGENT3\n  attribute vec3 a_targetTangent3;\n#endif\n\n#ifdef USE_MORPHING\n  uniform float u_morphWeights[WEIGHT_COUNT];\n#endif\n\n#ifdef HAS_JOINT_SET0\n  attribute vec4 a_joint0;\n#endif\n\n#ifdef HAS_JOINT_SET1\n  attribute vec4 a_joint1;\n#endif\n\n#ifdef HAS_WEIGHT_SET0\n  attribute vec4 a_weight0;\n#endif\n\n#ifdef HAS_WEIGHT_SET1\n  attribute vec4 a_weight1;\n#endif\n\n#ifdef USE_SKINNING\n  uniform mat4 u_jointMatrix[JOINT_COUNT];\n  uniform mat4 u_jointNormalMatrix[JOINT_COUNT];\n#endif\n\n#ifdef USE_SKINNING\n  mat4 getSkinningMatrix() {\n    mat4 skin = mat4(0);\n\n    #if defined(HAS_WEIGHT_SET0) && defined(HAS_JOINT_SET0)\n      skin +=\n        a_weight0.x * u_jointMatrix[int(a_joint0.x)] +\n        a_weight0.y * u_jointMatrix[int(a_joint0.y)] +\n        a_weight0.z * u_jointMatrix[int(a_joint0.z)] +\n        a_weight0.w * u_jointMatrix[int(a_joint0.w)];\n    #endif\n\n    #if defined(HAS_WEIGHT_SET1) && defined(HAS_JOINT_SET1)\n      skin +=\n        a_weight1.x * u_jointMatrix[int(a_joint1.x)] +\n        a_weight1.y * u_jointMatrix[int(a_joint1.y)] +\n        a_weight1.z * u_jointMatrix[int(a_joint1.z)] +\n        a_weight1.w * u_jointMatrix[int(a_joint1.w)];\n    #endif\n\n    return skin;\n  }\n\n  mat4 getSkinningNormalMatrix() {\n    mat4 skin = mat4(0);\n\n    #if defined(HAS_WEIGHT_SET0) && defined(HAS_JOINT_SET0)\n      skin +=\n        a_weight0.x * u_jointNormalMatrix[int(a_joint0.x)] +\n        a_weight0.y * u_jointNormalMatrix[int(a_joint0.y)] +\n        a_weight0.z * u_jointNormalMatrix[int(a_joint0.z)] +\n        a_weight0.w * u_jointNormalMatrix[int(a_joint0.w)];\n    #endif\n\n    #if defined(HAS_WEIGHT_SET1) && defined(HAS_JOINT_SET1)\n      skin +=\n        a_weight1.x * u_jointNormalMatrix[int(a_joint1.x)] +\n        a_weight1.y * u_jointNormalMatrix[int(a_joint1.y)] +\n        a_weight1.z * u_jointNormalMatrix[int(a_joint1.z)] +\n        a_weight1.w * u_jointNormalMatrix[int(a_joint1.w)];\n    #endif\n\n    return skin;\n  }\n#endif\n\n#ifdef USE_MORPHING\n  vec4 getTargetPosition() {\n    vec4 pos = vec4(0);\n\n    #ifdef HAS_TARGET_POSITION0\n      pos.xyz += u_morphWeights[0] * a_targetPosition0;\n    #endif\n\n    #ifdef HAS_TARGET_POSITION1\n      pos.xyz += u_morphWeights[1] * a_targetPosition1;\n    #endif\n\n    #ifdef HAS_TARGET_POSITION2\n      pos.xyz += u_morphWeights[2] * a_targetPosition2;\n    #endif\n\n    #ifdef HAS_TARGET_POSITION3\n      pos.xyz += u_morphWeights[3] * a_targetPosition3;\n    #endif\n\n    #ifdef HAS_TARGET_POSITION4\n      pos.xyz += u_morphWeights[4] * a_targetPosition4;\n    #endif\n\n    return pos;\n  }\n\n  vec4 getTargetNormal() {\n    vec4 normal = vec4(0);\n\n    #ifdef HAS_TARGET_NORMAL0\n      normal.xyz += u_morphWeights[0] * a_targetNormal0;\n    #endif\n\n    #ifdef HAS_TARGET_NORMAL1\n      normal.xyz += u_morphWeights[1] * a_targetNormal1;\n    #endif\n\n    #ifdef HAS_TARGET_NORMAL2\n      normal.xyz += u_morphWeights[2] * a_targetNormal2;\n    #endif\n\n    #ifdef HAS_TARGET_NORMAL3\n      normal.xyz += u_morphWeights[3] * a_targetNormal3;\n    #endif\n\n    #ifdef HAS_TARGET_NORMAL4\n      normal.xyz += u_morphWeights[4] * a_targetNormal4;\n    #endif\n\n    return normal;\n  }\n\n  vec4 getTargetTangent() {\n    vec4 tangent = vec4(0);\n\n    #ifdef HAS_TARGET_TANGENT0\n      tangent.xyz += u_morphWeights[0] * a_targetTangent0;\n    #endif\n\n    #ifdef HAS_TARGET_TANGENT1\n      tangent.xyz += u_morphWeights[1] * a_targetTangent1;\n    #endif\n\n    #ifdef HAS_TARGET_TANGENT2\n      tangent.xyz += u_morphWeights[2] * a_targetTangent2;\n    #endif\n\n    #ifdef HAS_TARGET_TANGENT3\n      tangent.xyz += u_morphWeights[3] * a_targetTangent3;\n    #endif\n\n    #ifdef HAS_TARGET_TANGENT4\n      tangent.xyz += u_morphWeights[4] * a_targetTangent4;\n    #endif\n\n    return tangent;\n  }\n#endif\n"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(397),r=n(398),i=n(399),l=n(400),s=`\n#extension GL_OES_standard_derivatives : enable\n\n#ifdef USE_TEX_LOD\n  #extension GL_EXT_shader_texture_lod: enable\n#endif\n\n#ifdef USE_HDR\n  #extension GL_OES_texture_float : enable\n  #extension GL_OES_texture_float_linear : enable\n#endif\n\nprecision mediump float;\n\n#if defined(MATERIAL_SPECULARGLOSSINESS) || defined(MATERIAL_METALLICROUGHNESS)\n  uniform vec4 u_baseColorFactor;\n  uniform float u_metallicFactor;\n  uniform float u_roughnessFactor;\n#endif\n\n#ifdef MATERIAL_SPECULARGLOSSINESS\n  uniform vec4 u_diffuseFactor;\n  uniform vec3 u_specularFactor;\n  uniform float u_glossinessFactor;\n#endif\n\n#ifdef ALPHAMODE_MASK\n  uniform float u_alphaCutoff;\n#endif\n\n${a.default}\n${r.default}\n${i.default}\n${l.default}\n\nvoid main() {\n  float perceptualRoughness = 0.0;\n  float metallic = 0.0;\n  vec4 baseColor = vec4(0.0, 0.0, 0.0, 1.0);\n  vec3 diffuseColor = vec3(0.0);\n  vec3 specularColor = vec3(0.0);\n  vec3 f0 = vec3(0.04);\n\n  #ifdef MATERIAL_METALLICROUGHNESS\n    #ifdef HAS_METALLIC_ROUGHNESS_MAP\n      vec4 mrSample = texture2D(u_metallicRoughnessSampler, getMetallicRoughnessUv());\n      perceptualRoughness = mrSample.g * u_roughnessFactor;\n      metallic = mrSample.b * u_metallicFactor;\n    #else\n      metallic = u_metallicFactor;\n      perceptualRoughness = u_roughnessFactor;\n    #endif\n\n    #ifdef HAS_BASE_COLOR_MAP\n      baseColor = SRGBtoLINEAR(texture2D(u_baseColorSampler, getBaseColorUv())) * u_baseColorFactor;\n    #else\n      baseColor = u_baseColorFactor;\n    #endif\n\n    baseColor *= getVertexColor();\n    specularColor = mix(f0, baseColor.rgb, metallic);\n    diffuseColor = baseColor.rgb * (vec3(1.0) - f0) * (1.0 - metallic);\n  #endif \n\n  #ifdef MATERIAL_SPECULARGLOSSINESS\n    #ifdef HAS_SPECULAR_GLOSSINESS_MAP\n      vec4 sgSample = SRGBtoLINEAR(texture2D(u_specularGlossinessSampler, getSpecularGlossinessUv()));\n      perceptualRoughness = (1.0 - sgSample.a * u_glossinessFactor);\n      f0 = sgSample.rgb * u_specularFactor;\n    #else\n      f0 = u_specularFactor;\n      perceptualRoughness = 1.0 - u_glossinessFactor;\n    #endif\n\n    #ifdef HAS_DIFFUSE_MAP\n      baseColor = SRGBtoLINEAR(texture2D(u_diffuseSampler, getDiffuseUv())) * u_diffuseFactor;\n    #else\n      baseColor = u_diffuseFactor;\n    #endif\n\n    baseColor *= getVertexColor();\n    specularColor = f0;\n    diffuseColor = baseColor.rgb * (1.0 - max(max(f0.r, f0.g), f0.b));\n  #endif\n\n  #ifdef ALPHAMODE_OPAQUE\n    baseColor.a = 1.0;\n  #endif\n\n  #ifdef ALPHAMODE_MASK\n    if(baseColor.a < u_alphaCutoff) {\n        discard;\n    }\n\n    baseColor.a = 1.0;\n  #endif\n\n  #ifdef MATERIAL_UNLIT\n    gl_FragColor = vec4(LINEARtoSRGB(baseColor.rgb), baseColor.a);\n\n    return;\n  #endif\n\n  perceptualRoughness = clamp(perceptualRoughness, 0.0, 1.0);\n  metallic = clamp(metallic, 0.0, 1.0);\n\n  float alphaRoughness = perceptualRoughness * perceptualRoughness;\n  float reflectance = max(max(specularColor.r, specularColor.g), specularColor.b);\n  vec3 specularEnvironmentR0 = specularColor.rgb;\n  vec3 specularEnvironmentR90 = vec3(clamp(reflectance * 50.0, 0.0, 1.0));\n\n  MaterialInfo materialInfo = MaterialInfo(\n    perceptualRoughness,\n    specularEnvironmentR0,\n    alphaRoughness,\n    diffuseColor,\n    specularEnvironmentR90,\n    specularColor\n  );\n\n  vec3 color = vec3(0.0, 0.0, 0.0);\n  vec3 normal = getNormal();\n  vec3 view = normalize(u_camera - v_position);\n\n  #ifdef USE_PUNCTUAL\n    for (int i = 0; i < LIGHT_COUNT; ++i) {\n      Light light = u_Lights[i];\n\n      if (light.type == LightType_Directional) {\n          color += applyDirectionalLight(light, materialInfo, normal, view);\n      } else if (light.type == LightType_Point) {\n          color += applyPointLight(light, materialInfo, normal, view);\n      } else if (light.type == LightType_Spot) {\n          color += applySpotLight(light, materialInfo, normal, view);\n      }\n    }\n  #endif\n\n  #ifdef USE_ENV\n    if (u_hasEnvSamplers) {\n      color += getIBLContribution(materialInfo, normal, view);\n    } else {\n      color += materialInfo.diffuseColor;\n    }\n  #endif\n\n  float ao = 1.0;\n  #ifdef HAS_OCCLUSION_MAP\n    ao = texture2D(u_occlusionSampler, getOcclusionUv()).r;\n    color = mix(color, color * ao, u_occlusionStrength);\n  #endif\n\n  vec3 emissive = vec3(0);\n  #ifdef HAS_EMISSIVE_MAP\n    emissive = SRGBtoLINEAR(texture2D(u_emissiveSampler, getEmissiveUv())).rgb * u_emissiveFactor;\n    color += emissive;\n  #endif\n  \n  #ifndef DEBUG_OUTPUT\n    gl_FragColor = vec4(toneMap(color), baseColor.a);\n  #else\n    #ifdef DEBUG_METALLIC\n      gl_FragColor.rgb = vec3(metallic);\n    #endif\n\n    #ifdef DEBUG_ROUGHNESS\n      gl_FragColor.rgb = vec3(perceptualRoughness);\n    #endif\n\n    #ifdef DEBUG_NORMAL\n      #ifdef HAS_NORMAL_MAP\n        gl_FragColor.rgb = texture2D(u_normalSampler, getNormalUV()).rgb;\n      #else\n        gl_FragColor.rgb = normal;\n      #endif\n    #endif\n\n    #ifdef DEBUG_BASECOLOR\n      gl_FragColor.rgb = LINEARtoSRGB(baseColor.rgb);\n    #endif\n\n    #ifdef DEBUG_OCCLUSION\n      gl_FragColor.rgb = vec3(ao);\n    #endif\n\n    #ifdef DEBUG_EMISSIVE\n      gl_FragColor.rgb = LINEARtoSRGB(emissive);\n    #endif\n\n    #ifdef DEBUG_F0\n      gl_FragColor.rgb = vec3(f0);\n    #endif\n\n    #ifdef DEBUG_ALPHA\n      gl_FragColor.rgb = vec3(baseColor.a);\n    #endif\n\n    gl_FragColor.a = 1.0;\n  #endif\n}\n`;t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default="\nvarying vec2 v_uvCoord0;\nvarying vec2 v_uvCoord1;\n\n#ifdef HAS_NORMAL_MAP\n  uniform sampler2D u_normalSampler;\n  uniform int u_normalUvSet;\n  uniform float u_normalScale;\n  uniform mat3 u_normalUvTransform;\n#endif\n\n#ifdef HAS_EMISSIVE_MAP\n  uniform sampler2D u_emissiveSampler;\n  uniform int u_emissiveUvSet;\n  uniform vec3 u_emissiveFactor;\n  uniform mat3 u_emissiveUvTransform;\n#endif\n\n#ifdef HAS_OCCLUSION_MAP\n  uniform sampler2D u_occlusionSampler;\n  uniform int u_occlusionUvSet;\n  uniform float u_occlusionStrength;\n  uniform mat3 u_occlusionUvTransform;\n#endif\n\n#ifdef HAS_BASE_COLOR_MAP\n  uniform sampler2D u_baseColorSampler;\n  uniform int u_baseColorUvSet;\n  uniform mat3 u_baseColorUvTransform;\n#endif\n\n#ifdef HAS_METALLIC_ROUGHNESS_MAP\n  uniform sampler2D u_metallicRoughnessSampler;\n  uniform int u_metallicRoughnessUvSet;\n  uniform mat3 u_metallicRoughnessUvTransform;\n#endif\n\n#ifdef HAS_DIFFUSE_MAP\n  uniform sampler2D u_diffuseSampler;\n  uniform int u_diffuseUvSet;\n  uniform mat3 u_diffuseUvTransform;\n#endif\n\n#ifdef HAS_SPECULAR_GLOSSINESS_MAP\n  uniform sampler2D u_specularGlossinessSampler;\n  uniform int u_specularGlossinessUvSet;\n  uniform mat3 u_specularGlossinessUvTransform;\n#endif\n\n#ifdef USE_ENV\n  uniform bool u_hasEnvSamplers;\n  uniform samplerCube u_diffuseEnvSampler;\n  uniform samplerCube u_specularEnvSampler;\n  uniform sampler2D u_brdfLUT;\n#endif\n\nvec2 getUvCoord(int set) {\n  if (set < 1) {\n    return v_uvCoord0;\n  }\n\n  return v_uvCoord1;\n}\n\nvec2 getNormalUv() {\n  vec3 uv = vec3(v_uvCoord0, 1.0);\n\n  #ifdef HAS_NORMAL_MAP\n    uv.xy = getUvCoord(u_normalUvSet);\n\n    #ifdef HAS_NORMAL_UV_TRANSFORM\n      uv *= u_normalUvTransform;\n    #endif\n  #endif\n\n  return uv.xy;\n}\n\nvec2 getEmissiveUv() {\n  vec3 uv = vec3(v_uvCoord0, 1.0);\n\n  #ifdef HAS_EMISSIVE_MAP\n    uv.xy = getUvCoord(u_emissiveUvSet);\n\n    #ifdef HAS_EMISSIVE_UV_TRANSFORM\n      uv *= u_emissiveUvTransform;\n    #endif\n  #endif\n\n  return uv.xy;\n}\n\nvec2 getOcclusionUv() {\n  vec3 uv = vec3(v_uvCoord0, 1.0);\n\n  #ifdef HAS_OCCLUSION_MAP\n    uv.xy = getUvCoord(u_occlusionUvSet);\n\n    #ifdef HAS_OCCLSION_UV_TRANSFORM\n      uv *= u_occlusionUvTransform;\n    #endif\n  #endif\n\n  return uv.xy;\n}\n\nvec2 getBaseColorUv() {\n  vec3 uv = vec3(v_uvCoord0, 1.0);\n\n  #ifdef HAS_BASE_COLOR_MAP\n    uv.xy = getUvCoord(u_baseColorUvSet);\n\n    #ifdef HAS_BASECOLOR_UV_TRANSFORM\n      uv *= u_baseColorUvTransform;\n    #endif\n  #endif\n\n  return uv.xy;\n}\n\nvec2 getMetallicRoughnessUv() {\n  vec3 uv = vec3(v_uvCoord0, 1.0);\n\n  #ifdef HAS_METALLIC_ROUGHNESS_MAP\n    uv.xy = getUvCoord(u_metallicRoughnessUvSet);\n\n    #ifdef HAS_METALLICROUGHNESS_UV_TRANSFORM\n      uv *= u_metallicRoughnessUvTransform;\n    #endif\n  #endif\n\n  return uv.xy;\n}\n\nvec2 getSpecularGlossinessUv() {\n  vec3 uv = vec3(v_uvCoord0, 1.0);\n\n  #ifdef HAS_SPECULAR_GLOSSINESS_MAP\n    uv.xy = getUvCoord(u_specularGlossinessUvSet);\n\n    #ifdef HAS_SPECULARGLOSSINESS_UV_TRANSFORM\n      uv *= u_specularGlossinessUvTransform;\n    #endif\n  #endif\n\n  return uv.xy;\n}\n\nvec2 getDiffuseUv() {\n  vec3 uv = vec3(v_uvCoord0, 1.0);\n\n  #ifdef HAS_DIFFUSE_MAP\n    uv.xy = getUvCoord(u_diffuseUvSet);\n\n    #ifdef HAS_DIFFUSE_UV_TRANSFORM\n      uv *= u_diffuseUvTransform;\n    #endif\n  #endif\n\n  return uv.xy;\n}\n"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default="\nconst float GAMMA = 2.2;\nconst float INV_GAMMA = 1.0 / GAMMA;\n\nvec3 LINEARtoSRGB(vec3 color) {\n  return pow(color, vec3(INV_GAMMA));\n}\n\nvec4 SRGBtoLINEAR(vec4 color) {\n  return vec4(pow(color.xyz, vec3(GAMMA)), color.w);\n}\n\nconst float M_PI = 3.141592653589793;\nconst float c_MinReflectance = 0.04;\n\nvarying vec3 v_position;\n\n#ifdef HAS_NORMALS\n  #ifdef HAS_TANGENTS\n    varying mat3 v_TBN;\n  #else\n    varying vec3 v_normal;\n  #endif\n#endif\n\n#if defined(HAS_VERTEX_COLOR_VEC3)\n  varying vec3 v_color;\n#elif defined(HAS_VERTEX_COLOR_VEC4)\n  varying vec4 v_color;\n#endif\n\nvec4 getVertexColor() {\n  #if defined(HAS_VERTEX_COLOR_VEC3)\n    return vec4(v_color, 1.0);\n  #elif defined(HAS_VERTEX_COLOR_VEC4)\n    return v_color;\n  #else\n    return vec4(1.0);\n  #endif\n}\n\nvec3 getNormal() {\n  vec2 uv = getNormalUv();\n\n  #ifdef HAS_TANGENTS\n    mat3 tbn = v_TBN;\n  #else\n    vec3 pos_dx = dFdx(v_position);\n    vec3 pos_dy = dFdy(v_position);\n    vec3 tex_dx = dFdx(vec3(uv, 0.0));\n    vec3 tex_dy = dFdy(vec3(uv, 0.0));\n    vec3 t = (tex_dy.t * pos_dx - tex_dx.t * pos_dy) / (tex_dx.s * tex_dy.t - tex_dy.s * tex_dx.t);\n\n    #ifdef HAS_NORMALS\n      vec3 ng = normalize(v_normal);\n    #else\n      vec3 ng = cross(pos_dx, pos_dy);\n    #endif\n\n    t = normalize(t - ng * dot(ng, t));\n    vec3 b = normalize(cross(ng, t));\n    mat3 tbn = mat3(t, b, ng);\n  #endif\n\n  #ifdef HAS_NORMAL_MAP\n    vec3 n = texture2D(u_normalSampler, uv).rgb;\n\n    n = normalize(tbn * ((2.0 * n - 1.0) * vec3(u_normalScale, u_normalScale, 1.0)));\n  #else\n    vec3 n = normalize(tbn[2].xyz);\n  #endif\n\n  return n;\n}\n\nfloat getPerceivedBrightness(vec3 vector) {\n  return sqrt(0.299 * vector.r * vector.r + 0.587 * vector.g * vector.g + 0.114 * vector.b * vector.b);\n}\n"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default="\nstruct MaterialInfo {\n  float perceptualRoughness;\n  vec3 reflectance0;\n  float alphaRoughness;\n  vec3 diffuseColor;\n  vec3 reflectance90;\n  vec3 specularColor;\n};\n\nstruct Light {\n  vec3 direction;\n  float range;\n  vec3 color;\n  float intensity;\n  vec3 position;\n  float innerConeCos;\n  float outerConeCos;\n  int type;\n  vec2 padding;\n};\n\nconst int LightType_Directional = 0;\nconst int LightType_Point = 1;\nconst int LightType_Spot = 2;\n\n#ifdef USE_PUNCTUAL\n  uniform Light u_Lights[LIGHT_COUNT];\n#endif\n\nuniform vec3 u_camera;\n\n#ifdef USE_TEX_LOD\n  uniform int u_mipCount;\n#endif\n\n#ifdef USE_ENV\n  vec3 getIBLContribution(MaterialInfo materialInfo, vec3 n, vec3 v) {\n    float NdotV = clamp(dot(n, v), 0.0, 1.0);\n    vec3 reflection = normalize(reflect(-v, n));\n    vec2 brdfSamplePoint = clamp(vec2(NdotV, materialInfo.perceptualRoughness), vec2(0.0, 0.0), vec2(1.0, 1.0));\n    vec2 brdf = texture2D(u_brdfLUT, brdfSamplePoint).rg;\n    vec4 diffuseSample = textureCube(u_diffuseEnvSampler, n);\n\n    #ifdef USE_TEX_LOD\n      float lod = clamp(materialInfo.perceptualRoughness * float(u_mipCount), 0.0, float(u_mipCount));\n\n      vec4 specularSample = textureCubeLodEXT(u_specularEnvSampler, reflection, lod);\n    #else\n      vec4 specularSample = textureCube(u_specularEnvSampler, reflection);\n    #endif\n\n    #ifdef USE_HDR\n      vec3 diffuseLight = diffuseSample.rgb;\n      vec3 specularLight = specularSample.rgb;\n    #else\n      vec3 diffuseLight = SRGBtoLINEAR(diffuseSample).rgb;\n      vec3 specularLight = SRGBtoLINEAR(specularSample).rgb;\n    #endif\n\n    vec3 diffuse = diffuseLight * materialInfo.diffuseColor;\n    vec3 specular = specularLight * (materialInfo.specularColor * brdf.x + brdf.y);\n\n    return diffuse + specular;\n  }\n#endif\n\nvec3 diffuse(MaterialInfo materialInfo) {\n  return materialInfo.diffuseColor / M_PI;\n}\n\nvec3 specularReflection(MaterialInfo materialInfo, float VdotH) {\n  return materialInfo.reflectance0 + (materialInfo.reflectance90 - materialInfo.reflectance0) * pow(clamp(1.0 - VdotH, 0.0, 1.0), 5.0);\n}\n\nfloat visibilityOcclusion(MaterialInfo materialInfo, float NdotL, float NdotV) {\n  float alphaRoughnessSq = materialInfo.alphaRoughness * materialInfo.alphaRoughness;\n  float GGXV = NdotL * sqrt(NdotV * NdotV * (1.0 - alphaRoughnessSq) + alphaRoughnessSq);\n  float GGXL = NdotV * sqrt(NdotL * NdotL * (1.0 - alphaRoughnessSq) + alphaRoughnessSq);\n  float GGX = GGXV + GGXL;\n\n  if (GGX > 0.0) {\n    return 0.5 / GGX;\n  }\n\n  return 0.0;\n}\n\nfloat microfacetDistribution(MaterialInfo materialInfo, float NdotH) {\n  float alphaRoughnessSq = materialInfo.alphaRoughness * materialInfo.alphaRoughness;\n  float f = (NdotH * alphaRoughnessSq - NdotH) * NdotH + 1.0;\n\n  return alphaRoughnessSq / (M_PI * f * f);\n}\n\nvec3 getPointShade(vec3 pointToLight, MaterialInfo materialInfo, vec3 normal, vec3 view) {\n  vec3 n = normalize(normal);\n  vec3 v = normalize(view);\n  vec3 l = normalize(pointToLight);\n  vec3 h = normalize(l + v);\n  float NdotL = clamp(dot(n, l), 0.0, 1.0);\n  float NdotV = clamp(dot(n, v), 0.0, 1.0);\n  float NdotH = clamp(dot(n, h), 0.0, 1.0);\n  float VdotH = clamp(dot(v, h), 0.0, 1.0);\n\n  if (NdotL > 0.0 || NdotV > 0.0) {\n    vec3 F = specularReflection(materialInfo, VdotH);\n    float Vis = visibilityOcclusion(materialInfo, NdotL, NdotV);\n    float D = microfacetDistribution(materialInfo, NdotH);\n    vec3 diffuseContrib = (1.0 - F) * diffuse(materialInfo);\n    vec3 specContrib = F * Vis * D;\n\n    return NdotL * (diffuseContrib + specContrib);\n  }\n\n  return vec3(0.0, 0.0, 0.0);\n}\n\nfloat getRangeAttenuation(float range, float distance) {\n  if (range <= 0.0) {\n    return 1.0;\n  }\n\n  return max(min(1.0 - pow(distance / range, 4.0), 1.0), 0.0) / pow(distance, 2.0);\n}\n\nfloat getSpotAttenuation(vec3 pointToLight, vec3 spotDirection, float outerConeCos, float innerConeCos) {\n  float actualCos = dot(normalize(spotDirection), normalize(-pointToLight));\n\n  if (actualCos > outerConeCos) {\n    if (actualCos < innerConeCos) {\n      return smoothstep(outerConeCos, innerConeCos, actualCos);\n    }\n\n    return 1.0;\n  }\n\n  return 0.0;\n}\n\nvec3 applyDirectionalLight(Light light, MaterialInfo materialInfo, vec3 normal, vec3 view) {\n  vec3 pointToLight = -light.direction;\n  vec3 shade = getPointShade(pointToLight, materialInfo, normal, view);\n\n  return light.intensity * light.color * shade;\n}\n\nvec3 applyPointLight(Light light, MaterialInfo materialInfo, vec3 normal, vec3 view) {\n  vec3 pointToLight = light.position - v_position;\n  float distance = length(pointToLight);\n  float attenuation = getRangeAttenuation(light.range, distance);\n  vec3 shade = getPointShade(pointToLight, materialInfo, normal, view);\n\n  return attenuation * light.intensity * light.color * shade;\n}\n\nvec3 applySpotLight(Light light, MaterialInfo materialInfo, vec3 normal, vec3 view) {\n  vec3 pointToLight = light.position - v_position;\n  float distance = length(pointToLight);\n  float rangeAttenuation = getRangeAttenuation(light.range, distance);\n  float spotAttenuation = getSpotAttenuation(pointToLight, light.direction, light.outerConeCos, light.innerConeCos);\n  vec3 shade = getPointShade(pointToLight, materialInfo, normal, view);\n\n  return rangeAttenuation * spotAttenuation * light.intensity * light.color * shade;\n}\n"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default="\nuniform float u_exposure;\n\n#ifdef TONEMAP_UNCHARTED\n  vec3 toneMapUncharted2Impl(vec3 color) {\n    const float A = 0.15;\n    const float B = 0.50;\n    const float C = 0.10;\n    const float D = 0.20;\n    const float E = 0.02;\n    const float F = 0.30;\n\n    return ((color * (A * color + C * B) + D * E) / (color * (A * color + B) + D * F)) - E / F;\n  }\n\n  vec3 toneMapUncharted(vec3 color) {\n    const float W = 11.2;\n    color = toneMapUncharted2Impl(color * 2.0);\n    vec3 whiteScale = 1.0 / toneMapUncharted2Impl(vec3(W));\n\n    return LINEARtoSRGB(color * whiteScale);\n  }\n#endif\n\n#ifdef TONEMAP_HEJLRICHARD\n  vec3 toneMapHejlRichard(vec3 color) {\n    color = max(vec3(0.0), color - vec3(0.004));\n\n    return (color * (6.2 * color + 0.5)) / (color * (6.2 * color + 1.7) + 0.06);\n  }\n#endif\n\n#ifdef TONEMAP_ACES\n  vec3 toneMapACES(vec3 color) {\n    const float A = 2.51;\n    const float B = 0.03;\n    const float C = 2.43;\n    const float D = 0.59;\n    const float E = 0.14;\n    \n    return LINEARtoSRGB(clamp((color * (A * color + B)) / (color * (C * color + D) + E), 0.0, 1.0));\n  }\n#endif\n\nvec3 toneMap(vec3 color) {\n  color *= u_exposure;\n\n  #if defined(TONEMAP_UNCHARTED)\n    return toneMapUncharted(color);\n  #elif defined(TONEMAP_HEJLRICHARD)\n    return toneMapHejlRichard(color);\n  #elif defined(TONEMAP_ACES)\n    return toneMapACES(color);\n  #else\n    return LINEARtoSRGB(color);\n  #endif\n}\n"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(2),r=n(117),i=n(46),l=n(67),s=n(86),o=n(55),u=n(54),c=n(52),d=n(35),h=n(58),f=n(102),_=n(13),m=n(402),p=n(403),g=n(404),b=n(405),w=n(406),v=n(407),A=n(408),L=n(409),y=n(410),S=n(411),T=n(412),E=a.vec3.create(),x=a.vec3.create();class k extends h.default{constructor(e,t){super(e),this.solverParams={},this.waterIndex=0,this.waterIncreasePerFrame=0,this.waterHeightOffset=0,this.waterTextures=[],this.maxDeepColor=new Float32Array(4),this.minDeepColor=new Float32Array(4),this.maxShallowColor=new Float32Array(4),this.minShallowColor=new Float32Array(4),this.anyReady=!1,this.terrainCliffsAndWaterLoaded=!1,this.terrainData=new l.MappedData,this.cliffTypesData=new l.MappedData,this.waterData=new l.MappedData,this.terrainReady=!1,this.cliffsReady=!1,this.doodadsAndDestructiblesLoaded=!1,this.doodadsData=new l.MappedData,this.doodadMetaData=new l.MappedData,this.destructableMetaData=new l.MappedData,this.doodads=[],this.terrainDoodads=[],this.doodadsReady=!1,this.unitsAndItemsLoaded=!1,this.unitsData=new l.MappedData,this.unitMetaData=new l.MappedData,this.units=[],this.unitsReady=!1,this.tilesetTextures=[],this.cliffTextures=[],this.cliffModels=[],this.mapMpq=null,this.mapPathSolver=null,this.corners=[],this.centerOffset=null,this.mapSize=null,this.tilesets=[],this.blightTextureIndex=-1,this.cliffTilesets=[],this.columns=0,this.rows=0,this.vertexBuffer=null,this.faceBuffer=null,this.instanceBuffer=null,this.textureBuffer=null,this.variationBuffer=null,this.waterBuffer=null,this.heightMap=null,this.waterHeightMap=null,this.cliffHeightMap=null;let n=this.webgl;if(!n.ensureExtension("OES_texture_float"))throw new Error("War3MapViewer: No float texture support!");n.ensureExtension("OES_vertex_array_object")||console.warn("War3MapViewer: No vertex array object support! This might reduce performance."),this.on("error",(e,t,n)=>console.error(e,t,n)),this.addHandler(_.default),this.wc3PathSolver=t,this.groundShader=this.webgl.createShaderProgram(v.default,A.default),this.waterShader=this.webgl.createShaderProgram(L.default,y.default),this.cliffShader=this.webgl.createShaderProgram(S.default,T.default),this.scene=this.addScene(),this.camera=this.scene.camera;let a=this.loadGeneric("TerrainArt\\Terrain.slk","text"),r=this.loadGeneric("TerrainArt\\CliffTypes.slk","text"),i=this.loadGeneric("TerrainArt\\Water.slk","text");this.whenLoaded([a,r,i],()=>{this.terrainCliffsAndWaterLoaded=!0,this.terrainData.load(a.data),this.cliffTypesData.load(r.data),this.waterData.load(i.data),this.emit("terrainloaded")});let s=this.loadGeneric("Doodads\\Doodads.slk","text"),o=this.loadGeneric("Doodads\\DoodadMetaData.slk","text"),u=this.loadGeneric("Units\\DestructableData.slk","text"),c=this.loadGeneric("Units\\DestructableMetaData.slk","text");this.whenLoaded([s,o,u,c],()=>{this.doodadsAndDestructiblesLoaded=!0,this.doodadsData.load(s.data),this.doodadMetaData.load(o.data),this.doodadsData.load(u.data),this.destructableMetaData.load(c.data),this.emit("doodadsloaded")});let d=this.loadGeneric("Units\\UnitData.slk","text"),h=this.loadGeneric("Units\\unitUI.slk","text"),f=this.loadGeneric("Units\\ItemData.slk","text"),m=this.loadGeneric("Units\\UnitMetaData.slk","text");this.whenLoaded([d,h,f,m],()=>{this.unitsAndItemsLoaded=!0,this.unitsData.load(d.data),this.unitsData.load(h.data),this.unitsData.load(f.data),this.unitMetaData.load(m.data),this.emit("unitsloaded")})}load(e){return super.load(e,this.mapPathSolver,this.solverParams)}loadGeneric(e,t){return super.loadGeneric(i.default(this.wc3PathSolver(e)[0],this.solverParams),t)}async loadMap(e){let t=this.promise(),n=new s.default(e,!0);this.mapMpq=n;let a=this.wc3PathSolver,r="A",i=n.get("war3map.w3i");if(i){let e=i.arrayBuffer();if(e){r=new o.default(e).tileset}else console.warn("Attempted to load war3map.w3i but it couldn't be decoded. Using default tileset A.")}else console.warn("Attempted to load war3map.w3i but it's not there. Using default tileset A.");this.emit("maploaded"),this.solverParams.tileset=r.toLowerCase(),this.mapPathSolver=(e,t)=>{let r=e.replace(/\//g,"\\"),i=n.get(r);return i?[i.arrayBuffer(),e.substr(e.lastIndexOf(".")),!1]:a(e,t)};let l=n.get("war3map.w3e");if(l){let e=l.arrayBuffer();if(e){let t=new u.default(e),n=t.centerOffset,a=t.mapSize;this.corners=t.corners,this.centerOffset=n,this.mapSize=a,this.scene.grid=new f.default(n[0],n[1],128*a[0]-128,128*a[1]-128,2048,2048),this.emit("tilesetloaded"),this.terrainCliffsAndWaterLoaded?this.loadTerrainCliffsAndWater(t):this.once("terrainloaded",()=>this.loadTerrainCliffsAndWater(t))}else console.warn("Attempted to load war3map.w3e but it couldn't be decoded. Terrain won't be rendered.")}else console.warn("Attempted to load war3map.w3e but it's not there. Terrain won't be rendered.");let c=this.mapMpq.readModifications();this.doodadsAndDestructiblesLoaded?this.loadDoodadsAndDestructibles(c):this.once("doodadsloaded",()=>this.loadDoodadsAndDestructibles(c)),this.unitsAndItemsLoaded?this.loadUnitsAndItems(c):this.once("unitsloaded",()=>this.loadUnitsAndItems(c)),t.resolve()}async loadTerrainCliffsAndWater(e){let t=this.solverParams.reforged?".dds":".blp",n=e.tileset;for(let n of e.groundTilesets){let e=this.terrainData.getRow(n);this.tilesets.push(e),this.tilesetTextures.push(this.load(`${e.dir}\\${e.file}${t}`))}this.blightTextureIndex=this.tilesetTextures.length,this.tilesetTextures.push(this.load(`TerrainArt\\Blight\\${{A:"Ashen",B:"Barrens",C:"Felwood",D:"Cave",F:"Lordf",G:"Dungeon",I:"Ice",J:"DRuins",K:"Citadel",L:"Lords",N:"North",O:"Outland",Q:"VillageFall",V:"Village",W:"Lordw",X:"Village",Y:"Village",Z:"Ruins"}[n]}_Blight${t}`));for(let n of e.cliffTilesets){let e=this.cliffTypesData.getRow(n);this.cliffTilesets.push(e),this.cliffTextures.push(this.load(`${e.texDir}\\${e.texFile}${t}`))}let a=this.waterData.getRow(`${n}Sha`);this.waterHeightOffset=a.height,this.waterIncreasePerFrame=a.texRate/60,this.waterTextures.length=0,this.maxDeepColor.set([a.Dmax_R,a.Dmax_G,a.Dmax_B,a.Dmax_A]),this.minDeepColor.set([a.Dmin_R,a.Dmin_G,a.Dmin_B,a.Dmin_A]),this.maxShallowColor.set([a.Smax_R,a.Smax_G,a.Smax_B,a.Smax_A]),this.minShallowColor.set([a.Smin_R,a.Smin_G,a.Smin_B,a.Smin_A]);for(let e=0,n=a.numTex;e<n;e++)this.waterTextures.push(this.load(`${a.texFile}${e<10?"0":""}${e}${t}`));await this.whenLoaded(this.tilesetTextures);let i=this.gl,l=e.corners,[s,o]=this.mapSize,u=this.centerOffset,c=(s-1)*(o-1),d=new Float32Array(s*o),h=new Float32Array(s*o),f=new Float32Array(s*o),_=new Uint8Array(4*c),g=new Uint8Array(4*c),b=new Uint8Array(c),w=0,v={};this.columns=s-1,this.rows=o-1;for(let e=0;e<o;e++)for(let t=0;t<s;t++){let n=l[e][t],a=e*s+t;if(d[a]=n.groundHeight,h[a]=n.groundHeight+n.layerHeight-2,f[a]=n.waterHeight,e<o-1&&t<s-1){if(b[w]=this.isWater(t,e),this.isCliff(t,e)){let a=n.layerHeight,r=l[e][t+1].layerHeight,i=l[e+1][t].layerHeight,s=l[e+1][t+1].layerHeight,o=Math.min(a,r,i,s),c=this.cliffFileName(a,r,i,s,o);if("AAAA"!==c){let a=n.cliffTexture;15===a&&(a=1);let r=this.cliffTilesets[a].cliffModelDir,i=`Doodads\\Terrain\\${r}\\${r}${c}${m.default(r,c,n.cliffVariation)}.mdx`;v[i]||(v[i]={locations:[],textures:[]}),v[i].locations.push(128*(t+1)+u[0],128*e+u[1],128*(o-2)),v[i].textures.push(a)}}else{let a=this.cornerTexture(t,e),i=this.cornerTexture(t+1,e),l=this.cornerTexture(t,e+1),s=this.cornerTexture(t+1,e+1),o=r.default([a,i,l,s]).sort(),u=o[0];_[4*w]=u+1,g[4*w]=this.getVariation(u,n.groundVariation),o.shift();for(let e=0,t=o.length;e<t;e++){let t=0;u=o[e],i===u&&(t|=1),a===u&&(t|=2),s===u&&(t|=4),l===u&&(t|=8),_[4*w+1+e]=u+1,g[4*w+1+e]=t}}w+=1}}this.vertexBuffer=this.gl.createBuffer(),i.bindBuffer(i.ARRAY_BUFFER,this.vertexBuffer),i.bufferData(i.ARRAY_BUFFER,new Float32Array([0,0,1,0,0,1,1,1]),i.STATIC_DRAW),this.faceBuffer=i.createBuffer(),i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,this.faceBuffer),i.bufferData(i.ELEMENT_ARRAY_BUFFER,new Uint8Array([0,1,2,1,3,2]),i.STATIC_DRAW),this.cliffHeightMap=i.createTexture(),i.bindTexture(i.TEXTURE_2D,this.cliffHeightMap),this.webgl.setTextureMode(i.CLAMP_TO_EDGE,i.CLAMP_TO_EDGE,i.NEAREST,i.NEAREST),i.texImage2D(i.TEXTURE_2D,0,i.ALPHA,s,o,0,i.ALPHA,i.FLOAT,d),this.heightMap=i.createTexture(),i.bindTexture(i.TEXTURE_2D,this.heightMap),this.webgl.setTextureMode(i.CLAMP_TO_EDGE,i.CLAMP_TO_EDGE,i.NEAREST,i.NEAREST),i.texImage2D(i.TEXTURE_2D,0,i.ALPHA,s,o,0,i.ALPHA,i.FLOAT,h),this.waterHeightMap=i.createTexture(),i.bindTexture(i.TEXTURE_2D,this.waterHeightMap),this.webgl.setTextureMode(i.CLAMP_TO_EDGE,i.CLAMP_TO_EDGE,i.NEAREST,i.NEAREST),i.texImage2D(i.TEXTURE_2D,0,i.ALPHA,s,o,0,i.ALPHA,i.FLOAT,f),this.instanceBuffer=i.createBuffer(),i.bindBuffer(i.ARRAY_BUFFER,this.instanceBuffer),i.bufferData(i.ARRAY_BUFFER,new Float32Array(c).map((e,t,n)=>t),i.STATIC_DRAW),this.textureBuffer=i.createBuffer(),i.bindBuffer(i.ARRAY_BUFFER,this.textureBuffer),i.bufferData(i.ARRAY_BUFFER,_,i.STATIC_DRAW),this.variationBuffer=i.createBuffer(),i.bindBuffer(i.ARRAY_BUFFER,this.variationBuffer),i.bufferData(i.ARRAY_BUFFER,g,i.STATIC_DRAW),this.waterBuffer=i.createBuffer(),i.bindBuffer(i.ARRAY_BUFFER,this.waterBuffer),i.bufferData(i.ARRAY_BUFFER,b,i.STATIC_DRAW),this.terrainReady=!0,this.anyReady=!0;let A=this.cliffShader,L=Object.entries(v).map(e=>{let t=e[0],{locations:n,textures:a}=e[1],r=this.loadGeneric(t,"arrayBuffer");return r.whenLoaded().then(()=>new p.default(this,r.data,n,a,A))});this.cliffModels=await Promise.all(L),this.cliffsReady=!0}loadDoodadsAndDestructibles(e){let t=this.mapMpq,n=t.get("war3map.doo");if(!n)return void console.warn("Attempted to load war3map.doo but it's not there");let a=n.arrayBuffer();if(!a)return void console.warn("Attempted to load war3map.doo but it couldn't be decoded");this.applyModificationFile(this.doodadsData,this.doodadMetaData,e.w3d),this.applyModificationFile(this.doodadsData,this.destructableMetaData,e.w3b);let r=new c.default(a);for(let e of r.doodads){let n=this.doodadsData.getRow(e.id),a=n.file,r=n.numVar;a.endsWith(".mdl")&&(a=a.slice(0,-4));let i=a;a+=".mdx",r>1&&(i+=Math.min(e.variation,r-1)),i+=".mdx";let l,s=t.get(i)||t.get(a);l=s?this.load(s.name):this.load(i),this.doodads.push(new w.default(this,l,n,e))}this.doodadsReady=!0,this.anyReady=!0}loadUnitsAndItems(e){let t=this.mapMpq.get("war3mapUnits.doo");if(!t)return void console.warn("Attempted to load war3mapUnits.doo but it's not there");let n=t.arrayBuffer();if(!n)return void console.warn("Attempted to load war3mapUnits.doo but it couldn't be decoded");this.applyModificationFile(this.unitsData,this.unitMetaData,e.w3u),this.applyModificationFile(this.unitsData,this.unitMetaData,e.w3t);let a=new d.default(n);for(let e of a.units){let t,n;if("sloc"===e.id?n="Objects\\StartLocation\\StartLocation.mdx":(t=this.unitsData.getRow(e.id),n=t.file,n.endsWith(".mdl")&&(n=n.slice(0,-4)),n+=".mdx"),n){let a=this.load(n);this.units.push(new b.default(this,a,t,e))}else console.log("Unknown unit ID",e.id,e)}this.unitsReady=!0,this.anyReady=!0}update(){if(this.anyReady){this.waterIndex+=this.waterIncreasePerFrame,this.waterIndex>=this.waterTextures.length&&(this.waterIndex=0),super.update();let e=this.scene.instances;for(let t of e)(t.sequenceEnded||-1===t.sequence)&&g.default(t)}}render(){if(this.anyReady){let e=this.camera.rect;this.gl.viewport(e[0],e[1],e[2],e[3]),this.renderGround(),this.renderCliffs(),super.renderOpaque(),this.renderWater(),super.renderTranslucent()}}renderGround(){if(this.terrainReady){let e=this.gl,t=this.webgl,n=t.extensions.ANGLE_instanced_arrays,a=this.groundShader,r=a.uniforms,i=a.attribs,l=this.tilesetTextures,s=i.a_InstanceID,o=i.a_position,u=i.a_textures,c=i.a_variations,d=l.length;e.enable(e.BLEND),e.blendFunc(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA),t.useShaderProgram(a),e.uniformMatrix4fv(r.u_VP,!1,this.camera.viewProjectionMatrix),e.uniform2fv(r.u_offset,this.centerOffset),e.uniform2f(r.u_size,this.columns,this.rows),e.uniform1i(r.u_heightMap,15),e.activeTexture(e.TEXTURE15),e.bindTexture(e.TEXTURE_2D,this.heightMap),e.bindBuffer(e.ARRAY_BUFFER,this.vertexBuffer),e.vertexAttribPointer(o,2,e.FLOAT,!1,8,0),e.bindBuffer(e.ARRAY_BUFFER,this.instanceBuffer),e.vertexAttribPointer(s,1,e.FLOAT,!1,4,0),n.vertexAttribDivisorANGLE(s,1),e.bindBuffer(e.ARRAY_BUFFER,this.textureBuffer),e.vertexAttribPointer(u,4,e.UNSIGNED_BYTE,!1,4,0),n.vertexAttribDivisorANGLE(u,1),e.bindBuffer(e.ARRAY_BUFFER,this.variationBuffer),e.vertexAttribPointer(c,4,e.UNSIGNED_BYTE,!1,4,0),n.vertexAttribDivisorANGLE(c,1),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.faceBuffer),e.uniform1f(r.u_baseTileset,0);for(let t=0,n=Math.min(d,15);t<n;t++){let n=l[t].width>l[t].height?1:0;e.uniform1f(r[`u_extended[${t}]`],n),e.uniform1i(r[`u_tilesets[${t}]`],t),l[t].bind(t)}if(n.drawElementsInstancedANGLE(e.TRIANGLES,6,e.UNSIGNED_BYTE,0,this.rows*this.columns),d>15){e.uniform1f(r.u_baseTileset,15);for(let t=0,n=d-15;t<n;t++){let n=l[t+15].width>l[t+15].height?1:0;e.uniform1f(r[`u_extended[${t}]`],n),l[t+15].bind(t)}n.drawElementsInstancedANGLE(e.TRIANGLES,6,e.UNSIGNED_BYTE,0,this.rows*this.columns)}n.vertexAttribDivisorANGLE(u,0),n.vertexAttribDivisorANGLE(c,0),n.vertexAttribDivisorANGLE(s,0)}}renderWater(){if(this.terrainReady){let e=this.gl,t=this.webgl,n=t.extensions.ANGLE_instanced_arrays,a=this.waterShader,r=a.uniforms,i=a.attribs,l=i.a_InstanceID,s=i.a_position,o=i.a_isWater;e.depthMask(!1),e.enable(e.BLEND),e.blendFunc(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA),t.useShaderProgram(a),e.uniformMatrix4fv(r.u_VP,!1,this.camera.viewProjectionMatrix),e.uniform2fv(r.u_offset,this.centerOffset),e.uniform2f(r.u_size,this.columns,this.rows),e.uniform1i(r.u_heightMap,0),e.uniform1i(r.u_waterHeightMap,1),e.uniform1i(r.u_waterTexture,2),e.uniform1f(r.u_offsetHeight,this.waterHeightOffset),e.uniform4fv(r.u_maxDeepColor,this.maxDeepColor),e.uniform4fv(r.u_minDeepColor,this.minDeepColor),e.uniform4fv(r.u_maxShallowColor,this.maxShallowColor),e.uniform4fv(r.u_minShallowColor,this.minShallowColor),e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,this.heightMap),e.activeTexture(e.TEXTURE1),e.bindTexture(e.TEXTURE_2D,this.waterHeightMap),this.waterTextures[0|this.waterIndex].bind(2),e.bindBuffer(e.ARRAY_BUFFER,this.vertexBuffer),e.vertexAttribPointer(s,2,e.FLOAT,!1,8,0),e.bindBuffer(e.ARRAY_BUFFER,this.instanceBuffer),e.vertexAttribPointer(l,1,e.FLOAT,!1,4,0),n.vertexAttribDivisorANGLE(l,1),e.bindBuffer(e.ARRAY_BUFFER,this.waterBuffer),e.vertexAttribPointer(o,1,e.UNSIGNED_BYTE,!1,1,0),n.vertexAttribDivisorANGLE(o,1),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.faceBuffer),n.drawElementsInstancedANGLE(e.TRIANGLES,6,e.UNSIGNED_BYTE,0,this.rows*this.columns),n.vertexAttribDivisorANGLE(o,0),n.vertexAttribDivisorANGLE(l,0)}}renderCliffs(){if(this.cliffsReady){let e=this.gl,t=this.webgl,n=t.extensions.ANGLE_instanced_arrays,a=t.extensions.OES_vertex_array_object,r=this.cliffShader,i=r.attribs,l=r.uniforms;e.disable(e.BLEND),r.use(),e.uniformMatrix4fv(l.u_VP,!1,this.camera.viewProjectionMatrix),e.uniform1i(l.u_heightMap,0),e.uniform2f(l.u_pixel,1/(this.columns+1),1/(this.rows+1)),e.uniform2fv(l.u_centerOffset,this.centerOffset),e.uniform1i(l.u_texture1,1),e.uniform1i(l.u_texture2,2),e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,this.cliffHeightMap),e.activeTexture(e.TEXTURE1),e.bindTexture(e.TEXTURE_2D,this.cliffTextures[0].webglResource),this.cliffTextures.length>1&&(e.activeTexture(e.TEXTURE2),e.bindTexture(e.TEXTURE_2D,this.cliffTextures[1].webglResource)),a||(n.vertexAttribDivisorANGLE(i.a_instancePosition,1),n.vertexAttribDivisorANGLE(i.a_instanceTexture,1));for(let e of this.cliffModels)e.render(r);a||(n.vertexAttribDivisorANGLE(i.a_instancePosition,0),n.vertexAttribDivisorANGLE(i.a_instanceTexture,0))}}cliffFileName(e,t,n,a,r){return String.fromCharCode(65+e-r)+String.fromCharCode(65+n-r)+String.fromCharCode(65+a-r)+String.fromCharCode(65+t-r)}getVariation(e,t){let n=this.tilesetTextures[e];return n.width>n.height?t<16?16+t:16===t?15:0:0===t?0:15}isCliff(e,t){if(e<1||e>this.columns-1||t<1||t>this.rows-1)return!1;let n=this.corners,a=n[t][e].layerHeight,r=n[t][e+1].layerHeight,i=n[t+1][e].layerHeight,l=n[t+1][e+1].layerHeight;return a!==r||a!==i||a!==l}isWater(e,t){let n=this.corners;return n[t][e].water||n[t][e+1].water||n[t+1][e].water||n[t+1][e+1].water}cliffGroundIndex(e){let t=this.cliffTilesets[e].groundTile,n=this.tilesets;for(let e=0,a=n.length;e<a;e++)if(n[e].tileID===t)return e}cornerTexture(e,t){let n=this.corners,a=this.columns,r=this.rows;for(let i=-1;i<1;i++)for(let l=-1;l<1;l++)if(e+l>0&&e+l<a-1&&t+i>0&&t+i<r-1&&this.isCliff(e+l,t+i)){let a=n[t+i][e+l].cliffTexture;return 15===a&&(a=1),this.cliffGroundIndex(a)}let i=n[t][e];return i.blight?this.blightTextureIndex:i.groundTexture}applyModificationFile(e,t,n){n&&(this.applyModificationTable(e,t,n.originalTable),this.applyModificationTable(e,t,n.customTable))}applyModificationTable(e,t,n){for(let a of n.objects){let n;""!==a.newId?(n=e.getRow(a.newId),n||(n=Object.assign({},e.getRow(a.oldId)),e.setRow(a.newId,n))):n=e.getRow(a.oldId);for(let e of a.modifications){let a=t.getRow(e.id);a?n[a.field]=e.value:console.warn("Unknown modification ID",e)}}}groundNormal(e,t,n){let r=this.centerOffset,i=this.mapSize,l=0|(t=(t-r[0])/128),s=0|(n=(n-r[1])/128);if(l>=0&&l<i[0]-1&&s>=0&&s<i[1]-1){let r=this.corners,i=r[s][l].groundHeight,o=r[s][l+1].groundHeight,u=r[s+1][l].groundHeight,c=r[s+1][l+1].groundHeight;t-l+(n-s)<1?(a.vec3.set(E,1,0,o-i),a.vec3.set(x,0,1,u-i)):(a.vec3.set(E,-1,0,c-u),a.vec3.set(x,0,1,c-o)),a.vec3.normalize(e,a.vec3.cross(e,E,x))}else a.vec3.set(e,0,0,1);return e}}t.default=k},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a={AAAB:1,AAAC:1,AABA:1,AABB:2,AABC:0,AACA:1,AACB:0,AACC:1,ABAA:1,ABAB:1,ABAC:0,ABBA:2,ABBB:1,ABBC:0,ABCA:0,ABCB:0,ABCC:0,ACAA:1,ACAB:0,ACAC:1,ACBA:0,ACBB:0,ACBC:0,ACCA:1,ACCB:0,ACCC:1,BAAA:1,BAAB:1,BAAC:0,BABA:1,BABB:1,BABC:0,BACA:0,BACB:0,BACC:0,BBAA:1,BBAB:1,BBAC:0,BBBA:1,BBCA:0,BCAA:0,BCAB:0,BCAC:0,BCBA:0,BCCA:0,CAAA:1,CAAB:0,CAAC:1,CABA:0,CABB:0,CABC:0,CACA:1,CACB:0,CACC:1,CBAA:0,CBAB:0,CBAC:0,CBBA:0,CBCA:0,CCAA:1,CCAB:0,CCAC:1,CCBA:0,CCCA:1},r={AAAB:2,AAAC:1,AABA:1,AABB:3,AABC:0,AACA:1,AACB:0,AACC:3,ABAA:1,ABAB:2,ABAC:0,ABBA:3,ABBB:0,ABBC:0,ABCA:0,ABCB:0,ABCC:0,ACAA:1,ACAB:0,ACAC:2,ACBA:0,ACBB:0,ACBC:0,ACCA:3,ACCB:0,ACCC:1,BAAA:1,BAAB:3,BAAC:0,BABA:2,BABB:0,BABC:0,BACA:0,BACB:0,BACC:0,BBAA:3,BBAB:1,BBAC:0,BBBA:1,BBCA:0,BCAA:0,BCAB:0,BCAC:0,BCBA:0,BCCA:0,CAAA:1,CAAB:0,CAAC:3,CABA:0,CABB:0,CABC:0,CACA:2,CACB:0,CACC:1,CBAA:0,CBAB:0,CBAC:0,CBBA:0,CBCA:0,CCAA:3,CCAB:0,CCAC:1,CCBA:0,CCCA:1};t.default=function(e,t,n){return"Cliffs"===e?Math.min(n,a[t]):Math.min(n,r[t])}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(48);t.default=class{constructor(e,t,n,r,i){let l=e.gl,s=e.webgl,o=s.extensions.ANGLE_instanced_arrays,u=s.extensions.OES_vertex_array_object,c=new a.default(t).geosets[0],d=c.vertices,h=c.normals,f=c.uvSets[0],_=c.faces,m=d.byteLength,p=m+h.byteLength,g=null,b=i.attribs;u&&(g=u.createVertexArrayOES(),u.bindVertexArrayOES(g));let w=l.createBuffer();l.bindBuffer(l.ARRAY_BUFFER,w),l.bufferData(l.ARRAY_BUFFER,p+f.byteLength,l.STATIC_DRAW),l.bufferSubData(l.ARRAY_BUFFER,0,d),l.bufferSubData(l.ARRAY_BUFFER,m,h),l.bufferSubData(l.ARRAY_BUFFER,p,f),u&&(l.vertexAttribPointer(b.a_position,3,l.FLOAT,!1,0,0),l.enableVertexAttribArray(b.a_position),l.vertexAttribPointer(b.a_normal,3,l.FLOAT,!1,0,m),l.enableVertexAttribArray(b.a_normal),l.vertexAttribPointer(b.a_uv,2,l.FLOAT,!1,0,p),l.enableVertexAttribArray(b.a_uv));let v=4*n.length,A=l.createBuffer();l.bindBuffer(l.ARRAY_BUFFER,A),l.bufferData(l.ARRAY_BUFFER,v+r.length,l.STATIC_DRAW),l.bufferSubData(l.ARRAY_BUFFER,0,new Float32Array(n)),l.bufferSubData(l.ARRAY_BUFFER,v,new Uint8Array(r)),u&&(l.vertexAttribPointer(b.a_instancePosition,3,l.FLOAT,!1,0,0),l.enableVertexAttribArray(b.a_instancePosition),o.vertexAttribDivisorANGLE(b.a_instancePosition,1),l.vertexAttribPointer(b.a_instanceTexture,1,l.UNSIGNED_BYTE,!1,0,v),l.enableVertexAttribArray(b.a_instanceTexture),o.vertexAttribDivisorANGLE(b.a_instanceTexture,1));let L=l.createBuffer();l.bindBuffer(l.ELEMENT_ARRAY_BUFFER,L),l.bufferData(l.ELEMENT_ARRAY_BUFFER,_,l.STATIC_DRAW),u&&u.bindVertexArrayOES(null),this.viewer=e,this.vertexBuffer=w,this.faceBuffer=L,this.normalsOffset=m,this.uvsOffset=p,this.elements=_.length,this.locationAndTextureBuffer=A,this.texturesOffset=v,this.instances=n.length/3,this.vao=g}render(e){let t=this.viewer,n=t.gl,a=t.webgl,r=a.extensions.ANGLE_instanced_arrays,i=a.extensions.OES_vertex_array_object,l=e.attribs;i?i.bindVertexArrayOES(this.vao):(n.bindBuffer(n.ARRAY_BUFFER,this.locationAndTextureBuffer),n.vertexAttribPointer(l.a_instancePosition,3,n.FLOAT,!1,0,0),n.vertexAttribPointer(l.a_instanceTexture,1,n.UNSIGNED_BYTE,!1,0,this.texturesOffset),n.bindBuffer(n.ARRAY_BUFFER,this.vertexBuffer),n.vertexAttribPointer(l.a_position,3,n.FLOAT,!1,0,0),n.vertexAttribPointer(l.a_normal,3,n.FLOAT,!1,0,this.normalsOffset),n.vertexAttribPointer(l.a_uv,2,n.FLOAT,!1,0,this.uvsOffset),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,this.faceBuffer)),r.drawElementsInstancedANGLE(n.TRIANGLES,this.elements,n.UNSIGNED_SHORT,0,this.instances),i&&i.bindVertexArrayOES(null)}}},function(e,t,n){"use strict";function a(e,t){return e.sequence.rarity<t.sequence.rarity}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let t=function(e,t){let n=function(e,t){let n=[];for(let a=0,r=t.length;a<r;a++){let r=t[a];r.name.split("-")[0].replace(/\d/g,"").trim().toLowerCase()===e&&n.push({sequence:r,index:a})}return n}(e,t);n.sort(a);for(var r=0,i=n.length;r<i;r++){let e=n[r].sequence.rarity;if(0===e)break;if(10*Math.random()>e)return n[r]}let l=n.length-r;return n[r+Math.floor(Math.random()*l)]}("stand",e.model.sequences);t&&e.setSequence(t.index)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(2),r=n(7),i=a.vec3.create();t.default=class{constructor(e,t,n,l){let s=t.addInstance();s.move(l.location),s.rotateLocal(a.quat.setAxisAngle(a.quat.create(),r.VEC3_UNIT_Z,l.angle)),s.scale(l.scale),s.setTeamColor(l.player),s.setScene(e.scene),n&&(i[2]=n.moveHeight,s.move(i),s.setVertexColor([n.red/255,n.green/255,n.blue/255,1]),s.uniformScale(n.modelScale)),this.instance=s,this.row=n}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(2),r=n(7);t.default=class{constructor(e,t,n,i){let l;l=1===n.lightweight?t.addInstance(1):t.addInstance(),l.move(i.location),l.rotateLocal(a.quat.setAxisAngle(a.quat.create(),r.VEC3_UNIT_Z,i.angle)),l.scale(i.scale),l.setScene(e.scene),this.instance=l,this.row=n}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default="\nuniform mat4 u_VP;\nuniform sampler2D u_heightMap;\nuniform vec2 u_size;\nuniform vec2 u_offset;\nuniform bool u_extended[14];\nuniform float u_baseTileset;\n\nattribute vec2 a_position;\nattribute float a_InstanceID;\nattribute vec4 a_textures;\nattribute vec4 a_variations;\n\nvarying vec4 v_tilesets;\nvarying vec2 v_uv[4];\nvarying vec3 v_normal;\n\nvec2 getCell(float variation) {\n  if (variation < 16.0) {\n    return vec2(mod(variation, 4.0), floor(variation / 4.0));\n  } else {\n    variation -= 16.0;\n\n    return vec2(4.0 + mod(variation, 4.0), floor(variation / 4.0));\n  }\n}\n\nvec2 getUV(vec2 position, bool extended, float variation) {\n  vec2 cell = getCell(variation);\n  vec2 cellSize = vec2(extended ? 0.125 : 0.25, 0.25);\n  vec2 uv = vec2(position.x, 1.0 - position.y);\n  vec2 pixelSize = vec2(1.0 / 512.0, 1.0 / 256.0); /// Note: hardcoded to 512x256 for now.\n\n  return clamp((cell + uv) * cellSize, cell * cellSize + pixelSize, (cell + 1.0) * cellSize - pixelSize); \n}\n\nvoid main() {\n  vec4 textures = a_textures - u_baseTileset;\n  \n  if (textures[0] > 0.0 || textures[1] > 0.0 || textures[2] > 0.0 || textures[3] > 0.0) {\n    v_tilesets = textures;\n\n    v_uv[0] = getUV(a_position, u_extended[int(textures[0]) - 1], a_variations[0]);\n    v_uv[1] = getUV(a_position, u_extended[int(textures[1]) - 1], a_variations[1]);\n    v_uv[2] = getUV(a_position, u_extended[int(textures[2]) - 1], a_variations[2]);\n    v_uv[3] = getUV(a_position, u_extended[int(textures[3]) - 1], a_variations[3]);\n\n    vec2 corner = vec2(mod(a_InstanceID, u_size.x), floor(a_InstanceID / u_size.x));\n    vec2 base = corner + a_position;\n    float height = texture2D(u_heightMap, base / u_size).a;\n\n    float hL = texture2D(u_heightMap, vec2(base - vec2(1.0, 0.0)) / (u_size)).a;\n    float hR = texture2D(u_heightMap, vec2(base + vec2(1.0, 0.0)) / (u_size)).a;\n    float hD = texture2D(u_heightMap, vec2(base - vec2(0.0, 1.0)) / (u_size)).a;\n    float hU = texture2D(u_heightMap, vec2(base + vec2(0.0, 1.0)) / (u_size)).a;\n\n    v_normal = normalize(vec3(hL - hR, hD - hU, 2.0));\n\n    gl_Position = u_VP * vec4(base * 128.0 + u_offset, height * 128.0, 1.0);\n  } else {\n    v_tilesets = vec4(0.0);\n\n    v_uv[0] = vec2(0.0);\n    v_uv[1] = vec2(0.0);\n    v_uv[2] = vec2(0.0);\n    v_uv[3] = vec2(0.0);\n\n    v_normal = vec3(0.0);\n\n    gl_Position = vec4(0.0);\n  }\n}\n"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default="\nprecision mediump float;\n\nuniform sampler2D u_tilesets[15];\n\nvarying vec4 v_tilesets;\nvarying vec2 v_uv[4];\nvarying vec3 v_normal;\n\nconst vec3 lightDirection = normalize(vec3(-0.3, -0.3, 0.25));\n\nvec4 sample(float tileset, vec2 uv) {\n  if (tileset == 0.0) {\n    return texture2D(u_tilesets[0], uv);\n  } else if (tileset == 1.0) {\n    return texture2D(u_tilesets[1], uv);\n  } else if (tileset == 2.0) {\n    return texture2D(u_tilesets[2], uv);\n  } else if (tileset == 3.0) {\n    return texture2D(u_tilesets[3], uv);\n  } else if (tileset == 4.0) {\n    return texture2D(u_tilesets[4], uv);\n  } else if (tileset == 5.0) {\n    return texture2D(u_tilesets[5], uv);\n  } else if (tileset == 6.0) {\n    return texture2D(u_tilesets[6], uv);\n  } else if (tileset == 7.0) {\n    return texture2D(u_tilesets[7], uv);\n  } else if (tileset == 8.0) {\n    return texture2D(u_tilesets[8], uv);\n  } else if (tileset == 9.0) {\n    return texture2D(u_tilesets[9], uv);\n  } else if (tileset == 10.0) {\n    return texture2D(u_tilesets[10], uv);\n  } else if (tileset == 11.0) {\n    return texture2D(u_tilesets[11], uv);\n  } else if (tileset == 12.0) {\n    return texture2D(u_tilesets[12], uv);\n  } else if (tileset == 13.0) {\n    return texture2D(u_tilesets[13], uv);\n  } else if (tileset == 14.0) {\n    return texture2D(u_tilesets[14], uv);\n  }\n}\n\nvec4 blend(vec4 color, float tileset, vec2 uv) {\n  vec4 texel = sample(tileset, uv);\n\n  return mix(color, texel, texel.a);\n}\n\nvoid main() {\n  vec4 color = sample(v_tilesets[0] - 1.0, v_uv[0]);\n\n  if (v_tilesets[1] > 0.5) {\n    color = blend(color, v_tilesets[1] - 1.0, v_uv[1]);\n  }\n\n  if (v_tilesets[2] > 0.5) {\n    color = blend(color, v_tilesets[2] - 1.0, v_uv[2]);\n  }\n\n  if (v_tilesets[3] > 0.5) {\n    color = blend(color, v_tilesets[3] - 1.0, v_uv[3]);\n  }\n\n  // color *= clamp(dot(v_normal, lightDirection) + 0.45, 0.0, 1.0);\n\n  gl_FragColor = color;\n}\n"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default="\nuniform mat4 u_VP;\nuniform sampler2D u_heightMap;\nuniform sampler2D u_waterHeightMap;\nuniform vec2 u_size;\nuniform vec2 u_offset;\nuniform float u_offsetHeight;\nuniform vec4 u_minDeepColor;\nuniform vec4 u_maxDeepColor;\nuniform vec4 u_minShallowColor;\nuniform vec4 u_maxShallowColor;\n\nattribute vec2 a_position;\nattribute float a_InstanceID;\nattribute float a_isWater;\n\nvarying vec2 v_uv;\nvarying vec4 v_color;\n\nconst float minDepth = 10.0 / 128.0;\nconst float deepLevel = 64.0 / 128.0;\nconst float maxDepth = 72.0 / 128.0;\n\nvoid main() {\n  if (a_isWater > 0.5) {\n    v_uv = a_position;\n\n    vec2 corner = vec2(mod(a_InstanceID, u_size.x), floor(a_InstanceID / u_size.x));\n    vec2 base = corner + a_position;\n    float height = texture2D(u_heightMap, base / u_size).a;\n    float waterHeight = texture2D(u_waterHeightMap, base / u_size).a + u_offsetHeight;\n    float value = clamp(waterHeight - height, 0.0, 1.0);\n\n    if (value <= deepLevel) {\n      value = max(0.0, value - minDepth) / (deepLevel - minDepth);\n      v_color = mix(u_minShallowColor, u_maxShallowColor, value) / 255.0;\n    } else {\n      value = clamp(value - deepLevel, 0.0, maxDepth - deepLevel) / (maxDepth - deepLevel);\n      v_color = mix(u_minDeepColor, u_maxDeepColor, value) / 255.0;\n    }\n\n    gl_Position = u_VP * vec4(base * 128.0 + u_offset, waterHeight * 128.0, 1.0);\n  } else {\n    v_uv = vec2(0.0);\n    v_color = vec4(0.0);\n\n    gl_Position = vec4(0.0);\n  }\n}\n"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default="\nprecision mediump float;\n\nuniform sampler2D u_waterTexture;\n\nvarying vec2 v_uv;\nvarying vec4 v_color;\n\nvoid main() {\n  gl_FragColor = texture2D(u_waterTexture, v_uv) * v_color;\n}\n"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default="\nuniform mat4 u_VP;\nuniform sampler2D u_heightMap;\nuniform vec2 u_pixel;\nuniform vec2 u_centerOffset;\n\nattribute vec3 a_position;\nattribute vec3 a_normal;\nattribute vec2 a_uv;\nattribute vec3 a_instancePosition;\nattribute float a_instanceTexture;\n\nvarying vec3 v_normal;\nvarying vec2 v_uv;\nvarying float v_texture;\nvarying vec3 v_position;\n\nvoid main() {\n  // Half of a pixel in the cliff height map.\n  vec2 halfPixel = u_pixel * 0.5;\n\n  // The bottom left corner of the map tile this vertex is on.\n  vec2 corner = floor((a_instancePosition.xy - vec2(1.0, 0.0) - u_centerOffset.xy) / 128.0);\n\n  // Get the 4 closest heights in the height map.\n  float bottomLeft = texture2D(u_heightMap, corner * u_pixel + halfPixel).a;\n  float bottomRight = texture2D(u_heightMap, (corner + vec2(1.0, 0.0)) * u_pixel + halfPixel).a;\n  float topLeft = texture2D(u_heightMap, (corner + vec2(0.0, 1.0)) * u_pixel + halfPixel).a;\n  float topRight = texture2D(u_heightMap, (corner + vec2(1.0, 1.0)) * u_pixel + halfPixel).a;\n  \n  // Do a bilinear interpolation between the heights to get the final value.\n  float bottom = mix(bottomRight, bottomLeft, -a_position.x / 128.0);\n  float top = mix(topRight, topLeft, -a_position.x / 128.0);\n  float height = mix(bottom, top, a_position.y / 128.0);\n\n  v_normal = a_normal;\n  v_uv = a_uv;\n  v_texture = a_instanceTexture;\n  v_position = a_position + vec3(a_instancePosition.xy, a_instancePosition.z + height * 128.0);\n\n  gl_Position = u_VP * vec4(v_position, 1.0);\n}\n"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default="\n// #extension GL_OES_standard_derivatives : enable\n\nprecision mediump float;\n\nuniform sampler2D u_texture1;\nuniform sampler2D u_texture2;\n\nvarying vec3 v_normal;\nvarying vec2 v_uv;\nvarying float v_texture;\nvarying vec3 v_position;\n\n// const vec3 lightDirection = normalize(vec3(-0.3, -0.3, 0.25));\n\nvec4 sample(int texture, vec2 uv) {\n  if (texture == 0) {\n    return texture2D(u_texture1, uv);\n  } else {\n    return texture2D(u_texture2, uv);\n  }\n}\n\nvoid main() {\n  vec4 color = sample(int(v_texture), v_uv);\n\n  // vec3 faceNormal = cross(dFdx(v_position), dFdy(v_position));\n  // vec3 normal = normalize((faceNormal + v_normal) * 0.5);\n\n  // color *= clamp(dot(normal, lightDirection) + 0.45, 0.1, 1.0);\n\n  gl_FragColor = color;\n}\n"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(414),r=n(422),i=n(423),l=n(424),s=n(425),o=n(67),u=n(426);t.default={UnitTester:a.default,mdxSanityTest:r.default,blpSanityTest:i.default,convertWeu:l.default,mdlSourceMap:s.default,MappedData:o.MappedData,jass2:u.default}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(415),r=n(421),i=n(33),l=n(58),s=n(13),o=n(63),u=n(62);t.default=class{constructor(){this.mathRandom=Math.random,this.tests=[];let e=document.createElement("canvas");e.width=e.height=256;let t=new l.default(e,{alpha:!1,antialias:!1});t.gl.clearColor(.05,.05,.05,1),t.on("error",(e,t,n)=>console.log(e,t,n)),t.addHandler(s.default),t.addHandler(o.default),t.addHandler(u.default),this.viewer=t}add(e){e.tests?this.addBaseName(e.tests,e.name):this.tests.push({name:e.name,test:e})}async test(e){for(let t of this.tests){let n=await this.getTestBlob(t),r=await this.getComparisonBlob(t);if(n&&r){let l=await new Promise(e=>a(n).compareTo(r).ignoreColors().onComplete(t=>e(t))),s=await i.blobToImage(n),o=await i.blobToImage(r);e({done:!1,value:{name:t.name,testImage:s,comparisonImage:o,result:l.rawMisMatchPercentage}})}else e(n?{done:!1,value:{name:t.name,testImage:await i.blobToImage(n),result:100}}:r?{done:!1,value:{name:t.name,comparisonImage:await i.blobToImage(r),result:100}}:{done:!1,value:{name:t.name,result:100}})}e({done:!0})}async download(e){for(let t of this.tests){let n=t.name,a=await this.getTestBlob(t);e(a?{done:!1,value:{name:n,blob:a}}:{done:!1,value:{name:n}})}e({done:!0})}isDataAGo(e){if(e){if(Array.isArray(e)){for(let t of e)if(!t.ok)return!1;return!0}return e.ok}return!1}async getTestBlob(e){let t=e.test.load,n=e.test.test,a=this.viewer;a.clear();let i=a.addScene(),l=i.camera;l.viewport([0,0,a.canvas.width,a.canvas.height]),l.perspective(Math.PI/4,1,8,1e5);let s=t(a);if(await a.whenAllLoaded(),this.isDataAGo(s))return Math.random=r.default(6),n(a,i,l,s),a.updateAndRender(),Math.random=this.mathRandom,await a.toBlob()}async getComparisonBlob(e){let t=await fetch(`compare/${e.name}.png`);if(t.ok)return await t.blob()}addBaseName(e,t){for(let n of e)n.tests?this.addBaseName(n.tests,t+"-"+n.name):this.tests.push({name:t+"-"+n.name,test:n})}}},function(e,t,n){(function(n){var a,r,i;!function(l,s){"use strict";r=[],void 0===(i="function"==typeof(a=function(){var e;e="undefined"!=typeof Image?Image:(void 0).Image;var t="undefined"!=typeof window?window.document:{createElement:function(){return new(void 0)}},a={},r=a;var i=function(i){var l=1,s={red:255,green:0,blue:255,alpha:255},o={r:0,g:0,b:0,a:0};function u(e,t){return(Math.abs(e.r-t.r)+Math.abs(e.g-t.g)+Math.abs(e.b-t.b))/3}function c(e,t,n,a,r){return e>(r.left||0)&&e<(r.right||n)&&t>(r.top||0)&&t<(r.bottom||a)}var d,h,f,_={flat:function(e,t){e[t]=s.red,e[t+1]=s.green,e[t+2]=s.blue,e[t+3]=s.alpha},movement:function(e,t,n,a){e[t]=(a.r*(s.red/255)+s.red)/2,e[t+1]=(a.g*(s.green/255)+s.green)/2,e[t+2]=(a.b*(s.blue/255)+s.blue)/2,e[t+3]=a.a},flatDifferenceIntensity:function(e,t,n,a){e[t]=s.red,e[t+1]=s.green,e[t+2]=s.blue,e[t+3]=u(n,a)},movementDifferenceIntensity:function(e,t,n,a){var r=u(n,a)/255*.8;e[t]=(1-r)*(a.r*(s.red/255))+r*s.red,e[t+1]=(1-r)*(a.g*(s.green/255))+r*s.green,e[t+2]=(1-r)*(a.b*(s.blue/255))+r*s.blue,e[t+3]=a.a},diffOnly:function(e,t,n,a){e[t]=a.r,e[t+1]=a.g,e[t+2]=a.b,e[t+3]=a.a}},m=_.flat,p=1200,g=!0,b={},w=[],v=[],A={red:16,green:16,blue:16,alpha:16,minBrightness:16,maxBrightness:240},L=!1,y=!1,S=!1;function T(){var e,t=v.length;for(e=0;e<t;e++)"function"==typeof v[e]&&v[e](b)}function E(e,t,n){var a,r;for(a=0;a<e;a++)for(r=0;r<t;r++)n(a,r)}function x(a,r){var i,l=new e;l.setAttribute||(l.setAttribute=function(){}),g&&l.setAttribute("crossorigin","anonymous"),l.onerror=function(e){l.onload=null,l.onerror=null,w.push({error:e?e+"":"Image load error."}),r()},l.onload=function(){l.onload=null,l.onerror=null;var e,n=t.createElement("canvas"),a=l.width,i=l.height;S&&1===w.length&&(a=w[0].width,i=w[0].height),n.width=a,n.height=i,n.getContext("2d").drawImage(l,0,0,a,i),e=n.getContext("2d").getImageData(0,0,a,i),w.push(e),r(e,a,i)},"string"==typeof a?(l.src=a,l.complete&&l.naturalWidth>0&&l.onload()):void 0!==a.data&&"number"==typeof a.width&&"number"==typeof a.height?(w.push(a),r(a,a.width,a.height)):void 0!==n&&a instanceof n?l.src=a:((i=new FileReader).onload=function(e){l.src=e.target.result},i.readAsDataURL(a))}function k(e,t,n){var a=Math.abs(e-t);return void 0!==e&&(void 0!==t&&(e===t||a<A[n]))}function M(e,t){var n=k(e.a,t.a,"alpha");return k(e.brightness,t.brightness,"minBrightness")&&n}function I(e,t,n){return.3*e+.59*t+.11*n}function U(e,t){var n=e.r===t.r,a=e.g===t.g,r=e.b===t.b;return n&&a&&r}function P(e,t,n,a,r,i){var l,s,u,c,d=0,h=0,f=0;for(B(e),l=-1;l<=1;l++)for(s=-1;s<=1;s++)if(0===l&&0===s);else{if(!O(o,t,4*((a+s)*i+(r+l))))continue;if(C(o),B(o),u=e,c=o,Math.abs(u.brightness-c.brightness)>A.maxBrightness&&d++,U(e,o)&&f++,Math.abs(o.h-e.h)>.3&&h++,h>1||d>1)return!0}return f<2}function R(e,t,n){"diffOnly"!==d&&(e[t]=n.brightness,e[t+1]=n.brightness,e[t+2]=n.brightness,e[t+3]=n.a*l)}function O(e,t,n){return t.length>n&&(e.r=t[n],e.g=t[n+1],e.b=t[n+2],e.a=t[n+3],!0)}function C(e){e.brightness=I(e.r,e.g,e.b)}function B(e){e.h=function(e,t,n){var a,r,i=e/255,l=t/255,s=n/255,o=Math.max(i,l,s),u=Math.min(i,l,s);if(o===u)a=0;else switch(r=o-u,o){case i:a=(l-s)/r+(l<s?6:0);break;case l:a=(s-i)/r+2;break;case s:a=(i-l)/r+4;break;default:a/=6}return a}(e.r,e.g,e.b)}function F(e,n,a,r){var i=t.createElement("canvas"),s=e.data,o=n.data;i.width=a,i.height=r;var u,_=i.getContext("2d"),g=_.createImageData(a,r),w=g.data,v=0,A={top:r,left:a,bottom:0,right:0},S=function(e,t){A.left=Math.min(e,A.left),A.right=Math.max(e,A.right),A.top=Math.min(t,A.top),A.bottom=Math.max(t,A.bottom)},T=Date.now();p&&L&&(a>p||r>p)&&(u=6);var x={r:0,g:0,b:0,a:0},I={r:0,g:0,b:0,a:0};E(a,r,(function(e,t){if(!u||t%u!=0&&e%u!=0){var n,i,_,p,g,b,A=4*(t*a+e),T=function(e,t,n,a){var r=!0;return void 0===h||c(e,t,n,a,h)||(r=!1),void 0!==f&&c(e,t,n,a,f)&&(r=!1),r}(e,t,a,r);if(O(x,s,A)&&O(I,o,A))return y?(C(x),C(I),void(M(x,I)||!T?R(w,A,I):(m(w,A,x,I),v++,S(e,t)))):(_=k((n=x).r,(i=I).r,"red"),p=k(n.g,i.g,"green"),g=k(n.b,i.b,"blue"),b=k(n.a,i.a,"alpha"),void(_&&p&&g&&b||!T?function(e,t,n){"diffOnly"!==d&&(e[t]=n.r,e[t+1]=n.g,e[t+2]=n.b,e[t+3]=n.a*l)}(w,A,x):L&&(C(x),C(I),P(x,s,0,t,e,a)||P(I,o,0,t,e,a))&&(M(x,I)||!T)?R(w,A,I):(m(w,A,x,I),v++,S(e,t))))}})),b.rawMisMatchPercentage=v/(r*a)*100,b.misMatchPercentage=b.rawMisMatchPercentage.toFixed(2),b.diffBounds=A,b.analysisTime=Date.now()-T,b.getImageDataUrl=function(e){var t=0;return e&&(t=function(e,t,n){t.font="12px sans-serif";var a=t.measureText(e).width+4;a>n.width&&(n.width=a);return n.height+=22,t.fillStyle="#666",t.fillRect(0,0,n.width,18),t.fillStyle="#fff",t.fillRect(0,18,n.width,4),t.fillStyle="#fff",t.textBaseline="top",t.font="12px sans-serif",t.fillText(e,2,1),22}(e,_,i)),_.putImageData(g,0,t),i.toDataURL("image/png")},i.toBuffer&&(b.getBuffer=function(t){if(t){var a=i.width+2;i.width=3*a,_.putImageData(e,0,0),_.putImageData(n,a,0),_.putImageData(g,2*a,0)}else _.putImageData(g,0,0);return i.toBuffer()})}function D(e,n,a){var r,i;return e.height<a||e.width<n?((r=t.createElement("canvas")).width=n,r.height=a,(i=r.getContext("2d")).putImageData(e,0,0),i.getImageData(0,0,n,a)):e}function G(e){var t;if(e.errorColor)for(t in e.errorColor)e.errorColor.hasOwnProperty(t)&&(s[t]=void 0===e.errorColor[t]?s[t]:e.errorColor[t]);e.errorType&&_[e.errorType]&&(m=_[e.errorType],d=e.errorType),e.errorPixel&&"function"==typeof e.errorPixel&&(m=e.errorPixel),l=isNaN(Number(e.transparency))?l:e.transparency,void 0!==e.largeImageThreshold&&(p=e.largeImageThreshold),void 0!==e.useCrossOrigin&&(g=e.useCrossOrigin),void 0!==e.boundingBox&&(h=e.boundingBox),void 0!==e.ignoredBox&&(f=e.ignoredBox)}function N(e){var t,n="function"==typeof e;n||(t=e);var l={scaleToSameSize:function(){return S=!0,n&&e(),l},useOriginalSize:function(){return S=!1,n&&e(),l},ignoreNothing:function(){return A.red=0,A.green=0,A.blue=0,A.alpha=0,A.minBrightness=0,A.maxBrightness=255,L=!1,y=!1,n&&e(),l},ignoreLess:function(){return A.red=16,A.green=16,A.blue=16,A.alpha=16,A.minBrightness=16,A.maxBrightness=240,L=!1,y=!1,n&&e(),l},ignoreAntialiasing:function(){return A.red=32,A.green=32,A.blue=32,A.alpha=32,A.minBrightness=64,A.maxBrightness=96,L=!0,y=!1,n&&e(),l},ignoreColors:function(){return A.alpha=16,A.minBrightness=16,A.maxBrightness=240,L=!1,y=!0,n&&e(),l},ignoreAlpha:function(){return A.red=16,A.green=16,A.blue=16,A.alpha=255,A.minBrightness=16,A.maxBrightness=240,L=!1,y=!1,n&&e(),l},repaint:function(){return n&&e(),l},outputSettings:function(e){return G(e),l},onComplete:function(e){v.push(e);var n=function(){!function(e,t){function n(){var e,t;if(2===w.length){if(w[0].error||w[1].error)return(b={}).error=w[0].error?w[0].error:w[1].error,void T();e=w[0].width>w[1].width?w[0].width:w[1].width,t=w[0].height>w[1].height?w[0].height:w[1].height,w[0].width===w[1].width&&w[0].height===w[1].height?b.isSameDimensions=!0:b.isSameDimensions=!1,b.dimensionDifference={width:w[0].width-w[1].width,height:w[0].height-w[1].height},F(D(w[0],e,t),D(w[1],e,t),e,t),T()}}r!==a&&G(r),w=[],x(e,n),x(t,n)}(i,t)};return n(),N(n)}};return l}var V={onComplete:function(e){v.push(e),x(i,(function(e,t,n){!function(e,t,n){var a=0,r=0,i=0,l=0,s=0,o=0,u=0,c=0;E(t,n,(function(n,d){var h=4*(d*t+n),f=e[h],_=e[h+1],m=e[h+2],p=e[h+3],g=I(f,_,m);f===_&&f===m&&p&&(0===f?c++:255===f&&u++),a++,r+=f/255*100,i+=_/255*100,l+=m/255*100,s+=(255-p)/255*100,o+=g/255*100})),b.red=Math.floor(r/a),b.green=Math.floor(i/a),b.blue=Math.floor(l/a),b.alpha=Math.floor(s/a),b.brightness=Math.floor(o/a),b.white=Math.floor(u/a*100),b.black=Math.floor(c/a*100),T()}(e.data,t,n)}))},compareTo:function(e){return N(e)},outputSettings:function(e){return G(e),V}};return V};function l(e,t){switch(t){case"nothing":e.ignoreNothing();break;case"less":e.ignoreLess();break;case"antialiasing":e.ignoreAntialiasing();break;case"colors":e.ignoreColors();break;case"alpha":e.ignoreAlpha();break;default:throw new Error("Invalid ignore: "+t)}}return i.compare=function(e,t,n,a){var r,s;"function"==typeof n?(r=n,s={}):(r=a,s=n||{});var o,u=i(e);s.output&&u.outputSettings(s.output),o=u.compareTo(t),s.scaleToSameSize&&o.scaleToSameSize(),"string"==typeof s.ignore?l(o,s.ignore):s.ignore&&s.ignore.forEach&&s.ignore.forEach((function(e){l(o,e)})),o.onComplete((function(e){e.error?r(e.error):r(null,e)}))},i.outputSettings=function(e){return console.warn("warning resemble.outputSettings mutates global state, and will be removed in 3.0.0"),r=e,this},i})?a.apply(t,r):a)||(e.exports=i)}()}).call(this,n(416).Buffer)},function(e,t,n){"use strict";(function(e){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */
var a=n(418),r=n(419),i=n(420);function l(){return o.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(e,t){if(l()<t)throw new RangeError("Invalid typed array length");return o.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=o.prototype:(null===e&&(e=new o(t)),e.length=t),e}function o(e,t,n){if(!(o.TYPED_ARRAY_SUPPORT||this instanceof o))return new o(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return d(this,e)}return u(this,e,t,n)}function u(e,t,n,a){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,n,a){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(a||0))throw new RangeError("'length' is out of bounds");t=void 0===n&&void 0===a?new Uint8Array(t):void 0===a?new Uint8Array(t,n):new Uint8Array(t,n,a);o.TYPED_ARRAY_SUPPORT?(e=t).__proto__=o.prototype:e=h(e,t);return e}(e,t,n,a):"string"==typeof t?function(e,t,n){"string"==typeof n&&""!==n||(n="utf8");if(!o.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var a=0|_(t,n),r=(e=s(e,a)).write(t,n);r!==a&&(e=e.slice(0,r));return e}(e,t,n):function(e,t){if(o.isBuffer(t)){var n=0|f(t.length);return 0===(e=s(e,n)).length?e:(t.copy(e,0,0,n),e)}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(a=t.length)!=a?s(e,0):h(e,t);if("Buffer"===t.type&&i(t.data))return h(e,t.data)}var a;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function c(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function d(e,t){if(c(t),e=s(e,t<0?0:0|f(t)),!o.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function h(e,t){var n=t.length<0?0:0|f(t.length);e=s(e,n);for(var a=0;a<n;a+=1)e[a]=255&t[a];return e}function f(e){if(e>=l())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+l().toString(16)+" bytes");return 0|e}function _(e,t){if(o.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var a=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return V(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return j(e).length;default:if(a)return V(e).length;t=(""+t).toLowerCase(),a=!0}}function m(e,t,n){var a=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return I(this,t,n);case"utf8":case"utf-8":return E(this,t,n);case"ascii":return k(this,t,n);case"latin1":case"binary":return M(this,t,n);case"base64":return T(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return U(this,t,n);default:if(a)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),a=!0}}function p(e,t,n){var a=e[t];e[t]=e[n],e[n]=a}function g(e,t,n,a,r){if(0===e.length)return-1;if("string"==typeof n?(a=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=r?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(r)return-1;n=e.length-1}else if(n<0){if(!r)return-1;n=0}if("string"==typeof t&&(t=o.from(t,a)),o.isBuffer(t))return 0===t.length?-1:b(e,t,n,a,r);if("number"==typeof t)return t&=255,o.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?r?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):b(e,[t],n,a,r);throw new TypeError("val must be string, number or Buffer")}function b(e,t,n,a,r){var i,l=1,s=e.length,o=t.length;if(void 0!==a&&("ucs2"===(a=String(a).toLowerCase())||"ucs-2"===a||"utf16le"===a||"utf-16le"===a)){if(e.length<2||t.length<2)return-1;l=2,s/=2,o/=2,n/=2}function u(e,t){return 1===l?e[t]:e.readUInt16BE(t*l)}if(r){var c=-1;for(i=n;i<s;i++)if(u(e,i)===u(t,-1===c?0:i-c)){if(-1===c&&(c=i),i-c+1===o)return c*l}else-1!==c&&(i-=i-c),c=-1}else for(n+o>s&&(n=s-o),i=n;i>=0;i--){for(var d=!0,h=0;h<o;h++)if(u(e,i+h)!==u(t,h)){d=!1;break}if(d)return i}return-1}function w(e,t,n,a){n=Number(n)||0;var r=e.length-n;a?(a=Number(a))>r&&(a=r):a=r;var i=t.length;if(i%2!=0)throw new TypeError("Invalid hex string");a>i/2&&(a=i/2);for(var l=0;l<a;++l){var s=parseInt(t.substr(2*l,2),16);if(isNaN(s))return l;e[n+l]=s}return l}function v(e,t,n,a){return H(V(t,e.length-n),e,n,a)}function A(e,t,n,a){return H(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,a)}function L(e,t,n,a){return A(e,t,n,a)}function y(e,t,n,a){return H(j(t),e,n,a)}function S(e,t,n,a){return H(function(e,t){for(var n,a,r,i=[],l=0;l<e.length&&!((t-=2)<0);++l)n=e.charCodeAt(l),a=n>>8,r=n%256,i.push(r),i.push(a);return i}(t,e.length-n),e,n,a)}function T(e,t,n){return 0===t&&n===e.length?a.fromByteArray(e):a.fromByteArray(e.slice(t,n))}function E(e,t,n){n=Math.min(e.length,n);for(var a=[],r=t;r<n;){var i,l,s,o,u=e[r],c=null,d=u>239?4:u>223?3:u>191?2:1;if(r+d<=n)switch(d){case 1:u<128&&(c=u);break;case 2:128==(192&(i=e[r+1]))&&(o=(31&u)<<6|63&i)>127&&(c=o);break;case 3:i=e[r+1],l=e[r+2],128==(192&i)&&128==(192&l)&&(o=(15&u)<<12|(63&i)<<6|63&l)>2047&&(o<55296||o>57343)&&(c=o);break;case 4:i=e[r+1],l=e[r+2],s=e[r+3],128==(192&i)&&128==(192&l)&&128==(192&s)&&(o=(15&u)<<18|(63&i)<<12|(63&l)<<6|63&s)>65535&&o<1114112&&(c=o)}null===c?(c=65533,d=1):c>65535&&(c-=65536,a.push(c>>>10&1023|55296),c=56320|1023&c),a.push(c),r+=d}return function(e){var t=e.length;if(t<=x)return String.fromCharCode.apply(String,e);var n="",a=0;for(;a<t;)n+=String.fromCharCode.apply(String,e.slice(a,a+=x));return n}(a)}t.Buffer=o,t.SlowBuffer=function(e){+e!=e&&(e=0);return o.alloc(+e)},t.INSPECT_MAX_BYTES=50,o.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=l(),o.poolSize=8192,o._augment=function(e){return e.__proto__=o.prototype,e},o.from=function(e,t,n){return u(null,e,t,n)},o.TYPED_ARRAY_SUPPORT&&(o.prototype.__proto__=Uint8Array.prototype,o.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&o[Symbol.species]===o&&Object.defineProperty(o,Symbol.species,{value:null,configurable:!0})),o.alloc=function(e,t,n){return function(e,t,n,a){return c(t),t<=0?s(e,t):void 0!==n?"string"==typeof a?s(e,t).fill(n,a):s(e,t).fill(n):s(e,t)}(null,e,t,n)},o.allocUnsafe=function(e){return d(null,e)},o.allocUnsafeSlow=function(e){return d(null,e)},o.isBuffer=function(e){return!(null==e||!e._isBuffer)},o.compare=function(e,t){if(!o.isBuffer(e)||!o.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,a=t.length,r=0,i=Math.min(n,a);r<i;++r)if(e[r]!==t[r]){n=e[r],a=t[r];break}return n<a?-1:a<n?1:0},o.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(e,t){if(!i(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return o.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var a=o.allocUnsafe(t),r=0;for(n=0;n<e.length;++n){var l=e[n];if(!o.isBuffer(l))throw new TypeError('"list" argument must be an Array of Buffers');l.copy(a,r),r+=l.length}return a},o.byteLength=_,o.prototype._isBuffer=!0,o.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)p(this,t,t+1);return this},o.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)p(this,t,t+3),p(this,t+1,t+2);return this},o.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)p(this,t,t+7),p(this,t+1,t+6),p(this,t+2,t+5),p(this,t+3,t+4);return this},o.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?E(this,0,e):m.apply(this,arguments)},o.prototype.equals=function(e){if(!o.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===o.compare(this,e)},o.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},o.prototype.compare=function(e,t,n,a,r){if(!o.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===a&&(a=0),void 0===r&&(r=this.length),t<0||n>e.length||a<0||r>this.length)throw new RangeError("out of range index");if(a>=r&&t>=n)return 0;if(a>=r)return-1;if(t>=n)return 1;if(this===e)return 0;for(var i=(r>>>=0)-(a>>>=0),l=(n>>>=0)-(t>>>=0),s=Math.min(i,l),u=this.slice(a,r),c=e.slice(t,n),d=0;d<s;++d)if(u[d]!==c[d]){i=u[d],l=c[d];break}return i<l?-1:l<i?1:0},o.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},o.prototype.indexOf=function(e,t,n){return g(this,e,t,n,!0)},o.prototype.lastIndexOf=function(e,t,n){return g(this,e,t,n,!1)},o.prototype.write=function(e,t,n,a){if(void 0===t)a="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)a=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===a&&(a="utf8")):(a=n,n=void 0)}var r=this.length-t;if((void 0===n||n>r)&&(n=r),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");a||(a="utf8");for(var i=!1;;)switch(a){case"hex":return w(this,e,t,n);case"utf8":case"utf-8":return v(this,e,t,n);case"ascii":return A(this,e,t,n);case"latin1":case"binary":return L(this,e,t,n);case"base64":return y(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,e,t,n);default:if(i)throw new TypeError("Unknown encoding: "+a);a=(""+a).toLowerCase(),i=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var x=4096;function k(e,t,n){var a="";n=Math.min(e.length,n);for(var r=t;r<n;++r)a+=String.fromCharCode(127&e[r]);return a}function M(e,t,n){var a="";n=Math.min(e.length,n);for(var r=t;r<n;++r)a+=String.fromCharCode(e[r]);return a}function I(e,t,n){var a=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>a)&&(n=a);for(var r="",i=t;i<n;++i)r+=N(e[i]);return r}function U(e,t,n){for(var a=e.slice(t,n),r="",i=0;i<a.length;i+=2)r+=String.fromCharCode(a[i]+256*a[i+1]);return r}function P(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function R(e,t,n,a,r,i){if(!o.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>r||t<i)throw new RangeError('"value" argument is out of bounds');if(n+a>e.length)throw new RangeError("Index out of range")}function O(e,t,n,a){t<0&&(t=65535+t+1);for(var r=0,i=Math.min(e.length-n,2);r<i;++r)e[n+r]=(t&255<<8*(a?r:1-r))>>>8*(a?r:1-r)}function C(e,t,n,a){t<0&&(t=4294967295+t+1);for(var r=0,i=Math.min(e.length-n,4);r<i;++r)e[n+r]=t>>>8*(a?r:3-r)&255}function B(e,t,n,a,r,i){if(n+a>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function F(e,t,n,a,i){return i||B(e,0,n,4),r.write(e,t,n,a,23,4),n+4}function D(e,t,n,a,i){return i||B(e,0,n,8),r.write(e,t,n,a,52,8),n+8}o.prototype.slice=function(e,t){var n,a=this.length;if((e=~~e)<0?(e+=a)<0&&(e=0):e>a&&(e=a),(t=void 0===t?a:~~t)<0?(t+=a)<0&&(t=0):t>a&&(t=a),t<e&&(t=e),o.TYPED_ARRAY_SUPPORT)(n=this.subarray(e,t)).__proto__=o.prototype;else{var r=t-e;n=new o(r,void 0);for(var i=0;i<r;++i)n[i]=this[i+e]}return n},o.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||P(e,t,this.length);for(var a=this[e],r=1,i=0;++i<t&&(r*=256);)a+=this[e+i]*r;return a},o.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||P(e,t,this.length);for(var a=this[e+--t],r=1;t>0&&(r*=256);)a+=this[e+--t]*r;return a},o.prototype.readUInt8=function(e,t){return t||P(e,1,this.length),this[e]},o.prototype.readUInt16LE=function(e,t){return t||P(e,2,this.length),this[e]|this[e+1]<<8},o.prototype.readUInt16BE=function(e,t){return t||P(e,2,this.length),this[e]<<8|this[e+1]},o.prototype.readUInt32LE=function(e,t){return t||P(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},o.prototype.readUInt32BE=function(e,t){return t||P(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},o.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||P(e,t,this.length);for(var a=this[e],r=1,i=0;++i<t&&(r*=256);)a+=this[e+i]*r;return a>=(r*=128)&&(a-=Math.pow(2,8*t)),a},o.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||P(e,t,this.length);for(var a=t,r=1,i=this[e+--a];a>0&&(r*=256);)i+=this[e+--a]*r;return i>=(r*=128)&&(i-=Math.pow(2,8*t)),i},o.prototype.readInt8=function(e,t){return t||P(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},o.prototype.readInt16LE=function(e,t){t||P(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},o.prototype.readInt16BE=function(e,t){t||P(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},o.prototype.readInt32LE=function(e,t){return t||P(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},o.prototype.readInt32BE=function(e,t){return t||P(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},o.prototype.readFloatLE=function(e,t){return t||P(e,4,this.length),r.read(this,e,!0,23,4)},o.prototype.readFloatBE=function(e,t){return t||P(e,4,this.length),r.read(this,e,!1,23,4)},o.prototype.readDoubleLE=function(e,t){return t||P(e,8,this.length),r.read(this,e,!0,52,8)},o.prototype.readDoubleBE=function(e,t){return t||P(e,8,this.length),r.read(this,e,!1,52,8)},o.prototype.writeUIntLE=function(e,t,n,a){(e=+e,t|=0,n|=0,a)||R(this,e,t,n,Math.pow(2,8*n)-1,0);var r=1,i=0;for(this[t]=255&e;++i<n&&(r*=256);)this[t+i]=e/r&255;return t+n},o.prototype.writeUIntBE=function(e,t,n,a){(e=+e,t|=0,n|=0,a)||R(this,e,t,n,Math.pow(2,8*n)-1,0);var r=n-1,i=1;for(this[t+r]=255&e;--r>=0&&(i*=256);)this[t+r]=e/i&255;return t+n},o.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,1,255,0),o.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},o.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):O(this,e,t,!0),t+2},o.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):O(this,e,t,!1),t+2},o.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):C(this,e,t,!0),t+4},o.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):C(this,e,t,!1),t+4},o.prototype.writeIntLE=function(e,t,n,a){if(e=+e,t|=0,!a){var r=Math.pow(2,8*n-1);R(this,e,t,n,r-1,-r)}var i=0,l=1,s=0;for(this[t]=255&e;++i<n&&(l*=256);)e<0&&0===s&&0!==this[t+i-1]&&(s=1),this[t+i]=(e/l>>0)-s&255;return t+n},o.prototype.writeIntBE=function(e,t,n,a){if(e=+e,t|=0,!a){var r=Math.pow(2,8*n-1);R(this,e,t,n,r-1,-r)}var i=n-1,l=1,s=0;for(this[t+i]=255&e;--i>=0&&(l*=256);)e<0&&0===s&&0!==this[t+i+1]&&(s=1),this[t+i]=(e/l>>0)-s&255;return t+n},o.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,1,127,-128),o.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},o.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):O(this,e,t,!0),t+2},o.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):O(this,e,t,!1),t+2},o.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,4,2147483647,-2147483648),o.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):C(this,e,t,!0),t+4},o.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):C(this,e,t,!1),t+4},o.prototype.writeFloatLE=function(e,t,n){return F(this,e,t,!0,n)},o.prototype.writeFloatBE=function(e,t,n){return F(this,e,t,!1,n)},o.prototype.writeDoubleLE=function(e,t,n){return D(this,e,t,!0,n)},o.prototype.writeDoubleBE=function(e,t,n){return D(this,e,t,!1,n)},o.prototype.copy=function(e,t,n,a){if(n||(n=0),a||0===a||(a=this.length),t>=e.length&&(t=e.length),t||(t=0),a>0&&a<n&&(a=n),a===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(a<0)throw new RangeError("sourceEnd out of bounds");a>this.length&&(a=this.length),e.length-t<a-n&&(a=e.length-t+n);var r,i=a-n;if(this===e&&n<t&&t<a)for(r=i-1;r>=0;--r)e[r+t]=this[r+n];else if(i<1e3||!o.TYPED_ARRAY_SUPPORT)for(r=0;r<i;++r)e[r+t]=this[r+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+i),t);return i},o.prototype.fill=function(e,t,n,a){if("string"==typeof e){if("string"==typeof t?(a=t,t=0,n=this.length):"string"==typeof n&&(a=n,n=this.length),1===e.length){var r=e.charCodeAt(0);r<256&&(e=r)}if(void 0!==a&&"string"!=typeof a)throw new TypeError("encoding must be a string");if("string"==typeof a&&!o.isEncoding(a))throw new TypeError("Unknown encoding: "+a)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var i;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(i=t;i<n;++i)this[i]=e;else{var l=o.isBuffer(e)?e:V(new o(e,a).toString()),s=l.length;for(i=0;i<n-t;++i)this[i+t]=l[i%s]}return this};var G=/[^+\/0-9A-Za-z-_]/g;function N(e){return e<16?"0"+e.toString(16):e.toString(16)}function V(e,t){var n;t=t||1/0;for(var a=e.length,r=null,i=[],l=0;l<a;++l){if((n=e.charCodeAt(l))>55295&&n<57344){if(!r){if(n>56319){(t-=3)>-1&&i.push(239,191,189);continue}if(l+1===a){(t-=3)>-1&&i.push(239,191,189);continue}r=n;continue}if(n<56320){(t-=3)>-1&&i.push(239,191,189),r=n;continue}n=65536+(r-55296<<10|n-56320)}else r&&(t-=3)>-1&&i.push(239,191,189);if(r=null,n<128){if((t-=1)<0)break;i.push(n)}else if(n<2048){if((t-=2)<0)break;i.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;i.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;i.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return i}function j(e){return a.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(G,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function H(e,t,n,a){for(var r=0;r<a&&!(r+n>=t.length||r>=e.length);++r)t[r+n]=e[r];return r}}).call(this,n(417))},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";t.byteLength=function(e){var t=u(e),n=t[0],a=t[1];return 3*(n+a)/4-a},t.toByteArray=function(e){var t,n,a=u(e),l=a[0],s=a[1],o=new i(function(e,t,n){return 3*(t+n)/4-n}(0,l,s)),c=0,d=s>0?l-4:l;for(n=0;n<d;n+=4)t=r[e.charCodeAt(n)]<<18|r[e.charCodeAt(n+1)]<<12|r[e.charCodeAt(n+2)]<<6|r[e.charCodeAt(n+3)],o[c++]=t>>16&255,o[c++]=t>>8&255,o[c++]=255&t;2===s&&(t=r[e.charCodeAt(n)]<<2|r[e.charCodeAt(n+1)]>>4,o[c++]=255&t);1===s&&(t=r[e.charCodeAt(n)]<<10|r[e.charCodeAt(n+1)]<<4|r[e.charCodeAt(n+2)]>>2,o[c++]=t>>8&255,o[c++]=255&t);return o},t.fromByteArray=function(e){for(var t,n=e.length,r=n%3,i=[],l=0,s=n-r;l<s;l+=16383)i.push(c(e,l,l+16383>s?s:l+16383));1===r?(t=e[n-1],i.push(a[t>>2]+a[t<<4&63]+"==")):2===r&&(t=(e[n-2]<<8)+e[n-1],i.push(a[t>>10]+a[t>>4&63]+a[t<<2&63]+"="));return i.join("")};for(var a=[],r=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,o=l.length;s<o;++s)a[s]=l[s],r[l.charCodeAt(s)]=s;function u(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function c(e,t,n){for(var r,i,l=[],s=t;s<n;s+=3)r=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),l.push(a[(i=r)>>18&63]+a[i>>12&63]+a[i>>6&63]+a[63&i]);return l.join("")}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63},function(e,t){t.read=function(e,t,n,a,r){var i,l,s=8*r-a-1,o=(1<<s)-1,u=o>>1,c=-7,d=n?r-1:0,h=n?-1:1,f=e[t+d];for(d+=h,i=f&(1<<-c)-1,f>>=-c,c+=s;c>0;i=256*i+e[t+d],d+=h,c-=8);for(l=i&(1<<-c)-1,i>>=-c,c+=a;c>0;l=256*l+e[t+d],d+=h,c-=8);if(0===i)i=1-u;else{if(i===o)return l?NaN:1/0*(f?-1:1);l+=Math.pow(2,a),i-=u}return(f?-1:1)*l*Math.pow(2,i-a)},t.write=function(e,t,n,a,r,i){var l,s,o,u=8*i-r-1,c=(1<<u)-1,d=c>>1,h=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,f=a?0:i-1,_=a?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,l=c):(l=Math.floor(Math.log(t)/Math.LN2),t*(o=Math.pow(2,-l))<1&&(l--,o*=2),(t+=l+d>=1?h/o:h*Math.pow(2,1-d))*o>=2&&(l++,o/=2),l+d>=c?(s=0,l=c):l+d>=1?(s=(t*o-1)*Math.pow(2,r),l+=d):(s=t*Math.pow(2,d-1)*Math.pow(2,r),l=0));r>=8;e[n+f]=255&s,f+=_,s/=256,r-=8);for(l=l<<r|s,u+=r;u>0;e[n+f]=255&l,f+=_,l/=256,u-=8);e[n+f-_]|=128*m}},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return()=>(e=(9301*e+49297)%233280)/233280}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(117),r=n(78);class i{constructor(e){this.objects=[],this.map={},this.model=e,this.current={type:"object",objectType:"",warnings:0,errors:0,children:[]},this.stack=[this.current],this.addObjects(e.sequences,"Sequence"),this.addObjects(e.globalSequences,"GlobalSequence"),this.addObjects(e.textures,"Texture"),this.addObjects(e.materials,"Material"),this.addObjects(e.textureAnimations,"TextureAnimation"),this.addObjects(e.geosets,"Geoset"),this.addObjects(e.geosetAnimations,"GeosetAnimation"),this.addObjects(e.bones,"Bone",!0),this.addObjects(e.lights,"Light",!0),this.addObjects(e.helpers,"Helper",!0),this.addObjects(e.attachments,"Attachment",!0),this.addObjects(e.particleEmitters,"ParticleEmitter",!0),this.addObjects(e.particleEmitters2,"ParticleEmitter2",!0),this.addObjects(e.ribbonEmitters,"RibbonEmitter",!0),this.addObjects(e.cameras,"Camera"),this.addObjects(e.eventObjects,"EventObject",!0),this.addObjects(e.collisionShapes,"CollisionShape",!0)}addObjects(e,t,n=!1){let a=[];for(let[r,i]of e.entries()){let e=i.name||i.path,l={type:"object",objectType:t,index:r,warnings:0,errors:0,children:[]};e&&(l.name=e),n||(l.uses=0),a.push(l)}this.map[t]=a,n&&this.objects.push(...e)}push(e,t){let n,a=this.map[e];a?n=a[t]:(n={type:"object",objectType:e,warnings:0,errors:0,children:[]},-1!==t&&(n.index=t)),this.current.children.push(n),this.current=n,this.stack.unshift(n)}pop(){this.stack.shift(),this.current=this.stack[0]}add(e,t){this.current.children.push({type:e,message:t})}addWarning(e){this.add("warning",e);for(let e of this.stack)e.warnings+=1}addError(e){this.add("error",e);for(let e of this.stack)e.errors+=1}assertWarning(e,t){e||this.addWarning(t)}assertError(e,t){e||this.addError(t)}addReference(e,t){this.map[e][t].uses+=1}addImplicitReference(){this.current.uses+=1}}function l(e,t,n){return t<=e&&e<=n}function s(e,t){let n=t.layers;if(n.length)for(let[t,a]of n.entries())e.push("Layer",t),o(e,a),e.pop();else e.addWarning("No layers")}function o(e,t){let n=e.model.textures,r=e.model.textureAnimations;for(let r of function(e){for(let t of e.animations)if("KMTF"===t.name)return a.default([t.values]);return[e.textureId]}(t))l(r,0,n.length-1)?e.addReference("Texture",r):e.addError(`Invalid texture ${r}`);let i=t.textureAnimationId;-1!==i&&(l(i,0,r.length-1)?e.addReference("TextureAnimation",i):e.addError(`Invalid texture animation ${i}`)),e.assertWarning(l(t.filterMode,0,6),`Invalid filter mode ${t.filterMode}`),d(e,t)}function u(e,t){let n=e.objects,a=t.vertexGroups,i=t.matrixGroups,l=t.matrixIndices,s=[];for(let e=0,t=i.length,n=0;e<t;e++)s.push(l.subarray(n,n+i[e])),n+=i[e];for(let t=0,i=a.length;t<i;t++){let i=s[a[t]];if(i)for(let a of i){let i=n[a];i?e.assertWarning(i instanceof r.default,`Vertex ${t}: Attached to generic object "${i.name}" which is not a bone`):e.addError(`Vertex ${t}: Attached to generic object ${a} which does not exist`)}else e.addWarning(`Vertex ${t}: Attached to vertex group ${a[t]} which does not exist`)}}function c(e,t){let n=t.objectId,a=t.parentId;e.assertError(-1===a||function(e,t){for(let n of e.objects)if(n.objectId===t)return!0;return!1}(e,a),`Invalid parent ${a}`),e.assertError(n!==a,"Same object and parent"),d(e,t)}function d(e,t){for(let n of t.animations)e.push(_.get(n.name),-1),h(e,n),e.pop()}function h(e,t){let n=t.globalSequenceId;-1!==n&&(l(n,0,e.model.globalSequences.length-1)?e.addReference("GlobalSequence",n):e.addError(`Invalid global sequence ${n}`)),"KP2R"===t.name&&e.addWarning("Using a variation animation."),"KP2G"===t.name&&e.addWarning("Using a gravity animation."),function(e,t){"Visibility"===_.get(t.name)&&0!==t.interpolationType&&e.addWarning("Interpolation type not set to None")}(e,t),function(e,t,n){let a=e.model.sequences,r=[],i=t.frames;e.assertWarning(i.length>0,"Zero tracks"),e.assertWarning(-1!==n||0===i.length||0!==a.length,"Tracks used without sequences");for(let t=0,a=i.length;t<a;t++){let a=i[t],l=f(e,a,n),s=l[0],o=l[1],u=l[2];e.assertWarning(1===i.length||-1!==s||0===a,`Track ${t}: Frame ${a} is not in any sequence`),e.assertWarning(a>=0,`Track ${t}: Negative frame`),-1!==s&&(r[s]||(r[s]=[!1,!1,0]),o&&(r[s][0]=!0),u&&(r[s][1]=!0),r[s][2]+=1)}for(let t=0,i=r.length;t<i;t++)if(void 0!==r[t]){let i=r[t];if(-1===n){let n=a[t];e.assertWarning(i[0]||1===i[2],`No opening track for "${n.name}" at frame ${n.interval[0]}`),e.assertWarning(i[1]||1===i[2],`No closing track for "${n.name}" at frame ${n.interval[1]}`)}}}(e,t,n)}function f(e,t,n){let a=-1,r=!1,i=!1;if(-1===n){let n=e.model.sequences;for(let e=0,l=n.length;e<l;e++){let l=n[e].interval;if(t>=l[0]&&t<=l[1]){a=e,t===l[0]?r=!0:t===l[1]&&(i=!0);break}}}else{let l=e.model.globalSequences[n];a=n,0===t?r=!0:t===l&&(i=!0)}return[a,r,i]}let _=new Map([["KMTF","Texture ID"],["KMTA","Alpha"],["KTAT","Translation"],["KTAR","Rotation"],["KTAS","Scaling"],["KGAO","Alpha"],["KGAC","Color"],["KLAS","Attenuation Start"],["KLAE","Attenuation End"],["KLAC","Color"],["KLAI","Intensity"],["KLBI","Ambient Intensity"],["KLBC","Ambient Color"],["KLAV","Visibility"],["KATV","Visibility"],["KPEE","Emission Rate"],["KPEG","Gravity"],["KPLN","Longitude"],["KPLT","Latitude"],["KPEL","Lifespan"],["KPES","Speed"],["KPEV","Visibility"],["KP2E","Emission Rate"],["KP2G","Gravity"],["KP2L","Latitude"],["KP2R","Variation"],["KP2N","Length"],["KP2W","Width"],["KP2S","Speed"],["KP2V","Visibility"],["KRHA","Height Above"],["KRHB","Height Below"],["KRAL","Alpha"],["KRCO","Color"],["KRTX","Texture Slot"],["KRVS","Visibility"],["KCTR","Translation"],["KTTR","Rotation"],["KCRL","Target Translation"],["KGTR","Translation"],["KGRT","Rotation"],["KGSC","Scaling"]]),m=new Set(["attack","birth","cinematic","death","decay","dissipate","morph","portrait","sleep","spell","stand","walk"]),p=new Set([1,2,11,21,31,32,33,34,35,36,37]);t.default=function(e){let t=new i(e);!function(e){let t=e.model.version;e.assertWarning(800===t,`Unknown version ${t}`)}(t),function(e){let t=e.model.sequences;if(t.length){let n=!1,a=!1;for(let[r,i]of t.entries()){e.push("Sequence",r);let t=i.name.toLowerCase().trim().split("-")[0].split(/\s+/),l=t[0],s=i.interval,o=s[1]-s[0];"alternate"===l&&(l=t[1]),"stand"===l&&(n=!0),"death"===l&&(a=!0),m.has(l)?e.addImplicitReference():e.addWarning(`Unknown sequence "${l}"`),e.assertWarning(0!==o,"Zero length"),e.assertWarning(o>-1,`Negative length ${o}`),e.pop()}e.assertWarning(n,'Missing "Stand" sequence'),e.assertWarning(a,'Missing "Death" sequence')}else e.addWarning("No sequences")}(t),function(e){for(let[t,n]of e.model.globalSequences.entries())e.push("GlobalSequence",t),e.assertWarning(0!==n,"Zero length"),e.assertWarning(n>=0,`Negative length ${n}`),e.pop()}(t),function(e){let t=e.model.textures;if(t.length)for(let[n,a]of t.entries()){e.push("Texture",n);let t=a.replaceableId,r=a.path.toLowerCase();e.assertError(""===r||r.endsWith(".blp")||r.endsWith(".tga"),`Corrupted path "${r}"`),e.assertError(0===t||p.has(t),`Unknown replaceable ID ${t}`),e.assertWarning(""===r||0===t,`Path "${r}" and replaceable ID ${t} used together`),e.pop()}else e.addWarning("No textures")}(t),function(e){let t=e.model.materials;if(t.length)for(let[n,a]of t.entries())e.push("Material",n),s(e,a),e.pop();else e.addWarning("No materials")}(t),function(e){for(let[t,n]of e.model.textureAnimations.entries())e.push("TextureAnimation",t),d(e,n),e.pop()}(t),function(e){let t=e.model.geosets,n=e.model.geosetAnimations;for(let a=0,r=t.length;a<r;a++){e.push("Geoset",a);let r=t[a],i=r.materialId;if(u(e,r),n.length){let t=[];for(let e=0,r=n.length;e<r;e++)n[e].geosetId===a&&t.push(e);e.assertWarning(t.length<=1,`Referenced by ${t.length} geoset animations (${t.join(", ")})`)}l(i,0,e.model.materials.length-1)?e.addReference("Material",i):e.addError(`Invalid material ${i}`),r.faces.length?e.addImplicitReference():e.addWarning("Zero faces"),r.sequenceExtents.length!==e.model.sequences.length&&e.addWarning(`Number of sequence extents (${r.sequenceExtents.length}) does not match the number of sequences (${e.model.sequences.length})`),e.pop()}}(t),function(e){let t=e.model.geosets;for(let[n,a]of e.model.geosetAnimations.entries()){e.push("GeosetAnimation",n);let r=a.geosetId;l(r,0,t.length-1)?e.addImplicitReference():e.addError(`Invalid geoset ${r}`),d(e,a),e.pop()}}(t),function(e){let t=e.model.bones,n=e.model.geosets,a=e.model.geosetAnimations;if(t.length)for(let[r,i]of t.entries()){e.push("Bone",r);let t=i.geosetId,l=i.geosetAnimationId;e.assertError(-1===t||t<n.length,`Invalid geoset ${t}`),e.assertError(-1===l||l<a.length,`Invalid geoset animation ${l}`),c(e,i),e.pop()}else e.addWarning("No bones")}(t),function(e){for(let[t,n]of e.model.lights.entries()){e.push("Light",t);let a=n.attenuation;e.assertWarning(a[0]>=80&&a[1]<=200&&a[1]-a[0]>0,`Attenuation min=${a[0]} max=${a[1]}`),c(e,n),e.pop()}}(t),function(e){for(let[t,n]of e.model.helpers.entries())e.push("Helper",t),c(e,n),e.pop()}(t),function(e){for(let[t,n]of e.model.attachments.entries())e.push("Attachment",t),c(e,n),e.pop()}(t),function(e){let t=e.model.pivotPoints,n=e.objects;e.assertWarning(t.length===n.length,`Expected ${n.length} pivot points, got ${t.length}`)}(t),function(e){for(let[t,n]of e.model.particleEmitters.entries())e.push("ParticleEmitter",t),e.assertError(n.path.toLowerCase().endsWith(".mdl"),"Invalid path"),c(e,n),e.pop()}(t),function(e){for(let[t,n]of e.model.particleEmitters2.entries()){e.push("ParticleEmitter2",t);let a=n.replaceableId;l(n.textureId,0,e.model.textures.length-1)?e.addReference("Texture",n.textureId):e.addError(`Invalid texture ${n.textureId}`),e.assertWarning(l(n.filterMode,0,4),`Invalid filter mode ${n.filterMode}`),e.assertError(0===a||p.has(a),`Invalid replaceable ID ${a}`),c(e,n),e.pop()}}(t),function(e){for(let[t,n]of e.model.ribbonEmitters.entries())e.push("RibbonEmitter",t),l(n.materialId,0,e.model.materials.length-1)?e.addReference("Material",n.materialId):e.addError(`Invalid material ${n.materialId}`),c(e,n),e.pop()}(t),function(e){for(let[t,n]of e.model.eventObjects.entries()){e.push("EventObject",t);let a=n.tracks,r=n.globalSequenceId;if(-1!==r&&(l(r,0,e.model.globalSequences.length-1)?e.addReference("GlobalSequence",r):e.addError(`Invalid global sequence ${r}`)),a.length)for(let t=0,n=a.length;t<n;t++){let n=a[t];e.assertWarning(-1!==f(e,n,r)[0],`Track ${t}: Frame ${n} is not in any sequence`)}else e.addError("Zero keys");c(e,n),e.pop()}}(t),function(e){for(let[t,n]of e.model.cameras.entries())e.push("Camera",t),e.addImplicitReference(),d(e,n),e.pop()}(t),function(e){for(let[t,n]of e.model.collisionShapes.entries())e.push("CollisionShape",t),c(e,n),e.pop()}(t);let n=t.stack[0],a=n.children,r=n.warnings,o=n.errors,h=0;for(let e of a)0===e.uses&&(h+=1);return{nodes:a,warnings:r,errors:o,unused:h}}},function(e,t,n){"use strict";function a(e,t){let n=t[e];for(let a=0;a<e;a++)if(t[a]===n)return!0;return!1}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let t=[],n=e.content,r=e.alphaBits,i=e.mipmapOffsets,l=e.mipmapSizes,s=e.width,o=e.height;if(0!==n&&1!==n&&t.push("Unknown content type"),0!==r&&1!==r&&4!==r&&8!==r&&t.push(`Expected alpha bits to be 0, 1, 4, or 8, but got ${r}`),(s>512||o>512)&&t.push(`Expected width and height up to 512, but got ${s}x${o}`),0===n){const n=e.jpgHeader;n.length>624&&t.push(`Expected the JPG header to be at most 624 bytes, but got ${n.length}`)}for(let u=0;u<16;u++){if(l[u]>0)if(s<1&&o<1)t.push(`Mipmap ${u}: this mipmap should not exist`);else if(a(u,i))t.push(`Mipmap ${u}: this mipmap is fake`);else if(s=Math.max(s,1),o=Math.max(o,1),0===n)try{let n=e.getMipmap(u);n.width===s&&n.height===o||t.push(`Mipmap ${u}: the JPG width (${n.width}) and height (${n.height}) do not match the mipmap width (${s}) and height (${o})`)}catch(e){t.push(`Mipmap ${u}: JPG decoding failed`)}else if(1===n){let e=s*o,n=e+Math.ceil(e*r/8);n!==l[u]&&t.push(`Mipmap ${u}: the declared size is ${l[u]}, but the real size is ${n}`)}s>>=1,o>>=1}return t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(92),r=n(93),i=n(57),l=n(94),s=n(90);class o{constructor(e,t){this.stack=[],this.generatedNames={},this.generatedFunctions=[],this.preplacedObjects={},this.changes=[],this.triggerData=e,this.stringTable=t}}function u(e,t,n){if(t.startsWith("gg_unit")||t.startsWith("gg_dest")){let a=e.preplacedObjects;a[t]||(a[t]=n)}}function c(e){return e.map(e=>e instanceof a.default?`Trigger ${e.name}`:e instanceof r.default||e instanceof l.default?e.name:e instanceof i.default?e.value:void 0).reverse().join(" > ")}function d(e){return function(e,t){let n=new r.default;n.type=2,n.name=t?"CommentString":"CustomScriptCode",n.isEnabled=1;let a=new i.default;return a.type=3,a.value=e,n.parameters[0]=a,n}(e,!1)}function h(e,t){let n=[],a=t.parameters,{args:i,scriptName:s}=e.triggerData.getFunction(t.type,t.name),o=t.name,u=i.length,_=!1,m=!1,p=t;if(s=s||t.name,u){let e=i[u-1];"code"===e?_=!0:"boolexpr"===e&&(m=!0)}if("IfThenElse"===o)n.push(d(`if ${f(e,a[0],i[0])} then`)),n.push(d(`call ${f(e,a[1],i[1])}`)),n.push(d("else")),n.push(d(`call ${f(e,a[2],i[2])}`)),n.push(d("endif"));else if("OrMultiple"===o)n[0]=d(p.ecas.slice().map(t=>h(e,t).map(e=>e.parameters[0].value)).join(" or "));else if("ForLoopAMultiple"===o){n.push(d(`set bj_forLoopAIndex = ${f(e,a[0],i[0])}`)),n.push(d(`set bj_forLoopAIndexEnd = ${f(e,a[1],i[1])}`)),n.push(d("loop")),n.push(d("exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd"));for(let t of p.ecas){let a=h(e,t);for(let e of a)n.push(d(`${e.parameters[0].value}`))}n.push(d("endloop"))}else if("IfThenElseMultiple"===o){let t,a=[],r=[];for(let e of p.ecas)0===e.group?t=e:1===e.group?a.push(e):2===e.group&&r.push(e);if(!t)throw new Error("No condition in an IfThenElseMultiple");n.push(d(`if ${h(e,t)[0].parameters[0].value} then`));for(let t of a){let a=h(e,t);for(let e of a)n.push(d(`${e.parameters[0].value}`))}if(r.length){n.push(d("else"));for(let t of r){let a=h(e,t);for(let e of a)n.push(d(`${e.parameters[0].value}`))}}n.push(d("endif"))}else if(_||m){let l=function(e,t){return void 0===e.generatedNames[t.name]&&(e.generatedNames[t.name]=0),`Trig_${e.stack[e.stack.length-1].name.split("").map(e=>e.charCodeAt(0)>127?"_":e).join("").replace(/\s/g,"_")}_Func${e.generatedNames[t.name]++}_${t.name}`.replace(/_+/g,"_")}(e,t),o=`function ${l}`,u="nothing",_="call",g=a.length-1,b=t.name.endsWith("Multiple");m&&(o=`Filter(${o})`,u="boolean",_="return"),b&&(g=a.length);let w,v=[...a.slice(0,g).map((t,n)=>f(e,t,i[n])),o];t instanceof r.default?n.push(d(`call ${s}(${v.join(", ")})`)):n.push(d(`${s}(${v.join(", ")})`));let A="";A=b?p.ecas.map(t=>h(e,t).map(e=>e.parameters[0].value).join("\n")).join("\n"):`${_} ${f(e,a[g],i[g])}`,w=`function ${l} takes nothing returns ${u}\n${A}\nendfunction`,e.generatedFunctions.push(w),e.changes.push({type:"generatedfunction",stack:c(e.stack),data:w})}else"CustomScriptCode"===o?n[0]=p:"SetVariable"===o?n.push(d(`set ${f(e,a[0],i[0])} = ${f(e,a[1],i[1])}`)):"OperatorString"===o?n.push(d(`${f(e,a[0],i[0])} + ${f(e,a[1],i[1])}`)):o.startsWith("Operator")?n.push(d(`${f(e,a[0],i[0])} ${f(e,a[1],i[1])} ${f(e,a[2],i[2])}`)):t instanceof r.default?n.push(d(`call ${s}(${a.map((t,n)=>f(e,t,i[n])).join(", ")})`)):t instanceof l.default&&n.push(d(`${s}(${a.map((t,n)=>f(e,t,i[n])).join(", ")})`));return n}function f(e,t,n){let a=t.type,r=t.value;if(0===a)return e.triggerData.getPreset(r);if(1===a){if(r.startsWith("gg_"))return u(e,r,!1),r;{let n=`udg_${r}`;return t.isArray&&t.arrayIndex&&(n+=`[${f(e,t.arrayIndex,"integer")}]`),n}}if(2===t.type)return h(e,t.subParameters)[0].parameters[0].value;if(3===t.type){let t=e.triggerData.getBaseType(n);if("string"===t&&"scriptcode"!==n){if(r.startsWith("TRIGSTR")){let t=parseInt(r.slice(8)),n=e.stringTable.stringMap.get(t);if(n){let a=`StringTable${t}`,i=`function ${a} takes nothing returns string\nreturn "${n.replace(/\n/g,"\\n")}"\nendfunction`;return e.generatedFunctions.push(i),e.changes.push({type:"generatedstringtable",stack:c(e.stack),data:{value:r,callback:i}}),`${a}()`}e.changes.push({type:"missingstring",data:r})}return`"${r.replace(/\\/g,"\\\\")}"`}return"integer"===t&&isNaN(parseInt(r))?`'${r}'`:r}return""}function _(e,t){let n=t.name;if("OperatorCompareBoolean"===n){let e=t.parameters[0].value;if("IsUnitOwnedByPlayer"===e)return function(e){let t=e.parameters[2].value;if("true"!==t&&"false"!==t)return!1;e.name="OperatorComparePlayer";let n=e.parameters[0].subParameters,a=n.parameters[0],r=n.parameters[1];return e.parameters[0].value="GetOwningPlayer",n.name="GetOwningPlayer",n.parameters.length=1,n.parameters[0]=a,e.parameters[1].value="true"===t?"OperatorEqualENE":"OperatorNotEqualENE",e.parameters[2]=r,!0}(t);if("IsUnitInRange"===e)return function(e){let t=e.parameters[2].value;if("true"!==t&&"false"!==t)return!1;e.name="OperatorCompareReal";let n=e.parameters[0].subParameters,a=n.parameters[0],r=n.parameters[1],s=n.parameters[2];e.parameters[0].value="DistanceBetweenPoints",n.name="DistanceBetweenPoints";let o=new i.default;o.type=2,o.value="GetUnitLoc",o.subParameters=new l.default,o.subParameters.beginParameters=1,o.subParameters.type=3,o.subParameters.name="GetUnitLoc",o.subParameters.parameters[0]=a;let u=new i.default;u.type=2,u.value="GetUnitLoc",u.subParameters=new l.default,u.subParameters.beginParameters=1,u.subParameters.type=3,u.subParameters.name="GetUnitLoc",u.subParameters.parameters[0]=r;let c=new i.default;return c.type=0,c.value="true"===t?"OperatorLessEq":"OperatorGreater",n.parameters.length=0,n.parameters[0]=o,n.parameters[1]=u,e.parameters[1]=c,e.parameters[2]=s,!0}(t);if("IsUnitType"===e&&-1===t.group)return function(e){let t=e.parameters[0],n=t.subParameters;return"unittypedead"===n.parameters[1].value.toLowerCase()&&(t.value="IsUnitDeadBJ",n.name="IsUnitDeadBJ",n.parameters.length=1,!0)}(t);if("IsUnitRace"===e)return function(e){let t=e.parameters[2].value;if("true"!==t&&"false"!==t)return!1;e.name="OperatorCompareRace";let n=e.parameters[1].value,a=e.parameters[0].subParameters,r=a.parameters[1];e.parameters[0].value="GetUnitRace",a.name="GetUnitRace",a.parameters.length=1,e.parameters[2]=r;let i="OperatorEqualENE"===n,l="true"===t;return e.parameters[1].value=i===l?"OperatorEqualENE":"OperatorNotEqualENE",!0}(t)}else{if("SetHeroStr"===n||"SetHeroAgi"===n||"SetHeroInt"===n)return function(e){if("PermanentPerm"!==e.parameters[2].value)return!1;let t=e.name,n=e.parameters[0],a=e.parameters[1];e.name="ModifyHeroStat";let r=new i.default;r.type=0,r.value=`HeroStat${t.slice(-3)}`;let l=new i.default;return l.type=0,l.value="ModifyMethodSet",e.parameters[0]=r,e.parameters[1]=n,e.parameters[2]=l,e.parameters[3]=a,!0}(t);if("TriggerRegisterUnitStateEvent"===n)return function(e){let t=e.parameters[1].value;if("UnitStateLife"===t)e.name="TriggerRegisterUnitLifeEvent";else{if("UnitStateMana"!==t)throw new Error(`Trying to replace unit state "${t}"`);e.name="TriggerRegisterUnitManaEvent"}return e.parameters.splice(1,1),!0}(t);if(function(e){return"GetTriggerPlayerMouseX"===e||"GetTriggerPlayerMouseY"===e||"GetTriggerPlayerMousePosition"===e||"GetTriggerPlayerMouseButton"===e||"SetAbilityTooltip"===e||"SetAbilityExtendedTooltip"===e||"SetAbilityResearchTooltip"===e||"SetAbilityResearchExtendedTooltip"===e||"GetAbilityTooltip"===e||"GetAbilityExtendedTooltip"===e||"GetAbilityResearchTooltip"===e||"GetAbilityResearchExtendedTooltip"===e||"SetAbilityIcon"===e||"GetAbilityIcon"===e||"GetAbilityPosX"===e||"GetAbilityPosY"===e||"SetAbilityPosX"===e||"SetAbilityPosY"===e||"GetUnitMaxHP"===e||"SetUnitMaxHP"===e||"GetUnitMaxMana"===e||"SetUnitMaxMana"===e||"SetItemName"===e||"SetItemDescription"===e||"GetItemDescription"===e||"SetItemTooltip"===e||"GetItemTooltip"===e||"SetItemExtendedTooltip"===e||"GetItemExtendedTooltip"===e||"SetItemIconPath"===e||"GetItemIconPath"===e||"SetUnitName"===e||"SetHeroProperName"===e||"GetUnitBaseDamage"===e||"SetUnitBaseDamage"===e||"GetUnitDiceNumber"===e||"SetUnitDiceNumber"===e||"GetUnitDiceSides"===e||"SetUnitDiceSides"===e||"GetUnitAttackCooldown"===e||"SetUnitAttackCooldown"===e||"SetSpcialEffectColorByPlayer"===e||"SetSpecialEffectColor"===e||"SetSpecialEffectAlpha"===e||"SetSpecialEffectScale"===e||"SetSpecialEffectPosition"===e||"SetSpecialEffectHeight"===e||"SetSpecialEffectTimeScale"===e||"SetSpecialEffectTime"===e||"SetSpecialEffectOrientation"===e||"SetSpecialEffectYaw"===e||"SetSpecialEffectPitch"===e||"SetSpecialEffectRoll"===e||"SetSpecialEffectX"===e||"SetSpecialEffectY"===e||"SetSpecialEffectZ"===e||"SetSpecialEffectPositionLoc"===e||"GetLocalSpecialEffectX"===e||"GetLocalSpecialEffectY"===e||"GetLocalSpecialEffectZ"===e||"GetUnitArmor"===e||"SetUnitArmor"===e||"UnitHideAbility"===e||"UnitDisableAbility"===e||"UnitCancelTimedLife"===e||"IsUnitSelectable"===e||"IsUnitInvulnerable"===e||"UnitInterruptAttack"===e||"GetUnitCollisionSize"===e||"GetAbilityManaCost"===e||"GetAbilityCooldown"===e||"SetUnitAbilityCooldown"===e||"GetUnitAbilityCooldown"===e||"GetUnitAbilityCooldownRemaining"===e||"EndUnitAbilityCooldown"===e||"GetUnitAbilityManaCost"===e||"SetEventDamage"===e||"PlaySpecialEffect"===e||"PlaySpecialEffectWithTimeScale"===e}(n))return t.name=`Blz${n}`,t instanceof l.default&&(e.stack[1].value=`Blz${n}`),"GetAbilityIcon"!==n&&"SetAbilityIcon"!==n||t.parameters.pop(),!0}return!1}function m(e,t){if(_(e,t)&&e.changes.push({type:"inlinegui",stack:c(e.stack)}),!e.triggerData.isBaseFunction(t.type,t.name))return!0;for(let n of t.parameters){if(0===n.type&&e.triggerData.isCustomPreset(n.value))return!0;if(p(e,n))return!0}return!1}function p(e,t){e.stack.unshift(t);let n=t.type,a=t.value;if(1===n)a.startsWith("gg_")&&u(e,a,!0);else if(2===n&&function(e,t){return e.stack.unshift(t),m(e,t)?(e.stack.shift(),!0):(e.stack.shift(),!1)}(e,t.subParameters))return e.stack.shift(),!0;return e.stack.shift(),!1}function g(e,t){let n=new r.default;return n.name=e.name,n.type=e.type,n.group=t,n.isEnabled=1,n.parameters.push(...e.parameters),n}function b(e,t){if(e.stack.unshift(t),m(e,t)){if(!function(e,t){if("IfThenElse"===t.name){let e=t.parameters,n=g(e[0].subParameters,0),a=g(e[1].subParameters,1),r=g(e[2].subParameters,2);return t.name="IfThenElseMultiple",t.parameters.length=0,t.ecas.push(n,a,r),!0}if("ForGroup"===t.name||"ForForce"===t.name){let e=g(t.parameters[1].subParameters,0);return t.name=`${t.name}Multiple`,t.parameters.length=1,t.ecas.push(e),!0}return!1}(0,t))return e.stack.shift(),!0;if(m(e,t))return e.stack.shift(),!0;e.changes.push({type:"singletomultiple",stack:c(e.stack)})}let n=[];for(let r of t.ecas)if(b(e,r)){let i;if(a=t.name,0!==r.group||"AndMultiple"!==a&&"OrMultiple"!==a&&"IfThenElseMultiple"!==a)i=h(e,r);else{let n,a,l=h(e,r)[0].parameters[0].value;l.startsWith("call ")&&(l=l.slice(5)),"OrMultiple"===t.name?(n=l,a="true"):(n=`not (${l})`,a="false"),i=[d(`if ${n} then`),d(`return ${a}`),d("endif")]}for(let e of i)e.group=r.group;e.changes.push({type:"inlinecustomscript",stack:c(e.stack),data:i.map(e=>e.parameters[0].value).join("\n")}),n.push(...i)}else n.push(r);var a;return t.ecas=n,e.stack.shift(),!1}function w(e,t){e.stack.unshift(t);let n=[],a=[];for(let e of t.ecas){let t=e.type;0===t||1===t?n.push(e):2===t&&a.push(e)}let r=[];for(let t of n){if(b(e,t))return e.stack.shift(),!0;r.push(t)}for(let t of a)if(b(e,t)){let n=h(e,t);e.changes.push({type:"inlinecustomscript",stack:c(e.stack),data:n.map(e=>e.parameters[0].value).join("\n")}),r.push(...n)}else r.push(t);return t.ecas=r,e.stack.shift(),!1}t.default=function(e,t,n){let l,u,c;try{l=e.readTriggers(t)}catch(e){return{ok:!1,error:`Failed to read the triggers file: ${e}`}}if(!l)return{ok:!1,error:"The triggers file doesn't exist"};try{u=e.readCustomTextTriggers()}catch(e){return{ok:!1,error:`Failed to read the custom text triggers file: ${e}`}}if(!u)return{ok:!1,error:"The custom text triggers file doesn't exist"};try{c=e.readStringTable()}catch(e){return{ok:!1,error:`Failed to read the string table file: ${e}`}}if(!c)return{ok:!1,error:"The string table file doesn't exist"};let d=new o(t,c);for(let e of l.triggers)try{if(w(d,e))return{ok:!1,error:`Trigger ${e.name} needs to be converted due to top-level event/condition, but full trigger conversion is not implemented yet`}}catch(t){return{ok:!1,error:`Error at trigger ${e.name}: ${t}`}}if(function(e,t,n){let l=[];for(let e of Object.entries(n.preplacedObjects))e[1]||l.push(e[0]);if(l.length){let o=new a.default;o.name="PreplacedObjectReferences",o.isEnabled=1,o.isInitiallyOff=1;for(let e of l){let t=new r.default;t.type=2,t.isEnabled=1,e.startsWith("gg_unit")?t.name="RemoveUnit":e.startsWith("gg_dest")&&(t.name="RemoveDestructable");let n=new i.default;n.type=1,n.value=e,t.parameters[0]=n,o.ecas.push(t)}e.triggers.push(o),t.triggers.push(new s.default),n.changes.push({type:"references",data:l})}}(l,u,d),d.generatedFunctions.length)for(let e of d.generatedFunctions)u.trigger.text+=`\r\n${e.replace(/\n/g,"\r\n")}`;e.set("war3map.wtg",l.save()),e.set("war3map.wct",u.save());try{l=e.readTriggers(n)}catch(e){return{ok:!1,error:`Failed to validate the triggers file: ${e}`}}return l?{ok:!0,changes:d.changes}:{ok:!1,error:"Failed to re-read the triggers file"}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(49);class r{constructor(e){this.counts={},this.ident=0,this.searchBitmapName=!1,this.lookingForAnimName=!1,this.stream=e,this.rootNode={name:"root",ident:0,start:0,end:e.buffer.length,data:"",children:[]},this.stack=[this.rootNode]}}let i=["Version","Model","Sequences","GlobalSequences","Textures","Materials","TextureAnims","PivotPoints"],l=["Anim","Bitmap","Material","Layer","TVertexAnim","Geoset","GeosetAnim"],s=["Bone","Light","Helper","Attachment","ParticleEmitter","ParticleEmitter2","RibbonEmitter","Camera","EventObject","CollisionShape"];function o(e,t){return"Anim"===t?"Sequences"===e.stack[0].name:i.includes(t)||l.includes(t)||s.includes(t)}function u(e,t){let n=e.counts,a=t,r=e.stream,l={name:t,ident:e.ident,start:r.index-t.length-1,end:0,data:"",children:[]};if(!i.includes(t)){if("Layer"===t){a=`Material${e.stack[0].index}${t}`}void 0===n[a]&&(n[a]=0);let r=n[a]++;l.index=r}"Bitmap"===t&&(e.searchBitmapName=!0),("Anim"===t||s.includes(t))&&(l.objectName=r.read()),e.stack[0].children.push(l),e.stack.unshift(l)}function c(e){let t=e.stream,n=e.stack[0];n.end=t.index,n.data=t.buffer.slice(n.start,n.end),e.stack.shift()}t.default=function(e){let t,n=new a.default(e),i=new r(n);for(;void 0!==(t=n.read());)if("{"===t)i.ident+=1;else if("}"===t)i.ident-=1,i.ident===i.stack[0].ident&&c(i);else if(!i.searchBitmapName||"ReplaceableId"!==t&&"Image"!==t)o(i,t)&&u(i,t);else if("ReplaceableId"===t){let e=n.read();"0"!==e&&(i.lookingForAnimName=!1,i.stack[0].objectName=`ReplaceableId ${e}`)}else if("Image"===t){let e=n.read();""!==e&&(i.lookingForAnimName=!1,i.stack[0].objectName=e.split("\\").slice(-1)[0])}return i.rootNode}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(118),r=n(120),i=n(444),l=n(125),s=n(445);t.default={jass2lua:a.default,Context:r.default,compileNatives:i.default,bindNatives:l.default,rebuild:s.default}},function(e,t,n){"use strict";const{LUA_MULTRET:a,LUA_OPADD:r,LUA_OPBAND:i,LUA_OPBNOT:l,LUA_OPBOR:s,LUA_OPBXOR:o,LUA_OPDIV:u,LUA_OPIDIV:c,LUA_OPMOD:d,LUA_OPSHL:h,LUA_OPSHR:f,LUA_OPUNM:_,constant_types:{LUA_TBOOLEAN:m,LUA_TLIGHTUSERDATA:p,LUA_TLNGSTR:g,LUA_TNIL:b,LUA_TNUMFLT:w,LUA_TNUMINT:v,LUA_TTABLE:A},to_luastring:L}=n(3),{lua_assert:y}=n(5),S=n(69),T=n(6),E=n(28),x=n(123),k=n(14),M=n(27),I=E.OpCodesI,U=T.TValue,P={OPR_ADD:0,OPR_SUB:1,OPR_MUL:2,OPR_MOD:3,OPR_POW:4,OPR_DIV:5,OPR_IDIV:6,OPR_BAND:7,OPR_BOR:8,OPR_BXOR:9,OPR_SHL:10,OPR_SHR:11,OPR_CONCAT:12,OPR_EQ:13,OPR_LT:14,OPR_LE:15,OPR_NE:16,OPR_GT:17,OPR_GE:18,OPR_AND:19,OPR_OR:20,OPR_NOBINOPR:21},R={OPR_MINUS:0,OPR_BNOT:1,OPR_NOT:2,OPR_LEN:3,OPR_NOUNOPR:4},O=function(e){return e.t!==e.f},C=function(e,t){let n=x.expkind;if(O(e))return!1;switch(e.k){case n.VKINT:return!t||new U(v,e.u.ival);case n.VKFLT:return!t||new U(w,e.u.nval);default:return!1}},B=function(e,t,n){let a,r=t+n-1;if(e.pc>e.lasttarget&&(a=e.f.code[e.pc-1],a.opcode===I.OP_LOADNIL)){let e=a.A,n=e+a.B;if(e<=t&&t<=n+1||t<=e&&e<=r+1)return e<t&&(t=e),n>r&&(r=n),E.SETARG_A(a,t),void E.SETARG_B(a,r-t)}J(e,I.OP_LOADNIL,t,n-1,0)},F=function(e,t){return e.f.code[t.u.info]},D=function(e,t){let n=e.f.code[t].sBx;return-1===n?-1:t+1+n},G=function(e,t,n){let a=e.f.code[t],r=n-(t+1);y(-1!==n),Math.abs(r)>E.MAXARG_sBx&&S.luaX_syntaxerror(e.ls,L("control structure too long",!0)),E.SETARG_sBx(a,r)},N=function(e,t,n){if(-1===n)return t;if(-1===t)t=n;else{let a=t,r=D(e,a);for(;-1!==r;)a=r,r=D(e,a);G(e,a,n)}return t},V=function(e){let t=e.jpc;e.jpc=-1;let n=ee(e,I.OP_JMP,0,-1);return n=N(e,n,t),n},j=function(e,t,n,a,r){return J(e,t,n,a,r),V(e)},H=function(e){return e.lasttarget=e.pc,e.pc},K=function(e,t){return t>=1&&E.testTMode(e.f.code[t-1].opcode)?t-1:t},z=function(e,t){return e.f.code[K(e,t)]},X=function(e,t,n){let a=K(e,t),r=e.f.code[a];return r.opcode===I.OP_TESTSET&&(n!==E.NO_REG&&n!==r.B?E.SETARG_A(r,n):e.f.code[a]=E.CREATE_ABC(I.OP_TEST,r.B,0,r.C),!0)},q=function(e,t){for(;-1!==t;t=D(e,t))X(e,t,E.NO_REG)},Y=function(e,t,n,a,r){for(;-1!==t;){let i=D(e,t);X(e,t,a)?G(e,t,n):G(e,t,r),t=i}},$=function(e,t){H(e),e.jpc=N(e,e.jpc,t)},W=function(e,t,n){n===e.pc?$(e,t):(y(n<e.pc),Y(e,t,n,E.NO_REG,n))},Z=function(e,t){let n=e.f;return function(e){Y(e,e.jpc,e.pc,E.NO_REG,e.pc),e.jpc=-1}(e),n.code[e.pc]=t,n.lineinfo[e.pc]=e.ls.lastline,e.pc++},J=function(e,t,n,a,r){return y(E.getOpMode(t)===E.iABC),y(E.getBMode(t)!==E.OpArgN||0===a),y(E.getCMode(t)!==E.OpArgN||0===r),y(n<=E.MAXARG_A&&a<=E.MAXARG_B&&r<=E.MAXARG_C),Z(e,E.CREATE_ABC(t,n,a,r))},Q=function(e,t,n,a){return y(E.getOpMode(t)===E.iABx||E.getOpMode(t)===E.iAsBx),y(E.getCMode(t)===E.OpArgN),y(n<=E.MAXARG_A&&a<=E.MAXARG_Bx),Z(e,E.CREATE_ABx(t,n,a))},ee=function(e,t,n,a){return Q(e,t,n,a+E.MAXARG_sBx)},te=function(e,t){return y(t<=E.MAXARG_Ax),Z(e,E.CREATE_Ax(I.OP_EXTRAARG,t))},ne=function(e,t,n){if(n<=E.MAXARG_Bx)return Q(e,I.OP_LOADK,t,n);{let a=Q(e,I.OP_LOADKX,t,0);return te(e,n),a}},ae=function(e,t){let n=e.freereg+t;n>e.f.maxstacksize&&(n>=255&&S.luaX_syntaxerror(e.ls,L("function or expression needs too many registers",!0)),e.f.maxstacksize=n)},re=function(e,t){ae(e,t),e.freereg+=t},ie=function(e,t){!E.ISK(t)&&t>=e.nactvar&&(e.freereg--,y(t===e.freereg))},le=function(e,t){t.k===x.expkind.VNONRELOC&&ie(e,t.u.info)},se=function(e,t,n){let a=t.k===x.expkind.VNONRELOC?t.u.info:-1,r=n.k===x.expkind.VNONRELOC?n.u.info:-1;a>r?(ie(e,a),ie(e,r)):(ie(e,r),ie(e,a))},oe=function(e,t,n){let a=e.f,r=k.luaH_get(e.L,e.ls.h,t);if(r.ttisinteger()){let t=r.value;if(t<e.nk&&a.k[t].ttype()===n.ttype()&&a.k[t].value===n.value)return t}let i=e.nk;return k.luaH_setfrom(e.L,e.ls.h,t,new T.TValue(v,i)),a.k[i]=n,e.nk++,i},ue=function(e,t){let n=new U(p,t),a=new U(v,t);return oe(e,n,a)},ce=function(e,t){let n=new U(w,t);return oe(e,n,n)},de=function(e,t){let n=new U(m,t);return oe(e,n,n)},he=function(e,t,n){let r=x.expkind;if(t.k===r.VCALL)E.SETARG_C(F(e,t),n+1);else if(t.k===r.VVARARG){let a=F(e,t);E.SETARG_B(a,n+1),E.SETARG_A(a,e.freereg),re(e,1)}else y(n===a)},fe=function(e,t){let n=x.expkind;t.k===n.VCALL?(y(2===F(e,t).C),t.k=n.VNONRELOC,t.u.info=F(e,t).A):t.k===n.VVARARG&&(E.SETARG_B(F(e,t),2),t.k=n.VRELOCABLE)},_e=function(e,t){let n=x.expkind;switch(t.k){case n.VLOCAL:t.k=n.VNONRELOC;break;case n.VUPVAL:t.u.info=J(e,I.OP_GETUPVAL,0,t.u.info,0),t.k=n.VRELOCABLE;break;case n.VINDEXED:{let a;ie(e,t.u.ind.idx),t.u.ind.vt===n.VLOCAL?(ie(e,t.u.ind.t),a=I.OP_GETTABLE):(y(t.u.ind.vt===n.VUPVAL),a=I.OP_GETTABUP),t.u.info=J(e,a,0,t.u.ind.t,t.u.ind.idx),t.k=n.VRELOCABLE;break}case n.VVARARG:case n.VCALL:fe(e,t)}},me=function(e,t,n,a){return H(e),J(e,I.OP_LOADBOOL,t,n,a)},pe=function(e,t,n){let a=x.expkind;switch(_e(e,t),t.k){case a.VNIL:B(e,n,1);break;case a.VFALSE:case a.VTRUE:J(e,I.OP_LOADBOOL,n,t.k===a.VTRUE,0);break;case a.VK:ne(e,n,t.u.info);break;case a.VKFLT:ne(e,n,ce(e,t.u.nval));break;case a.VKINT:ne(e,n,ue(e,t.u.ival));break;case a.VRELOCABLE:{let a=F(e,t);E.SETARG_A(a,n);break}case a.VNONRELOC:n!==t.u.info&&J(e,I.OP_MOVE,n,t.u.info,0);break;default:return void y(t.k===a.VJMP)}t.u.info=n,t.k=a.VNONRELOC},ge=function(e,t){t.k!==x.expkind.VNONRELOC&&(re(e,1),pe(e,t,e.freereg-1))},be=function(e,t){for(;-1!==t;t=D(e,t)){if(z(e,t).opcode!==I.OP_TESTSET)return!0}return!1},we=function(e,t,n){let a=x.expkind;if(pe(e,t,n),t.k===a.VJMP&&(t.t=N(e,t.t,t.u.info)),O(t)){let r,i=-1,l=-1;if(be(e,t.t)||be(e,t.f)){let r=t.k===a.VJMP?-1:V(e);i=me(e,n,0,1),l=me(e,n,1,0),$(e,r)}r=H(e),Y(e,t.f,r,n,i),Y(e,t.t,r,n,l)}t.f=t.t=-1,t.u.info=n,t.k=a.VNONRELOC},ve=function(e,t){_e(e,t),le(e,t),re(e,1),we(e,t,e.freereg-1)},Ae=function(e,t){if(_e(e,t),t.k===x.expkind.VNONRELOC){if(!O(t))return t.u.info;if(t.u.info>=e.nactvar)return we(e,t,t.u.info),t.u.info}return ve(e,t),t.u.info},Le=function(e,t){O(t)?Ae(e,t):_e(e,t)},ye=function(e,t){let n=x.expkind,a=!1;switch(Le(e,t),t.k){case n.VTRUE:t.u.info=de(e,!0),a=!0;break;case n.VFALSE:t.u.info=de(e,!1),a=!0;break;case n.VNIL:t.u.info=function(e){let t=new U(b,null),n=new U(A,e.ls.h);return oe(e,n,t)}(e),a=!0;break;case n.VKINT:t.u.info=ue(e,t.u.ival),a=!0;break;case n.VKFLT:t.u.info=ce(e,t.u.nval),a=!0;break;case n.VK:a=!0}return a&&(t.k=n.VK,t.u.info<=E.MAXINDEXRK)?E.RKASK(t.u.info):Ae(e,t)},Se=function(e,t){let n=z(e,t.u.info);y(E.testTMode(n.opcode)&&n.opcode!==I.OP_TESTSET&&n.opcode!==I.OP_TEST),E.SETARG_A(n,!n.A)},Te=function(e,t,n){if(t.k===x.expkind.VRELOCABLE){let a=F(e,t);if(a.opcode===I.OP_NOT)return e.pc--,j(e,I.OP_TEST,a.B,0,!n)}return ge(e,t),le(e,t),j(e,I.OP_TESTSET,E.NO_REG,t.u.info,n)},Ee=function(e,t){let n,a=x.expkind;switch(_e(e,t),t.k){case a.VJMP:Se(e,t),n=t.u.info;break;case a.VK:case a.VKFLT:case a.VKINT:case a.VTRUE:n=-1;break;default:n=Te(e,t,0)}t.f=N(e,t.f,n),$(e,t.t),t.t=-1},xe=function(e,t){let n,a=x.expkind;switch(_e(e,t),t.k){case a.VJMP:n=t.u.info;break;case a.VNIL:case a.VFALSE:n=-1;break;default:n=Te(e,t,1)}t.t=N(e,t.t,n),$(e,t.f),t.f=-1},ke=function(e,t,n){let a,r,_=x.expkind;if(!(a=C(t,!0))||!(r=C(n,!0))||!function(e,t,n){switch(e){case i:case s:case o:case h:case f:case l:return!1!==M.tointeger(t)&&!1!==M.tointeger(n);case u:case c:case d:return 0!==n.value;default:return 1}}(e,a,r))return 0;let m=new U;if(T.luaO_arith(null,e,a,r,m),m.ttisinteger())t.k=_.VKINT,t.u.ival=m.value;else{let e=m.value;if(isNaN(e)||0===e)return!1;t.k=_.VKFLT,t.u.nval=e}return!0},Me=function(e,t,n,a,r){let i=ye(e,a),l=ye(e,n);se(e,n,a),n.u.info=J(e,t,0,l,i),n.k=x.expkind.VRELOCABLE,Ie(e,r)},Ie=function(e,t){e.f.lineinfo[e.pc-1]=t};e.exports.BinOpr=P,e.exports.NO_JUMP=-1,e.exports.UnOpr=R,e.exports.getinstruction=F,e.exports.luaK_checkstack=ae,e.exports.luaK_code=Z,e.exports.luaK_codeABC=J,e.exports.luaK_codeABx=Q,e.exports.luaK_codeAsBx=ee,e.exports.luaK_codek=ne,e.exports.luaK_concat=N,e.exports.luaK_dischargevars=_e,e.exports.luaK_exp2RK=ye,e.exports.luaK_exp2anyreg=Ae,e.exports.luaK_exp2anyregup=function(e,t){(t.k!==x.expkind.VUPVAL||O(t))&&Ae(e,t)},e.exports.luaK_exp2nextreg=ve,e.exports.luaK_exp2val=Le,e.exports.luaK_fixline=Ie,e.exports.luaK_getlabel=H,e.exports.luaK_goiffalse=xe,e.exports.luaK_goiftrue=Ee,e.exports.luaK_indexed=function(e,t,n){let a=x.expkind;y(!O(t)&&(x.vkisinreg(t.k)||t.k===a.VUPVAL)),t.u.ind.t=t.u.info,t.u.ind.idx=ye(e,n),t.u.ind.vt=t.k===a.VUPVAL?a.VUPVAL:a.VLOCAL,t.k=a.VINDEXED},e.exports.luaK_infix=function(e,t,n){switch(t){case P.OPR_AND:Ee(e,n);break;case P.OPR_OR:xe(e,n);break;case P.OPR_CONCAT:ve(e,n);break;case P.OPR_ADD:case P.OPR_SUB:case P.OPR_MUL:case P.OPR_DIV:case P.OPR_IDIV:case P.OPR_MOD:case P.OPR_POW:case P.OPR_BAND:case P.OPR_BOR:case P.OPR_BXOR:case P.OPR_SHL:case P.OPR_SHR:C(n,!1)||ye(e,n);break;default:ye(e,n)}},e.exports.luaK_intK=ue,e.exports.luaK_jump=V,e.exports.luaK_jumpto=function(e,t){return W(e,V(e),t)},e.exports.luaK_nil=B,e.exports.luaK_numberK=ce,e.exports.luaK_patchclose=function(e,t,n){for(n++;-1!==t;t=D(e,t)){let a=e.f.code[t];y(a.opcode===I.OP_JMP&&(0===a.A||a.A>=n)),E.SETARG_A(a,n)}},e.exports.luaK_patchlist=W,e.exports.luaK_patchtohere=$,e.exports.luaK_posfix=function(e,t,n,a,i){let l=x.expkind;switch(t){case P.OPR_AND:y(-1===n.t),_e(e,a),a.f=N(e,a.f,n.f),n.to(a);break;case P.OPR_OR:y(-1===n.f),_e(e,a),a.t=N(e,a.t,n.t),n.to(a);break;case P.OPR_CONCAT:{Le(e,a);let t=F(e,a);a.k===l.VRELOCABLE&&t.opcode===I.OP_CONCAT?(y(n.u.info===t.B-1),le(e,n),E.SETARG_B(t,n.u.info),n.k=l.VRELOCABLE,n.u.info=a.u.info):(ve(e,a),Me(e,I.OP_CONCAT,n,a,i));break}case P.OPR_ADD:case P.OPR_SUB:case P.OPR_MUL:case P.OPR_DIV:case P.OPR_IDIV:case P.OPR_MOD:case P.OPR_POW:case P.OPR_BAND:case P.OPR_BOR:case P.OPR_BXOR:case P.OPR_SHL:case P.OPR_SHR:ke(t+r,n,a)||Me(e,t+I.OP_ADD,n,a,i);break;case P.OPR_EQ:case P.OPR_LT:case P.OPR_LE:case P.OPR_NE:case P.OPR_GT:case P.OPR_GE:!function(e,t,n,a){let r,i=x.expkind;n.k===i.VK?r=E.RKASK(n.u.info):(y(n.k===i.VNONRELOC),r=n.u.info);let l=ye(e,a);switch(se(e,n,a),t){case P.OPR_NE:n.u.info=j(e,I.OP_EQ,0,r,l);break;case P.OPR_GT:case P.OPR_GE:{let a=t-P.OPR_NE+I.OP_EQ;n.u.info=j(e,a,1,l,r);break}default:{let a=t-P.OPR_EQ+I.OP_EQ;n.u.info=j(e,a,1,r,l);break}}n.k=i.VJMP}(e,t,n,a)}return n},e.exports.luaK_prefix=function(e,t,n,a){let r=new x.expdesc;switch(r.k=x.expkind.VKINT,r.u.ival=r.u.nval=r.u.info=0,r.t=-1,r.f=-1,t){case R.OPR_MINUS:case R.OPR_BNOT:if(ke(t+_,n,r))break;case R.OPR_LEN:!function(e,t,n,a){let r=Ae(e,n);le(e,n),n.u.info=J(e,t,0,r,0),n.k=x.expkind.VRELOCABLE,Ie(e,a)}(e,t+I.OP_UNM,n,a);break;case R.OPR_NOT:!function(e,t){let n=x.expkind;switch(_e(e,t),t.k){case n.VNIL:case n.VFALSE:t.k=n.VTRUE;break;case n.VK:case n.VKFLT:case n.VKINT:case n.VTRUE:t.k=n.VFALSE;break;case n.VJMP:Se(e,t);break;case n.VRELOCABLE:case n.VNONRELOC:ge(e,t),le(e,t),t.u.info=J(e,I.OP_NOT,0,t.u.info,0),t.k=n.VRELOCABLE}{let e=t.f;t.f=t.t,t.t=e}q(e,t.f),q(e,t.t)}(e,n)}},e.exports.luaK_reserveregs=re,e.exports.luaK_ret=function(e,t,n){J(e,I.OP_RETURN,t,n+1,0)},e.exports.luaK_self=function(e,t,n){Ae(e,t);let a=t.u.info;le(e,t),t.u.info=e.freereg,t.k=x.expkind.VNONRELOC,re(e,2),J(e,I.OP_SELF,t.u.info,a,ye(e,n)),le(e,n)},e.exports.luaK_setlist=function(e,t,n,r){let i=(n-1)/E.LFIELDS_PER_FLUSH+1,l=r===a?0:r;y(0!==r&&r<=E.LFIELDS_PER_FLUSH),i<=E.MAXARG_C?J(e,I.OP_SETLIST,t,l,i):i<=E.MAXARG_Ax?(J(e,I.OP_SETLIST,t,l,0),te(e,i)):S.luaX_syntaxerror(e.ls,L("constructor too long",!0)),e.freereg=t+1},e.exports.luaK_setmultret=function(e,t){he(e,t,a)},e.exports.luaK_setoneret=fe,e.exports.luaK_setreturns=he,e.exports.luaK_storevar=function(e,t,n){let a=x.expkind;switch(t.k){case a.VLOCAL:return le(e,n),void we(e,n,t.u.info);case a.VUPVAL:{let a=Ae(e,n);J(e,I.OP_SETUPVAL,a,t.u.info,0);break}case a.VINDEXED:{let r=t.u.ind.vt===a.VLOCAL?I.OP_SETTABLE:I.OP_SETTABUP,i=ye(e,n);J(e,r,t.u.ind.t,t.u.ind.idx,i);break}}le(e,n)},e.exports.luaK_stringK=function(e,t){let n=new U(g,t);return oe(e,n,n)}},function(e,t,n){"use strict";const{LUA_SIGNATURE:a,constant_types:{LUA_TBOOLEAN:r,LUA_TLNGSTR:i,LUA_TNIL:l,LUA_TNUMFLT:s,LUA_TNUMINT:o,LUA_TSHRSTR:u},thread_status:{LUA_ERRSYNTAX:c},is_luastring:d,luastring_eq:h,to_luastring:f}=n(3),_=n(10),m=n(25),p=n(6),{MAXARG_sBx:g,POS_A:b,POS_Ax:w,POS_B:v,POS_Bx:A,POS_C:L,POS_OP:y,SIZE_A:S,SIZE_Ax:T,SIZE_B:E,SIZE_Bx:x,SIZE_C:k,SIZE_OP:M}=n(28),{lua_assert:I}=n(5),{luaS_bless:U}=n(15),{luaZ_read:P,ZIO:R}=n(45);let O=[25,147,13,10,26,10];class C{constructor(e,t,n){this.intSize=4,this.size_tSize=4,this.instructionSize=4,this.integerSize=4,this.numberSize=8,I(t instanceof R,"BytecodeParser only operates on a ZIO"),I(d(n)),64===n[0]||61===n[0]?this.name=n.subarray(1):n[0]==a[0]?this.name=f("binary string",!0):this.name=n,this.L=e,this.Z=t,this.arraybuffer=new ArrayBuffer(Math.max(this.intSize,this.size_tSize,this.instructionSize,this.integerSize,this.numberSize)),this.dv=new DataView(this.arraybuffer),this.u8=new Uint8Array(this.arraybuffer)}read(e){let t=new Uint8Array(e);return 0!==P(this.Z,t,0,e)&&this.error("truncated"),t}LoadByte(){return 0!==P(this.Z,this.u8,0,1)&&this.error("truncated"),this.u8[0]}LoadInt(){return 0!==P(this.Z,this.u8,0,this.intSize)&&this.error("truncated"),this.dv.getInt32(0,!0)}LoadNumber(){return 0!==P(this.Z,this.u8,0,this.numberSize)&&this.error("truncated"),this.dv.getFloat64(0,!0)}LoadInteger(){return 0!==P(this.Z,this.u8,0,this.integerSize)&&this.error("truncated"),this.dv.getInt32(0,!0)}LoadSize_t(){return this.LoadInteger()}LoadString(){let e=this.LoadByte();return 255===e&&(e=this.LoadSize_t()),0===e?null:U(this.L,this.read(e-1))}static MASK1(e,t){return~(-1<<e)<<t}LoadCode(e){let t=this.LoadInt(),n=C;for(let a=0;a<t;a++){0!==P(this.Z,this.u8,0,this.instructionSize)&&this.error("truncated");let t=this.dv.getUint32(0,!0);e.code[a]={code:t,opcode:t>>y&n.MASK1(M,0),A:t>>b&n.MASK1(S,0),B:t>>v&n.MASK1(E,0),C:t>>L&n.MASK1(k,0),Bx:t>>A&n.MASK1(x,0),Ax:t>>w&n.MASK1(T,0),sBx:(t>>A&n.MASK1(x,0))-g}}}LoadConstants(e){let t=this.LoadInt();for(let n=0;n<t;n++){let t=this.LoadByte();switch(t){case l:e.k.push(new p.TValue(l,null));break;case r:e.k.push(new p.TValue(r,0!==this.LoadByte()));break;case s:e.k.push(new p.TValue(s,this.LoadNumber()));break;case o:e.k.push(new p.TValue(o,this.LoadInteger()));break;case u:case i:e.k.push(new p.TValue(i,this.LoadString()));break;default:this.error(`unrecognized constant '${t}'`)}}}LoadProtos(e){let t=this.LoadInt();for(let n=0;n<t;n++)e.p[n]=new m.Proto(this.L),this.LoadFunction(e.p[n],e.source)}LoadUpvalues(e){let t=this.LoadInt();for(let n=0;n<t;n++)e.upvalues[n]={name:null,instack:this.LoadByte(),idx:this.LoadByte()}}LoadDebug(e){let t=this.LoadInt();for(let n=0;n<t;n++)e.lineinfo[n]=this.LoadInt();t=this.LoadInt();for(let n=0;n<t;n++)e.locvars[n]={varname:this.LoadString(),startpc:this.LoadInt(),endpc:this.LoadInt()};t=this.LoadInt();for(let n=0;n<t;n++)e.upvalues[n].name=this.LoadString()}LoadFunction(e,t){e.source=this.LoadString(),null===e.source&&(e.source=t),e.linedefined=this.LoadInt(),e.lastlinedefined=this.LoadInt(),e.numparams=this.LoadByte(),e.is_vararg=0!==this.LoadByte(),e.maxstacksize=this.LoadByte(),this.LoadCode(e),this.LoadConstants(e),this.LoadUpvalues(e),this.LoadProtos(e),this.LoadDebug(e)}checkliteral(e,t){let n=this.read(e.length);h(n,e)||this.error(t)}checkHeader(){this.checkliteral(a.subarray(1),"not a"),83!==this.LoadByte()&&this.error("version mismatch in"),0!==this.LoadByte()&&this.error("format mismatch in"),this.checkliteral(O,"corrupted"),this.intSize=this.LoadByte(),this.size_tSize=this.LoadByte(),this.instructionSize=this.LoadByte(),this.integerSize=this.LoadByte(),this.numberSize=this.LoadByte(),this.checksize(this.intSize,4,"int"),this.checksize(this.size_tSize,4,"size_t"),this.checksize(this.instructionSize,4,"instruction"),this.checksize(this.integerSize,4,"integer"),this.checksize(this.numberSize,8,"number"),22136!==this.LoadInteger()&&this.error("endianness mismatch in"),370.5!==this.LoadNumber()&&this.error("float format mismatch in")}error(e){p.luaO_pushfstring(this.L,f("%s: %s precompiled chunk"),this.name,f(e)),_.luaD_throw(this.L,c)}checksize(e,t,n){e!==t&&this.error(`${n} size mismatch in`)}}e.exports.luaU_undump=function(e,t,n){let a=new C(e,t,n);a.checkHeader();let r=m.luaF_newLclosure(e,a.LoadByte());return _.luaD_inctop(e),e.stack[e.top-1].setclLvalue(r),r.p=new m.Proto(e),a.LoadFunction(r.p,null),I(r.nupvalues===r.p.upvalues.length),r}},function(e,t,n){"use strict";const{LUA_SIGNATURE:a,LUA_VERSION_MAJOR:r,LUA_VERSION_MINOR:i,constant_types:{LUA_TBOOLEAN:l,LUA_TLNGSTR:s,LUA_TNIL:o,LUA_TNUMFLT:u,LUA_TNUMINT:c,LUA_TSHRSTR:d},luastring_of:h}=n(3),f=h(25,147,13,10,26,10),_=16*Number(r)+Number(i);class m{constructor(){this.L=null,this.write=null,this.data=null,this.strip=NaN,this.status=NaN}}const p=function(e,t,n){0===n.status&&t>0&&(n.status=n.writer(n.L,e,t,n.data))},g=function(e,t){p(h(e),1,t)},b=function(e,t){let n=new ArrayBuffer(4);new DataView(n).setInt32(0,e,!0);let a=new Uint8Array(n);p(a,4,t)},w=function(e,t){let n=new ArrayBuffer(4);new DataView(n).setInt32(0,e,!0);let a=new Uint8Array(n);p(a,4,t)},v=function(e,t){let n=new ArrayBuffer(8);new DataView(n).setFloat64(0,e,!0);let a=new Uint8Array(n);p(a,8,t)},A=function(e,t){if(null===e)g(0,t);else{let n=e.tsslen()+1,a=e.getstr();n<255?g(n,t):(g(255,t),w(n,t)),p(a,n-1,t)}},L=function(e,t,n){n.strip||e.source===t?A(null,n):A(e.source,n),b(e.linedefined,n),b(e.lastlinedefined,n),g(e.numparams,n),g(e.is_vararg?1:0,n),g(e.maxstacksize,n),function(e,t){let n=e.code.map(e=>e.code);b(n.length,t);for(let e=0;e<n.length;e++)b(n[e],t)}(e,n),function(e,t){let n=e.k.length;b(n,t);for(let a=0;a<n;a++){let n=e.k[a];switch(g(n.ttype(),t),n.ttype()){case o:break;case l:g(n.value?1:0,t);break;case u:v(n.value,t);break;case c:w(n.value,t);break;case d:case s:A(n.tsvalue(),t)}}}(e,n),function(e,t){let n=e.upvalues.length;b(n,t);for(let a=0;a<n;a++)g(e.upvalues[a].instack?1:0,t),g(e.upvalues[a].idx,t)}(e,n),function(e,t){let n=e.p.length;b(n,t);for(let a=0;a<n;a++)L(e.p[a],e.source,t)}(e,n),function(e,t){let n=t.strip?0:e.lineinfo.length;b(n,t);for(let a=0;a<n;a++)b(e.lineinfo[a],t);n=t.strip?0:e.locvars.length,b(n,t);for(let a=0;a<n;a++)A(e.locvars[a].varname,t),b(e.locvars[a].startpc,t),b(e.locvars[a].endpc,t);n=t.strip?0:e.upvalues.length,b(n,t);for(let a=0;a<n;a++)A(e.upvalues[a].name,t)}(e,n)};e.exports.luaU_dump=function(e,t,n,r,i){let l=new m;return l.L=e,l.writer=n,l.data=r,l.strip=i,l.status=0,function(e){p(a,a.length,e),g(_,e),g(0,e),p(f,f.length,e),g(4,e),g(4,e),g(4,e),g(4,e),g(8,e),w(22136,e),v(370.5,e)}(l),g(t.upvalues.length,l),L(t,null,l),l.status}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(32);t.JassHandle=a.default;const r=n(11);t.JassAgent=r.default;const i=n(126);t.JassPlayer=i.default;const l=n(127);t.JassWidget=l.default;const s=n(128);t.JassUnit=s.default;const o=n(431);t.JassForce=o.default;const u=n(432);t.JassGroup=u.default;const c=n(433);t.JassTrigger=c.default;const d=n(434);t.JassTimer=d.default;const h=n(129);t.JassLocation=h.default;const f=n(435);t.JassRegion=f.default;const _=n(436);t.JassRect=_.default;const m=n(130);t.JassRace=m.default;const p=n(131);t.JassAllianceType=p.default;const g=n(132);t.JassRacePreference=g.default;const b=n(70);t.JassGameState=b.default;const w=n(133);t.JassIGameState=w.default;const v=n(134);t.JassFGameState=v.default;const A=n(135);t.JassPlayerState=A.default;const L=n(136);t.JassPlayerScore=L.default;const y=n(137);t.JassPlayerGameResult=y.default;const S=n(138);t.JassUnitState=S.default;const T=n(139);t.JassAiDifficulty=T.default;const E=n(20);t.JassEventId=E.default;const x=n(140);t.JassGameEvent=x.default;const k=n(141);t.JassPlayerEvent=k.default;const M=n(142);t.JassPlayerUnitEvent=M.default;const I=n(143);t.JassUnitEvent=I.default;const U=n(144);t.JassLimitOp=U.default;const P=n(145);t.JassWidgetEvent=P.default;const R=n(146);t.JassDialogEvent=R.default;const O=n(147);t.JassUnitType=O.default;const C=n(148);t.JassGameSpeed=C.default;const B=n(149);t.JassGameDifficulty=B.default;const F=n(150);t.JassGameType=F.default;const D=n(151);t.JassMapFlag=D.default;const G=n(437);t.JassMapVisibility=G.default;const N=n(438);t.JassMapSetting=N.default;const V=n(152);t.JassMapDensity=V.default;const j=n(153);t.JassMapControl=j.default;const H=n(154);t.JassPlayerSlotState=H.default;const K=n(155);t.JassVolumeGroup=K.default;const z=n(156);t.JassCameraField=z.default;const X=n(439);t.JassCameraSetup=X.default;const q=n(157);t.JassPlayerColor=q.default;const Y=n(158);t.JassPlacement=Y.default;const $=n(159);t.JassStartLocPrio=$.default;const W=n(160);t.JassRarityControl=W.default;const Z=n(161);t.JassBlendMode=Z.default;const J=n(162);t.JassTexMapFlags=J.default;const Q=n(163);t.JassEffectType=Q.default;const ee=n(440);t.JassWeatherEffect=ee.default;const te=n(164);t.JassFogState=te.default;const ne=n(165);t.JassVersion=ne.default;const ae=n(166);t.JassItemType=ae.default;const re=n(167);t.JassAttackType=re.default;const ie=n(168);t.JassDamageType=ie.default;const le=n(169);t.JassWeaponType=le.default;const se=n(170);t.JassSoundType=se.default;const oe=n(171);t.JassPathingType=oe.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(11);class r extends a.default{constructor(){super(...arguments),this.players=new Set}}t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(11);class r extends a.default{constructor(){super(...arguments),this.units=new Set}}t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(11);class r extends a.default{constructor(){super(...arguments),this.events=[],this.conditions=[],this.actions=[],this.enabled=!0}}t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(11);class r extends a.default{constructor(){super(...arguments),this.elapsed=0,this.timeout=0,this.periodic=!1,this.handlerFunc=-1}}t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(11);class r extends a.default{constructor(){super(...arguments),this.rects=new Set}}t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(11);class r extends a.default{constructor(e,t,n,a){super(),this.center=new Float32Array([n-e,a-t]),this.min=new Float32Array([e,t]),this.max=new Float32Array([n,a])}}t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(0);class r extends a.default{}t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(0);class r extends a.default{}t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(32),r=n(129);class i extends a.default{constructor(){super(...arguments),this.targetDistance=0,this.farZ=0,this.angleOfAttack=0,this.fieldOfView=0,this.roll=0,this.rotation=0,this.zOffset=0,this.destPosition=new r.default(0,0)}}t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(32);class r extends a.default{constructor(e,t){super(),this.enabled=!1,this.whichRect=e,this.effectId=t}}t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(157),r=n(130),i=n(137),l=n(131),s=n(165),o=n(167),u=n(168),c=n(169),d=n(171),h=n(442),f=n(132),_=n(153),m=n(150),p=n(151),g=n(158),b=n(159),w=n(152),v=n(149),A=n(148),L=n(154),y=n(155),S=n(133),T=n(134),E=n(135),x=n(138),k=n(139),M=n(136),I=n(140),U=n(141),P=n(142),R=n(143),O=n(145),C=n(146),B=n(144),F=n(147),D=n(166),G=n(156),N=n(161),V=n(160),j=n(162),H=n(164),K=n(163),z=n(170);t.default=function(){let e=[],t=[],n=[],X=[],q=[],Y=[],$=[],W=[],Z=[],J=[],Q=[],ee=[],te=[],ne=[],ae=[],re=[],ie=[],le=[],se=[],oe=[],ue=[],ce=[],de=[],he=[],fe=[],_e=[],me=[],pe=[],ge=[],be=[],we=[],ve=[],Ae=[],Le=[],ye=[],Se=[],Te=[];for(let t=0;t<24;t++)e[t]=new a.default(t);for(let e=0;e<8;e++)t[e]=new r.default(e);for(let e=0;e<4;e++)n[e]=new i.default(e);for(let e=0;e<10;e++)X[e]=new l.default(e);for(let e=0;e<2;e++)q[e]=new s.default(e);for(let e=0;e<7;e++)Y[e]=new o.default(e);for(let e=0;e<27;e++)$[e]=new u.default(e);for(let e=0;e<24;e++)W[e]=new c.default(e);for(let e=0;e<8;e++)Z[e]=new d.default(e);for(let e=0;e<4;e++)J[e]=new h.default(e);for(let e=0;e<8;e++){let t=Math.pow(2,e);Q[t]=new f.default(t)}for(let e=0;e<6;e++)ee[e]=new _.default(e);for(let e=0;e<8;e++){let t=Math.pow(2,e);te[t]=new m.default(t)}for(let e=0;e<20;e++){let t=Math.pow(2,e);ne[t]=new p.default(t)}for(let e=0;e<4;e++)ae[e]=new g.default(e);for(let e=0;e<3;e++)re[e]=new b.default(e);for(let e=0;e<4;e++)ie[e]=new w.default(e);for(let e=0;e<4;e++)le[e]=new v.default(e);for(let e=0;e<5;e++)se[e]=new A.default(e);for(let e=0;e<3;e++)oe[e]=new L.default(e);for(let e=0;e<8;e++)ue[e]=new y.default(e);for(let e=0;e<2;e++)ce[e]=new S.default(e);for(let e=2;e<3;e++)ce[e]=new T.default(e);for(let e=0;e<26;e++)de[e]=new E.default(e);for(let e=0;e<4;e++)he[e]=new x.default(e);for(let e=0;e<3;e++)fe[e]=new k.default(e);for(let e=0;e<25;e++)_e[e]=new M.default(e);for(let e=0;e<11;e++)me[e]=new I.default(e);for(let e=11;e<18;e++)me[e]=new U.default(e);for(let e=18;e<52;e++)me[e]=new P.default(e);for(let e=52;e<89;e++)me[e]=new R.default(e);for(let e=89;e<90;e++)me[e]=new O.default(e);for(let e=90;e<92;e++)me[e]=new C.default(e);for(let e=256;e<260;e++)me[e]=new I.default(e);for(let e=261;e<269;e++)me[e]=new U.default(e);for(let e=269;e<278;e++)me[e]=new P.default(e);for(let e=286;e<295;e++)me[e]=new R.default(e);for(let e=0;e<6;e++)pe[e]=new B.default(e);for(let e=0;e<27;e++)ge[e]=new F.default(e);for(let e=0;e<9;e++)be[e]=new D.default(e);for(let e=0;e<7;e++)we[e]=new G.default(e);for(let e=0;e<6;e++)ve[e]=new N.default(e);for(let e=0;e<1;e++)Ae[e]=new V.default(e);for(let e=0;e<4;e++)Le[e]=new j.default(e);for(let e=0;e<3;e++){let t=Math.pow(2,e);ye[t]=new H.default(t)}for(let e=0;e<7;e++)Se[e]=new K.default(e);for(let e=0;e<2;e++)Te[e]=new z.default(e);return{playerColors:e,races:t,playerGameResults:n,allianceTypes:X,versions:q,attackTypes:Y,damageTypes:$,weaponTypes:W,pathingTypes:Z,mouseButtonTypes:J,racePrefs:Q,mapControls:ee,gameTypes:te,mapFlags:ne,placements:ae,startLocPrios:re,mapDensities:ie,gameDifficulties:le,gameSpeeds:se,playerSlotStates:oe,volumeGroups:ue,gameStates:ce,playerStates:de,unitStates:he,aiDifficulties:fe,playerScores:_e,events:me,limitOps:pe,unitTypes:ge,itemTypes:be,cameraFields:we,blendModes:ve,rarityControls:Ae,texMapFlags:Le,fogStates:ye,effectTypes:Se,soundTypes:Te}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(0);class r extends a.default{}t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(43);t.default=class{constructor(e,t){this.sleep=0,this.L=a.lua_newthread(e),this.expiredTimer=t.expiredTimer||null,this.triggerUnit=t.triggerUnit||null,this.triggeringTrigger=t.triggeringTrigger||null}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(119);function r(e,t){let n=e.read(),a=[];e.read();let r=e.read();if("nothing"!==r)for(a.push({type:r,name:e.readSafe()});","===e.read();)a.push({type:e.read(),name:e.readSafe()});else e.read();let i=e.read();return{name:n,decl:`\n/**\n * ${t?"constant ":""}native ${n} takes ${a.length?a.map(e=>`${e.type} ${e.name}`).join(", "):"nothing"} returns ${i}\n */\nfunction ${n}(C: Context, L: lua_State) {\n  ${function(e){return e.map((e,t)=>{let n=e.type;if("code"===n)return`let ${e.name} = luaL_ref(L, LUA_REGISTRYINDEX);`;{let a;return a="integer"===n?"luaL_checkinteger":"real"===n?"luaL_checknumber":"boolean"===n?"lua_toboolean":"string"===n?"luaL_checkstring":"lua_touserdata",`let ${e.name} = ${a}(L, ${t+1});`}}).join("\n")}(a)}\n  console.warn('${n} was called but is not implemented :(');\n  ${function(e){if("nothing"===e)return"return 0";{let t,n;if("integer"===e)t="lua_pushinteger",n="0";else if("real"===e)t="lua_pushnumber",n="0";else if("boolean"===e)t="lua_pushboolean",n="false";else if("string"===e)t="lua_pushstring",n="''";else{if("code"===e)throw"CODE??";t="lua_pushlightuserdata",n="{name: 'FAKE'}"}return`${t}(L, ${n});\nreturn 1;`}}(i)}\n}`}}t.default=function(e){let t,n=new a.default(e),i=[],l=[];for(;void 0!==(t=n.read());){let e=!1;if("constant"===t&&(e=!0,t=n.read()),"native"===t){let{name:t,decl:a}=r(n,e);i.push(t),l.push(a)}}return`${l.join("\n")}\n${function(e){return`\n/**\n * Bind natives to the given context.\n */\nexport default function bind(C: Context) {\nlet L = C.L;\n${e.map(e=>`  lua_register(L, '${e}', ${e}.bind(null, C));`).join("\n")}\n}`}(i)}\n`}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(35),r=n(96),i=n(120),l=n(128);t.default=function(e,t,n,s){let o=new i.default,u=performance.now(),c=e=>{s(`[${performance.now()-u|0}] ${e}`)};c("Converting and running common.j"),o.run(t,!0),c("Converting and running Blizzard.j"),o.run(n,!0),c("Converting and running war3map.j"),o.open(e),c("Running config()"),o.call("config"),c("Running main()"),o.call("main"),c("Collecting handles");let d=new a.default,h=d.units;for(let e of o.handles)if(e instanceof l.default){let t=new r.default;t.id=e.unitId,t.location[0]=e.x,t.location[1]=e.y,t.angle=e.face/180*Math.PI,t.player=e.player.index,t.targetAcquisition=e.acquireRange,h.push(t)}c(`Saving war3mapUnits.doo with ${h.length} objects`),e.set("war3mapUnits.doo",d.save()),c("Finished")}}]);